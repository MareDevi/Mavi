/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/ui/panel-utils.ts
function getDisplayPath(fullPath) {
  const cleanPath = fullPath.startsWith("/") ? fullPath.slice(1) : fullPath;
  const parts = cleanPath.split("/");
  if (parts.length <= 1) {
    return cleanPath;
  }
  return parts.slice(-2).join("/");
}
function getVaultFoldersInfo(scanDirectories, fileCount) {
  let baseText = "Vault folders: ";
  if (!scanDirectories || scanDirectories.trim() === "") {
    baseText += "all";
  } else {
    const folders = scanDirectories.split(",").map((f) => f.trim()).filter((f) => f.length > 0);
    baseText += folders.join(", ");
  }
  if (fileCount !== void 0) {
    baseText += `; ${fileCount} files analyzed`;
  }
  return baseText;
}
function sortFiles(files, sortType) {
  const sortedFiles = [...files];
  switch (sortType) {
    case "warnings-desc":
      sortedFiles.sort((a, b) => {
        if (b.warningsCount !== a.warningsCount) {
          return b.warningsCount - a.warningsCount;
        }
        if (b.issuesCount !== a.issuesCount) {
          return b.issuesCount - a.issuesCount;
        }
        if (b.noticesCount !== a.noticesCount) {
          return b.noticesCount - a.noticesCount;
        }
        const aFileName = a.file.split("/").pop() || "";
        const bFileName = b.file.split("/").pop() || "";
        return aFileName.localeCompare(bFileName);
      });
      break;
    case "warnings-asc":
      sortedFiles.sort((a, b) => {
        if (a.warningsCount !== b.warningsCount) {
          return a.warningsCount - b.warningsCount;
        }
        if (a.issuesCount !== b.issuesCount) {
          return a.issuesCount - b.issuesCount;
        }
        if (a.noticesCount !== b.noticesCount) {
          return a.noticesCount - b.noticesCount;
        }
        const aFileName = a.file.split("/").pop() || "";
        const bFileName = b.file.split("/").pop() || "";
        return aFileName.localeCompare(bFileName);
      });
      break;
    case "issues-desc":
      sortedFiles.sort((a, b) => {
        if (b.issuesCount !== a.issuesCount) {
          return b.issuesCount - a.issuesCount;
        }
        if (b.warningsCount !== a.warningsCount) {
          return b.warningsCount - a.warningsCount;
        }
        if (b.noticesCount !== a.noticesCount) {
          return b.noticesCount - a.noticesCount;
        }
        const aFileName = a.file.split("/").pop() || "";
        const bFileName = b.file.split("/").pop() || "";
        return aFileName.localeCompare(bFileName);
      });
      break;
    case "issues-asc":
      sortedFiles.sort((a, b) => {
        if (a.issuesCount !== b.issuesCount) {
          return a.issuesCount - b.issuesCount;
        }
        if (a.warningsCount !== b.warningsCount) {
          return a.warningsCount - b.warningsCount;
        }
        if (a.noticesCount !== b.noticesCount) {
          return a.noticesCount - b.noticesCount;
        }
        const aFileName = a.file.split("/").pop() || "";
        const bFileName = b.file.split("/").pop() || "";
        return aFileName.localeCompare(bFileName);
      });
      break;
    case "notices-desc":
      sortedFiles.sort((a, b) => {
        if (b.noticesCount !== a.noticesCount) {
          return b.noticesCount - a.noticesCount;
        }
        if (b.issuesCount !== a.issuesCount) {
          return b.issuesCount - a.issuesCount;
        }
        if (b.warningsCount !== a.warningsCount) {
          return b.warningsCount - a.warningsCount;
        }
        const aFileName = a.file.split("/").pop() || "";
        const bFileName = b.file.split("/").pop() || "";
        return aFileName.localeCompare(bFileName);
      });
      break;
    case "notices-asc":
      sortedFiles.sort((a, b) => {
        if (a.noticesCount !== b.noticesCount) {
          return a.noticesCount - b.noticesCount;
        }
        if (a.issuesCount !== b.issuesCount) {
          return a.issuesCount - b.issuesCount;
        }
        if (a.warningsCount !== b.warningsCount) {
          return a.warningsCount - b.warningsCount;
        }
        const aFileName = a.file.split("/").pop() || "";
        const bFileName = b.file.split("/").pop() || "";
        return aFileName.localeCompare(bFileName);
      });
      break;
    case "filename-asc":
      sortedFiles.sort((a, b) => {
        const aFileName = a.file.split("/").pop() || "";
        const bFileName = b.file.split("/").pop() || "";
        const nameCompare = aFileName.localeCompare(bFileName);
        if (nameCompare !== 0) return nameCompare;
        const aParts = a.file.split("/");
        const bParts = b.file.split("/");
        const aParent = aParts.length > 1 ? aParts[aParts.length - 2] || "" : "";
        const bParent = bParts.length > 1 ? bParts[bParts.length - 2] || "" : "";
        const parentCompare = aParent.localeCompare(bParent);
        if (parentCompare !== 0) return parentCompare;
        if (b.issuesCount !== a.issuesCount) {
          return b.issuesCount - a.issuesCount;
        }
        if (b.warningsCount !== a.warningsCount) {
          return b.warningsCount - a.warningsCount;
        }
        return b.noticesCount - a.noticesCount;
      });
      break;
    case "filename-desc":
      sortedFiles.sort((a, b) => {
        const aFileName = a.file.split("/").pop() || "";
        const bFileName = b.file.split("/").pop() || "";
        const nameCompare = bFileName.localeCompare(aFileName);
        if (nameCompare !== 0) return nameCompare;
        const aParts = a.file.split("/");
        const bParts = b.file.split("/");
        const aParent = aParts.length > 1 ? aParts[aParts.length - 2] || "" : "";
        const bParent = bParts.length > 1 ? bParts[bParts.length - 2] || "" : "";
        const parentCompare = bParent.localeCompare(aParent);
        if (parentCompare !== 0) return parentCompare;
        if (b.issuesCount !== a.issuesCount) {
          return b.issuesCount - a.issuesCount;
        }
        if (b.warningsCount !== a.warningsCount) {
          return b.warningsCount - a.warningsCount;
        }
        return b.noticesCount - a.noticesCount;
      });
      break;
  }
  return sortedFiles;
}
var init_panel_utils = __esm({
  "src/ui/panel-utils.ts"() {
    "use strict";
  }
});

// src/checks/utils/content-parser.ts
function removeCodeBlocks(content) {
  return content.replace(/```[\s\S]*?```/g, "").replace(/~~~[\s\S]*?~~~/g, "").replace(/`[^`\n]+`/g, "").replace(/<[^>]*>/g, "").replace(/^---\n[\s\S]*?\n---\n/, "").replace(/::\w+\{[^}]*\}/g, "");
}
function removeHtmlAttributes(content) {
  return content.replace(/```[\s\S]*?```/g, "").replace(/~~~[\s\S]*?~~~/g, "").replace(/`[^`\n]+`/g, "").replace(/<[^>]*>/g, "").replace(/^---\n[\s\S]*?\n---\n/, "").replace(/::\w+\{[^}]*\}/g, "");
}
var init_content_parser = __esm({
  "src/checks/utils/content-parser.ts"() {
    "use strict";
  }
});

// src/checks/utils/position-utils.ts
function findLineNumberForImage(content, imageMatch) {
  const lines = content.split("\n");
  for (let i = 0; i < lines.length; i++) {
    const line = lines[i];
    if (line && line.includes(imageMatch)) {
      return i + 1;
    }
  }
  return 1;
}
function getContextAroundLine(content, lineNumber, contextLines = 2) {
  const lines = content.split("\n");
  const start = Math.max(0, lineNumber - 1 - contextLines);
  const end = Math.min(lines.length, lineNumber - 1 + contextLines + 1);
  return lines.slice(start, end).join("\n");
}
var init_position_utils = __esm({
  "src/checks/utils/position-utils.ts"() {
    "use strict";
  }
});

// src/checks/alt-text-check.ts
function checkAltText(content, file, settings) {
  const results = [];
  if (!settings.checkAltText) {
    return Promise.resolve([]);
  }
  const cleanContent = removeCodeBlocks(content);
  const markdownImages = cleanContent.match(/!\[([^\]]*)\]\([^)]+\)/g);
  if (markdownImages) {
    const missingAltText = markdownImages.filter((match) => {
      var _a;
      const altText = (_a = match.match(/!\[([^\]]*)\]/)) == null ? void 0 : _a[1];
      return !altText || altText.trim() === "";
    });
    if (missingAltText.length > 0) {
      missingAltText.forEach((match, index) => {
        const pathMatch = match.match(/!\[[^\]]*\]\(([^)]+)\)/);
        const imagePath = pathMatch ? pathMatch[1] : match;
        const lineNumber = findLineNumberForImage(content, match);
        results.push({
          passed: false,
          message: `Media missing alt text: ${imagePath}`,
          suggestion: "Add descriptive alt text for accessibility",
          severity: "error",
          position: {
            line: lineNumber,
            searchText: match,
            context: getContextAroundLine(content, lineNumber)
          }
        });
      });
    }
  }
  const wikilinkImages = cleanContent.match(/!\[\[([^\]]+)\]\]/g);
  if (wikilinkImages) {
    const missingAltText = wikilinkImages.filter((match) => !match.includes("|"));
    if (missingAltText.length > 0) {
      missingAltText.forEach((match, index) => {
        const pathMatch = match.match(/!\[\[([^\]]+)\]\]/);
        const imagePath = pathMatch ? pathMatch[1] : match;
        const lineNumber = findLineNumberForImage(content, match);
        results.push({
          passed: false,
          message: `Wikilink media missing alt text: ${imagePath}`,
          suggestion: "Add alt text using ![[media.png|alt text]] syntax or consider using standard markdown media syntax",
          severity: "error",
          position: {
            line: lineNumber,
            searchText: match,
            context: getContextAroundLine(content, lineNumber)
          }
        });
      });
    }
  }
  const htmlImages = cleanContent.match(/<img[^>]*>/g);
  if (htmlImages) {
    const missingAlt = htmlImages.filter((img) => {
      const altMatch = img.match(/alt\s*=\s*["']([^"']*)["']/);
      return !altMatch || !altMatch[1] || altMatch[1].trim() === "";
    });
    if (missingAlt.length > 0) {
      missingAlt.forEach((img, index) => {
        const srcMatch = img.match(/src\s*=\s*["']([^"']*)["']/);
        const imagePath = srcMatch ? srcMatch[1] : "HTML img tag";
        const lineNumber = findLineNumberForImage(content, img);
        results.push({
          passed: false,
          message: `HTML media missing alt attribute: ${imagePath}`,
          suggestion: "Add alt attribute to HTML media tag",
          severity: "error",
          position: {
            line: lineNumber,
            searchText: img,
            context: getContextAroundLine(content, lineNumber)
          }
        });
      });
    }
  }
  if (results.length === 0) {
    const hasMedia = markdownImages && markdownImages.length > 0 || htmlImages && htmlImages.length > 0 || wikilinkImages && wikilinkImages.length > 0;
    if (hasMedia) {
      results.push({
        passed: true,
        message: "All media elements have alt text",
        severity: "info"
      });
    } else {
      results.push({
        passed: true,
        message: "No media elements in this post",
        severity: "info"
      });
    }
  }
  return Promise.resolve(results);
}
var init_alt_text_check = __esm({
  "src/checks/alt-text-check.ts"() {
    "use strict";
    init_content_parser();
    init_position_utils();
  }
});

// src/checks/link-checks.ts
function checkNakedLinks(content, file, settings) {
  const results = [];
  if (!settings.checkNakedLinks) {
    return Promise.resolve([]);
  }
  const cleanContent = removeHtmlAttributes(content);
  const nakedLinks = cleanContent.match(/(?<!\]\()(?<!https?:\/\/[^\s)]*\/)https?:\/\/[^\s)]+/g);
  if (nakedLinks) {
    nakedLinks.forEach((link, index) => {
      if (link.includes("web.archive.org/web/") || link.includes("archive.today/") || link.includes("archive.is/") || link.includes("web.archive.org/save/")) {
        return;
      }
      const lineNumber = findLineNumberForImage(content, link);
      results.push({
        passed: false,
        message: `Naked link found: ${link}`,
        suggestion: "Convert to markdown link format: [link text](url)",
        severity: "warning",
        position: {
          line: lineNumber,
          searchText: link,
          context: getContextAroundLine(content, lineNumber)
        }
      });
    });
  }
  if (results.length === 0) {
    results.push({
      passed: true,
      message: "No naked links found",
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
function checkBrokenLinks(content, file, settings, app) {
  const results = [];
  if (!settings.checkBrokenLinks) {
    return Promise.resolve([]);
  }
  const allWikilinks = content.match(/\[\[([^\]]+)\]\]/g);
  if (allWikilinks) {
    const brokenLinks = [];
    for (const wikilink of allWikilinks) {
      const linkStart = content.indexOf(wikilink);
      if (linkStart === -1) continue;
      const contentBeforeLink = content.substring(0, linkStart);
      const codeBlockMatches = contentBeforeLink.match(/```[\s\S]*?```|~~~[\s\S]*?~~~/g);
      const openCodeBlocks = (contentBeforeLink.match(/```/g) || []).length - (codeBlockMatches || []).length;
      const openTildeBlocks = (contentBeforeLink.match(/~~~/g) || []).length - (codeBlockMatches || []).length;
      if (openCodeBlocks > 0 || openTildeBlocks > 0) {
        continue;
      }
      const linkMatch = wikilink.match(/\[\[([^\]]+)\]\]/);
      if (!linkMatch || !linkMatch[1]) continue;
      const linkText = linkMatch[1];
      let linkPath;
      let displayText;
      let anchor = null;
      if (linkText.includes("|")) {
        const parts = linkText.split("|");
        const linkPart = parts[0] || "";
        displayText = parts[1] || linkPart;
        if (linkPart.includes("#")) {
          const anchorParts = linkPart.split("#");
          linkPath = anchorParts[0] || "";
          anchor = anchorParts[1] || null;
        } else {
          linkPath = linkPart;
        }
      } else {
        if (linkText.includes("#")) {
          const anchorParts = linkText.split("#");
          linkPath = anchorParts[0] || "";
          anchor = anchorParts[1] || null;
          displayText = linkPath;
        } else {
          linkPath = linkText;
          displayText = linkText;
        }
      }
      if (app) {
        const resolvedLink = app.metadataCache.getFirstLinkpathDest(linkPath, file.path);
        if (!resolvedLink) {
          brokenLinks.push({
            link: wikilink,
            path: linkPath,
            displayText,
            anchor
          });
        }
      }
    }
    if (brokenLinks.length > 0) {
      brokenLinks.forEach(({ link, path, displayText, anchor }) => {
        const lineNumber = findLineNumberForImage(content, link);
        let suggestion = `Check if the file "${path}.md" exists or update the link`;
        if (anchor) {
          suggestion += ` (anchor: #${anchor})`;
        }
        results.push({
          passed: false,
          message: `Broken internal link: ${displayText}`,
          suggestion,
          severity: "error",
          position: {
            line: lineNumber,
            searchText: link,
            context: getContextAroundLine(content, lineNumber)
          }
        });
      });
    }
  }
  const allMarkdownLinks = content.match(/\[([^\]]+)\]\(([^)]+)\)/g);
  if (allMarkdownLinks) {
    for (const markdownLink of allMarkdownLinks) {
      const linkStart = content.indexOf(markdownLink);
      if (linkStart === -1) continue;
      const contentBeforeLink = content.substring(0, linkStart);
      const codeBlockMatches = contentBeforeLink.match(/```[\s\S]*?```|~~~[\s\S]*?~~~/g);
      const openCodeBlocks = (contentBeforeLink.match(/```/g) || []).length - (codeBlockMatches || []).length;
      const openTildeBlocks = (contentBeforeLink.match(/~~~/g) || []).length - (codeBlockMatches || []).length;
      if (openCodeBlocks > 0 || openTildeBlocks > 0) {
        continue;
      }
      const linkMatch = markdownLink.match(/\[([^\]]+)\]\(([^)]+)\)/);
      if (!linkMatch || !linkMatch[1] || !linkMatch[2]) continue;
      const linkText = linkMatch[1];
      const linkUrl = linkMatch[2];
      if (markdownLink.startsWith("![") || linkText.startsWith("![")) {
        continue;
      }
      if (!linkUrl.startsWith("http://") && !linkUrl.startsWith("https://") && !linkUrl.startsWith("mailto:") && !linkUrl.startsWith("#")) {
        if (settings.publishMode && linkUrl.startsWith("/")) {
          continue;
        }
        if (app) {
          let linkPath = linkUrl;
          let anchor = null;
          if (linkPath.includes("#")) {
            const anchorParts = linkPath.split("#");
            linkPath = anchorParts[0] || "";
            anchor = anchorParts[1] || null;
          }
          const resolvedLink = app.metadataCache.getFirstLinkpathDest(linkPath, file.path);
          if (!resolvedLink) {
            const lineNumber = findLineNumberForImage(content, markdownLink);
            let suggestedPath = linkPath.endsWith(".md") ? linkPath : linkPath + ".md";
            let suggestion = `Check if the file "${suggestedPath}" exists or update the link`;
            if (anchor) {
              suggestion += ` (anchor: #${anchor})`;
            }
            results.push({
              passed: false,
              message: `Broken internal link: ${linkText}`,
              suggestion,
              severity: "error",
              position: {
                line: lineNumber,
                searchText: markdownLink,
                context: getContextAroundLine(content, lineNumber)
              }
            });
          }
        }
      }
    }
  }
  if (results.length === 0) {
    results.push({
      passed: true,
      message: "No broken internal links found",
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
async function checkPotentiallyBrokenLinks(content, file, settings, app) {
  const results = [];
  if (!settings.checkPotentiallyBrokenLinks || !settings.publishMode) {
    return Promise.resolve([]);
  }
  const brokenLinksResults = await checkBrokenLinks(content, file, settings, app);
  const definitelyBrokenLinks = /* @__PURE__ */ new Set();
  brokenLinksResults.forEach((result) => {
    var _a;
    if (!result.passed && ((_a = result.position) == null ? void 0 : _a.searchText)) {
      definitelyBrokenLinks.add(result.position.searchText);
    }
  });
  let pos = 0;
  while (pos < content.length) {
    const openBracket = content.indexOf("[", pos);
    if (openBracket === -1) break;
    const contentBeforeBracket = content.substring(0, openBracket);
    const codeBlockMatches = contentBeforeBracket.match(/```[\s\S]*?```|~~~[\s\S]*?~~~/g);
    const openCodeBlocks = (contentBeforeBracket.match(/```/g) || []).length - (codeBlockMatches || []).length;
    const openTildeBlocks = (contentBeforeBracket.match(/~~~/g) || []).length - (codeBlockMatches || []).length;
    if (openCodeBlocks > 0 || openTildeBlocks > 0) {
      pos = openBracket + 1;
      continue;
    }
    let bracketCount = 1;
    let closeBracket = openBracket + 1;
    while (closeBracket < content.length && bracketCount > 0) {
      if (content[closeBracket] === "[") {
        bracketCount++;
      } else if (content[closeBracket] === "]") {
        bracketCount--;
      }
      closeBracket++;
    }
    if (bracketCount > 0) {
      pos = openBracket + 1;
      continue;
    }
    if (closeBracket < content.length && content[closeBracket] === "(") {
      let parenCount = 1;
      let closeParen = closeBracket + 1;
      while (closeParen < content.length && parenCount > 0) {
        if (content[closeParen] === "(") {
          parenCount++;
        } else if (content[closeParen] === ")") {
          parenCount--;
        }
        closeParen++;
      }
      if (parenCount === 0) {
        const linkText = content.substring(openBracket + 1, closeBracket - 1);
        const linkUrl = content.substring(closeBracket + 1, closeParen - 1);
        const fullLink = content.substring(openBracket, closeParen);
        if (linkText.startsWith("![")) {
          pos = closeParen;
          continue;
        }
        if (settings.publishMode && linkUrl.startsWith("/") && !linkUrl.startsWith("http://") && !linkUrl.startsWith("https://")) {
          const lineNumber = findLineNumberForImage(content, fullLink);
          results.push({
            passed: true,
            message: `Relative path link: ${linkText}`,
            suggestion: "This link may be valid for static site generators but may not work in Obsidian",
            severity: "notice",
            position: {
              line: lineNumber,
              searchText: fullLink,
              context: getContextAroundLine(content, lineNumber)
            }
          });
        }
        pos = closeParen;
      } else {
        pos = closeBracket;
      }
    } else {
      pos = closeBracket;
    }
  }
  const allWikilinks = content.match(/\[\[([^\]]+)\]\]/g);
  if (allWikilinks) {
    const potentiallyBroken = [];
    for (const wikilink of allWikilinks) {
      const linkStart = content.indexOf(wikilink);
      if (linkStart === -1) continue;
      const contentBeforeLink = content.substring(0, linkStart);
      const codeBlockMatches = contentBeforeLink.match(/```[\s\S]*?```|~~~[\s\S]*?~~~/g);
      const openCodeBlocks = (contentBeforeLink.match(/```/g) || []).length - (codeBlockMatches || []).length;
      const openTildeBlocks = (contentBeforeLink.match(/~~~/g) || []).length - (codeBlockMatches || []).length;
      if (openCodeBlocks > 0 || openTildeBlocks > 0) {
        continue;
      }
      const linkMatch = wikilink.match(/\[\[([^\]]+)\]\]/);
      if (!linkMatch || !linkMatch[1]) continue;
      if (definitelyBrokenLinks.has(wikilink)) {
        continue;
      }
      const linkText = linkMatch[1];
      let linkPath;
      let displayText;
      let anchor = null;
      if (linkText.includes("|")) {
        const parts = linkText.split("|");
        const linkPart = parts[0] || "";
        displayText = parts[1] || linkPart;
        if (linkPart.includes("#")) {
          const anchorParts = linkPart.split("#");
          linkPath = anchorParts[0] || "";
          anchor = anchorParts[1] || null;
        } else {
          linkPath = linkPart;
        }
      } else {
        if (linkText.includes("#")) {
          const anchorParts = linkText.split("#");
          linkPath = anchorParts[0] || "";
          anchor = anchorParts[1] || null;
          displayText = linkPath;
        } else {
          linkPath = linkText;
          displayText = linkText;
        }
      }
      if (app && linkPath) {
        const resolvedLink = app.metadataCache.getFirstLinkpathDest(linkPath, file.path);
        if (!resolvedLink) {
          const allFiles = app.vault.getMarkdownFiles();
          const similarFiles = allFiles.filter(
            (f) => f.path.toLowerCase().includes(linkPath.toLowerCase()) || f.basename.toLowerCase().includes(linkPath.toLowerCase())
          );
          if (similarFiles.length > 0) {
            potentiallyBroken.push({
              link: wikilink,
              path: linkPath,
              displayText,
              anchor,
              suggestions: similarFiles.map((f) => f.path)
            });
          }
        }
      }
    }
    if (potentiallyBroken.length > 0) {
      potentiallyBroken.forEach(({ link, path, displayText, suggestions }) => {
        const lineNumber = findLineNumberForImage(content, link);
        results.push({
          passed: false,
          message: `Potentially broken link: ${displayText}`,
          suggestion: `Consider these similar files: ${suggestions.slice(0, 3).join(", ")}`,
          severity: "warning",
          position: {
            line: lineNumber,
            searchText: link,
            context: getContextAroundLine(content, lineNumber)
          }
        });
      });
    }
  }
  if (results.length === 0) {
    results.push({
      passed: true,
      message: "No potentially broken links found",
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
var init_link_checks = __esm({
  "src/checks/link-checks.ts"() {
    "use strict";
    init_content_parser();
    init_position_utils();
  }
});

// src/checks/external-link-checks.ts
function isValidUrl(url) {
  if (url.includes("&gt;") || url.includes("&lt;") || url.includes("&amp;") || url.includes("&quot;") || url.includes("&apos;") || url.includes("&nbsp;")) {
    return false;
  }
  if (url.includes("<") || url.includes(">") || url.includes('"') || url.includes("'")) {
    return false;
  }
  if (url.endsWith("&gt;") || url.endsWith("&lt;") || url.endsWith("&amp;") || url.endsWith("&quot;") || url.endsWith("&apos;") || url.endsWith("&nbsp;")) {
    return false;
  }
  if (url.includes("/a&gt;") || url.includes("/p&gt;") || url.includes("/div&gt;") || url.includes("/span&gt;") || url.includes("/img&gt;") || url.includes("/script&gt;")) {
    return false;
  }
  try {
    const urlObj = new URL(url);
    if (urlObj.protocol !== "http:" && urlObj.protocol !== "https:") {
      return false;
    }
    if (!urlObj.hostname || urlObj.hostname.length === 0) {
      return false;
    }
    if (urlObj.hostname.includes("<") || urlObj.hostname.includes(">") || urlObj.hostname.includes('"') || urlObj.hostname.includes("'")) {
      return false;
    }
    return true;
  } catch (e) {
    return false;
  }
}
function extractValidExternalLinks(content) {
  const cleanContent = removeCodeBlocks(content);
  const externalLinks = [];
  let pos = 0;
  while (pos < cleanContent.length) {
    const openBracket = cleanContent.indexOf("[", pos);
    if (openBracket === -1) break;
    let bracketCount = 1;
    let closeBracket = openBracket + 1;
    while (closeBracket < cleanContent.length && bracketCount > 0) {
      if (cleanContent[closeBracket] === "[") {
        bracketCount++;
      } else if (cleanContent[closeBracket] === "]") {
        bracketCount--;
      }
      closeBracket++;
    }
    if (bracketCount > 0) {
      pos = openBracket + 1;
      continue;
    }
    if (closeBracket < cleanContent.length && cleanContent[closeBracket] === "(") {
      let parenCount = 1;
      let closeParen = closeBracket + 1;
      while (closeParen < cleanContent.length && parenCount > 0) {
        if (cleanContent[closeParen] === "(") {
          parenCount++;
        } else if (cleanContent[closeParen] === ")") {
          parenCount--;
        }
        closeParen++;
      }
      if (parenCount === 0) {
        const linkUrl = cleanContent.substring(closeBracket + 1, closeParen - 1);
        if (linkUrl.startsWith("http://") || linkUrl.startsWith("https://")) {
          if (isValidUrl(linkUrl)) {
            externalLinks.push(linkUrl);
          }
        }
        pos = closeParen;
      } else {
        pos = closeBracket;
      }
    } else {
      pos = closeBracket;
    }
  }
  const nakedUrls = cleanContent.match(/https?:\/\/[^\s)\]]+/g);
  if (nakedUrls) {
    const markdownLinkUrls = new Set(externalLinks);
    nakedUrls.forEach((url) => {
      if (markdownLinkUrls.has(url)) {
        return;
      }
      if (url.includes("web.archive.org/web/") || url.includes("archive.today/") || url.includes("archive.is/") || url.includes("web.archive.org/save/")) {
        return;
      }
      if (isValidUrl(url)) {
        externalLinks.push(url);
      }
    });
  }
  return [...new Set(externalLinks)];
}
function checkExternalLinks(content, file, settings) {
  const results = [];
  if (!settings.checkExternalLinks) {
    return Promise.resolve([]);
  }
  const uniqueLinks = extractValidExternalLinks(content);
  if (uniqueLinks.length > 0) {
    uniqueLinks.forEach((url, index) => {
      const lineNumber = findLineNumberForImage(content, url);
      results.push({
        passed: true,
        message: `External link: ${url}`,
        suggestion: "To find if any of these are broken, use the 'Check external links for 404s' button to trigger it.",
        severity: "notice",
        position: {
          line: lineNumber,
          searchText: url,
          context: getContextAroundLine(content, lineNumber)
        }
      });
    });
  } else {
    results.push({
      passed: true,
      message: "No external links found",
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
async function checkExternalBrokenLinks(content, file, settings, abortController) {
  const results = [];
  if (!settings.enableExternalLinkVaultCheck) {
    return Promise.resolve([]);
  }
  const uniqueLinks = extractValidExternalLinks(content);
  if (uniqueLinks.length === 0) {
    results.push({
      passed: true,
      message: "No external links found",
      severity: "info"
    });
    return Promise.resolve(results);
  }
  for (const url of uniqueLinks) {
    if (abortController == null ? void 0 : abortController.signal.aborted) {
      console.debug("External link check cancelled");
      throw new DOMException("Operation was aborted", "AbortError");
    }
    let linkIsBroken = false;
    let errorMessage = "";
    let suggestion = "";
    try {
      const response = await (0, import_obsidian3.requestUrl)({
        url,
        headers: {
          "User-Agent": "Mozilla/5.0 (compatible; Obsidian-SEO-Plugin/1.0)"
        }
      });
      if (response.status >= 400) {
        linkIsBroken = true;
        if (response.status >= 400 && response.status < 500) {
          errorMessage = `External link error (${response.status}): ${url}`;
          suggestion = `This link returned a ${response.status} error. The page may not exist or may require authentication.`;
        } else if (response.status >= 500) {
          errorMessage = `External link server error (${response.status}): ${url}`;
          suggestion = `This link returned a ${response.status} server error. The server may be experiencing issues.`;
        } else {
          errorMessage = `External link error (${response.status}): ${url}`;
          suggestion = `This link returned an unexpected status code: ${response.status}`;
        }
      }
    } catch (error) {
      linkIsBroken = true;
      if (error instanceof Error && (error.message.includes("timeout") || error.message.includes("Timeout"))) {
        errorMessage = `External link timeout: ${url}`;
        suggestion = "This link took too long to respond. The server might be slow or the link might be broken.";
      } else if (error instanceof Error && (error.message.includes("Failed to fetch") || error.message.includes("net::ERR_") || error.message.includes("NetworkError"))) {
        errorMessage = `External link unreachable: ${url}`;
        suggestion = "This link could not be reached. Check if the URL is correct or if the server is down.";
      } else {
        errorMessage = `External link error: ${url}`;
        suggestion = "This link could not be verified. Please check the URL manually.";
      }
    }
    if (linkIsBroken) {
      const lines = content.split("\n");
      let lineNumber = 1;
      for (let i = 0; i < lines.length; i++) {
        const line = lines[i];
        if (line && url && line.includes(url)) {
          lineNumber = i + 1;
          break;
        }
      }
      results.push({
        passed: false,
        message: errorMessage,
        suggestion,
        severity: "error",
        position: {
          line: lineNumber,
          searchText: url,
          context: getContextAroundLine(content, lineNumber)
        }
      });
    }
  }
  if (results.length === 0 && uniqueLinks.length > 0) {
    results.push({
      passed: true,
      message: `Found ${uniqueLinks.length} external link(s), all appear to resolve and are working`,
      severity: "info"
    });
  } else if (uniqueLinks.length > 0) {
    const workingLinks = uniqueLinks.length - results.filter((r) => !r.passed).length;
    if (workingLinks > 0) {
      results.push({
        passed: true,
        message: `${workingLinks} of ${uniqueLinks.length} external link(s) are working`,
        severity: "info"
      });
    }
  }
  return Promise.resolve(results);
}
var import_obsidian3;
var init_external_link_checks = __esm({
  "src/checks/external-link-checks.ts"() {
    "use strict";
    import_obsidian3 = require("obsidian");
    init_position_utils();
    init_content_parser();
  }
});

// src/checks/utils/reading-level.ts
function countSyllables(word) {
  const cleanWord = word.toLowerCase().replace(/[^a-z]/g, "");
  if (cleanWord.length === 0) return 0;
  let syllables = 0;
  let previousWasVowel = false;
  for (let i = 0; i < cleanWord.length; i++) {
    const char = cleanWord[i];
    if (char) {
      const isVowel = /[aeiouy]/.test(char);
      if (isVowel && !previousWasVowel) {
        syllables++;
      }
      previousWasVowel = isVowel;
    }
  }
  if (cleanWord.endsWith("e") && syllables > 1) {
    syllables--;
  }
  return Math.max(1, syllables);
}
function getReadingLevelDescription(level) {
  if (level <= 6) return "Very easy to read";
  if (level <= 9) return "Easy to read";
  if (level <= 12) return "Moderately easy to read";
  if (level <= 15) return "Moderately difficult to read";
  if (level <= 18) return "Difficult to read";
  return "Very difficult to read";
}
var init_reading_level = __esm({
  "src/checks/utils/reading-level.ts"() {
    "use strict";
  }
});

// src/checks/content-checks.ts
function checkContentLength(content, file, settings) {
  const results = [];
  if (!settings.checkContentLength) {
    return Promise.resolve([]);
  }
  let bodyContent = content.replace(/^---\n[\s\S]*?\n---\n/, "");
  bodyContent = bodyContent.replace(/```[\s\S]*?```/g, "");
  bodyContent = bodyContent.replace(/~~~[\s\S]*?~~~/g, "");
  const wordCount = bodyContent.split(/\s+/).filter((word) => word.length > 0).length;
  if (wordCount < settings.minContentLength) {
    results.push({
      passed: false,
      message: `Content too short: ${wordCount} words`,
      suggestion: `Aim for at least ${settings.minContentLength} words`,
      severity: "warning"
    });
  } else {
    results.push({
      passed: true,
      message: `Good content length: ${wordCount} words`,
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
function checkReadingLevel(content, file, settings) {
  const results = [];
  if (!settings.checkReadingLevel) {
    return Promise.resolve([]);
  }
  const cleanContent = removeCodeBlocks(content);
  const sentences = cleanContent.split(/[.!?]+/).filter((s) => s.trim().length > 0);
  const words = cleanContent.split(/\s+/).filter((word) => word.length > 0);
  if (sentences.length === 0 || words.length === 0) {
    results.push({
      passed: true,
      message: "No readable content found for reading level analysis",
      severity: "info"
    });
    return Promise.resolve(results);
  }
  const totalSyllables = words.reduce((sum, word) => sum + countSyllables(word), 0);
  const avgWordsPerSentence = words.length / sentences.length;
  const avgSyllablesPerWord = totalSyllables / words.length;
  const readingLevel = 0.39 * avgWordsPerSentence + 11.8 * avgSyllablesPerWord - 15.59;
  const description = getReadingLevelDescription(readingLevel);
  if (readingLevel > 12) {
    results.push({
      passed: false,
      message: `Reading level too high: ${readingLevel.toFixed(1)} (${description})`,
      suggestion: "Consider simplifying sentence structure and using shorter words",
      severity: "warning"
    });
  } else {
    results.push({
      passed: true,
      message: `Good reading level: ${readingLevel.toFixed(1)} (${description})`,
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
function checkDuplicateContent(content, file, settings) {
  const results = [];
  if (!settings.checkDuplicateContent) {
    return Promise.resolve([]);
  }
  const cleanContent = removeCodeBlocks(content);
  const paragraphs = cleanContent.split(/\n\s*\n/).filter((p) => p.trim().length > 20);
  const duplicateParagraphs = [];
  for (let i = 0; i < paragraphs.length; i++) {
    for (let j = i + 1; j < paragraphs.length; j++) {
      const paragraph1 = paragraphs[i];
      const paragraph2 = paragraphs[j];
      if (paragraph1 && paragraph2) {
        const similarity = calculateSimilarity(paragraph1, paragraph2);
        if (similarity > settings.duplicateThreshold) {
          duplicateParagraphs.push({
            paragraph1: i + 1,
            paragraph2: j + 1,
            similarity
          });
        }
      }
    }
  }
  if (duplicateParagraphs.length > 0) {
    duplicateParagraphs.forEach(({ paragraph1, paragraph2, similarity }) => {
      results.push({
        passed: false,
        message: `Duplicate content detected between paragraphs ${paragraph1} and ${paragraph2}`,
        suggestion: `Similarity: ${similarity.toFixed(1)}% - consider rewriting one of these paragraphs`,
        severity: "warning"
      });
    });
  } else {
    results.push({
      passed: true,
      message: "No duplicate content detected",
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
function calculateSimilarity(text1, text2) {
  const words1 = text1.toLowerCase().split(/\s+/);
  const words2 = text2.toLowerCase().split(/\s+/);
  const set1 = new Set(words1);
  const set2 = new Set(words2);
  const intersection = new Set([...set1].filter((x) => set2.has(x)));
  const union = /* @__PURE__ */ new Set([...set1, ...set2]);
  return intersection.size / union.size * 100;
}
async function checkDuplicateTitles(content, file, settings, vaultDetector) {
  return await vaultDetector.checkDuplicateTitles(file, settings);
}
async function checkDuplicateDescriptions(content, file, settings, vaultDetector) {
  return await vaultDetector.checkDuplicateDescriptions(file, settings);
}
async function checkVaultDuplicateContent(content, file, settings, vaultDetector) {
  return await vaultDetector.checkDuplicateContent(file, settings);
}
var init_content_checks = __esm({
  "src/checks/content-checks.ts"() {
    "use strict";
    init_content_parser();
    init_reading_level();
  }
});

// src/checks/meta-checks.ts
function checkMetaDescription(content, file, settings) {
  const results = [];
  if (!settings.descriptionProperty) {
    return Promise.resolve([]);
  }
  const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
  if (!frontmatterMatch) {
    results.push({
      passed: false,
      message: "No properties found",
      suggestion: "Add properties with description property",
      severity: "warning"
    });
    return Promise.resolve(results);
  }
  const frontmatter = frontmatterMatch[1];
  if (!frontmatter) {
    results.push({
      passed: false,
      message: "No properties content found",
      suggestion: "Add properties with description property",
      severity: "warning"
    });
    return Promise.resolve(results);
  }
  const descriptionMatch = frontmatter.match(new RegExp(`^${settings.descriptionProperty}:\\s*(.+)$`, "m"));
  if (!descriptionMatch || !descriptionMatch[1]) {
    results.push({
      passed: false,
      message: `No ${settings.descriptionProperty} found in properties`,
      suggestion: `Add ${settings.descriptionProperty} to properties`,
      severity: "warning"
    });
    return Promise.resolve(results);
  }
  let description = descriptionMatch[1].trim();
  if (description.startsWith('"') && description.endsWith('"') || description.startsWith("'") && description.endsWith("'")) {
    description = description.slice(1, -1);
  }
  const length = description.length;
  if (length < 120) {
    results.push({
      passed: false,
      message: `Description too short: ${length} characters`,
      suggestion: "Aim for 120-160 characters",
      severity: "warning"
    });
  } else if (length > 160) {
    results.push({
      passed: false,
      message: `Description too long: ${length} characters`,
      suggestion: "Aim for 120-160 characters",
      severity: "warning"
    });
  } else {
    results.push({
      passed: true,
      message: `Good description length: ${length} characters`,
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
function checkTitleLength(content, file, settings) {
  const results = [];
  if (!settings.checkTitleLength) {
    return Promise.resolve([]);
  }
  let title = "";
  if (settings.titleProperty) {
    const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
    if (frontmatterMatch && frontmatterMatch[1]) {
      const frontmatter = frontmatterMatch[1];
      const titleMatch = frontmatter.match(new RegExp(`^${settings.titleProperty}:\\s*(.+)$`, "m"));
      if (titleMatch && titleMatch[1]) {
        title = titleMatch[1].trim();
      }
    }
  }
  if (!title && settings.useFilenameAsTitle) {
    title = file.basename;
  }
  if (!title) {
    const h1Match = content.match(/^#\s+(.+)$/m);
    if (h1Match && h1Match[1]) {
      title = h1Match[1].trim();
    }
  }
  if (!title) {
    return Promise.resolve(results);
  }
  const fullTitle = settings.titlePrefixSuffix ? `${title} ${settings.titlePrefixSuffix}` : title;
  const length = fullTitle.length;
  if (length < 30) {
    const message = settings.titlePrefixSuffix ? `Title too short: ${length} characters (${title} + " ${settings.titlePrefixSuffix}")` : `Title too short: ${length} characters`;
    results.push({
      passed: false,
      message,
      suggestion: "Aim for 30-60 characters",
      severity: "warning"
    });
  } else if (length > 60) {
    const message = settings.titlePrefixSuffix ? `Title too long: ${length} characters (${title} + " ${settings.titlePrefixSuffix}")` : `Title too long: ${length} characters`;
    results.push({
      passed: false,
      message,
      suggestion: "Aim for 30-60 characters",
      severity: "warning"
    });
  } else {
    const message = settings.titlePrefixSuffix ? `Good title length: ${length} characters (${title} + " ${settings.titlePrefixSuffix}")` : `Good title length: ${length} characters`;
    results.push({
      passed: true,
      message,
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
function checkKeywordDensity(content, file, settings) {
  const results = [];
  if (!settings.keywordProperty) {
    return Promise.resolve([]);
  }
  const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
  if (!frontmatterMatch) {
    results.push({
      passed: false,
      message: "No properties found",
      suggestion: "Add properties with keyword property",
      severity: "warning"
    });
    return Promise.resolve(results);
  }
  const frontmatter = frontmatterMatch[1];
  if (!frontmatter) {
    results.push({
      passed: false,
      message: "No properties content found",
      suggestion: "Add properties with keyword property",
      severity: "warning"
    });
    return Promise.resolve(results);
  }
  const lines = frontmatter.split("\n");
  let keyword = "";
  let foundKeywordLine = false;
  for (const line of lines) {
    if (line.startsWith(settings.keywordProperty + ":")) {
      foundKeywordLine = true;
      keyword = line.substring(settings.keywordProperty.length + 1).trim();
      break;
    }
  }
  if (!foundKeywordLine) {
    results.push({
      passed: true,
      message: `No ${settings.keywordProperty} defined in properties`,
      severity: "notice"
    });
    return Promise.resolve(results);
  }
  if (!keyword || keyword === "false" || keyword === "true" || keyword === "null" || keyword === "undefined") {
    results.push({
      passed: true,
      message: `No valid keyword defined in properties`,
      severity: "notice"
    });
    return Promise.resolve(results);
  }
  let cleanContent = removeCodeBlocks(content);
  const titleFrontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
  if (titleFrontmatterMatch && titleFrontmatterMatch[1] && settings.titleProperty) {
    const frontmatter2 = titleFrontmatterMatch[1];
    const lines2 = frontmatter2.split("\n");
    for (const line of lines2) {
      if (line.startsWith(settings.titleProperty + ":")) {
        let title = line.substring(settings.titleProperty.length + 1).trim();
        if (title.startsWith('"') && title.endsWith('"') || title.startsWith("'") && title.endsWith("'")) {
          title = title.slice(1, -1);
        }
        cleanContent = title + " " + cleanContent;
        break;
      }
    }
  }
  const keywordLower = keyword.toLowerCase();
  const cleanContentLower = cleanContent.toLowerCase();
  const keywordWords = keywordLower.split(/\s+/).filter((word) => word.length > 0);
  let keywordCount = 0;
  const contentWords = cleanContentLower.split(/\s+/);
  for (let i = 0; i <= contentWords.length - keywordWords.length; i++) {
    const phrase = contentWords.slice(i, i + keywordWords.length).join(" ");
    const allWordsFound = keywordWords.every((word) => phrase.includes(word));
    if (allWordsFound) {
      keywordCount++;
    }
  }
  const words = cleanContent.split(/\s+/).filter((word) => word.length > 0);
  const totalWords = words.length;
  if (totalWords === 0) {
    results.push({
      passed: false,
      message: "No content found for keyword analysis",
      severity: "warning"
    });
    return Promise.resolve(results);
  }
  const density = keywordCount / totalWords * 100;
  if (density < settings.keywordDensityMin) {
    results.push({
      passed: false,
      message: `Keyword density too low: ${density.toFixed(1)}%`,
      suggestion: `Aim for at least ${settings.keywordDensityMin}% density`,
      severity: "warning"
    });
  } else if (density > settings.keywordDensityMax) {
    results.push({
      passed: false,
      message: `Keyword density too high: ${density.toFixed(1)}%`,
      suggestion: `Aim for no more than ${settings.keywordDensityMax}% density`,
      severity: "warning"
    });
  } else {
    results.push({
      passed: true,
      message: `Good keyword density: ${density.toFixed(1)}%`,
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
function checkKeywordInDescription(content, file, settings) {
  const results = [];
  if (!settings.keywordProperty || !settings.descriptionProperty) {
    return Promise.resolve([]);
  }
  const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
  if (!frontmatterMatch) {
    return Promise.resolve(results);
  }
  const frontmatter = frontmatterMatch[1];
  if (!frontmatter) {
    return Promise.resolve(results);
  }
  const lines = frontmatter.split("\n");
  let keyword = "";
  let foundKeywordLine = false;
  for (const line of lines) {
    if (line.startsWith(settings.keywordProperty + ":")) {
      foundKeywordLine = true;
      keyword = line.substring(settings.keywordProperty.length + 1).trim();
      break;
    }
  }
  if (!foundKeywordLine || !keyword || keyword === "false" || keyword === "true" || keyword === "null" || keyword === "undefined") {
    return Promise.resolve(results);
  }
  let description = "";
  let foundDescriptionLine = false;
  for (const line of lines) {
    if (line.startsWith(settings.descriptionProperty + ":")) {
      foundDescriptionLine = true;
      description = line.substring(settings.descriptionProperty.length + 1).trim();
      if (description.startsWith('"') && description.endsWith('"') || description.startsWith("'") && description.endsWith("'")) {
        description = description.slice(1, -1);
      }
      break;
    }
  }
  if (!foundDescriptionLine) {
    results.push({
      passed: false,
      message: "No description found",
      suggestion: "Add a meta description to your properties",
      severity: "warning"
    });
    return Promise.resolve(results);
  }
  const keywordLower = keyword.toLowerCase();
  const descriptionLower = description.toLowerCase();
  const fullPhraseFound = descriptionLower.includes(keywordLower);
  const keywordWords = keywordLower.split(/\s+/).filter((word) => word.length > 0);
  const allWordsFound = keywordWords.every((word) => descriptionLower.includes(word));
  const keywordFound = fullPhraseFound || allWordsFound;
  if (keywordFound) {
    results.push({
      passed: true,
      message: `Keyword found in description`,
      severity: "info"
    });
  } else {
    results.push({
      passed: false,
      message: `Keyword not found in description`,
      suggestion: "Include your target keyword in the description",
      severity: "warning"
    });
  }
  return Promise.resolve(results);
}
function checkTitleH1Uniqueness(content, file, settings) {
  const results = [];
  if (!settings.titleProperty) {
    return Promise.resolve(results);
  }
  const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
  if (!frontmatterMatch) {
    return Promise.resolve(results);
  }
  const frontmatter = frontmatterMatch[1];
  if (!frontmatter) {
    return Promise.resolve(results);
  }
  let metaTitle = "";
  const lines = frontmatter.split("\n");
  for (const line of lines) {
    if (line.startsWith(settings.titleProperty + ":")) {
      metaTitle = line.substring(settings.titleProperty.length + 1).trim();
      if (metaTitle.startsWith('"') && metaTitle.endsWith('"') || metaTitle.startsWith("'") && metaTitle.endsWith("'")) {
        metaTitle = metaTitle.slice(1, -1);
      }
      break;
    }
  }
  if (!metaTitle) {
    return Promise.resolve(results);
  }
  let h1Heading = "";
  if (settings.skipH1Check) {
    if (settings.titlePrefixSuffix && settings.titlePrefixSuffix.trim()) {
      results.push({
        passed: true,
        message: "Meta title and H1 are unique (prefix/suffix configured)",
        severity: "info"
      });
      return Promise.resolve(results);
    }
    h1Heading = metaTitle;
    if (settings.titlePrefixSuffix) {
      const prefixSuffix = settings.titlePrefixSuffix;
      if (h1Heading.startsWith(prefixSuffix)) {
        h1Heading = h1Heading.substring(prefixSuffix.length).trim();
      }
      if (h1Heading.endsWith(prefixSuffix)) {
        h1Heading = h1Heading.substring(0, h1Heading.length - prefixSuffix.length).trim();
      }
    }
  } else {
    const contentLines = content.split("\n");
    for (const line of contentLines) {
      if (!line) continue;
      const h1Match = line.match(/^#\s+(.+)$/);
      if (h1Match && h1Match[1]) {
        h1Heading = h1Match[1].trim();
        break;
      }
    }
  }
  if (!h1Heading) {
    results.push({
      passed: false,
      message: "No H1 heading found to compare with meta title",
      suggestion: "Add an H1 heading to your content, or enable 'Title property is H1' if your static site generator creates H1s from the title",
      severity: "warning"
    });
    return Promise.resolve(results);
  }
  const metaTitleLower = metaTitle.toLowerCase().trim();
  const h1Lower = h1Heading.toLowerCase().trim();
  if (metaTitleLower === h1Lower) {
    results.push({
      passed: false,
      message: "Meta title and H1 are identical",
      suggestion: "Modify one to be unique, or specify a suffix/prefix in plugin settings",
      severity: "warning"
    });
  } else {
    results.push({
      passed: true,
      message: "Meta title and H1 are unique",
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
function checkKeywordInHeadings(content, file, settings) {
  const results = [];
  if (!settings.keywordProperty) {
    return Promise.resolve(results);
  }
  const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
  if (!frontmatterMatch) {
    return Promise.resolve(results);
  }
  const frontmatter = frontmatterMatch[1];
  if (!frontmatter) {
    return Promise.resolve(results);
  }
  const lines = frontmatter.split("\n");
  let keyword = "";
  let foundKeywordLine = false;
  for (const line of lines) {
    if (line.startsWith(settings.keywordProperty + ":")) {
      foundKeywordLine = true;
      keyword = line.substring(settings.keywordProperty.length + 1).trim();
      break;
    }
  }
  if (!foundKeywordLine) {
    results.push({
      passed: true,
      message: `No ${settings.keywordProperty} defined in properties`,
      severity: "notice"
    });
    return Promise.resolve(results);
  }
  if (!keyword || keyword === "false" || keyword === "true" || keyword === "null" || keyword === "undefined") {
    results.push({
      passed: true,
      message: `No valid keyword defined in properties`,
      severity: "notice"
    });
    return Promise.resolve(results);
  }
  const h1Headings = [];
  if (settings.skipH1Check && settings.titleProperty) {
    const titleFrontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
    if (titleFrontmatterMatch && titleFrontmatterMatch[1]) {
      const frontmatter2 = titleFrontmatterMatch[1];
      const lines2 = frontmatter2.split("\n");
      for (const line of lines2) {
        if (line.startsWith(settings.titleProperty + ":")) {
          let title = line.substring(settings.titleProperty.length + 1).trim();
          if (title.startsWith('"') && title.endsWith('"') || title.startsWith("'") && title.endsWith("'")) {
            title = title.slice(1, -1);
          }
          if (settings.titlePrefixSuffix) {
            const prefixSuffix = settings.titlePrefixSuffix;
            if (title.startsWith(prefixSuffix)) {
              title = title.substring(prefixSuffix.length).trim();
            }
            if (title.endsWith(prefixSuffix)) {
              title = title.substring(0, title.length - prefixSuffix.length).trim();
            }
          }
          h1Headings.push({ text: title });
          break;
        }
      }
    }
  }
  const contentLines = content.split("\n");
  for (const line of contentLines) {
    if (!line) continue;
    const h1Match = line.match(/^#\s+(.+)$/);
    if (h1Match && h1Match[1]) {
      h1Headings.push({ text: h1Match[1].trim() });
    }
  }
  if (h1Headings.length === 0) {
    results.push({
      passed: false,
      message: "No H1 heading found in content",
      suggestion: "Add an H1 heading to structure your content and include your target keyword",
      severity: "warning"
    });
    return Promise.resolve(results);
  }
  const keywordLower = keyword.toLowerCase();
  const keywordWords = keywordLower.split(/\s+/).filter((word) => word.length > 0);
  let keywordFoundInH1 = false;
  for (const h1 of h1Headings) {
    const h1Lower = h1.text.toLowerCase();
    const fullPhraseFound = h1Lower.includes(keywordLower);
    const allWordsFound = keywordWords.every((word) => h1Lower.includes(word));
    if (fullPhraseFound || allWordsFound) {
      keywordFoundInH1 = true;
      break;
    }
  }
  if (keywordFoundInH1) {
    results.push({
      passed: true,
      message: `Keyword found in H1`,
      severity: "info"
    });
  } else {
    results.push({
      passed: false,
      message: `Keyword not found in H1`,
      suggestion: "Include your target keyword in the H1 heading for better SEO",
      severity: "warning"
    });
  }
  return Promise.resolve(results);
}
function checkKeywordInTitle(content, file, settings) {
  const results = [];
  if (!settings.keywordProperty || !settings.titleProperty) {
    return Promise.resolve([]);
  }
  const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
  if (!frontmatterMatch) {
    return Promise.resolve(results);
  }
  const frontmatter = frontmatterMatch[1];
  if (!frontmatter) {
    return Promise.resolve(results);
  }
  const lines = frontmatter.split("\n");
  let keyword = "";
  let foundKeywordLine = false;
  let title = "";
  let foundTitleLine = false;
  for (const line of lines) {
    if (line.startsWith(settings.keywordProperty + ":")) {
      foundKeywordLine = true;
      keyword = line.substring(settings.keywordProperty.length + 1).trim();
      break;
    }
  }
  for (const line of lines) {
    if (line.startsWith(settings.titleProperty + ":")) {
      foundTitleLine = true;
      title = line.substring(settings.titleProperty.length + 1).trim();
      if (title.startsWith('"') && title.endsWith('"') || title.startsWith("'") && title.endsWith("'")) {
        title = title.slice(1, -1);
      }
      break;
    }
  }
  if (!foundKeywordLine) {
    results.push({
      passed: true,
      message: `No ${settings.keywordProperty} defined in properties`,
      severity: "notice"
    });
    return Promise.resolve(results);
  }
  if (!keyword || keyword === "false" || keyword === "true" || keyword === "null" || keyword === "undefined") {
    results.push({
      passed: true,
      message: `No valid keyword defined in properties`,
      severity: "notice"
    });
    return Promise.resolve(results);
  }
  if (!foundTitleLine || !title) {
    return Promise.resolve(results);
  }
  const titleLower = title.toLowerCase();
  const keywordLower = keyword.toLowerCase();
  const fullPhraseFound = titleLower.includes(keywordLower);
  const keywordWords = keywordLower.split(/\s+/).filter((word) => word.length > 0);
  const allWordsFound = keywordWords.every((word) => titleLower.includes(word));
  const keywordFound = fullPhraseFound || allWordsFound;
  if (keywordFound) {
    results.push({
      passed: true,
      message: `Keyword found in title`,
      severity: "info"
    });
  } else {
    results.push({
      passed: false,
      message: `Keyword not found in title`,
      suggestion: "Include your target keyword in the title",
      severity: "warning"
    });
  }
  return Promise.resolve(results);
}
var init_meta_checks = __esm({
  "src/checks/meta-checks.ts"() {
    "use strict";
    init_content_parser();
  }
});

// src/checks/heading-checks.ts
function checkHeadingOrder(content, file, settings) {
  const results = [];
  if (!settings.checkHeadingOrder) {
    return Promise.resolve([]);
  }
  const originalLines = content.split("\n");
  let lastHeadingLevel = null;
  let hasHeading = false;
  let hasH1 = false;
  let inCodeBlock = false;
  for (let i = 0; i < originalLines.length; i++) {
    const line = originalLines[i];
    if (!line) continue;
    const codeBlockMatch = line.match(/^```(\w+)?/);
    if (codeBlockMatch) {
      if (inCodeBlock) {
        inCodeBlock = false;
      } else {
        inCodeBlock = true;
      }
      continue;
    }
    if (inCodeBlock) {
      continue;
    }
    const headingMatch = line.match(/^(#{1,6})\s+(.+)/);
    if (headingMatch && headingMatch[1] && headingMatch[2]) {
      hasHeading = true;
      const currentLevel = headingMatch[1].length;
      const headingText = headingMatch[2].trim();
      const lineNumber = i + 1;
      if (currentLevel === 1) {
        hasH1 = true;
      }
      if (lastHeadingLevel === null) {
        lastHeadingLevel = currentLevel;
        continue;
      }
      if (currentLevel > lastHeadingLevel + 1) {
        results.push({
          passed: false,
          message: `"${headingText}" (H${currentLevel}) skips heading level(s) after H${lastHeadingLevel}`,
          suggestion: "Use heading levels in order (H1 \u2192 H2 \u2192 H3, etc.)",
          severity: "warning",
          position: {
            line: lineNumber,
            searchText: line,
            context: getContextAroundLine(content, lineNumber)
          }
        });
      }
      if (currentLevel === 1 && lastHeadingLevel > 1) {
        results.push({
          passed: false,
          message: `"${headingText}" (H1) appears after H${lastHeadingLevel}`,
          suggestion: "H1 should be the first heading or not used at all",
          severity: "warning",
          position: {
            line: lineNumber,
            searchText: line,
            context: getContextAroundLine(content, lineNumber)
          }
        });
      }
      lastHeadingLevel = currentLevel;
    }
  }
  if (hasHeading && !settings.skipH1Check && !hasH1) {
    results.unshift({
      passed: false,
      message: "No H1 heading found",
      suggestion: "Add an H1 heading at the beginning of your content",
      severity: "warning"
      // No position info since there's no H1 to jump to
    });
  }
  if (!hasHeading) {
    results.push({
      passed: true,
      message: "No heading structure issues found",
      severity: "info"
    });
  } else if (results.length === 0) {
    results.push({
      passed: true,
      message: "Heading structure is correct",
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
var init_heading_checks = __esm({
  "src/checks/heading-checks.ts"() {
    "use strict";
    init_position_utils();
  }
});

// src/checks/image-checks.ts
function checkImageNaming(content, file, settings) {
  const results = [];
  if (!settings.checkImageNaming) {
    return Promise.resolve([]);
  }
  const cleanContent = removeCodeBlocks(content);
  const imageMatches = cleanContent.match(/!\[[^\]]*\]\(([^)]+)\)/g);
  if (imageMatches) {
    imageMatches.forEach((match, index) => {
      var _a;
      const imagePath = (_a = match.match(/!\[[^\]]*\]\(([^)]+)\)/)) == null ? void 0 : _a[1];
      if (imagePath) {
        const fileName = imagePath.split("/").pop() || "";
        const lineNumber = findLineNumberForImage(content, match);
        if (fileName.includes(" ") || fileName.includes("%20")) {
          results.push({
            passed: false,
            message: `Image ${index + 1} has spaces in file name: ${fileName}`,
            suggestion: "Use kebab-case or underscores instead of spaces",
            severity: "warning",
            position: {
              line: lineNumber,
              searchText: match,
              context: getContextAroundLine(content, lineNumber)
            }
          });
        } else if (fileName.match(/^[a-f0-9]{8,}$/) || fileName.match(/^[a-f0-9]{8,}_[A-Z0-9]+\./) || fileName.match(/^[a-f0-9]{8,}_MD5\./) || fileName.match(/^[a-f0-9]{20,}\./)) {
          results.push({
            passed: false,
            message: `Image ${index + 1} has random file name: ${fileName}`,
            suggestion: "Use descriptive file names",
            severity: "warning",
            position: {
              line: lineNumber,
              searchText: match,
              context: getContextAroundLine(content, lineNumber)
            }
          });
        } else if (fileName.toLowerCase().includes("pasted") || fileName.toLowerCase().includes("untitled") || fileName.toLowerCase().includes("photo") || // Only flag generic screenshots (no descriptive content)
        fileName.match(/^screenshot\d*\.(png|jpg|jpeg|gif|webp)$/i) || // Flag screenshots with only random characters
        fileName.toLowerCase().includes("screenshot") && fileName.match(/^screenshot[a-f0-9]{6,}\.(png|jpg|jpeg|gif|webp)$/i)) {
          results.push({
            passed: false,
            message: `Image ${index + 1} has a potentially generic file name: ${fileName}`,
            suggestion: "Use descriptive file names",
            severity: "warning",
            position: {
              line: lineNumber,
              searchText: match,
              context: getContextAroundLine(content, lineNumber)
            }
          });
        } else if (fileName.length < 5 || fileName.length > 50) {
          results.push({
            passed: false,
            message: `Image ${index + 1} exceeds suggested file name length: ${fileName}`,
            suggestion: "Use descriptive file names between 5-50 characters",
            severity: "warning",
            position: {
              line: lineNumber,
              searchText: match,
              context: getContextAroundLine(content, lineNumber)
            }
          });
        }
      }
    });
  }
  if (results.length === 0) {
    results.push({
      passed: true,
      message: "All images have good file names",
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
var init_image_checks = __esm({
  "src/checks/image-checks.ts"() {
    "use strict";
    init_content_parser();
    init_position_utils();
  }
});

// src/checks/index.ts
function checkNotices(content, file, settings) {
  return Promise.resolve([]);
}
function checkKeywordInSlug(content, file, settings) {
  const results = [];
  if (!settings.keywordProperty) {
    return Promise.resolve(results);
  }
  const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
  if (!frontmatterMatch) {
    return Promise.resolve(results);
  }
  const frontmatter = frontmatterMatch[1];
  if (!frontmatter) {
    return Promise.resolve(results);
  }
  const lines = frontmatter.split("\n");
  let keyword = "";
  let foundKeywordLine = false;
  for (const line of lines) {
    if (line.startsWith(settings.keywordProperty + ":")) {
      foundKeywordLine = true;
      keyword = line.substring(settings.keywordProperty.length + 1).trim();
      break;
    }
  }
  if (!foundKeywordLine) {
    results.push({
      passed: true,
      message: `No ${settings.keywordProperty} defined in properties`,
      severity: "notice"
    });
    return Promise.resolve(results);
  }
  if (!keyword || keyword === "false" || keyword === "true" || keyword === "null" || keyword === "undefined") {
    results.push({
      passed: true,
      message: `No valid keyword defined in properties`,
      severity: "notice"
    });
    return Promise.resolve(results);
  }
  const slug = file.basename.toLowerCase();
  const keywordLower = keyword.toLowerCase();
  const keywordWords = keywordLower.split(/\s+/).filter((word) => word.length > 0);
  const allWordsFound = keywordWords.every((word) => slug.includes(word));
  if (allWordsFound) {
    results.push({
      passed: true,
      message: `Target keyword "${keyword}" found in slug`,
      severity: "info"
    });
  } else {
    results.push({
      passed: false,
      message: `Target keyword "${keyword}" not found in slug`,
      suggestion: "Include your target keyword in the filename",
      severity: "warning"
    });
  }
  return Promise.resolve(results);
}
function checkSlugFormat(content, file, settings) {
  return Promise.resolve([]);
}
function getDisplayName(file, content, settings) {
  if (settings.useNoteTitles && settings.titleProperty.trim()) {
    let frontmatterMatch = content.match(/^---\r?\n([\s\S]*?)\r?\n---/);
    if (!frontmatterMatch) {
      frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
    }
    if (!frontmatterMatch) {
      frontmatterMatch = content.match(/^---\s*\n([\s\S]*?)\n\s*---/);
    }
    if (frontmatterMatch && frontmatterMatch[1]) {
      const frontmatter = frontmatterMatch[1];
      const lines = frontmatter.split("\n");
      for (const line of lines) {
        if (!line) continue;
        const trimmedLine = line.trim();
        if (trimmedLine.startsWith(settings.titleProperty + ":")) {
          const colonIndex = trimmedLine.indexOf(":");
          if (colonIndex !== -1) {
            let title = trimmedLine.substring(colonIndex + 1).trim();
            if (title.startsWith('"') && title.endsWith('"') || title.startsWith("'") && title.endsWith("'")) {
              title = title.slice(1, -1);
            }
            if (title) {
              return title;
            }
          }
        }
      }
    }
  }
  return getDisplayPath(file.path);
}
var init_checks = __esm({
  "src/checks/index.ts"() {
    "use strict";
    init_alt_text_check();
    init_link_checks();
    init_external_link_checks();
    init_content_checks();
    init_meta_checks();
    init_heading_checks();
    init_image_checks();
    init_content_parser();
    init_position_utils();
    init_reading_level();
    init_panel_utils();
  }
});

// src/checks/duplicate-detection.ts
var VaultDuplicateDetector;
var init_duplicate_detection = __esm({
  "src/checks/duplicate-detection.ts"() {
    "use strict";
    init_content_parser();
    VaultDuplicateDetector = class {
      constructor(app, settings) {
        this.vaultData = null;
        this.app = app;
        this.settings = settings;
      }
      /**
       * Collect vault-wide data for duplicate detection
       */
      async collectVaultData() {
        const vaultData = {
          files: /* @__PURE__ */ new Map(),
          titleMap: /* @__PURE__ */ new Map(),
          descriptionMap: /* @__PURE__ */ new Map(),
          lastUpdated: Date.now()
        };
        const files = this.app.vault.getMarkdownFiles();
        const filteredFiles = files.filter((file) => {
          if (this.settings.ignoreUnderscoreFiles && file.basename.startsWith("_")) {
            return false;
          }
          if (this.settings.scanDirectories) {
            const directories = this.settings.scanDirectories.split(",").map((d) => d.trim());
            return directories.some((dir) => file.path.startsWith(dir));
          }
          return true;
        });
        for (const file of filteredFiles) {
          try {
            const content = await this.app.vault.read(file);
            const metadata = this.extractFileMetadata(file, content);
            if (!metadata.ignored) {
              vaultData.files.set(file.path, metadata);
              const titleKey = metadata.title.toLowerCase().trim();
              if (titleKey) {
                if (!vaultData.titleMap.has(titleKey)) {
                  vaultData.titleMap.set(titleKey, []);
                }
                vaultData.titleMap.get(titleKey).push(file.path);
              }
              if (metadata.description) {
                const descKey = metadata.description.toLowerCase().trim();
                if (descKey) {
                  if (!vaultData.descriptionMap.has(descKey)) {
                    vaultData.descriptionMap.set(descKey, []);
                  }
                  vaultData.descriptionMap.get(descKey).push(file.path);
                }
              }
            }
          } catch (error) {
            console.warn(`Failed to process file ${file.path}:`, error);
          }
        }
        this.vaultData = vaultData;
        return vaultData;
      }
      /**
       * Extract metadata from a file
       */
      extractFileMetadata(file, content) {
        const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---\n/);
        const frontmatter = {};
        if (frontmatterMatch && frontmatterMatch[1]) {
          const frontmatterContent = frontmatterMatch[1];
          const lines = frontmatterContent.split("\n");
          for (const line of lines) {
            const match = line.match(/^(\w+):\s*(.*)$/);
            if (match && match[1] && match[2] !== void 0) {
              const key = match[1];
              let value = match[2];
              if (value.startsWith('"') && value.endsWith('"') || value.startsWith("'") && value.endsWith("'")) {
                value = value.slice(1, -1);
              }
              frontmatter[key] = value;
            }
          }
        }
        let title = "";
        if (this.settings.titleProperty && frontmatter[this.settings.titleProperty]) {
          const titleValue = frontmatter[this.settings.titleProperty];
          title = typeof titleValue === "string" ? titleValue : file.basename;
        } else if (this.settings.useFilenameAsTitle) {
          title = file.basename;
        } else {
          title = file.basename;
        }
        let description;
        if (this.settings.descriptionProperty && frontmatter[this.settings.descriptionProperty]) {
          const descValue = frontmatter[this.settings.descriptionProperty];
          description = typeof descValue === "string" ? descValue : void 0;
        }
        return {
          path: file.path,
          title,
          description,
          content,
          ignored: false
        };
      }
      /**
       * Check for duplicate titles
       */
      async checkDuplicateTitles(file, settings) {
        var _a;
        const results = [];
        if (!settings.checkDuplicateContent || !settings.titleProperty && !settings.useFilenameAsTitle) {
          return results;
        }
        if (!this.vaultData) {
          await this.collectVaultData();
        }
        const fileMetadata = this.vaultData.files.get(file.path);
        if (!fileMetadata) {
          return results;
        }
        const titleKey = fileMetadata.title.toLowerCase().trim();
        if (!titleKey) {
          return results;
        }
        const duplicateFiles = ((_a = this.vaultData) == null ? void 0 : _a.titleMap.get(titleKey)) || [];
        if (duplicateFiles.length > 1) {
          const otherFiles = duplicateFiles.filter((f) => f !== file.path);
          const genericTitles = ["untitled", "new note", "untitled note", "new file", "document"];
          const isGeneric = genericTitles.includes(titleKey);
          const severity = isGeneric ? "warning" : "error";
          const message = isGeneric ? `Generic title "${fileMetadata.title}" used in ${duplicateFiles.length} files` : `Duplicate title "${fileMetadata.title}" found in ${duplicateFiles.length} files`;
          const suggestion = isGeneric ? "Consider using a more descriptive title" : `This title is also used in: ${otherFiles.map((f) => `<a href="#" data-file-path="${f}" class="seo-file-link">${this.getDisplayPath(f)}</a>`).join(", ")}`;
          results.push({
            passed: false,
            message,
            suggestion,
            severity,
            position: {
              line: 1,
              searchText: this.settings.titleProperty || "title",
              context: `title: "${fileMetadata.title}"`
            }
          });
        } else {
          results.push({
            passed: true,
            message: `Unique title: "${fileMetadata.title}"`,
            severity: "info"
          });
        }
        return results;
      }
      /**
       * Check for duplicate descriptions
       */
      async checkDuplicateDescriptions(file, settings) {
        var _a;
        const results = [];
        if (!settings.checkDuplicateContent || !settings.descriptionProperty) {
          return results;
        }
        if (!this.vaultData) {
          await this.collectVaultData();
        }
        const fileMetadata = this.vaultData.files.get(file.path);
        if (!fileMetadata || !fileMetadata.description) {
          return results;
        }
        const descKey = fileMetadata.description.toLowerCase().trim();
        const duplicateFiles = ((_a = this.vaultData) == null ? void 0 : _a.descriptionMap.get(descKey)) || [];
        if (duplicateFiles.length > 1) {
          const otherFiles = duplicateFiles.filter((f) => f !== file.path);
          const genericDescriptions = ["description", "meta description", "page description"];
          const isGeneric = genericDescriptions.includes(descKey);
          const severity = isGeneric ? "warning" : "error";
          const message = isGeneric ? `Generic description "${fileMetadata.description}" used in ${duplicateFiles.length} files` : `Duplicate description "${fileMetadata.description}" found in ${duplicateFiles.length} files`;
          const suggestion = isGeneric ? "Consider using a more descriptive meta description" : `This description is also used in: ${otherFiles.map((f) => `<a href="#" data-file-path="${f}" class="seo-file-link">${this.getDisplayPath(f)}</a>`).join(", ")}`;
          results.push({
            passed: false,
            message,
            suggestion,
            severity,
            position: {
              line: 1,
              searchText: this.settings.descriptionProperty || "description",
              context: `description: "${fileMetadata.description}"`
            }
          });
        } else {
          results.push({
            passed: true,
            message: `Unique description: "${fileMetadata.description}"`,
            severity: "info"
          });
        }
        return results;
      }
      /**
       * Check for duplicate content using Jaccard similarity
       */
      async checkDuplicateContent(file, settings) {
        var _a, _b;
        const results = [];
        if (!settings.checkDuplicateContent) {
          return results;
        }
        if (!this.vaultData) {
          await this.collectVaultData();
        }
        const fileMetadata = (_a = this.vaultData) == null ? void 0 : _a.files.get(file.path);
        if (!fileMetadata) {
          return results;
        }
        const paragraphs = this.splitIntoParagraphs(fileMetadata.content);
        const duplicates = [];
        for (let i = 0; i < paragraphs.length; i++) {
          const paragraph = paragraphs[i];
          if (!paragraph || paragraph.length < 50) continue;
          const similarFiles = [];
          for (const [otherFilePath, otherMetadata] of ((_b = this.vaultData) == null ? void 0 : _b.files) || []) {
            if (otherFilePath === file.path) continue;
            const otherParagraphs = this.splitIntoParagraphs(otherMetadata.content);
            for (const otherParagraph of otherParagraphs) {
              if (!otherParagraph || otherParagraph.length < 50) continue;
              const similarity = this.calculateJaccardSimilarity(paragraph, otherParagraph);
              if (similarity >= settings.duplicateThreshold) {
                similarFiles.push({
                  file: otherFilePath,
                  similarity
                });
              }
            }
          }
          if (similarFiles.length > 0) {
            duplicates.push({
              paragraph: i + 1,
              similarFiles
            });
          }
        }
        if (duplicates.length > 0) {
          duplicates.forEach(({ paragraph, similarFiles }) => {
            var _a2;
            const maxSimilarity = Math.max(...similarFiles.map((s) => s.similarity));
            const fileList = similarFiles.sort((a, b) => b.similarity - a.similarity).slice(0, 3).map((s) => `<a href="#" data-file-path="${s.file}" class="seo-file-link">${this.getDisplayPath(s.file)}</a> (${s.similarity.toFixed(1)}%)`).join(", ");
            results.push({
              passed: false,
              message: `Duplicate content detected in paragraph ${paragraph}`,
              suggestion: `Similarity: ${maxSimilarity.toFixed(1)}% with: ${fileList}`,
              severity: "error",
              position: {
                line: this.findParagraphLine(fileMetadata.content, paragraph - 1),
                searchText: ((_a2 = paragraphs[paragraph - 1]) == null ? void 0 : _a2.substring(0, 50)) + "...",
                context: `Paragraph ${paragraph} content`
              }
            });
          });
        } else {
          results.push({
            passed: true,
            message: "No duplicate content detected",
            severity: "info"
          });
        }
        return results;
      }
      /**
       * Split content into paragraphs, filtering out non-content elements
       */
      splitIntoParagraphs(content) {
        let cleanContent = removeCodeBlocks(content);
        cleanContent = cleanContent.replace(/^#{1,6}\s+/gm, "").replace(/^\s*[-*+]\s+/gm, "").replace(/^\s*\d+\.\s+/gm, "").replace(/^\s*>\s*/gm, "").replace(/^\s*\|.*\|.*$/gm, "").replace(/^\s*\|.*$/gm, "").replace(/\[\[.*?\]\]/g, "").replace(/!\[\[.*?\]\]/g, "").replace(/\[.*?\]\(.*?\)/g, "").replace(/!\[.*?\]\(.*?\)/g, "").replace(/^\s*---\s*$/gm, "").replace(/^\s*\+\+\+\s*$/gm, "").replace(/^\s*==\s*$/gm, "").replace(/^\s*!!\s*$/gm, "").replace(/^\s*>\s*\[!.*?\]\s*$/gm, "").replace(/^\s*>\s*$/gm, "").replace(/^\s*$/gm, "").trim();
        return cleanContent.split(/\n\s*\n/).map((p) => p.trim()).filter((p) => {
          if (p.length < 30) return false;
          const htmlLikeRatio = (p.match(/<[^>]*>/g) || []).join("").length / p.length;
          if (htmlLikeRatio > 0.3) return false;
          const specialCharRatio = (p.match(/[^\w\s.,!?;:'"()-]/g) || []).length / p.length;
          if (specialCharRatio > 0.5) return false;
          const wordRatio = (p.match(/\b\w+\b/g) || []).length / p.split(/\s+/).length;
          if (wordRatio < 0.3) return false;
          return true;
        });
      }
      /**
       * Calculate Jaccard similarity between two texts
       */
      calculateJaccardSimilarity(text1, text2) {
        const normalize = (text) => text.toLowerCase().replace(/\s+/g, " ").trim();
        const normalized1 = normalize(text1);
        const normalized2 = normalize(text2);
        const stopWords = /* @__PURE__ */ new Set(["the", "and", "or", "but", "in", "on", "at", "to", "for", "of", "with", "by", "a", "an", "is", "are", "was", "were", "be", "been", "have", "has", "had", "do", "does", "did", "will", "would", "could", "should", "may", "might", "can", "this", "that", "these", "those", "i", "you", "he", "she", "it", "we", "they", "me", "him", "her", "us", "them"]);
        const words1 = new Set(
          normalized1.split(/\s+/).filter((w) => w.length > 2 && !stopWords.has(w)).map((w) => w.replace(/[^\w]/g, "")).filter((w) => w.length > 0)
        );
        const words2 = new Set(
          normalized2.split(/\s+/).filter((w) => w.length > 2 && !stopWords.has(w)).map((w) => w.replace(/[^\w]/g, "")).filter((w) => w.length > 0)
        );
        if (words1.size === 0 || words2.size === 0) {
          return 0;
        }
        const intersection = new Set([...words1].filter((x) => words2.has(x)));
        const union = /* @__PURE__ */ new Set([...words1, ...words2]);
        return intersection.size / union.size * 100;
      }
      /**
       * Find the line number of a paragraph in the content
       */
      findParagraphLine(content, paragraphIndex) {
        const paragraphs = this.splitIntoParagraphs(content);
        if (paragraphIndex >= paragraphs.length) return 1;
        const targetParagraph = paragraphs[paragraphIndex];
        if (!targetParagraph) return 1;
        const lines = content.split("\n");
        for (let i = 0; i < lines.length; i++) {
          const line = lines[i];
          if (line && line.includes(targetParagraph.substring(0, 50))) {
            return i + 1;
          }
        }
        return 1;
      }
      /**
       * Get display path for a file
       */
      getDisplayPath(filePath) {
        if (this.vaultData && this.settings.useNoteTitles) {
          const fileMetadata = this.vaultData.files.get(filePath);
          if (fileMetadata && fileMetadata.title) {
            return fileMetadata.title;
          }
        }
        const parts = filePath.split("/");
        return parts[parts.length - 1] || filePath;
      }
      /**
       * Clear cached vault data
       */
      clearCache() {
        this.vaultData = null;
      }
      /**
       * Get current vault data
       */
      getVaultData() {
        return this.vaultData;
      }
    };
  }
});

// src/seo-checker.ts
var seo_checker_exports = {};
__export(seo_checker_exports, {
  clearAllCache: () => clearAllCache,
  clearCache: () => clearCache,
  clearCacheForFile: () => clearCacheForFile,
  getCacheStats: () => getCacheStats,
  runSEOCheck: () => runSEOCheck
});
async function runSEOCheck(plugin, files, abortController) {
  const results = [];
  const vaultDetector = new VaultDuplicateDetector(plugin.app, plugin.settings);
  if (plugin.settings.checkDuplicateContent) {
    await vaultDetector.collectVaultData();
  }
  for (const file of files) {
    if (abortController == null ? void 0 : abortController.signal.aborted) {
      throw new DOMException("Operation was aborted", "AbortError");
    }
    try {
      const cachedResult = getCachedResult(file, plugin);
      if (cachedResult) {
        results.push(cachedResult);
        continue;
      }
      const content = await plugin.app.vault.read(file);
      const result = await checkFile(plugin, file, content, vaultDetector, abortController);
      void cacheResult(file, result, plugin);
      results.push(result);
    } catch (error) {
      if (error instanceof Error && error.name === "AbortError") {
        throw error;
      }
      console.error(`Error checking file ${file.path}:`, error);
    }
  }
  return results;
}
async function checkFile(plugin, file, content, vaultDetector, abortController) {
  const checks = {
    titleLength: await checkTitleLength(content, file, plugin.settings),
    metaDescription: await checkMetaDescription(content, file, plugin.settings),
    titleH1Uniqueness: await checkTitleH1Uniqueness(content, file, plugin.settings),
    keywordInTitle: await checkKeywordInTitle(content, file, plugin.settings),
    keywordInDescription: await checkKeywordInDescription(content, file, plugin.settings),
    keywordInHeadings: await checkKeywordInHeadings(content, file, plugin.settings),
    keywordInSlug: await checkKeywordInSlug(content, file, plugin.settings),
    slugFormat: await checkSlugFormat(content, file, plugin.settings),
    keywordDensity: await checkKeywordDensity(content, file, plugin.settings),
    headingOrder: await checkHeadingOrder(content, file, plugin.settings),
    contentLength: await checkContentLength(content, file, plugin.settings),
    duplicateTitles: await checkDuplicateTitles(content, file, plugin.settings, vaultDetector),
    duplicateDescriptions: await checkDuplicateDescriptions(content, file, plugin.settings, vaultDetector),
    duplicateContent: plugin.settings.checkDuplicateContent ? await checkVaultDuplicateContent(content, file, plugin.settings, vaultDetector) : await checkDuplicateContent(content, file, plugin.settings),
    altText: await checkAltText(content, file, plugin.settings),
    imageFileNames: await checkImageNaming(content, file, plugin.settings),
    nakedLinks: await checkNakedLinks(content, file, plugin.settings),
    brokenLinks: await checkBrokenLinks(content, file, plugin.settings, plugin.app),
    potentiallyBrokenLinks: await checkPotentiallyBrokenLinks(content, file, plugin.settings, plugin.app),
    potentiallyBrokenEmbeds: await checkNotices(content, file, plugin.settings),
    externalBrokenLinks: plugin.settings.enableExternalLinkVaultCheck ? await checkExternalBrokenLinks(content, file, plugin.settings, abortController) : plugin.settings.checkExternalLinks ? await checkExternalLinks(content, file, plugin.settings) : [],
    readingLevel: await checkReadingLevel(content, file, plugin.settings)
  };
  const allResults = Object.values(checks).flat();
  const issuesCount = allResults.filter((r) => r.severity === "error").length;
  const warningsCount = allResults.filter((r) => r.severity === "warning").length;
  const noticesCount = allResults.filter((r) => r.severity === "notice").length;
  let overallScore;
  if (allResults.length === 0) {
    overallScore = 100;
  } else {
    let weightedScore = 0;
    let totalWeight = 0;
    allResults.forEach((result) => {
      if (result.severity === "notice") {
        return;
      }
      let weight = 1;
      let points = 0;
      if (result.message.includes("Broken link") && !result.passed) {
        weight = 10;
        points = 0;
      } else if (result.message.includes("title") && !result.passed && result.message.includes("No properties")) {
        weight = 10;
        points = 0;
      } else if (result.message.includes("alt text") && !result.passed) {
        weight = 5;
        points = 0;
      } else if (result.message.includes("meta description") && !result.passed) {
        weight = 5;
        points = 0;
      } else if (result.message.includes("keyword") && !result.passed && (result.message.includes("density") || result.message.includes("not found in title") || result.message.includes("not found in slug"))) {
        weight = 8;
        points = 0;
      } else if (result.message.includes("content length") && !result.passed) {
        weight = 3;
        points = 0;
      } else if (result.message.includes("title") && !result.passed && (result.message.includes("too short") || result.message.includes("too long"))) {
        weight = 2;
        points = 0;
      } else if (result.message.includes("reading level") && !result.passed) {
        weight = 1;
        points = 0;
      } else if (result.severity === "warning" && !result.passed) {
        weight = 1;
        points = 0;
      } else if (result.passed) {
        points = 100;
      }
      weightedScore += points * weight;
      totalWeight += weight;
    });
    const baseScore = totalWeight > 0 ? weightedScore / totalWeight : 100;
    let additionalPenalty = 0;
    const brokenLinks = allResults.filter(
      (r) => r.severity === "error" && !r.passed && r.message.includes("Broken link")
    ).length;
    additionalPenalty += Math.min(brokenLinks * 2, 10);
    const missingAltText = allResults.filter(
      (r) => r.severity === "error" && !r.passed && r.message.includes("alt text")
    ).length;
    additionalPenalty += Math.min(missingAltText * 1, 5);
    const warnings = allResults.filter((r) => r.severity === "warning" && !r.passed).length;
    additionalPenalty += Math.min(warnings * 0.5, 5);
    additionalPenalty = Math.min(additionalPenalty, 20);
    overallScore = Math.max(40, Math.min(100, baseScore - additionalPenalty));
  }
  return {
    file: file.path,
    displayName: getDisplayName(file, content, plugin.settings),
    checks,
    overallScore,
    issuesCount,
    warningsCount,
    noticesCount
  };
}
async function generateFileHash(file, app) {
  try {
    const content = await app.vault.read(file);
    const stat = await app.vault.adapter.stat(file.path);
    return `${content.length}-${(stat == null ? void 0 : stat.mtime) || Date.now()}`;
  } catch (e) {
    return `${Date.now()}`;
  }
}
function generateSettingsHash(settings) {
  const relevantSettings = {
    keywordProperty: settings.keywordProperty || "",
    keywordDensityMin: settings.keywordDensityMin,
    keywordDensityMax: settings.keywordDensityMax,
    descriptionProperty: settings.descriptionProperty || "",
    titleProperty: settings.titleProperty || "",
    useFilenameAsTitle: settings.useFilenameAsTitle,
    checkContentLength: settings.checkContentLength,
    minContentLength: settings.minContentLength,
    scanDirectories: settings.scanDirectories || "",
    enableMDXSupport: settings.enableMDXSupport,
    // External link checking settings
    checkExternalLinks: settings.checkExternalLinks,
    enableExternalLinkVaultCheck: settings.enableExternalLinkVaultCheck,
    checkPotentiallyBrokenLinks: settings.checkPotentiallyBrokenLinks,
    checkPotentiallyBrokenEmbeds: settings.checkPotentiallyBrokenEmbeds,
    // Other SEO check settings
    checkAltText: settings.checkAltText,
    checkBrokenLinks: settings.checkBrokenLinks,
    checkNakedLinks: settings.checkNakedLinks,
    checkHeadingOrder: settings.checkHeadingOrder,
    checkTitleLength: settings.checkTitleLength,
    checkImageNaming: settings.checkImageNaming,
    checkDuplicateContent: settings.checkDuplicateContent,
    checkReadingLevel: settings.checkReadingLevel,
    // Thresholds that affect results
    duplicateThreshold: settings.duplicateThreshold
    // Add other settings that affect SEO results
  };
  return JSON.stringify(relevantSettings);
}
function getCachedResult(file, plugin) {
  const entry = cache.get(file.path);
  if (!entry) {
    return null;
  }
  const now = Date.now();
  const isExpired = now - entry.timestamp > CACHE_EXPIRY_MS;
  const currentSettingsHash = generateSettingsHash(plugin.settings);
  const settingsChanged = entry.settingsHash !== currentSettingsHash;
  if (isExpired || settingsChanged) {
    cache.delete(file.path);
    return null;
  }
  return entry.result;
}
async function cacheResult(file, result, plugin) {
  const fileHash = await generateFileHash(file, plugin.app);
  const settingsHash = generateSettingsHash(plugin.settings);
  cache.set(file.path, {
    result,
    timestamp: Date.now(),
    fileHash,
    settingsHash
  });
}
function clearCache() {
  cache.clear();
}
function getCacheStats() {
  return { size: cache.size };
}
function clearCacheForFile(filePath) {
  cache.delete(filePath);
}
function clearAllCache() {
  cache.clear();
}
var cache, CACHE_EXPIRY_MS;
var init_seo_checker = __esm({
  "src/seo-checker.ts"() {
    "use strict";
    init_checks();
    init_content_checks();
    init_duplicate_detection();
    cache = /* @__PURE__ */ new Map();
    CACHE_EXPIRY_MS = 24 * 60 * 60 * 1e3;
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => SEOPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian9 = require("obsidian");

// src/settings.ts
var DEFAULT_SETTINGS = {
  scanDirectories: "",
  ignoreUnderscoreFiles: false,
  enableMDXSupport: false,
  keywordProperty: "",
  descriptionProperty: "",
  titleProperty: "",
  useFilenameAsTitle: false,
  slugProperty: "",
  useFilenameAsSlug: false,
  parentFolderSlugFilename: "",
  titlePrefixSuffix: "",
  checkTitleLength: true,
  checkHeadingOrder: true,
  checkAltText: true,
  checkImageNaming: true,
  checkBrokenLinks: true,
  checkExternalLinks: true,
  enableExternalLinkButton: true,
  enableExternalLinkVaultCheck: false,
  checkNakedLinks: true,
  checkContentLength: true,
  checkDuplicateContent: false,
  checkReadingLevel: true,
  checkPotentiallyBrokenLinks: true,
  checkPotentiallyBrokenEmbeds: true,
  useNoteTitles: false,
  skipH1Check: false,
  publishMode: false,
  defaultSort: "issues-desc",
  showRibbonIcon: true,
  minContentLength: 300,
  keywordDensityMin: 1,
  keywordDensityMax: 2,
  duplicateThreshold: 80,
  cachedGlobalResults: [],
  lastScanTimestamp: 0
};

// src/commands/index.ts
function registerCommands(plugin) {
  plugin.addCommand({
    id: "open-current",
    name: "Open current note audit",
    icon: "search-check",
    callback: () => {
      plugin.openCurrentPanel();
    }
  });
  plugin.addCommand({
    id: "open-global",
    name: "Open vault audit",
    icon: "search-check",
    callback: () => {
      plugin.openGlobalPanel();
    }
  });
  plugin.addCommand({
    id: "run-current",
    name: "Run current note audit",
    icon: "search-check",
    callback: () => {
      plugin.openCurrentPanel();
      setTimeout(() => {
        const currentPanel = plugin.app.workspace.getLeavesOfType("seo-current-panel")[0];
        if (currentPanel && currentPanel.view) {
          const checkBtn = currentPanel.view.containerEl.querySelector(".seo-top-btn");
          if (checkBtn) {
            checkBtn.click();
          }
        }
      }, 200);
    }
  });
  plugin.addCommand({
    id: "run-global",
    name: "Run vault audit",
    icon: "search-check",
    callback: () => {
      plugin.openGlobalPanel();
      void setTimeout(() => {
        void (async () => {
          const globalPanels = plugin.app.workspace.getLeavesOfType("seo-global-panel");
          if (globalPanels.length === 0) {
            plugin.openGlobalPanel();
            return;
          }
          const panel = globalPanels[0];
          if (panel == null ? void 0 : panel.view) {
            const seoPanel = panel.view;
            await seoPanel.actions.refreshGlobalResults();
            seoPanel.render();
          }
        })();
      }, 300);
    }
  });
}

// src/settings-tab.ts
var import_obsidian2 = require("obsidian");

// src/utils/settings-compat.ts
var import_obsidian = require("obsidian");
var ObsidianModule = __toESM(require("obsidian"), 1);
function createSettingsGroup(containerEl, heading, manifestId) {
  if ((0, import_obsidian.requireApiVersion)("1.11.0")) {
    const SettingGroupClass = ObsidianModule.SettingGroup;
    if (SettingGroupClass) {
      const group = heading ? new SettingGroupClass(containerEl).setHeading(heading) : new SettingGroupClass(containerEl);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  if (manifestId) {
    containerEl.addClass(`${manifestId}-settings-compat`);
  }
  {
    if (heading) {
      const headingEl = containerEl.createDiv("setting-group-heading");
      headingEl.createEl("h3", { text: heading });
    }
    return {
      addSetting(cb) {
        const setting = new import_obsidian.Setting(containerEl);
        cb(setting);
      }
    };
  }
}

// src/settings-tab.ts
var SEOSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    const globalGroup = createSettingsGroup(containerEl, "Global", "seo");
    globalGroup.addSetting((setting) => {
      setting.setName("Scan directories").setDesc("Comma-separated list of directory names to scan. Leave blank to scan all directories.").addText((text) => {
        text.setPlaceholder("like blog, posts, public");
        text.setValue(this.plugin.settings.scanDirectories);
        text.onChange(async (value) => {
          this.plugin.settings.scanDirectories = value;
          await this.plugin.saveSettings();
        });
      });
    });
    globalGroup.addSetting((setting) => {
      setting.setName("Use note titles instead of file names").setDesc("Display note titles from properties instead of file names in the issues list and current note audit").addToggle((toggle) => toggle.setValue(this.plugin.settings.useNoteTitles).onChange(async (value) => {
        this.plugin.settings.useNoteTitles = value;
        await this.plugin.saveSettings();
      }));
    });
    globalGroup.addSetting((setting) => {
      setting.setName("Title prefix / suffix").setDesc("Specify an optional prefix or suffix that gets appended to your meta title - used to factor in character count for the title length check").addText((text) => text.setPlaceholder("Author name").setValue(this.plugin.settings.titlePrefixSuffix).onChange(async (value) => {
        this.plugin.settings.titlePrefixSuffix = value;
        await this.plugin.saveSettings();
      }));
    });
    globalGroup.addSetting((setting) => {
      setting.setName("Ignores files with an underscore prefix").setDesc("Don't process files that begin with an underscore, like _example.md").addToggle((toggle) => toggle.setValue(this.plugin.settings.ignoreUnderscoreFiles).onChange(async (value) => {
        this.plugin.settings.ignoreUnderscoreFiles = value;
        await this.plugin.saveSettings();
      }));
    });
    globalGroup.addSetting((setting) => {
      setting.setName("Enable MDX file support").setDesc("Process MDX files in addition to Markdown files. MDX files use the same frontmatter format as Markdown.").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableMDXSupport).onChange(async (value) => {
        this.plugin.settings.enableMDXSupport = value;
        await this.plugin.saveSettings();
      }));
    });
    globalGroup.addSetting((setting) => {
      setting.setName("Show ribbon icon").setDesc("Show or hide the wizard icon in the left sidebar ribbon").addToggle((toggle) => toggle.setValue(this.plugin.settings.showRibbonIcon).onChange(async (value) => {
        this.plugin.settings.showRibbonIcon = value;
        await this.plugin.saveSettings();
        this.plugin.toggleRibbonIcon();
      }));
    });
    const propertyNamesGroup = createSettingsGroup(containerEl, "Property names", "seo");
    propertyNamesGroup.addSetting((setting) => {
      setting.setName("Keyword property").setDesc("Property name for target keyword (targetKeyword, seo, keyword, etc.)").addText((text) => {
        text.setPlaceholder("targetKeyword");
        text.setValue(this.plugin.settings.keywordProperty);
        text.onChange(async (value) => {
          this.plugin.settings.keywordProperty = value;
          await this.plugin.saveSettings();
        });
      });
    });
    propertyNamesGroup.addSetting((setting) => {
      setting.setName("Description property").setDesc("Property name for meta description").addText((text) => {
        text.setPlaceholder("description");
        text.setValue(this.plugin.settings.descriptionProperty);
        text.onChange(async (value) => {
          this.plugin.settings.descriptionProperty = value;
          await this.plugin.saveSettings();
        });
      });
    });
    propertyNamesGroup.addSetting((setting) => {
      setting.setName("Title property").setDesc("Property name for title (leave blank to skip title checks)").addText((text) => {
        text.setPlaceholder("title");
        text.setValue(this.plugin.settings.titleProperty);
        text.onChange(async (value) => {
          this.plugin.settings.titleProperty = value;
          await this.plugin.saveSettings();
        });
      });
    });
    propertyNamesGroup.addSetting((setting) => {
      setting.setName("Use file name as title").setDesc("Use file name as title instead of a property").addToggle((toggle) => toggle.setValue(this.plugin.settings.useFilenameAsTitle).onChange(async (value) => {
        this.plugin.settings.useFilenameAsTitle = value;
        await this.plugin.saveSettings();
      }));
    });
    propertyNamesGroup.addSetting((setting) => {
      setting.setName("Slug property").setDesc("Property name for slug (leave blank to skip slug checks)").addText((text) => {
        text.setPlaceholder("slug");
        text.setValue(this.plugin.settings.slugProperty);
        text.onChange(async (value) => {
          this.plugin.settings.slugProperty = value;
          await this.plugin.saveSettings();
        });
      });
    });
    propertyNamesGroup.addSetting((setting) => {
      setting.setName("Use file/folder name as slug").setDesc("Use file/folder name as slug instead of a property").addToggle((toggle) => toggle.setValue(this.plugin.settings.useFilenameAsSlug).onChange(async (value) => {
        this.plugin.settings.useFilenameAsSlug = value;
        await this.plugin.saveSettings();
        this.display();
      }));
    });
    if (this.plugin.settings.useFilenameAsSlug) {
      propertyNamesGroup.addSetting((setting) => {
        setting.setName("Use parent folder name instead when specified file name is used").setDesc("If a markdown file matches this file name, use the parent folder name as the slug instead").addText((text) => {
          text.setPlaceholder("index");
          text.setValue(this.plugin.settings.parentFolderSlugFilename);
          text.onChange(async (value) => {
            this.plugin.settings.parentFolderSlugFilename = value;
            await this.plugin.saveSettings();
          });
        });
      });
    }
    const auditOptionsGroup = createSettingsGroup(containerEl, "Audit options", "seo");
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check meta title length").setDesc("Enable meta title length checking").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkTitleLength).onChange(async (value) => {
        this.plugin.settings.checkTitleLength = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check heading order").setDesc("Enable heading hierarchy checking").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkHeadingOrder).onChange(async (value) => {
        this.plugin.settings.checkHeadingOrder = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check content length").setDesc("Enable content length checking").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkContentLength).onChange(async (value) => {
        this.plugin.settings.checkContentLength = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check duplicate content").setDesc("Enable duplicate content detection").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkDuplicateContent).onChange(async (value) => {
        this.plugin.settings.checkDuplicateContent = value;
        await this.plugin.saveSettings();
      }));
      setting.descEl.createEl("div", {
        // eslint-disable-next-line obsidianmd/ui/sentence-case
        text: "Warning: This feature can be very resource-intensive with large vaults and many notes. Disable for faster audits.",
        cls: "setting-item-description seo-warning-message"
      });
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check alt text").setDesc("Enable alt text checking for media content (images, videos, embeds, etc.)").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkAltText).onChange(async (value) => {
        this.plugin.settings.checkAltText = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check image file names").setDesc("Enable image file name checking").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkImageNaming).onChange(async (value) => {
        this.plugin.settings.checkImageNaming = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check broken internal links").setDesc("Enable broken internal link detection").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkBrokenLinks).onChange(async (value) => {
        this.plugin.settings.checkBrokenLinks = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check external links").setDesc("Return a list of external links").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkExternalLinks).onChange(async (value) => {
        this.plugin.settings.checkExternalLinks = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Enable broken external link check button").setDesc('Show "Check external links for 404s" button in current note panel').addToggle((toggle) => toggle.setValue(this.plugin.settings.enableExternalLinkButton).onChange(async (value) => {
        this.plugin.settings.enableExternalLinkButton = value;
        await this.plugin.saveSettings();
        if (this.plugin.sidePanel) {
          this.plugin.sidePanel.refresh();
        }
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check naked links").setDesc("Enable naked URL detection").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkNakedLinks).onChange(async (value) => {
        this.plugin.settings.checkNakedLinks = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check reading level").setDesc("Enable reading level analysis").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkReadingLevel).onChange(async (value) => {
        this.plugin.settings.checkReadingLevel = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check potentially broken links").setDesc("Check for potentially broken internal links that may not work on web publishing").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkPotentiallyBrokenLinks).onChange(async (value) => {
        this.plugin.settings.checkPotentiallyBrokenLinks = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check potentially broken embeds").setDesc("Check for potentially broken markdown or wikilink-based embedded media that may not work on web publishing").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkPotentiallyBrokenEmbeds).onChange(async (value) => {
        this.plugin.settings.checkPotentiallyBrokenEmbeds = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Flexible relative link check").setDesc("Uses flexible validation for relative paths like /page that can be resolved by a static site generator, but may be considered broken by typical Obsidian validation").addToggle((toggle) => toggle.setValue(this.plugin.settings.publishMode).onChange(async (value) => {
        this.plugin.settings.publishMode = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Title property is H1").setDesc("Enable when your static site generator uses the title property to automatically generate the H1 heading. This prevents H1 validation errors while still flagging H1s that appear after other heading levels.").addToggle((toggle) => toggle.setValue(this.plugin.settings.skipH1Check).onChange(async (value) => {
        this.plugin.settings.skipH1Check = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Automatically include broken external link checks in audits (not recommended)").setDesc("Include broken external link checking in vault-wide and current note audits").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableExternalLinkVaultCheck).onChange(async (value) => {
        this.plugin.settings.enableExternalLinkVaultCheck = value;
        await this.plugin.saveSettings();
        if (this.plugin.sidePanel) {
          this.plugin.sidePanel.refresh();
        }
      }));
      setting.descEl.createEl("div", {
        // eslint-disable-next-line obsidianmd/ui/sentence-case
        text: 'Warning: This will make vault audits extremely slow. Use the "Check external links" button instead for individual notes.',
        cls: "setting-item-description seo-warning-message"
      });
    });
    const thresholdsGroup = createSettingsGroup(containerEl, "Thresholds", "seo");
    thresholdsGroup.addSetting((setting) => {
      setting.setName("Minimum content length").setDesc("Minimum word count for content length check").addText((text) => text.setPlaceholder("300").setValue(this.plugin.settings.minContentLength.toString()).onChange(async (value) => {
        const num = parseInt(value);
        if (!isNaN(num)) {
          this.plugin.settings.minContentLength = num;
          await this.plugin.saveSettings();
        }
      }));
    });
    thresholdsGroup.addSetting((setting) => {
      setting.setName("Keyword density minimum").setDesc("Minimum keyword density percentage").addText((text) => text.setPlaceholder("1").setValue(this.plugin.settings.keywordDensityMin.toString()).onChange(async (value) => {
        const num = parseFloat(value);
        if (!isNaN(num)) {
          this.plugin.settings.keywordDensityMin = num;
          await this.plugin.saveSettings();
        }
      }));
    });
    thresholdsGroup.addSetting((setting) => {
      setting.setName("Keyword density maximum").setDesc("Maximum keyword density percentage").addText((text) => text.setPlaceholder("2").setValue(this.plugin.settings.keywordDensityMax.toString()).onChange(async (value) => {
        const num = parseFloat(value);
        if (!isNaN(num)) {
          this.plugin.settings.keywordDensityMax = num;
          await this.plugin.saveSettings();
        }
      }));
    });
    thresholdsGroup.addSetting((setting) => {
      setting.setName("Duplicate content threshold").setDesc("Similarity percentage threshold for duplicate content detection").addText((text) => text.setPlaceholder("80").setValue(this.plugin.settings.duplicateThreshold.toString()).onChange(async (value) => {
        const num = parseInt(value);
        if (!isNaN(num)) {
          this.plugin.settings.duplicateThreshold = num;
          await this.plugin.saveSettings();
        }
      }));
    });
  }
};

// src/ui/side-panel.ts
var import_obsidian6 = require("obsidian");

// src/ui/panel-constants.ts
var SEOCurrentPanelViewType = "seo-current-panel";
var SEOGlobalPanelViewType = "seo-global-panel";

// src/ui/side-panel.ts
init_panel_utils();

// src/ui/panel-actions.ts
var import_obsidian4 = require("obsidian");
init_panel_utils();

// src/utils/file-utils.ts
function isSupportedFile(file, settings) {
  const extension = file.extension.toLowerCase();
  if (extension === "md") {
    return true;
  }
  if (extension === "mdx" && settings.enableMDXSupport) {
    return true;
  }
  return false;
}

// src/ui/panel-actions.ts
var PanelActions = class {
  constructor(app, plugin, panelType) {
    this.app = app;
    this.plugin = plugin;
    this.panelType = panelType;
  }
  async runInitialScan() {
    try {
      const files = await this.plugin.getFilesToCheck();
      if (files.length === 0) {
        return [];
      }
      if (files.length > 20) {
        new import_obsidian4.Notice(`Running SEO audit on ${files.length} files... This may take a moment.`);
      }
      const { runSEOCheck: runSEOCheck2 } = await Promise.resolve().then(() => (init_seo_checker(), seo_checker_exports));
      const results = await runSEOCheck2(this.plugin, files);
      this.plugin.settings.cachedGlobalResults = results;
      this.plugin.settings.lastScanTimestamp = Date.now();
      await this.plugin.saveSettings();
      new import_obsidian4.Notice(`SEO audit complete with ${results.length} files.`);
      return results;
    } catch (error) {
      console.error("Error running initial scan:", error);
      new import_obsidian4.Notice("Error analyzing files. Check console for details.");
      return [];
    }
  }
  async checkCurrentNote(abortSignal) {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile || !isSupportedFile(activeFile, this.plugin.settings)) {
      new import_obsidian4.Notice("Please open a markdown or MDX file first.");
      return null;
    }
    try {
      const { clearCacheForFile: clearCacheForFile2 } = await Promise.resolve().then(() => (init_seo_checker(), seo_checker_exports));
      clearCacheForFile2(activeFile.path);
      const { runSEOCheck: runSEOCheck2 } = await Promise.resolve().then(() => (init_seo_checker(), seo_checker_exports));
      const results = await runSEOCheck2(this.plugin, [activeFile], abortSignal ? { signal: abortSignal } : void 0);
      if (results.length > 0) {
        new import_obsidian4.Notice("SEO audit complete.");
        return results[0] || null;
      }
      return null;
    } catch (error) {
      if (error instanceof Error && error.name === "AbortError") {
        new import_obsidian4.Notice("SEO audit cancelled.");
        throw error;
      }
      console.error("Error checking current note:", error);
      new import_obsidian4.Notice("Error analyzing current note. Check console for details.");
      return null;
    }
  }
  async checkExternalLinks() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile || !isSupportedFile(activeFile, this.plugin.settings)) {
      new import_obsidian4.Notice("Please open a markdown or MDX file first.");
      return null;
    }
    try {
      const originalVaultSetting = this.plugin.settings.enableExternalLinkVaultCheck;
      const originalExternalSetting = this.plugin.settings.checkExternalLinks;
      this.plugin.settings.enableExternalLinkVaultCheck = true;
      this.plugin.settings.checkExternalLinks = false;
      const { clearCacheForFile: clearCacheForFile2 } = await Promise.resolve().then(() => (init_seo_checker(), seo_checker_exports));
      clearCacheForFile2(activeFile.path);
      const { runSEOCheck: runSEOCheck2 } = await Promise.resolve().then(() => (init_seo_checker(), seo_checker_exports));
      const results = await runSEOCheck2(this.plugin, [activeFile]);
      this.plugin.settings.enableExternalLinkVaultCheck = originalVaultSetting;
      this.plugin.settings.checkExternalLinks = originalExternalSetting;
      if (results.length > 0) {
        new import_obsidian4.Notice("External links check complete.");
        return results[0] || null;
      }
      return null;
    } catch (error) {
      console.error("Error checking external links:", error);
      new import_obsidian4.Notice("Error checking external links. Check console for details.");
      return null;
    }
  }
  async refreshGlobalResults(abortSignal) {
    let auditNotice = null;
    try {
      const { clearAllCache: clearAllCache3 } = await Promise.resolve().then(() => (init_seo_checker(), seo_checker_exports));
      clearAllCache3();
      const files = await this.plugin.getFilesToCheck();
      if (files.length === 0) {
        const fileTypeText = this.plugin.settings.enableMDXSupport ? "markdown or MDX files" : "markdown files";
        new import_obsidian4.Notice(`No ${fileTypeText} found in configured directories.`);
        return [];
      }
      if (files.length > 20) {
        auditNotice = new import_obsidian4.Notice(`Refreshing SEO audit on ${files.length} files... This may take a moment.`, 0);
      }
      const { runSEOCheck: runSEOCheck2 } = await Promise.resolve().then(() => (init_seo_checker(), seo_checker_exports));
      const results = await runSEOCheck2(this.plugin, files, abortSignal ? { signal: abortSignal } : void 0);
      this.plugin.settings.cachedGlobalResults = results;
      this.plugin.settings.lastScanTimestamp = Date.now();
      await this.plugin.saveSettings();
      if (auditNotice) {
        auditNotice.hide();
      }
      new import_obsidian4.Notice(`SEO audit complete with ${results.length} files.`);
      return results;
    } catch (error) {
      if (auditNotice) {
        auditNotice.hide();
      }
      if (error instanceof Error && error.name === "AbortError") {
        console.debug("Vault audit cancelled by user");
        new import_obsidian4.Notice("Vault audit cancelled.");
        return [];
      }
      console.error("Error checking all notes:", error);
      new import_obsidian4.Notice("Error analyzing files. Check console for details.");
      return [];
    }
  }
  async openFile(filePath) {
    try {
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file && file instanceof import_obsidian4.TFile) {
        try {
          const leaf = this.app.workspace.getLeaf();
          await leaf.openFile(file);
        } catch (e) {
          await this.app.workspace.openLinkText(filePath, "", true);
        }
      } else {
        new import_obsidian4.Notice(`File not found: ${filePath}
This file may have been renamed or deleted.`);
      }
    } catch (error) {
      console.error(`Error opening file ${filePath}:`, error);
      new import_obsidian4.Notice(`Error opening file: ${filePath}`);
    }
  }
  async openFileAndAudit(filePath) {
    var _a;
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (!file || !(file instanceof import_obsidian4.TFile)) {
      new import_obsidian4.Notice(`File not found: ${filePath}
This file may have been renamed or deleted.`);
      return;
    }
    await this.app.workspace.getLeaf().openFile(file);
    this.plugin.openCurrentPanel();
    await new Promise((resolve) => {
      const checkPanel = () => {
        const currentPanels = this.app.workspace.getLeavesOfType("seo-current-panel");
        if (currentPanels.length > 0) {
          const currentPanel = currentPanels[0];
          if (currentPanel && currentPanel.view) {
            this.app.workspace.setActiveLeaf(currentPanel);
            if (currentPanel.view instanceof SEOSidePanel) {
              currentPanel.view.render();
            }
            resolve();
          } else {
            setTimeout(checkPanel, 50);
          }
        } else {
          setTimeout(checkPanel, 50);
        }
      };
      checkPanel();
    });
    try {
      if (!SEOSidePanel.globalAuditController) {
        SEOSidePanel.globalAuditController = new AbortController();
      }
      await new Promise((resolve) => setTimeout(resolve, 100));
      const currentPanels = this.app.workspace.getLeavesOfType("seo-current-panel");
      if (currentPanels.length > 0) {
        const currentPanel = currentPanels[0];
        if (currentPanel && currentPanel.view) {
          const refreshBtn = currentPanel.view.containerEl.querySelector("button[data-refresh-btn]");
          if (refreshBtn) {
            refreshBtn.disabled = true;
            refreshBtn.textContent = "Auditing...";
          }
        }
      }
      const results = await this.checkCurrentNote((_a = SEOSidePanel.globalAuditController) == null ? void 0 : _a.signal);
      if (results) {
        if (this.plugin.sidePanel && this.plugin.sidePanel.panelType === "current") {
          this.plugin.sidePanel.currentNoteResults = results;
          this.plugin.sidePanel.render();
        }
      }
    } catch (error) {
      console.error("Error running audit after opening file:", error);
    } finally {
      const currentPanels = this.app.workspace.getLeavesOfType("seo-current-panel");
      if (currentPanels.length > 0) {
        const currentPanel = currentPanels[0];
        if (currentPanel && currentPanel.view) {
          const refreshBtn = currentPanel.view.containerEl.querySelector("button[data-refresh-btn]");
          if (refreshBtn) {
            refreshBtn.disabled = false;
            refreshBtn.textContent = "Refresh";
          }
        }
      }
    }
  }
  showSortMenu(event, issuesFiles, issuesList, currentSort, onSortChange, settings) {
    const menu = new import_obsidian4.Menu();
    const showNotices = settings ? settings.checkPotentiallyBrokenLinks && settings.checkPotentiallyBrokenEmbeds : true;
    const displaySort = !showNotices && (currentSort === "notices-desc" || currentSort === "notices-asc") ? "issues-desc" : currentSort;
    menu.addItem((item) => {
      item.setTitle("Issues (high to low)").onClick(() => {
        onSortChange("issues-desc");
        this.sortAndRenderFiles(issuesFiles, issuesList, "issues-desc", settings);
      });
      if (displaySort === "issues-desc") {
        item.setIcon("check");
      }
    });
    menu.addItem((item) => {
      item.setTitle("Issues (low to high)").onClick(() => {
        onSortChange("issues-asc");
        this.sortAndRenderFiles(issuesFiles, issuesList, "issues-asc", settings);
      });
      if (displaySort === "issues-asc") {
        item.setIcon("check");
      }
    });
    menu.addSeparator();
    menu.addItem((item) => {
      item.setTitle("Warnings (high to low)").onClick(() => {
        onSortChange("warnings-desc");
        this.sortAndRenderFiles(issuesFiles, issuesList, "warnings-desc", settings);
      });
      if (displaySort === "warnings-desc") {
        item.setIcon("check");
      }
    });
    menu.addItem((item) => {
      item.setTitle("Warnings (low to high)").onClick(() => {
        onSortChange("warnings-asc");
        this.sortAndRenderFiles(issuesFiles, issuesList, "warnings-asc", settings);
      });
      if (displaySort === "warnings-asc") {
        item.setIcon("check");
      }
    });
    menu.addSeparator();
    if (showNotices) {
      menu.addItem((item) => {
        item.setTitle("Notices (high to low)").onClick(() => {
          onSortChange("notices-desc");
          this.sortAndRenderFiles(issuesFiles, issuesList, "notices-desc", settings);
        });
        if (displaySort === "notices-desc") {
          item.setIcon("check");
        }
      });
      menu.addItem((item) => {
        item.setTitle("Notices (low to high)").onClick(() => {
          onSortChange("notices-asc");
          this.sortAndRenderFiles(issuesFiles, issuesList, "notices-asc", settings);
        });
        if (displaySort === "notices-asc") {
          item.setIcon("check");
        }
      });
      menu.addSeparator();
    }
    menu.addItem((item) => {
      item.setTitle("File name (A to Z)").onClick(() => {
        onSortChange("filename-asc");
        this.sortAndRenderFiles(issuesFiles, issuesList, "filename-asc", settings);
      });
      if (displaySort === "filename-asc") {
        item.setIcon("check");
      }
    });
    menu.addItem((item) => {
      item.setTitle("File name (Z to A)").onClick(() => {
        onSortChange("filename-desc");
        this.sortAndRenderFiles(issuesFiles, issuesList, "filename-desc", settings);
      });
      if (displaySort === "filename-desc") {
        item.setIcon("check");
      }
    });
    menu.showAtPosition({ x: event.clientX, y: event.clientY });
  }
  sortAndRenderFiles(issuesFiles, issuesList, sortType, settings) {
    const sortedFiles = sortFiles([...issuesFiles], sortType);
    const filesListContainer = issuesList.querySelector(".seo-files-list-container");
    if (!filesListContainer) return;
    filesListContainer.querySelectorAll(".seo-file-issue").forEach((el) => el.remove());
    this.renderFilesList(sortedFiles, filesListContainer, settings);
  }
  renderFilesList(files, container, settings) {
    files.forEach((result) => {
      const fileEl = container.createEl("div", { cls: "seo-file-issue" });
      fileEl.setAttribute("data-file-path", result.file);
      const fileLink = fileEl.createEl("a", {
        text: result.displayName || this.getDisplayPath(result.file),
        cls: "seo-file-link",
        href: "#"
      });
      fileLink.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        void this.openFile(result.file);
      });
      const statsContainer = fileEl.createEl("div", { cls: "seo-stats-container" });
      const showNotices = settings ? settings.checkPotentiallyBrokenLinks && settings.checkPotentiallyBrokenEmbeds : true;
      const statsText = [];
      if (result.issuesCount > 0) statsText.push(`${result.issuesCount} issues`);
      if (result.warningsCount > 0) statsText.push(`${result.warningsCount} warnings`);
      if (showNotices && result.noticesCount > 0) statsText.push(`${result.noticesCount} notices`);
      statsContainer.createEl("span", {
        text: statsText.join(", "),
        cls: "seo-file-stats"
      });
      const auditBtn = statsContainer.createEl("button", {
        cls: "clickable-icon seo-audit-btn",
        attr: { "aria-label": "Audit this note" }
      });
      (0, import_obsidian4.setIcon)(auditBtn, "search-check");
      auditBtn.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        void (async () => {
          await this.openFileAndAudit(result.file);
        })();
      });
    });
  }
  getDisplayPath(fullPath) {
    const cleanPath = fullPath.startsWith("/") ? fullPath.slice(1) : fullPath;
    const parts = cleanPath.split("/");
    if (parts.length <= 1) {
      return cleanPath;
    }
    return parts.slice(-2).join("/");
  }
};

// src/ui/results-display.ts
var import_obsidian5 = require("obsidian");
init_panel_utils();
function createCollapseIcon() {
  const iconEl = document.createElement("span");
  (0, import_obsidian5.setIcon)(iconEl, "chevron-down");
  return iconEl;
}
var ResultsDisplay = class {
  // Track individual item collapse states
  constructor(container, onFileClick, onFileAudit) {
    this.container = container;
    this.onFileClick = onFileClick;
    this.onFileAudit = onFileAudit;
    this.isCollapsed = false;
    // Track collapse state (false = expanded, true = collapsed)
    this.individualCollapseStates = /* @__PURE__ */ new Map();
  }
  // Method to update the container (needed for reusing instances)
  updateContainer(newContainer) {
    this.container = newContainer;
  }
  // Navigation method to jump to specific positions in the note
  async navigateToPosition(position) {
    var _a;
    try {
      const app = window.app;
      if (!app) {
        console.warn("Obsidian app not found");
        return;
      }
      const activeFile = app.workspace.getActiveFile();
      if (!activeFile) {
        console.warn("No active file found for navigation");
        return;
      }
      await this.onFileClick(activeFile.path);
      let markdownView = null;
      let editor = null;
      if (app.workspace.getLeavesOfType) {
        const leaves = app.workspace.getLeavesOfType("markdown");
        if (leaves.length > 0) {
          markdownView = (_a = leaves[0]) == null ? void 0 : _a.view;
        }
      }
      if (!markdownView) {
        app.workspace.iterateAllLeaves((leaf) => {
          if (leaf.view && "editor" in leaf.view && !markdownView) {
            markdownView = leaf.view;
          }
        });
      }
      if (!markdownView) {
        console.warn("No markdown view found");
        return;
      }
      if (typeof markdownView === "object" && markdownView !== null && "editor" in markdownView) {
        editor = markdownView.editor;
      }
      if (!editor) {
        console.warn("No editor found in markdown view");
        return;
      }
      if (typeof editor !== "object" || editor === null) {
        console.warn("Editor is not an object");
        return;
      }
      const editorObj = editor;
      if (position.line && editorObj.setCursor) {
        const lineIndex = Math.max(0, position.line - 1);
        editorObj.setCursor({ line: lineIndex, ch: 0 });
        if (editorObj.scrollIntoView) {
          try {
            editorObj.scrollIntoView({ line: lineIndex, ch: 0 });
          } catch (e) {
            try {
              editorObj.scrollIntoView(lineIndex);
            } catch (e2) {
            }
          }
        }
        if (editorObj.getLine && editorObj.addHighlights && editorObj.removeHighlights) {
          try {
            const lineLength = editorObj.getLine(lineIndex).length;
            editorObj.addHighlights([{
              from: { line: lineIndex, ch: 0 },
              to: { line: lineIndex, ch: lineLength }
            }]);
            setTimeout(() => {
              try {
                if (editorObj.removeHighlights) {
                  editorObj.removeHighlights();
                }
              } catch (e) {
              }
            }, 2e3);
          } catch (e) {
          }
        }
      }
    } catch (error) {
      console.error("Error navigating to position:", error);
    }
  }
  renderResults(results) {
    let filteredNoticesCount = results.noticesCount;
    const scoreEl = this.container.createEl("div", { cls: "seo-score-header" });
    const scoreText = scoreEl.createEl("div", { cls: "seo-score-text" });
    scoreText.createEl("span", { text: "Score: " });
    const scoreNumber = scoreText.createEl("span", { text: `${Math.round(results.overallScore)}%` });
    if (results.overallScore >= 80) {
      scoreNumber.addClass("seo-score-excellent");
    } else if (results.overallScore >= 60) {
      scoreNumber.addClass("seo-score-good");
    } else if (results.overallScore >= 40) {
      scoreNumber.addClass("seo-score-fair");
    } else {
      scoreNumber.addClass("seo-score-poor");
    }
    if (results.issuesCount > 0 || results.warningsCount > 0 || filteredNoticesCount > 0) {
      scoreText.createEl("span", { text: ` (` });
      scoreText.createEl("span", {
        text: `${results.issuesCount} issues`,
        cls: "seo-issues-count-text"
      });
      scoreText.createEl("span", { text: ", " });
      scoreText.createEl("span", {
        text: `${results.warningsCount} warnings`,
        cls: "seo-warnings-count-text"
      });
      if (filteredNoticesCount > 0) {
        scoreText.createEl("span", { text: ", " });
        scoreText.createEl("span", {
          text: `${filteredNoticesCount} notices`,
          cls: "seo-notices-count-text"
        });
      }
      scoreText.createEl("span", { text: ")" });
    } else {
      scoreText.createEl("span", {
        // eslint-disable-next-line obsidianmd/ui/sentence-case
        text: " (All checks passed!)",
        cls: "seo-success"
      });
    }
    const toggleBtn = scoreEl.createEl("div", { cls: "seo-toggle-icon" });
    (0, import_obsidian5.setIcon)(toggleBtn, this.isCollapsed ? "chevrons-up-down" : "chevrons-down-up");
    toggleBtn.addEventListener("mousedown", (e) => {
      e.preventDefault();
      e.stopPropagation();
      this.isCollapsed = !this.isCollapsed;
      (0, import_obsidian5.setIcon)(toggleBtn, this.isCollapsed ? "chevrons-up-down" : "chevrons-down-up");
      this.toggleChecksVisibility();
    });
    const checksContainer = this.container.createEl("div", { cls: "seo-checks" });
    Object.entries(results.checks).forEach(([checkName, checkResults]) => {
      if (checkResults.length === 0) return;
      const checkHasErrors = checkResults.some((r) => r.severity === "error");
      const checkHasWarnings = checkResults.some((r) => r.severity === "warning");
      const checkHasNotices = checkResults.some((r) => r.severity === "notice");
      const checkHasOnlyInfo = checkResults.every((r) => r.severity === "info");
      let statusClass = "seo-passed";
      if (checkHasErrors) {
        statusClass = "seo-error";
      } else if (checkHasWarnings) {
        statusClass = "seo-warning";
      } else if (checkHasNotices) {
        statusClass = "seo-notice";
      } else if (checkHasOnlyInfo) {
        statusClass = "seo-passed";
      }
      const checkEl = checksContainer.createEl("div", { cls: `seo-check ${statusClass}` });
      const header = checkEl.createEl("div", { cls: "seo-check-header seo-collapsible-header" });
      header.setAttribute("data-check-name", checkName);
      let displayName = checkName.replace(/([A-Z])/g, " $1").trim().replace(/^./, (str) => str.toUpperCase());
      if (checkName === "brokenLinks") {
        displayName = "Broken Internal Links";
      } else if (checkName === "externalBrokenLinks") {
        const hasNotices2 = checkResults.some((r) => r.severity === "notice");
        const hasErrors2 = checkResults.some((r) => r.severity === "error");
        if (hasNotices2 && !hasErrors2) {
          displayName = "External Links";
        } else {
          displayName = "External Broken Links";
        }
      } else if (checkName === "duplicateTitles") {
        displayName = "Duplicate Titles";
      } else if (checkName === "duplicateDescriptions") {
        displayName = "Duplicate Descriptions";
      } else if (checkName === "duplicateContent") {
        displayName = "Duplicate Content";
      }
      const collapseIcon = header.createEl("span", { cls: "seo-collapse-icon" });
      collapseIcon.appendChild(createCollapseIcon());
      header.createEl("span", { text: displayName });
      const statusIcon = header.createEl("span", { cls: "seo-status" });
      const hasErrors = checkResults.some((r) => r.severity === "error");
      const hasWarnings = checkResults.some((r) => r.severity === "warning");
      const hasNotices = checkResults.some((r) => r.severity === "notice");
      if (hasErrors) {
        (0, import_obsidian5.setIcon)(statusIcon, "x-circle");
      } else if (hasWarnings) {
        (0, import_obsidian5.setIcon)(statusIcon, "triangle-alert");
      } else if (hasNotices) {
        (0, import_obsidian5.setIcon)(statusIcon, "info");
      } else {
        (0, import_obsidian5.setIcon)(statusIcon, "circle-check");
      }
      const resultsList = checkEl.createEl("ul", { cls: "seo-results seo-results-list-expanded" });
      const savedCollapseState = this.individualCollapseStates.get(checkName);
      if (savedCollapseState !== void 0) {
        if (savedCollapseState) {
          resultsList.classList.add("seo-results-list-collapsed");
          resultsList.classList.remove("seo-results-list-expanded");
          const icon = collapseIcon.querySelector("svg");
          if (icon) {
            icon.classList.add("seo-collapse-icon-rotated");
            icon.classList.remove("seo-collapse-icon-normal");
          }
        } else {
          resultsList.classList.add("seo-results-list-expanded");
          resultsList.classList.remove("seo-results-list-collapsed");
          const icon = collapseIcon.querySelector("svg");
          if (icon) {
            icon.classList.add("seo-collapse-icon-normal");
            icon.classList.remove("seo-collapse-icon-rotated");
          }
        }
      }
      checkResults.forEach((result) => {
        const li = resultsList.createEl("li", {
          cls: `seo-result seo-${result.severity}`
        });
        if (result.position) {
          const messageEl = li.createEl("span", {
            text: result.message,
            cls: "seo-result-message seo-clickable"
          });
          messageEl.addEventListener("click", (e) => {
            e.preventDefault();
            e.stopPropagation();
            void (async () => {
              await this.navigateToPosition(result.position);
            })();
          });
          messageEl.addClass("seo-clickable-message");
          messageEl.title = "Click to jump to this issue in the note";
        } else {
          li.createEl("span", {
            text: result.message,
            cls: "seo-result-message"
          });
        }
        if (result.suggestion) {
          const suggestionEl = li.createEl("div", {
            cls: "seo-suggestion"
          });
          if (result.suggestion.includes('<a href="#" data-file-path=')) {
            const parser = new DOMParser();
            const doc = parser.parseFromString(result.suggestion, "text/html");
            const body = doc.body;
            while (body.firstChild) {
              suggestionEl.appendChild(body.firstChild);
            }
            suggestionEl.addEventListener("click", (e) => {
              void (async () => {
                const target = e.target;
                if (target && target.tagName === "A" && target.hasAttribute("data-file-path")) {
                  e.preventDefault();
                  e.stopPropagation();
                  const filePath = target.getAttribute("data-file-path");
                  if (filePath) {
                    await this.onFileClick(filePath);
                  }
                }
              })();
            });
          } else {
            suggestionEl.textContent = result.suggestion;
          }
        }
      });
      header.addEventListener("mousedown", (e) => {
        var _a;
        e.preventDefault();
        e.stopPropagation();
        const currentState = (_a = this.individualCollapseStates.get(checkName)) != null ? _a : false;
        const newState = !currentState;
        this.individualCollapseStates.set(checkName, newState);
        if (newState) {
          resultsList.classList.remove("seo-results-list-expanded");
          resultsList.classList.add("seo-results-list-collapsed");
        } else {
          resultsList.classList.remove("seo-results-list-collapsed");
          resultsList.classList.add("seo-results-list-expanded");
        }
        const icon = collapseIcon.querySelector("svg");
        if (icon) {
          if (newState) {
            icon.classList.remove("seo-collapse-icon-normal");
            icon.classList.add("seo-collapse-icon-rotated");
          } else {
            icon.classList.remove("seo-collapse-icon-rotated");
            icon.classList.add("seo-collapse-icon-normal");
          }
        }
        if (!newState) {
          this.isCollapsed = false;
          const toggleBtn2 = this.container.querySelector(".seo-toggle-icon");
          if (toggleBtn2) {
            (0, import_obsidian5.setIcon)(toggleBtn2, "chevrons-down-up");
          }
        }
      });
    });
  }
  renderGlobalResults(results, settings) {
    const summary = this.container.createEl("div", { cls: "seo-vault-summary" });
    const totalFiles = results.length;
    const totalIssues = results.reduce((sum, r) => sum + r.issuesCount, 0);
    const totalWarnings = results.reduce((sum, r) => sum + r.warningsCount, 0);
    const totalNotices = results.reduce((sum, r) => sum + r.noticesCount, 0);
    const avgScore = Math.round(
      results.reduce((sum, r) => sum + r.overallScore, 0) / totalFiles
    );
    const showNotices = settings ? settings.checkPotentiallyBrokenLinks && settings.checkPotentiallyBrokenEmbeds : true;
    const statsGrid = summary.createEl("div", { cls: "seo-stats-grid" });
    const scoreStat = statsGrid.createEl("div", { cls: "seo-stat-item" });
    const scoreNumber = scoreStat.createEl("div", { cls: "seo-stat-number", text: `${avgScore}%` });
    if (avgScore >= 80) {
      scoreNumber.addClass("seo-score-excellent");
    } else if (avgScore >= 60) {
      scoreNumber.addClass("seo-score-good");
    } else if (avgScore >= 40) {
      scoreNumber.addClass("seo-score-fair");
    } else {
      scoreNumber.addClass("seo-score-poor");
    }
    scoreStat.createEl("div", { cls: "seo-stat-label", text: "Average score" });
    const issuesStat = statsGrid.createEl("div", { cls: "seo-stat-item" });
    const issuesNumber = issuesStat.createEl("div", { cls: "seo-stat-number", text: totalIssues.toString() });
    if (totalIssues > 0) {
      issuesNumber.addClass("seo-issues-count");
    }
    issuesStat.createEl("div", { cls: "seo-stat-label", text: "Issues" });
    const warningsStat = statsGrid.createEl("div", { cls: "seo-stat-item" });
    const warningsNumber = warningsStat.createEl("div", { cls: "seo-stat-number", text: totalWarnings.toString() });
    if (totalWarnings > 0) {
      warningsNumber.addClass("seo-warnings-count");
    }
    warningsStat.createEl("div", { cls: "seo-stat-label", text: "Warnings" });
    if (showNotices) {
      const noticesStat = statsGrid.createEl("div", { cls: "seo-stat-item" });
      const noticesNumber = noticesStat.createEl("div", { cls: "seo-stat-number", text: totalNotices.toString() });
      if (totalNotices > 0) {
        noticesNumber.addClass("seo-notices-count");
      }
      noticesStat.createEl("div", { cls: "seo-stat-label", text: "Notices" });
    }
  }
  renderIssuesList(results, currentSort, onSortChange, onShowSortMenu, settings) {
    const showNotices = settings ? settings.checkPotentiallyBrokenLinks && settings.checkPotentiallyBrokenEmbeds : true;
    const issuesFiles = results.filter((r) => {
      const hasIssues = r.issuesCount > 0;
      const hasWarnings = r.warningsCount > 0;
      const hasNotices = showNotices && r.noticesCount > 0;
      return hasIssues || hasWarnings || hasNotices;
    });
    if (issuesFiles.length === 0) return;
    const issuesList = this.container.createEl("div", { cls: "seo-issues-list" });
    const issuesHeader = issuesList.createEl("div", { cls: "seo-issues-header-container" });
    const collapseIcon = issuesHeader.createEl("span", { cls: "seo-collapse-icon seo-collapsible-header" });
    collapseIcon.appendChild(createCollapseIcon());
    issuesHeader.createEl("h4", { text: "Files with results", cls: "seo-issues-header" });
    const sortBtn = issuesHeader.createEl("button", {
      cls: "seo-sort-btn",
      attr: { "aria-label": "Sort files" }
    });
    (0, import_obsidian5.setIcon)(sortBtn, "arrow-up-narrow-wide");
    sortBtn.addEventListener("click", onShowSortMenu);
    const filesListContainer = issuesList.createEl("div", { cls: "seo-files-list-container" });
    const sortedFiles = this.sortFiles(issuesFiles, currentSort);
    sortedFiles.forEach((result) => {
      const fileEl = filesListContainer.createEl("div", { cls: "seo-file-issue" });
      fileEl.setAttribute("data-file-path", result.file);
      const fileLink = fileEl.createEl("a", {
        text: result.displayName || getDisplayPath(result.file),
        cls: "seo-file-link",
        href: "#"
      });
      fileLink.addEventListener("click", (e) => {
        e.preventDefault();
        void (async () => {
          await this.onFileClick(result.file);
        })();
      });
      const statsContainer = fileEl.createEl("div", { cls: "seo-stats-container" });
      const statsText = [];
      if (result.issuesCount > 0) statsText.push(`${result.issuesCount} issues`);
      if (result.warningsCount > 0) statsText.push(`${result.warningsCount} warnings`);
      if (showNotices && result.noticesCount > 0) statsText.push(`${result.noticesCount} notices`);
      statsContainer.createEl("span", {
        text: statsText.join(", "),
        cls: "seo-file-stats"
      });
      const auditBtn = statsContainer.createEl("button", {
        cls: "clickable-icon seo-audit-btn",
        attr: { "aria-label": "Audit this note" }
      });
      (0, import_obsidian5.setIcon)(auditBtn, "search-check");
      auditBtn.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        void (async () => {
          await this.onFileAudit(result.file);
        })();
      });
    });
    collapseIcon.addEventListener("mousedown", (e) => {
      e.preventDefault();
      e.stopPropagation();
      const isCollapsed = filesListContainer.classList.contains("seo-results-list-collapsed");
      if (isCollapsed) {
        filesListContainer.classList.remove("seo-results-list-collapsed");
        filesListContainer.classList.add("seo-results-list-expanded");
      } else {
        filesListContainer.classList.remove("seo-results-list-expanded");
        filesListContainer.classList.add("seo-results-list-collapsed");
      }
      const icon = collapseIcon.querySelector("svg");
      if (icon) {
        if (isCollapsed) {
          icon.classList.remove("seo-collapse-icon-rotated");
          icon.classList.add("seo-collapse-icon-normal");
        } else {
          icon.classList.remove("seo-collapse-icon-normal");
          icon.classList.add("seo-collapse-icon-rotated");
        }
      }
    });
    this.renderPassingFilesList(results, currentSort, showNotices);
  }
  renderPassingFilesList(results, currentSort, showNotices) {
    const passingFiles = results.filter((r) => {
      const hasIssues = r.issuesCount > 0;
      const hasWarnings = r.warningsCount > 0;
      return !hasIssues && !hasWarnings;
    });
    if (passingFiles.length === 0) return;
    const passingList = this.container.createEl("div", { cls: "seo-issues-list" });
    const passingHeader = passingList.createEl("div", { cls: "seo-issues-header-container" });
    const collapseIcon = passingHeader.createEl("span", { cls: "seo-collapse-icon seo-collapsible-header" });
    collapseIcon.appendChild(createCollapseIcon());
    const icon = collapseIcon.querySelector("svg");
    if (icon) {
      icon.classList.add("seo-collapse-icon-rotated");
    }
    const headingContainer = passingHeader.createEl("div", { cls: "seo-heading-center" });
    headingContainer.createEl("h4", { text: "Files that pass", cls: "seo-issues-header" });
    const filesListContainer = passingList.createEl("div", {
      cls: "seo-files-list-container seo-results-list-collapsed"
    });
    const sortedFiles = this.sortFiles(passingFiles, currentSort);
    sortedFiles.forEach((result) => {
      const fileEl = filesListContainer.createEl("div", { cls: "seo-file-issue" });
      fileEl.setAttribute("data-file-path", result.file);
      const fileLink = fileEl.createEl("a", {
        text: result.displayName || getDisplayPath(result.file),
        cls: "seo-file-link",
        href: "#"
      });
      fileLink.addEventListener("click", (e) => {
        e.preventDefault();
        void (async () => {
          await this.onFileClick(result.file);
        })();
      });
      const statsContainer = fileEl.createEl("div", { cls: "seo-stats-container" });
      if (showNotices && result.noticesCount > 0) {
        statsContainer.createEl("span", {
          text: `${result.noticesCount} notices`,
          cls: "seo-file-stats"
        });
      }
      const auditBtn = statsContainer.createEl("button", {
        cls: "clickable-icon seo-audit-btn",
        attr: { "aria-label": "Audit this note" }
      });
      (0, import_obsidian5.setIcon)(auditBtn, "search-check");
      auditBtn.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        void (async () => {
          await this.onFileAudit(result.file);
        })();
      });
    });
    collapseIcon.addEventListener("mousedown", (e) => {
      e.preventDefault();
      e.stopPropagation();
      const isCollapsed = filesListContainer.classList.contains("seo-results-list-collapsed");
      if (isCollapsed) {
        filesListContainer.classList.remove("seo-results-list-collapsed");
        filesListContainer.classList.add("seo-results-list-expanded");
      } else {
        filesListContainer.classList.remove("seo-results-list-expanded");
        filesListContainer.classList.add("seo-results-list-collapsed");
      }
      const icon2 = collapseIcon.querySelector("svg");
      if (icon2) {
        if (isCollapsed) {
          icon2.classList.remove("seo-collapse-icon-rotated");
          icon2.classList.add("seo-collapse-icon-normal");
        } else {
          icon2.classList.remove("seo-collapse-icon-normal");
          icon2.classList.add("seo-collapse-icon-rotated");
        }
      }
    });
  }
  sortFiles(files, sortType) {
    const sortedFiles = [...files];
    switch (sortType) {
      case "notices-desc":
        sortedFiles.sort((a, b) => {
          const noticesCompare = b.noticesCount - a.noticesCount;
          if (noticesCompare !== 0) return noticesCompare;
          const issuesCompare = b.issuesCount - a.issuesCount;
          if (issuesCompare !== 0) return issuesCompare;
          const warningsCompare = b.warningsCount - a.warningsCount;
          if (warningsCompare !== 0) return warningsCompare;
          const aFileName = a.file.split("/").pop() || "";
          const bFileName = b.file.split("/").pop() || "";
          return aFileName.localeCompare(bFileName);
        });
        break;
      case "notices-asc":
        sortedFiles.sort((a, b) => {
          const noticesCompare = a.noticesCount - b.noticesCount;
          if (noticesCompare !== 0) return noticesCompare;
          const issuesCompare = a.issuesCount - b.issuesCount;
          if (issuesCompare !== 0) return issuesCompare;
          const warningsCompare = a.warningsCount - b.warningsCount;
          if (warningsCompare !== 0) return warningsCompare;
          const aFileName = a.file.split("/").pop() || "";
          const bFileName = b.file.split("/").pop() || "";
          return aFileName.localeCompare(bFileName);
        });
        break;
      case "warnings-desc":
        sortedFiles.sort((a, b) => {
          const warningsCompare = b.warningsCount - a.warningsCount;
          if (warningsCompare !== 0) return warningsCompare;
          const issuesCompare = b.issuesCount - a.issuesCount;
          if (issuesCompare !== 0) return issuesCompare;
          const aFileName = a.file.split("/").pop() || "";
          const bFileName = b.file.split("/").pop() || "";
          return aFileName.localeCompare(bFileName);
        });
        break;
      case "warnings-asc":
        sortedFiles.sort((a, b) => {
          const warningsCompare = a.warningsCount - b.warningsCount;
          if (warningsCompare !== 0) return warningsCompare;
          const issuesCompare = a.issuesCount - b.issuesCount;
          if (issuesCompare !== 0) return issuesCompare;
          const aFileName = a.file.split("/").pop() || "";
          const bFileName = b.file.split("/").pop() || "";
          return aFileName.localeCompare(bFileName);
        });
        break;
      case "issues-desc":
        sortedFiles.sort((a, b) => {
          const issuesCompare = b.issuesCount - a.issuesCount;
          if (issuesCompare !== 0) return issuesCompare;
          const warningsCompare = b.warningsCount - a.warningsCount;
          if (warningsCompare !== 0) return warningsCompare;
          const aFileName = a.file.split("/").pop() || "";
          const bFileName = b.file.split("/").pop() || "";
          return aFileName.localeCompare(bFileName);
        });
        break;
      case "issues-asc":
        sortedFiles.sort((a, b) => {
          const issuesCompare = a.issuesCount - b.issuesCount;
          if (issuesCompare !== 0) return issuesCompare;
          const warningsCompare = a.warningsCount - b.warningsCount;
          if (warningsCompare !== 0) return warningsCompare;
          const aFileName = a.file.split("/").pop() || "";
          const bFileName = b.file.split("/").pop() || "";
          return aFileName.localeCompare(bFileName);
        });
        break;
      case "filename-asc":
        sortedFiles.sort((a, b) => {
          const aFileName = a.file.split("/").pop() || "";
          const bFileName = b.file.split("/").pop() || "";
          const fileNameCompare = aFileName.localeCompare(bFileName);
          if (fileNameCompare !== 0) return fileNameCompare;
          const aParts = a.file.split("/");
          const bParts = b.file.split("/");
          const aParent = aParts.length > 1 ? aParts[aParts.length - 2] || "" : "";
          const bParent = bParts.length > 1 ? bParts[bParts.length - 2] || "" : "";
          const parentCompare = aParent.localeCompare(bParent);
          if (parentCompare !== 0) return parentCompare;
          if (b.issuesCount !== a.issuesCount) {
            return b.issuesCount - a.issuesCount;
          }
          if (b.warningsCount !== a.warningsCount) {
            return b.warningsCount - a.warningsCount;
          }
          return b.noticesCount - a.noticesCount;
        });
        break;
      case "filename-desc":
        sortedFiles.sort((a, b) => {
          const aFileName = a.file.split("/").pop() || "";
          const bFileName = b.file.split("/").pop() || "";
          const fileNameCompare = bFileName.localeCompare(aFileName);
          if (fileNameCompare !== 0) return fileNameCompare;
          const aParts = a.file.split("/");
          const bParts = b.file.split("/");
          const aParent = aParts.length > 1 ? aParts[aParts.length - 2] || "" : "";
          const bParent = bParts.length > 1 ? bParts[bParts.length - 2] || "" : "";
          const parentCompare = bParent.localeCompare(aParent);
          if (parentCompare !== 0) return parentCompare;
          if (b.issuesCount !== a.issuesCount) {
            return b.issuesCount - a.issuesCount;
          }
          if (b.warningsCount !== a.warningsCount) {
            return b.warningsCount - a.warningsCount;
          }
          return b.noticesCount - a.noticesCount;
        });
        break;
    }
    return sortedFiles;
  }
  toggleChecksVisibility() {
    const checksContainer = this.container.querySelector(".seo-checks");
    if (!checksContainer) return;
    const allHeaders = checksContainer.querySelectorAll(".seo-check-header");
    allHeaders.forEach((header) => {
      var _a;
      const htmlHeader = header;
      const resultsList = (_a = htmlHeader.parentElement) == null ? void 0 : _a.querySelector(".seo-results");
      const collapseIcon = htmlHeader.querySelector(".seo-collapse-icon svg");
      const checkName = this.findCheckNameForHeader(htmlHeader);
      if (resultsList && collapseIcon) {
        if (checkName) {
          this.individualCollapseStates.set(checkName, this.isCollapsed);
        }
        if (this.isCollapsed) {
          resultsList.classList.remove("seo-results-list-expanded");
          resultsList.classList.add("seo-results-list-collapsed");
          collapseIcon.classList.remove("seo-collapse-icon-normal");
          collapseIcon.classList.add("seo-collapse-icon-rotated");
        } else {
          resultsList.classList.remove("seo-results-list-collapsed");
          resultsList.classList.add("seo-results-list-expanded");
          collapseIcon.classList.remove("seo-collapse-icon-rotated");
          collapseIcon.classList.add("seo-collapse-icon-normal");
        }
      }
    });
  }
  // Helper method to find the check name for a given header
  findCheckNameForHeader(header) {
    return header.getAttribute("data-check-name");
  }
};

// src/ui/panel-renderer.ts
init_panel_utils();
var PanelRenderer = class {
  constructor(app, plugin, actions) {
    this.app = app;
    this.plugin = plugin;
    this.actions = actions;
  }
  /**
   * Renders the main panel content
   */
  render(containerEl, panelType, currentNoteResults, globalResults, onRefreshClick, onExternalLinksClick) {
    try {
      containerEl.empty();
      containerEl.addClass("seo-panel");
      const header = containerEl.createEl("div", { cls: "seo-panel-header" });
      header.createEl("h2", { text: panelType === "current" ? "SEO audit: current note" : "SEO audit: vault" });
      if (panelType === "current") {
        this.renderCurrentNoteHeader(header, currentNoteResults);
      } else {
        const fileCount = globalResults.length;
        const foldersInfo = getVaultFoldersInfo(this.plugin.settings.scanDirectories, fileCount);
        const foldersEl = header.createEl("div", { cls: "seo-filename" });
        foldersEl.textContent = foldersInfo;
      }
      if (panelType === "current") {
        this.renderCurrentNoteActions(containerEl, onRefreshClick, onExternalLinksClick);
      }
      if (panelType === "current") {
        this.renderCurrentNoteContent(containerEl, currentNoteResults);
      } else {
        if (globalResults.length > 0) {
          this.renderGlobalResults(containerEl, globalResults);
        } else {
          const noGlobal = containerEl.createEl("div", { cls: "seo-no-results" });
          noGlobal.createEl("p", { text: 'Click "Audit all notes" to audit your files in your configured directories.' });
        }
      }
    } catch (error) {
      console.error("Error rendering SEO panel:", error);
      containerEl.createEl("div", { text: "Error loading SEO panel. Please try again." });
    }
  }
  /**
   * Renders the current note header with file path
   */
  renderCurrentNoteHeader(header, currentNoteResults) {
    const activeFile = this.app.workspace.getActiveFile();
    if (activeFile && isSupportedFile(activeFile, this.plugin.settings)) {
      const filenameEl = header.createEl("div", { cls: "seo-filename" });
      let displayName = activeFile.path;
      if (currentNoteResults && currentNoteResults.file === activeFile.path) {
        displayName = currentNoteResults.displayName || activeFile.path;
      } else if (this.plugin.settings.cachedGlobalResults) {
        const globalResult = this.plugin.settings.cachedGlobalResults.find(
          (result) => result.file === activeFile.path
        );
        if (globalResult) {
          displayName = globalResult.displayName || activeFile.path;
        }
      }
      filenameEl.textContent = `Target note: ${displayName}`;
    }
  }
  /**
   * Renders action buttons for current note panel
   */
  renderCurrentNoteActions(containerEl, onRefreshClick, onExternalLinksClick) {
    const auditCurrentBtn = containerEl.createEl("button", {
      text: "Refresh",
      cls: "mod-cta seo-btn seo-top-btn",
      attr: { "data-refresh-btn": "true" }
    });
    auditCurrentBtn.addEventListener("click", (event) => {
      event.preventDefault();
      event.stopPropagation();
      void (async () => {
        await onRefreshClick(auditCurrentBtn);
      })();
    });
    if (this.plugin.settings.enableExternalLinkButton && !this.plugin.settings.enableExternalLinkVaultCheck) {
      const externalLinksBtn = containerEl.createEl("button", {
        text: "Check external links for 404s",
        cls: "seo-btn"
      });
      externalLinksBtn.addEventListener("click", () => {
        void (async () => {
          externalLinksBtn.disabled = true;
          externalLinksBtn.textContent = "This may take some time...";
          externalLinksBtn.addClass("seo-btn-disabled");
          try {
            await onExternalLinksClick();
          } finally {
            externalLinksBtn.disabled = false;
            externalLinksBtn.textContent = "Check external links for 404s";
            externalLinksBtn.removeClass("seo-btn-disabled");
            externalLinksBtn.addClass("seo-btn-enabled");
          }
        })();
      });
    }
  }
  /**
   * Renders current note content
   */
  renderCurrentNoteContent(containerEl, currentNoteResults) {
    const activeFile = this.app.workspace.getActiveFile();
    let currentFileResults = null;
    if (activeFile && this.plugin.settings.cachedGlobalResults) {
      currentFileResults = this.plugin.settings.cachedGlobalResults.find(
        (result) => result.file === activeFile.path
      ) || null;
    }
    const resultsToShow = currentNoteResults || currentFileResults;
    if (resultsToShow) {
      const newResultsContainer = containerEl.createEl("div", { cls: "seo-results-container" });
      const tempResultsDisplay = new ResultsDisplay(
        newResultsContainer,
        async (filePath) => await this.actions.openFile(filePath),
        async (filePath) => await this.actions.openFileAndAudit(filePath)
      );
      tempResultsDisplay.renderResults(resultsToShow);
    } else {
      const noResults = containerEl.createEl("div", { cls: "seo-no-results" });
      const fileTypeText = this.plugin.settings.enableMDXSupport ? "markdown or MDX file" : "markdown file";
      noResults.createEl("p", { text: `Open a ${fileTypeText} and click "Refresh" to audit it.` });
    }
  }
  /**
   * Renders global results with sorting and filtering
   */
  renderGlobalResults(containerEl, globalResults) {
    const tempResultsDisplay = new ResultsDisplay(
      containerEl,
      async (filePath) => await this.actions.openFile(filePath),
      async (filePath) => await this.actions.openFileAndAudit(filePath)
    );
    tempResultsDisplay.renderGlobalResults(globalResults, this.plugin.settings);
    const refreshBtn = containerEl.createEl("button", {
      text: "Refresh",
      cls: "mod-cta seo-btn seo-refresh-btn",
      attr: { "data-refresh-btn": "true" }
    });
    refreshBtn.addEventListener("click", () => {
      void (async () => {
        var _a;
        if (refreshBtn.textContent === "Cancel") {
          if (SEOSidePanel.globalAuditController) {
            SEOSidePanel.globalAuditController.abort();
            SEOSidePanel.globalAuditController = null;
            console.debug("Vault audit cancelled by user");
          }
          refreshBtn.textContent = "Refresh";
          refreshBtn.disabled = false;
          return;
        }
        refreshBtn.textContent = "Cancel";
        refreshBtn.disabled = false;
        SEOSidePanel.globalAuditController = new AbortController();
        try {
          const results = await this.actions.refreshGlobalResults((_a = SEOSidePanel.globalAuditController) == null ? void 0 : _a.signal);
          if (results.length > 0) {
            if (SEOSidePanel.globalAuditController && !SEOSidePanel.globalAuditController.signal.aborted) {
              containerEl.dispatchEvent(new CustomEvent("seo-refresh-complete", {
                detail: { results }
              }));
            }
          }
        } catch (error) {
          if (error instanceof Error && error.name === "AbortError") {
            console.debug("Vault audit cancelled in panel renderer");
          } else {
            console.error("Error in vault audit:", error);
          }
        } finally {
          refreshBtn.textContent = "Refresh";
          refreshBtn.disabled = false;
        }
      })();
    });
    tempResultsDisplay.renderIssuesList(
      globalResults,
      this.plugin.settings.defaultSort,
      (sortType) => {
        containerEl.dispatchEvent(new CustomEvent("seo-sort-change", {
          detail: { sortType }
        }));
      },
      (event) => {
        const showNotices = this.plugin.settings.checkPotentiallyBrokenLinks && this.plugin.settings.checkPotentiallyBrokenEmbeds;
        const issuesFiles = globalResults.filter((r) => {
          const hasIssues = r.issuesCount > 0;
          const hasWarnings = r.warningsCount > 0;
          const hasNotices = showNotices && r.noticesCount > 0;
          return hasIssues || hasWarnings || hasNotices;
        });
        this.actions.showSortMenu(event, issuesFiles, containerEl, this.plugin.settings.defaultSort, (sortType) => {
          containerEl.dispatchEvent(new CustomEvent("seo-sort-change", {
            detail: { sortType }
          }));
        }, this.plugin.settings);
      },
      this.plugin.settings
    );
  }
};

// src/ui/side-panel.ts
var _SEOSidePanel = class _SEOSidePanel extends import_obsidian6.ItemView {
  constructor(plugin, panelType = "current", leaf) {
    super(leaf || plugin.app.workspace.getLeaf());
    this.currentNoteResults = null;
    this.globalResults = [];
    this.panelType = "current";
    this.hasRunInitialScan = false;
    this.isRefreshing = false;
    this.currentAuditController = null;
    this.plugin = plugin;
    this.panelType = panelType;
    this.currentSort = plugin.settings.defaultSort;
    this.actions = new PanelActions(this.app, this.plugin, this.panelType);
    this.resultsDisplay = new ResultsDisplay(
      this.containerEl,
      async (filePath) => await this.actions.openFile(filePath),
      async (filePath) => await this.actions.openFileAndAudit(filePath)
    );
    this.renderer = new PanelRenderer(this.app, this.plugin, this.actions);
    if (this.panelType === "current") {
      this.registerEvent(this.app.workspace.on("active-leaf-change", () => {
        if (_SEOSidePanel.globalAuditController) {
          _SEOSidePanel.globalAuditController.abort();
          _SEOSidePanel.globalAuditController = null;
          console.debug("Audit cancelled due to file switch");
        }
        if (this.isRefreshing) {
          return;
        }
        const activeFile = this.app.workspace.getActiveFile();
        if (!activeFile) {
          return;
        }
        if (activeFile) {
          this.updateCurrentNoteResults(activeFile);
        }
      }));
    }
  }
  getViewType() {
    return this.panelType === "current" ? SEOCurrentPanelViewType : SEOGlobalPanelViewType;
  }
  async handleRefreshClick(button) {
    if (button.disabled) {
      return;
    }
    if (_SEOSidePanel.globalAuditController) {
      _SEOSidePanel.globalAuditController.abort();
    }
    _SEOSidePanel.globalAuditController = new AbortController();
    this.isRefreshing = true;
    button.textContent = "Refreshing...";
    button.disabled = true;
    try {
      const result = await this.actions.checkCurrentNote(_SEOSidePanel.globalAuditController.signal);
      if (result) {
        this.currentNoteResults = result;
        const existingResults = this.containerEl.querySelectorAll(".seo-results-container, .seo-file-issue, .seo-issue, .seo-warning, .seo-notice, .seo-info-note, .seo-check, .seo-result, .seo-score-header, .seo-score-text, .seo-score-number, .seo-toggle-icon, .seo-collapse-icon");
        existingResults.forEach((el) => el.remove());
        const newResultsContainer = this.containerEl.createEl("div", { cls: "seo-results-container" });
        this.resultsDisplay.updateContainer(newResultsContainer);
        this.resultsDisplay.renderResults(result);
        this.updateGlobalResultsIfExists(result);
      }
    } catch (error) {
      if (error instanceof Error && error.name === "AbortError") {
        console.debug("Audit was cancelled");
        return;
      }
      console.error("Error in refresh button:", error);
    } finally {
      this.isRefreshing = false;
      button.textContent = "Refresh";
      button.disabled = false;
      _SEOSidePanel.globalAuditController = null;
    }
  }
  getDisplayText() {
    return this.panelType === "current" ? "SEO audit: current note" : "SEO audit: vault";
  }
  getIcon() {
    return "search-check";
  }
  async onOpen() {
    try {
      if (this.panelType === "global" && this.plugin.settings.cachedGlobalResults.length > 0) {
        this.globalResults = this.plugin.settings.cachedGlobalResults;
      }
      this.forceIconRefresh();
      if (this.panelType === "global" && !this.hasRunInitialScan && this.globalResults.length === 0) {
        this.showLoadingState();
        this.hasRunInitialScan = true;
        await this.runInitialScan();
      } else {
        this.render();
      }
    } catch (error) {
      console.error("Error opening SEO panel:", error);
    }
  }
  async onClose() {
  }
  cleanup() {
  }
  // Run initial scan for global panel
  async runInitialScan() {
    const results = await this.actions.runInitialScan();
    if (results.length > 0) {
      this.globalResults = results;
      this.render();
    }
  }
  // Force icon refresh to handle Obsidian's icon caching issues
  forceIconRefresh() {
    if (this.leaf) {
      void this.leaf.setViewState({
        type: this.getViewType(),
        state: this.leaf.view.getState()
      });
    }
    setTimeout(() => {
      const iconEl = this.containerEl.querySelector(".view-header-icon");
      if (iconEl) {
        while (iconEl.firstChild) {
          iconEl.removeChild(iconEl.firstChild);
        }
        iconEl.setAttribute("data-icon", "search-check");
        iconEl.setAttribute("data-icon", "");
        void iconEl.offsetHeight;
        iconEl.setAttribute("data-icon", "search-check");
      }
      const headerEl = this.containerEl.querySelector(".view-header");
      if (headerEl) {
        headerEl.addClass("seo-header-hidden");
        void headerEl.offsetHeight;
        headerEl.removeClass("seo-header-hidden");
        headerEl.addClass("seo-header-visible");
      }
      this.app.workspace.trigger("layout-change");
    }, 50);
  }
  updateCurrentNoteResults(file) {
    if (!file || !file.path.endsWith(".md")) {
      return;
    }
    try {
      let currentFileResults = null;
      if (this.plugin.settings.cachedGlobalResults) {
        currentFileResults = this.plugin.settings.cachedGlobalResults.find(
          (result) => result.file === file.path
        ) || null;
      }
      if (currentFileResults) {
        this.currentNoteResults = currentFileResults;
      } else {
        this.currentNoteResults = null;
      }
      const resultsToShow = this.currentNoteResults;
      const existingResults = this.containerEl.querySelectorAll(".seo-results-container, .seo-file-issue, .seo-issue, .seo-warning, .seo-notice, .seo-info-note, .seo-check, .seo-result, .seo-score-header, .seo-score-text, .seo-score-number, .seo-toggle-icon, .seo-collapse-icon");
      existingResults.forEach((el) => el.remove());
      if (resultsToShow) {
        const newResultsContainer = this.containerEl.createEl("div", { cls: "seo-results-container" });
        if (!this.resultsDisplay) {
          this.resultsDisplay = new ResultsDisplay(
            newResultsContainer,
            async (filePath) => await this.actions.openFile(filePath),
            async (filePath) => await this.actions.openFileAndAudit(filePath)
          );
        } else {
          this.resultsDisplay.updateContainer(newResultsContainer);
        }
        this.resultsDisplay.renderResults(resultsToShow);
      } else {
        this.containerEl.createEl("div", {
          cls: "seo-info-note seo-no-results-message",
          // eslint-disable-next-line obsidianmd/ui/sentence-case
          text: 'No SEO results available for this file. Click "Refresh" to run an audit.'
        });
      }
      this.updateHeaderAndResults();
    } catch (error) {
      console.error("Error updating current note results:", error);
    }
  }
  /**
   * Updates only the header and results content without re-rendering the entire panel
   * This preserves button event listeners and other UI state
   */
  updateHeaderAndResults() {
    const header = this.containerEl.querySelector(".seo-panel-header");
    if (header) {
      const filenameEl = header.querySelector(".seo-filename");
      if (filenameEl) {
        const activeFile = this.app.workspace.getActiveFile();
        if (activeFile && isSupportedFile(activeFile, this.plugin.settings)) {
          let displayName = activeFile.path;
          if (this.currentNoteResults && this.currentNoteResults.file === activeFile.path) {
            displayName = this.currentNoteResults.displayName || activeFile.path;
          } else if (this.plugin.settings.cachedGlobalResults) {
            const globalResult = this.plugin.settings.cachedGlobalResults.find(
              (result) => result.file === activeFile.path
            );
            if (globalResult) {
              displayName = globalResult.displayName || activeFile.path;
            }
          }
          filenameEl.textContent = `Target note: ${displayName}`;
        }
      }
    }
  }
  updateResults(results) {
    this.globalResults = results;
    this.render();
  }
  // Show loading state for large scans
  showLoadingState() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.addClass("seo-panel");
    const header = containerEl.createEl("div", { cls: "seo-panel-header" });
    header.createEl("h2", { text: this.panelType === "current" ? "SEO audit: current note" : "SEO audit: vault" });
    if (this.panelType === "global") {
      const foldersInfo = getVaultFoldersInfo(this.plugin.settings.scanDirectories);
      const foldersEl = header.createEl("div", { cls: "seo-filename" });
      foldersEl.textContent = foldersInfo;
    }
    const loadingContainer = containerEl.createEl("div", { cls: "seo-loading-container" });
    const spinnerEl = loadingContainer.createEl("div", { cls: "seo-loading-spinner" });
    (0, import_obsidian6.setIcon)(spinnerEl, "loader-circle");
    loadingContainer.createEl("h3", {
      // eslint-disable-next-line obsidianmd/ui/sentence-case
      text: "Running SEO audit...",
      cls: "seo-loading-title"
    });
    loadingContainer.createEl("p", {
      text: "This may take a moment for large vaults. Please wait...",
      cls: "seo-loading-message"
    });
  }
  // Method to refresh the panel when settings change
  refresh() {
    this.render();
  }
  render() {
    this.renderer.render(
      this.containerEl,
      this.panelType,
      this.currentNoteResults,
      this.globalResults,
      async (btn) => await this.handleRefreshClick(btn),
      async () => {
        const result = await this.actions.checkExternalLinks();
        if (result) {
          this.currentNoteResults = result;
          this.updateGlobalResultsIfExists(result);
          this.render();
        }
      }
    );
    this.containerEl.addEventListener("seo-refresh-complete", (event) => {
      const customEvent = event;
      this.globalResults = customEvent.detail.results;
      this.render();
    });
    this.containerEl.addEventListener("seo-sort-change", (event) => {
      const customEvent = event;
      this.currentSort = customEvent.detail.sortType;
      this.plugin.settings.defaultSort = customEvent.detail.sortType;
      void this.plugin.saveSettings();
      this.render();
    });
  }
  /**
   * Legacy render method - kept as fallback during migration
   * TODO: Remove once PanelRenderer is fully tested
   */
  renderLegacy() {
    try {
      const { containerEl } = this;
      containerEl.empty();
      containerEl.addClass("seo-panel");
      const header = containerEl.createEl("div", { cls: "seo-panel-header" });
      header.createEl("h2", { text: this.panelType === "current" ? "SEO audit: current note" : "SEO audit: vault" });
      if (this.panelType === "current") {
        const activeFile = this.app.workspace.getActiveFile();
        if (activeFile && isSupportedFile(activeFile, this.plugin.settings)) {
          const filenameEl = header.createEl("div", { cls: "seo-filename" });
          let displayName = activeFile.path;
          if (this.currentNoteResults && this.currentNoteResults.file === activeFile.path) {
            displayName = this.currentNoteResults.displayName || activeFile.path;
          } else if (this.plugin.settings.cachedGlobalResults) {
            const globalResult = this.plugin.settings.cachedGlobalResults.find(
              (result) => result.file === activeFile.path
            );
            if (globalResult) {
              displayName = globalResult.displayName || activeFile.path;
            }
          }
          filenameEl.textContent = `Target note: ${displayName}`;
        }
      } else {
        const fileCount = this.globalResults.length;
        const foldersInfo = getVaultFoldersInfo(this.plugin.settings.scanDirectories, fileCount);
        const foldersEl = header.createEl("div", { cls: "seo-filename" });
        foldersEl.textContent = foldersInfo;
      }
      if (this.panelType === "current") {
        const auditCurrentBtn = containerEl.createEl("button", {
          text: "Refresh",
          cls: "mod-cta seo-btn seo-top-btn"
        });
        auditCurrentBtn.addEventListener("click", (event) => {
          event.preventDefault();
          event.stopPropagation();
          void (async () => {
            await this.handleRefreshClick(auditCurrentBtn);
          })();
        });
        if (this.plugin.settings.enableExternalLinkButton && !this.plugin.settings.enableExternalLinkVaultCheck) {
          const externalLinksBtn = containerEl.createEl("button", {
            text: "Check external links for 404s",
            cls: "seo-btn"
          });
          externalLinksBtn.addEventListener("click", () => {
            void (async () => {
              externalLinksBtn.disabled = true;
              externalLinksBtn.textContent = "This may take some time...";
              externalLinksBtn.addClass("seo-btn-disabled");
              try {
                const result = await this.actions.checkExternalLinks();
                if (result) {
                  this.currentNoteResults = result;
                  this.updateGlobalResultsIfExists(result);
                  this.render();
                }
              } finally {
                externalLinksBtn.disabled = false;
                externalLinksBtn.textContent = "Check external links for 404s";
                externalLinksBtn.removeClass("seo-btn-disabled");
                externalLinksBtn.addClass("seo-btn-enabled");
              }
            })();
          });
        }
      }
      if (this.panelType === "current") {
        const activeFile = this.app.workspace.getActiveFile();
        let currentFileResults = null;
        if (activeFile && this.plugin.settings.cachedGlobalResults) {
          currentFileResults = this.plugin.settings.cachedGlobalResults.find(
            (result) => result.file === activeFile.path
          ) || null;
        }
        const resultsToShow = this.currentNoteResults || currentFileResults;
        if (resultsToShow) {
          const newResultsContainer = this.containerEl.createEl("div", { cls: "seo-results-container" });
          const tempResultsDisplay = new ResultsDisplay(
            newResultsContainer,
            async (filePath) => await this.actions.openFile(filePath),
            async (filePath) => await this.actions.openFileAndAudit(filePath)
          );
          tempResultsDisplay.renderResults(resultsToShow);
        } else {
          const noResults = containerEl.createEl("div", { cls: "seo-no-results" });
          const fileTypeText = this.plugin.settings.enableMDXSupport ? "markdown or MDX file" : "markdown file";
          noResults.createEl("p", { text: `Open a ${fileTypeText} and click "Refresh" to audit it.` });
        }
      } else {
        if (this.globalResults.length > 0) {
          this.renderGlobalResults(containerEl);
        } else {
          const noGlobal = containerEl.createEl("div", { cls: "seo-no-results" });
          noGlobal.createEl("p", { text: 'Click "Audit all notes" to audit your files in your configured directories.' });
        }
      }
    } catch (error) {
      console.error("Error rendering SEO panel:", error);
      this.containerEl.createEl("div", { text: "Error loading SEO panel. Please try again." });
    }
  }
  shouldIncludeFileInGlobalResults(filePath) {
    if (this.plugin.settings.ignoreUnderscoreFiles) {
      const fileName = filePath.split("/").pop() || "";
      const basename = fileName.replace(/\.[^/.]+$/, "");
      if (basename.startsWith("_")) {
        return false;
      }
    }
    const { scanDirectories } = this.plugin.settings;
    if (scanDirectories.trim()) {
      const directories = scanDirectories.split(",").map((dir) => dir.trim());
      const isInConfiguredDirectory = directories.some(
        (dir) => filePath.startsWith(dir + "/") || filePath === dir
      );
      return isInConfiguredDirectory;
    }
    return true;
  }
  updateGlobalResultsIfExists(currentResult) {
    if (this.plugin.settings.cachedGlobalResults && this.plugin.settings.cachedGlobalResults.length > 0) {
      if (!this.shouldIncludeFileInGlobalResults(currentResult.file)) {
        return;
      }
      const globalResults = this.plugin.settings.cachedGlobalResults;
      const existingIndex = globalResults.findIndex((r) => r.file === currentResult.file);
      if (existingIndex !== -1) {
        globalResults[existingIndex] = currentResult;
      } else {
        globalResults.push(currentResult);
      }
      void this.plugin.saveSettings();
      this.updateGlobalPanelIfOpen();
    }
  }
  updateDisplayName() {
    const activeFile = this.app.workspace.getActiveFile();
    if (activeFile && isSupportedFile(activeFile, this.plugin.settings)) {
      const filenameEl = this.containerEl.querySelector(".seo-filename");
      if (filenameEl) {
        let displayName = activeFile.path;
        if (this.currentNoteResults && this.currentNoteResults.file === activeFile.path) {
          displayName = this.currentNoteResults.displayName || activeFile.path;
        } else if (this.plugin.settings.cachedGlobalResults) {
          const globalResult = this.plugin.settings.cachedGlobalResults.find(
            (result) => result.file === activeFile.path
          );
          if (globalResult) {
            displayName = globalResult.displayName || activeFile.path;
          }
        }
        filenameEl.textContent = `Target note: ${displayName}`;
      }
      this.updateResultsForCurrentFile();
    }
  }
  updateResultsForCurrentFile() {
    const activeFile = this.app.workspace.getActiveFile();
    let currentFileResults = null;
    if (activeFile && this.plugin.settings.cachedGlobalResults) {
      currentFileResults = this.plugin.settings.cachedGlobalResults.find(
        (result) => result.file === activeFile.path
      ) || null;
    }
    const resultsToShow = this.currentNoteResults || currentFileResults;
    const existingResults = this.containerEl.querySelectorAll(".seo-results-container, .seo-file-issue, .seo-issue, .seo-warning, .seo-notice, .seo-info-note, .seo-check, .seo-result, .seo-score-header, .seo-score-text, .seo-score-number, .seo-toggle-icon, .seo-collapse-icon");
    existingResults.forEach((el) => el.remove());
    if (resultsToShow) {
      const newResultsContainer = this.containerEl.createEl("div", { cls: "seo-results-container" });
      const tempResultsDisplay = new ResultsDisplay(
        newResultsContainer,
        async (filePath) => await this.actions.openFile(filePath),
        async (filePath) => await this.actions.openFileAndAudit(filePath)
      );
      tempResultsDisplay.renderResults(resultsToShow);
    } else {
      const noResults = this.containerEl.createEl("div", { cls: "seo-no-results" });
      noResults.createEl("p", { text: 'Open a markdown file and click "Refresh" to audit it.' });
    }
  }
  updateGlobalPanelIfOpen() {
    const globalPanels = this.app.workspace.getLeavesOfType("seo-global-panel");
    if (globalPanels.length > 0) {
      const globalPanel = globalPanels[0];
      if ((globalPanel == null ? void 0 : globalPanel.view) && globalPanel.view instanceof _SEOSidePanel) {
        const seoPanel = globalPanel.view;
        seoPanel.globalResults = [...this.plugin.settings.cachedGlobalResults];
        seoPanel.render();
      }
    }
  }
  renderGlobalResults(container) {
    this.resultsDisplay.renderGlobalResults(this.globalResults, this.plugin.settings);
    const refreshBtn = container.createEl("button", {
      text: "Refresh",
      cls: "mod-cta seo-btn seo-refresh-btn",
      attr: { "data-refresh-btn": "true" }
    });
    refreshBtn.addEventListener("click", () => {
      void (async () => {
        refreshBtn.textContent = "Refreshing...";
        refreshBtn.disabled = true;
        try {
          const results = await this.actions.refreshGlobalResults();
          if (results.length > 0) {
            this.globalResults = results;
            this.render();
          }
        } finally {
          refreshBtn.textContent = "Refresh";
          refreshBtn.disabled = false;
        }
      })();
    });
    this.resultsDisplay.renderIssuesList(
      this.globalResults,
      this.currentSort,
      (sortType) => {
        this.currentSort = sortType;
        this.plugin.settings.defaultSort = sortType;
        void this.plugin.saveSettings();
      },
      (event) => {
        const showNotices = this.plugin.settings.checkPotentiallyBrokenLinks && this.plugin.settings.checkPotentiallyBrokenEmbeds;
        const issuesFiles = this.globalResults.filter((r) => {
          const hasIssues = r.issuesCount > 0;
          const hasWarnings = r.warningsCount > 0;
          const hasNotices = showNotices && r.noticesCount > 0;
          return hasIssues || hasWarnings || hasNotices;
        });
        this.actions.showSortMenu(event, issuesFiles, container, this.currentSort, (sortType) => {
          this.currentSort = sortType;
          this.plugin.settings.defaultSort = sortType;
          void this.plugin.saveSettings();
        }, this.plugin.settings);
      },
      this.plugin.settings
    );
  }
};
// Static property to track the current audit controller globally
_SEOSidePanel.globalAuditController = null;
var SEOSidePanel = _SEOSidePanel;

// src/ui/panel-manager.ts
var import_obsidian7 = require("obsidian");
var PanelManager = class {
  constructor(app, plugin) {
    this.app = app;
    this.plugin = plugin;
  }
  openCurrentPanel() {
    void this.openPanel(SEOCurrentPanelViewType, "current");
  }
  openGlobalPanel() {
    void this.openPanel(SEOGlobalPanelViewType, "global");
  }
  async openPanel(viewType, panelType) {
    const existingLeaf = this.app.workspace.getLeavesOfType(viewType)[0];
    if (existingLeaf) {
      await this.app.workspace.revealLeaf(existingLeaf);
      this.app.workspace.setActiveLeaf(existingLeaf);
      if (existingLeaf.view instanceof SEOSidePanel) {
        this.plugin.sidePanel = existingLeaf.view;
      }
      if (existingLeaf.view instanceof SEOSidePanel) {
        const panel = existingLeaf.view;
        if (typeof panel.forceIconRefresh === "function") {
          setTimeout(() => panel.forceIconRefresh(), 100);
        }
      }
    } else {
      const leaf = this.app.workspace.getRightLeaf(false);
      if (leaf) {
        const panel = new SEOSidePanel(this.plugin, panelType, leaf);
        this.plugin.sidePanel = panel;
        await leaf.open(panel);
        this.app.workspace.setActiveLeaf(leaf);
        setTimeout(() => {
          if (leaf.view instanceof SEOSidePanel) {
            if (typeof leaf.view.forceIconRefresh === "function") {
              leaf.view.forceIconRefresh();
            }
          }
        }, 100);
      }
    }
  }
  getFilesToCheck() {
    const { vault } = this.app;
    const { scanDirectories, ignoreUnderscoreFiles, enableMDXSupport } = this.plugin.settings;
    let files;
    if (!scanDirectories.trim()) {
      files = vault.getMarkdownFiles();
      if (enableMDXSupport) {
        const mdxFiles = vault.getFiles().filter(
          (file) => file instanceof import_obsidian7.TFile && file.extension.toLowerCase() === "mdx"
        );
        files = [...files, ...mdxFiles];
      }
    } else {
      const directories = scanDirectories.split(",").map((dir) => dir.trim());
      files = [];
      for (const dir of directories) {
        const folder = vault.getAbstractFileByPath(dir);
        if (folder && folder instanceof import_obsidian7.TFolder) {
          const mdFiles = vault.getMarkdownFiles().filter(
            (file) => file.path.startsWith(dir + "/") || file.path === dir
          );
          files.push(...mdFiles);
          if (enableMDXSupport) {
            const mdxFiles = vault.getFiles().filter(
              (file) => file instanceof import_obsidian7.TFile && file.extension.toLowerCase() === "mdx" && (file.path.startsWith(dir + "/") || file.path === dir)
            );
            files.push(...mdxFiles);
          }
        }
      }
    }
    files = files.filter((file) => isSupportedFile(file, this.plugin.settings));
    if (ignoreUnderscoreFiles) {
      files = files.filter((file) => {
        const fileName = file.basename;
        return !fileName.startsWith("_");
      });
    }
    return Promise.resolve(files);
  }
};

// src/utils/error-handler.ts
var import_obsidian8 = require("obsidian");
var SEOPluginError = class extends Error {
  constructor(message, severity = "error" /* ERROR */, userMessage, suggestion) {
    super(message);
    this.name = "SEOPluginError";
    this.severity = severity;
    this.userMessage = userMessage || message;
    this.suggestion = suggestion;
  }
};
function handleError(error, context, showNotice = true) {
  let message;
  let severity = "error" /* ERROR */;
  let suggestion;
  if (error instanceof SEOPluginError) {
    message = error.userMessage;
    severity = error.severity;
    suggestion = error.suggestion;
  } else if (error instanceof Error) {
    message = error.message;
    severity = "error" /* ERROR */;
    suggestion = "Please try again or check the plugin settings";
  } else {
    message = "An unexpected error occurred";
    severity = "critical" /* CRITICAL */;
    suggestion = "Please restart Obsidian and try again";
  }
  console.error(`[SEO Plugin] Error in ${context}:`, error);
  if (showNotice) {
    const noticeMessage = suggestion ? `${message} - ${suggestion}` : message;
    new import_obsidian8.Notice(noticeMessage, 5e3);
  }
  return { message, severity, suggestion };
}
async function withErrorHandling(fn, context, fallback) {
  try {
    return await fn();
  } catch (error) {
    handleError(error, context, true);
    return fallback;
  }
}
function validateRequiredParams(params, context) {
  const missing = Object.entries(params).filter(([_, value]) => value === null || value === void 0).map(([name]) => name);
  if (missing.length > 0) {
    throw new SEOPluginError(
      `Missing required parameters: ${missing.join(", ")}`,
      "error" /* ERROR */,
      `Missing required parameters: ${missing.join(", ")}`,
      "Please check your plugin configuration"
    );
  }
}

// src/utils/cache-manager.ts
var CacheManager = class {
  constructor(config = {}) {
    this.cache = /* @__PURE__ */ new Map();
    this.cleanupTimer = null;
    this.config = {
      maxSize: config.maxSize || 100,
      maxAge: config.maxAge || 30 * 60 * 1e3,
      // 30 minutes
      cleanupInterval: config.cleanupInterval || 5 * 60 * 1e3
      // 5 minutes
    };
    this.startCleanupTimer();
  }
  /**
   * Get a value from cache
   * @param key - Cache key
   * @returns Cached value or undefined
   */
  get(key) {
    const entry = this.cache.get(key);
    if (!entry) {
      return void 0;
    }
    if (this.isExpired(entry)) {
      this.cache.delete(key);
      return void 0;
    }
    entry.accessCount++;
    entry.lastAccessed = Date.now();
    return entry.value;
  }
  /**
   * Set a value in cache
   * @param key - Cache key
   * @param value - Value to cache
   */
  set(key, value) {
    if (this.cache.has(key)) {
      this.cache.delete(key);
    }
    if (this.cache.size >= this.config.maxSize) {
      this.evictLRU();
    }
    this.cache.set(key, {
      value,
      timestamp: Date.now(),
      accessCount: 1,
      lastAccessed: Date.now()
    });
  }
  /**
   * Check if a key exists in cache
   * @param key - Cache key
   * @returns True if key exists and is not expired
   */
  has(key) {
    const entry = this.cache.get(key);
    if (!entry) {
      return false;
    }
    if (this.isExpired(entry)) {
      this.cache.delete(key);
      return false;
    }
    return true;
  }
  /**
   * Delete a specific key from cache
   * @param key - Cache key
   */
  delete(key) {
    return this.cache.delete(key);
  }
  /**
   * Clear all cache entries
   */
  clear() {
    this.cache.clear();
  }
  /**
   * Get cache statistics
   */
  getStats() {
    const entries = Array.from(this.cache.values());
    return {
      size: this.cache.size,
      maxSize: this.config.maxSize,
      hitRate: this.calculateHitRate(),
      oldestEntry: Math.min(...entries.map((e) => e.timestamp)),
      newestEntry: Math.max(...entries.map((e) => e.timestamp)),
      expiredEntries: entries.filter((e) => this.isExpired(e)).length
    };
  }
  /**
   * Clean up expired entries
   */
  cleanup() {
    const expiredKeys = [];
    for (const [key, entry] of this.cache.entries()) {
      if (this.isExpired(entry)) {
        expiredKeys.push(key);
      }
    }
    expiredKeys.forEach((key) => this.cache.delete(key));
  }
  /**
   * Destroy the cache manager and cleanup resources
   */
  destroy() {
    if (this.cleanupTimer) {
      clearInterval(this.cleanupTimer);
      this.cleanupTimer = null;
    }
    this.clear();
  }
  /**
   * Check if an entry has expired
   */
  isExpired(entry) {
    return Date.now() - entry.timestamp > this.config.maxAge;
  }
  /**
   * Evict least recently used entry
   */
  evictLRU() {
    let oldestKey = "";
    let oldestTime = Date.now();
    for (const [key, entry] of this.cache.entries()) {
      if (entry.lastAccessed < oldestTime) {
        oldestTime = entry.lastAccessed;
        oldestKey = key;
      }
    }
    if (oldestKey) {
      this.cache.delete(oldestKey);
    }
  }
  /**
   * Calculate cache hit rate
   */
  calculateHitRate() {
    const entries = Array.from(this.cache.values());
    const totalAccesses = entries.reduce((sum, entry) => sum + entry.accessCount, 0);
    return totalAccesses > 0 ? entries.length / totalAccesses : 0;
  }
  /**
   * Start the cleanup timer
   */
  startCleanupTimer() {
    this.cleanupTimer = setInterval(() => {
      this.cleanup();
    }, this.config.cleanupInterval);
  }
};
var SEOCacheManager = class {
  // For file content caching
  constructor() {
    this.resultsCache = new CacheManager({
      maxSize: 50,
      // Store up to 50 scan results
      maxAge: 60 * 60 * 1e3,
      // 1 hour
      cleanupInterval: 10 * 60 * 1e3
      // 10 minutes
    });
    this.fileCache = new CacheManager({
      maxSize: 200,
      // Store up to 200 file contents
      maxAge: 30 * 60 * 1e3,
      // 30 minutes
      cleanupInterval: 5 * 60 * 1e3
      // 5 minutes
    });
  }
  /**
   * Get cached scan results
   * @param key - Cache key (usually scan type + timestamp)
   * @returns Cached results or undefined
   */
  getResults(key) {
    return this.resultsCache.get(key);
  }
  /**
   * Cache scan results
   * @param key - Cache key
   * @param results - Results to cache
   */
  setResults(key, results) {
    this.resultsCache.set(key, results);
  }
  /**
   * Get cached file content
   * @param filePath - File path
   * @returns Cached content or undefined
   */
  getFileContent(filePath) {
    return this.fileCache.get(filePath);
  }
  /**
   * Cache file content
   * @param filePath - File path
   * @param content - Content to cache
   */
  setFileContent(filePath, content) {
    this.fileCache.set(filePath, content);
  }
  /**
   * Clear all caches
   */
  clearAll() {
    this.resultsCache.clear();
    this.fileCache.clear();
  }
  /**
   * Get cache statistics
   */
  getStats() {
    return {
      results: this.resultsCache.getStats(),
      files: this.fileCache.getStats()
    };
  }
  /**
   * Clean up expired entries
   */
  cleanup() {
    this.resultsCache.cleanup();
    this.fileCache.cleanup();
  }
  /**
   * Destroy cache managers
   */
  destroy() {
    this.resultsCache.destroy();
    this.fileCache.destroy();
  }
};
var seoCache = new SEOCacheManager();
function clearAllCache2() {
  seoCache.clearAll();
}

// src/main.ts
var SEOPlugin = class extends import_obsidian9.Plugin {
  constructor() {
    super(...arguments);
    this.panelManager = null;
    this.sidePanel = null;
    this.ribbonIcon = null;
  }
  /**
   * Plugin initialization - called when the plugin is loaded
   * Sets up managers, registers views, and commands
   */
  async onload() {
    try {
      await this.loadSettings();
      validateRequiredParams(
        { app: this.app, settings: this.settings },
        "plugin initialization"
      );
      this.panelManager = await withErrorHandling(
        () => Promise.resolve(new PanelManager(this.app, this)),
        "panel manager initialization",
        null
      );
      this.forceIconRefresh();
      await withErrorHandling(
        () => {
          this.registerView(SEOCurrentPanelViewType, (leaf) => {
            const panel = new SEOSidePanel(this, "current", leaf);
            this.sidePanel = panel;
            return panel;
          });
          this.registerView(SEOGlobalPanelViewType, (leaf) => {
            const panel = new SEOSidePanel(this, "global", leaf);
            this.sidePanel = panel;
            return panel;
          });
        },
        "side panel registration",
        void 0
      );
      await withErrorHandling(
        () => {
          registerCommands(this);
        },
        "command registration",
        void 0
      );
      await withErrorHandling(
        () => {
          this.addSettingTab(new SEOSettingTab(this.app, this));
        },
        "settings tab registration",
        void 0
      );
      if (this.settings.showRibbonIcon) {
        await withErrorHandling(
          () => {
            this.ribbonIcon = this.addRibbonIcon("search-check", "Open SEO audit panel", () => {
              try {
                const existingPanels = this.app.workspace.getLeavesOfType("seo-global-panel");
                const isFirstRun = existingPanels.length === 0;
                this.openGlobalPanel();
                if (!isFirstRun) {
                  void setTimeout(() => {
                    void (async () => {
                      try {
                        const globalPanels = this.app.workspace.getLeavesOfType("seo-global-panel");
                        if (globalPanels.length > 0) {
                          const panel = globalPanels[0];
                          if (panel == null ? void 0 : panel.view) {
                            const seoPanel = panel.view;
                            await seoPanel.actions.refreshGlobalResults();
                            seoPanel.render();
                          }
                        }
                      } catch (error) {
                        handleError(error, "ribbon icon panel refresh", true);
                      }
                    })();
                  }, 500);
                }
              } catch (error) {
                handleError(error, "ribbon icon click handler", true);
              }
            });
          },
          "ribbon icon registration",
          void 0
        );
      }
    } catch (error) {
      handleError(error, "plugin initialization", true);
    }
  }
  onunload() {
    try {
      seoCache.destroy();
    } catch (error) {
      handleError(error, "plugin unload", false);
    }
  }
  /**
   * Load plugin settings from Obsidian's data store
   * Merges saved settings with default values
   */
  async loadSettings() {
    try {
      const loadedData = await this.loadData();
      this.settings = Object.assign({}, DEFAULT_SETTINGS, loadedData);
    } catch (error) {
      handleError(error, "loading settings", true);
      this.settings = { ...DEFAULT_SETTINGS };
    }
  }
  /**
   * Save plugin settings to Obsidian's data store
   * Clears cache to ensure fresh results after settings changes
   */
  async saveSettings() {
    try {
      await this.saveData(this.settings);
      clearAllCache2();
    } catch (error) {
      handleError(error, "saving settings", true);
    }
  }
  addStatusBar() {
  }
  removeStatusBar() {
  }
  /**
   * Opens the current note SEO audit panel
   * Shows SEO analysis for the currently active note
   */
  openCurrentPanel() {
    try {
      if (this.panelManager) {
        this.panelManager.openCurrentPanel();
      } else {
        throw new Error("Panel manager not initialized");
      }
    } catch (error) {
      handleError(error, "opening current panel", true);
    }
  }
  /**
   * Opens the global vault SEO audit panel
   * Shows SEO analysis for all notes in the vault
   */
  openGlobalPanel() {
    try {
      if (this.panelManager) {
        this.panelManager.openGlobalPanel();
      } else {
        throw new Error("Panel manager not initialized");
      }
    } catch (error) {
      handleError(error, "opening global panel", true);
    }
  }
  /**
   * Runs bulk SEO check across all configured files
   * @returns Promise that resolves when bulk check is complete
   */
  async runBulkCheck() {
    try {
      const { runSEOCheck: runSEOCheck2 } = await Promise.resolve().then(() => (init_seo_checker(), seo_checker_exports));
      const files = await this.getFilesToCheck();
      if (files.length === 0) {
        return [];
      }
      const results = await runSEOCheck2(this, files);
      return results;
    } catch (error) {
      handleError(error, "running bulk check", true);
      return [];
    }
  }
  /**
   * Gets the list of files to check based on current settings
   * @returns Promise resolving to array of TFile objects to check
   */
  async getFilesToCheck() {
    try {
      if (this.panelManager) {
        return await this.panelManager.getFilesToCheck();
      } else {
        throw new Error("Panel manager not initialized");
      }
    } catch (error) {
      handleError(error, "getting files to check", true);
      return [];
    }
  }
  // Proper icon refresh using Obsidian's onLayoutReady API
  forceIconRefresh() {
    this.app.workspace.onLayoutReady(() => {
      const existingCurrentPanels = this.app.workspace.getLeavesOfType(SEOCurrentPanelViewType);
      const existingGlobalPanels = this.app.workspace.getLeavesOfType(SEOGlobalPanelViewType);
      [...existingCurrentPanels, ...existingGlobalPanels].forEach((leaf) => {
        if (leaf.view instanceof SEOSidePanel) {
          leaf.view.render();
        }
      });
    });
  }
  /**
   * Toggles the ribbon icon visibility
   * Adds or removes the ribbon icon based on the setting
   */
  toggleRibbonIcon() {
    try {
      if (this.settings.showRibbonIcon) {
        if (!this.ribbonIcon) {
          this.ribbonIcon = this.addRibbonIcon("search-check", "Open SEO audit panel", () => {
            try {
              const existingPanels = this.app.workspace.getLeavesOfType("seo-global-panel");
              const isFirstRun = existingPanels.length === 0;
              this.openGlobalPanel();
              if (!isFirstRun) {
                void setTimeout(() => {
                  void (async () => {
                    try {
                      const globalPanels = this.app.workspace.getLeavesOfType("seo-global-panel");
                      if (globalPanels.length > 0) {
                        const panel = globalPanels[0];
                        if (panel == null ? void 0 : panel.view) {
                          const seoPanel = panel.view;
                          await seoPanel.actions.refreshGlobalResults();
                          seoPanel.render();
                        }
                      }
                    } catch (error) {
                      handleError(error, "ribbon icon panel refresh", true);
                    }
                  })();
                }, 500);
              }
            } catch (error) {
              handleError(error, "ribbon icon click handler", true);
            }
          });
        }
      } else {
        if (this.ribbonIcon) {
          const iconToRemove = this.ribbonIcon;
          this.ribbonIcon = null;
          iconToRemove.remove();
          this.app.workspace.trigger("layout-change");
          setTimeout(() => {
            const contextMenus = document.querySelectorAll(".menu");
            contextMenus.forEach((menu) => {
              const items = menu.querySelectorAll(".menu-item");
              items.forEach((item) => {
                var _a;
                const text = (_a = item.textContent) == null ? void 0 : _a.trim();
                if (text === "Open SEO audit panel") {
                  item.remove();
                }
              });
            });
          }, 100);
        }
      }
    } catch (error) {
      handleError(error, "toggling ribbon icon", true);
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL3VpL3BhbmVsLXV0aWxzLnRzIiwgInNyYy9jaGVja3MvdXRpbHMvY29udGVudC1wYXJzZXIudHMiLCAic3JjL2NoZWNrcy91dGlscy9wb3NpdGlvbi11dGlscy50cyIsICJzcmMvY2hlY2tzL2FsdC10ZXh0LWNoZWNrLnRzIiwgInNyYy9jaGVja3MvbGluay1jaGVja3MudHMiLCAic3JjL2NoZWNrcy9leHRlcm5hbC1saW5rLWNoZWNrcy50cyIsICJzcmMvY2hlY2tzL3V0aWxzL3JlYWRpbmctbGV2ZWwudHMiLCAic3JjL2NoZWNrcy9jb250ZW50LWNoZWNrcy50cyIsICJzcmMvY2hlY2tzL21ldGEtY2hlY2tzLnRzIiwgInNyYy9jaGVja3MvaGVhZGluZy1jaGVja3MudHMiLCAic3JjL2NoZWNrcy9pbWFnZS1jaGVja3MudHMiLCAic3JjL2NoZWNrcy9pbmRleC50cyIsICJzcmMvY2hlY2tzL2R1cGxpY2F0ZS1kZXRlY3Rpb24udHMiLCAic3JjL3Nlby1jaGVja2VyLnRzIiwgInNyYy9tYWluLnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvY29tbWFuZHMvaW5kZXgudHMiLCAic3JjL3NldHRpbmdzLXRhYi50cyIsICJzcmMvdXRpbHMvc2V0dGluZ3MtY29tcGF0LnRzIiwgInNyYy91aS9zaWRlLXBhbmVsLnRzIiwgInNyYy91aS9wYW5lbC1jb25zdGFudHMudHMiLCAic3JjL3VpL3BhbmVsLWFjdGlvbnMudHMiLCAic3JjL3V0aWxzL2ZpbGUtdXRpbHMudHMiLCAic3JjL3VpL3Jlc3VsdHMtZGlzcGxheS50cyIsICJzcmMvdWkvcGFuZWwtcmVuZGVyZXIudHMiLCAic3JjL3VpL3BhbmVsLW1hbmFnZXIudHMiLCAic3JjL3V0aWxzL2Vycm9yLWhhbmRsZXIudHMiLCAic3JjL3V0aWxzL2NhY2hlLW1hbmFnZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFNFT1Jlc3VsdHMgfSBmcm9tIFwiLi4vdHlwZXNcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXREaXNwbGF5UGF0aChmdWxsUGF0aDogc3RyaW5nKTogc3RyaW5nIHtcclxuXHQvLyBSZW1vdmUgbGVhZGluZyBzbGFzaCBpZiBwcmVzZW50IGFuZCBzcGxpdFxyXG5cdGNvbnN0IGNsZWFuUGF0aCA9IGZ1bGxQYXRoLnN0YXJ0c1dpdGgoJy8nKSA/IGZ1bGxQYXRoLnNsaWNlKDEpIDogZnVsbFBhdGg7XHJcblx0Y29uc3QgcGFydHMgPSBjbGVhblBhdGguc3BsaXQoJy8nKTtcclxuXHRpZiAocGFydHMubGVuZ3RoIDw9IDEpIHtcclxuXHRcdHJldHVybiBjbGVhblBhdGg7IC8vIFJldHVybiBhcy1pcyBpZiBubyBwYXJlbnQgZm9sZGVyIChqdXN0IGZpbGVuYW1lKVxyXG5cdH1cclxuXHRyZXR1cm4gcGFydHMuc2xpY2UoLTIpLmpvaW4oJy8nKTsgLy8gUmV0dXJuIGxhc3QgdHdvIHBhcnRzIChwYXJlbnQgZm9sZGVyICsgZmlsZSBuYW1lKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmF1bHRGb2xkZXJzSW5mbyhzY2FuRGlyZWN0b3JpZXM6IHN0cmluZywgZmlsZUNvdW50PzogbnVtYmVyKTogc3RyaW5nIHtcclxuXHRsZXQgYmFzZVRleHQgPSAnVmF1bHQgZm9sZGVyczogJztcclxuXHRpZiAoIXNjYW5EaXJlY3RvcmllcyB8fCBzY2FuRGlyZWN0b3JpZXMudHJpbSgpID09PSAnJykge1xyXG5cdFx0YmFzZVRleHQgKz0gJ2FsbCc7XHJcblx0fSBlbHNlIHtcclxuXHRcdGNvbnN0IGZvbGRlcnMgPSBzY2FuRGlyZWN0b3JpZXMuc3BsaXQoJywnKS5tYXAoZiA9PiBmLnRyaW0oKSkuZmlsdGVyKGYgPT4gZi5sZW5ndGggPiAwKTtcclxuXHRcdGJhc2VUZXh0ICs9IGZvbGRlcnMuam9pbignLCAnKTtcclxuXHR9XHJcblx0XHJcblx0aWYgKGZpbGVDb3VudCAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRiYXNlVGV4dCArPSBgOyAke2ZpbGVDb3VudH0gZmlsZXMgYW5hbHl6ZWRgO1xyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4gYmFzZVRleHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzb3J0RmlsZXMoZmlsZXM6IFNFT1Jlc3VsdHNbXSwgc29ydFR5cGU6IHN0cmluZyk6IFNFT1Jlc3VsdHNbXSB7XHJcblx0Y29uc3Qgc29ydGVkRmlsZXMgPSBbLi4uZmlsZXNdO1xyXG5cdFxyXG5cdHN3aXRjaCAoc29ydFR5cGUpIHtcclxuXHRcdGNhc2UgJ3dhcm5pbmdzLWRlc2MnOlxyXG5cdFx0XHRzb3J0ZWRGaWxlcy5zb3J0KChhLCBiKSA9PiB7XHJcblx0XHRcdFx0Ly8gUHJpbWFyeTogd2FybmluZ3MgKGhpZ2ggZmlyc3QpXHJcblx0XHRcdFx0aWYgKGIud2FybmluZ3NDb3VudCAhPT0gYS53YXJuaW5nc0NvdW50KSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYi53YXJuaW5nc0NvdW50IC0gYS53YXJuaW5nc0NvdW50O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBTZWNvbmRhcnk6IGlzc3VlcyAoaGlnaCBmaXJzdClcclxuXHRcdFx0XHRpZiAoYi5pc3N1ZXNDb3VudCAhPT0gYS5pc3N1ZXNDb3VudCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGIuaXNzdWVzQ291bnQgLSBhLmlzc3Vlc0NvdW50O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBUZXJ0aWFyeTogbm90aWNlcyAoaGlnaCBmaXJzdClcclxuXHRcdFx0XHRpZiAoYi5ub3RpY2VzQ291bnQgIT09IGEubm90aWNlc0NvdW50KSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYi5ub3RpY2VzQ291bnQgLSBhLm5vdGljZXNDb3VudDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gUXVhdGVybmFyeTogZmlsZSBuYW1lIEEtWlxyXG5cdFx0XHRcdGNvbnN0IGFGaWxlTmFtZSA9IGEuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdGNvbnN0IGJGaWxlTmFtZSA9IGIuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdHJldHVybiBhRmlsZU5hbWUubG9jYWxlQ29tcGFyZShiRmlsZU5hbWUpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlICd3YXJuaW5ncy1hc2MnOlxyXG5cdFx0XHRzb3J0ZWRGaWxlcy5zb3J0KChhLCBiKSA9PiB7XHJcblx0XHRcdFx0Ly8gUHJpbWFyeTogd2FybmluZ3MgKGxvdyBmaXJzdClcclxuXHRcdFx0XHRpZiAoYS53YXJuaW5nc0NvdW50ICE9PSBiLndhcm5pbmdzQ291bnQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBhLndhcm5pbmdzQ291bnQgLSBiLndhcm5pbmdzQ291bnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFNlY29uZGFyeTogaXNzdWVzIChsb3cgZmlyc3QpXHJcblx0XHRcdFx0aWYgKGEuaXNzdWVzQ291bnQgIT09IGIuaXNzdWVzQ291bnQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBhLmlzc3Vlc0NvdW50IC0gYi5pc3N1ZXNDb3VudDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gVGVydGlhcnk6IG5vdGljZXMgKGxvdyBmaXJzdClcclxuXHRcdFx0XHRpZiAoYS5ub3RpY2VzQ291bnQgIT09IGIubm90aWNlc0NvdW50KSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYS5ub3RpY2VzQ291bnQgLSBiLm5vdGljZXNDb3VudDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gUXVhdGVybmFyeTogZmlsZSBuYW1lIEEtWlxyXG5cdFx0XHRcdGNvbnN0IGFGaWxlTmFtZSA9IGEuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdGNvbnN0IGJGaWxlTmFtZSA9IGIuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdHJldHVybiBhRmlsZU5hbWUubG9jYWxlQ29tcGFyZShiRmlsZU5hbWUpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlICdpc3N1ZXMtZGVzYyc6XHJcblx0XHRcdHNvcnRlZEZpbGVzLnNvcnQoKGEsIGIpID0+IHtcclxuXHRcdFx0XHQvLyBQcmltYXJ5OiBpc3N1ZXMgKGhpZ2ggZmlyc3QpXHJcblx0XHRcdFx0aWYgKGIuaXNzdWVzQ291bnQgIT09IGEuaXNzdWVzQ291bnQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBiLmlzc3Vlc0NvdW50IC0gYS5pc3N1ZXNDb3VudDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gU2Vjb25kYXJ5OiB3YXJuaW5ncyAoaGlnaCBmaXJzdClcclxuXHRcdFx0XHRpZiAoYi53YXJuaW5nc0NvdW50ICE9PSBhLndhcm5pbmdzQ291bnQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBiLndhcm5pbmdzQ291bnQgLSBhLndhcm5pbmdzQ291bnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFRlcnRpYXJ5OiBub3RpY2VzIChoaWdoIGZpcnN0KVxyXG5cdFx0XHRcdGlmIChiLm5vdGljZXNDb3VudCAhPT0gYS5ub3RpY2VzQ291bnQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBiLm5vdGljZXNDb3VudCAtIGEubm90aWNlc0NvdW50O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBRdWF0ZXJuYXJ5OiBmaWxlIG5hbWUgQS1aXHJcblx0XHRcdFx0Y29uc3QgYUZpbGVOYW1lID0gYS5maWxlLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XHJcblx0XHRcdFx0Y29uc3QgYkZpbGVOYW1lID0gYi5maWxlLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XHJcblx0XHRcdFx0cmV0dXJuIGFGaWxlTmFtZS5sb2NhbGVDb21wYXJlKGJGaWxlTmFtZSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UgJ2lzc3Vlcy1hc2MnOlxyXG5cdFx0XHRzb3J0ZWRGaWxlcy5zb3J0KChhLCBiKSA9PiB7XHJcblx0XHRcdFx0Ly8gUHJpbWFyeTogaXNzdWVzIChsb3cgZmlyc3QpXHJcblx0XHRcdFx0aWYgKGEuaXNzdWVzQ291bnQgIT09IGIuaXNzdWVzQ291bnQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBhLmlzc3Vlc0NvdW50IC0gYi5pc3N1ZXNDb3VudDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gU2Vjb25kYXJ5OiB3YXJuaW5ncyAobG93IGZpcnN0KVxyXG5cdFx0XHRcdGlmIChhLndhcm5pbmdzQ291bnQgIT09IGIud2FybmluZ3NDb3VudCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGEud2FybmluZ3NDb3VudCAtIGIud2FybmluZ3NDb3VudDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gVGVydGlhcnk6IG5vdGljZXMgKGxvdyBmaXJzdClcclxuXHRcdFx0XHRpZiAoYS5ub3RpY2VzQ291bnQgIT09IGIubm90aWNlc0NvdW50KSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYS5ub3RpY2VzQ291bnQgLSBiLm5vdGljZXNDb3VudDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gUXVhdGVybmFyeTogZmlsZSBuYW1lIEEtWlxyXG5cdFx0XHRcdGNvbnN0IGFGaWxlTmFtZSA9IGEuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdGNvbnN0IGJGaWxlTmFtZSA9IGIuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdHJldHVybiBhRmlsZU5hbWUubG9jYWxlQ29tcGFyZShiRmlsZU5hbWUpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlICdub3RpY2VzLWRlc2MnOlxyXG5cdFx0XHRzb3J0ZWRGaWxlcy5zb3J0KChhLCBiKSA9PiB7XHJcblx0XHRcdFx0Ly8gUHJpbWFyeTogbm90aWNlcyAoaGlnaCBmaXJzdClcclxuXHRcdFx0XHRpZiAoYi5ub3RpY2VzQ291bnQgIT09IGEubm90aWNlc0NvdW50KSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYi5ub3RpY2VzQ291bnQgLSBhLm5vdGljZXNDb3VudDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gU2Vjb25kYXJ5OiBpc3N1ZXMgKGhpZ2ggZmlyc3QpXHJcblx0XHRcdFx0aWYgKGIuaXNzdWVzQ291bnQgIT09IGEuaXNzdWVzQ291bnQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBiLmlzc3Vlc0NvdW50IC0gYS5pc3N1ZXNDb3VudDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gVGVydGlhcnk6IHdhcm5pbmdzIChoaWdoIGZpcnN0KVxyXG5cdFx0XHRcdGlmIChiLndhcm5pbmdzQ291bnQgIT09IGEud2FybmluZ3NDb3VudCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGIud2FybmluZ3NDb3VudCAtIGEud2FybmluZ3NDb3VudDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gUXVhdGVybmFyeTogZmlsZSBuYW1lIEEtWlxyXG5cdFx0XHRcdGNvbnN0IGFGaWxlTmFtZSA9IGEuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdGNvbnN0IGJGaWxlTmFtZSA9IGIuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdHJldHVybiBhRmlsZU5hbWUubG9jYWxlQ29tcGFyZShiRmlsZU5hbWUpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlICdub3RpY2VzLWFzYyc6XHJcblx0XHRcdHNvcnRlZEZpbGVzLnNvcnQoKGEsIGIpID0+IHtcclxuXHRcdFx0XHQvLyBQcmltYXJ5OiBub3RpY2VzIChsb3cgZmlyc3QpXHJcblx0XHRcdFx0aWYgKGEubm90aWNlc0NvdW50ICE9PSBiLm5vdGljZXNDb3VudCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGEubm90aWNlc0NvdW50IC0gYi5ub3RpY2VzQ291bnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFNlY29uZGFyeTogaXNzdWVzIChsb3cgZmlyc3QpXHJcblx0XHRcdFx0aWYgKGEuaXNzdWVzQ291bnQgIT09IGIuaXNzdWVzQ291bnQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBhLmlzc3Vlc0NvdW50IC0gYi5pc3N1ZXNDb3VudDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gVGVydGlhcnk6IHdhcm5pbmdzIChsb3cgZmlyc3QpXHJcblx0XHRcdFx0aWYgKGEud2FybmluZ3NDb3VudCAhPT0gYi53YXJuaW5nc0NvdW50KSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYS53YXJuaW5nc0NvdW50IC0gYi53YXJuaW5nc0NvdW50O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBRdWF0ZXJuYXJ5OiBmaWxlIG5hbWUgQS1aXHJcblx0XHRcdFx0Y29uc3QgYUZpbGVOYW1lID0gYS5maWxlLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XHJcblx0XHRcdFx0Y29uc3QgYkZpbGVOYW1lID0gYi5maWxlLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XHJcblx0XHRcdFx0cmV0dXJuIGFGaWxlTmFtZS5sb2NhbGVDb21wYXJlKGJGaWxlTmFtZSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UgJ2ZpbGVuYW1lLWFzYyc6XHJcblx0XHRcdHNvcnRlZEZpbGVzLnNvcnQoKGEsIGIpID0+IHtcclxuXHRcdFx0XHQvLyBQcmltYXJ5OiBmaWxlIG5hbWUgQS1aXHJcblx0XHRcdFx0Y29uc3QgYUZpbGVOYW1lID0gYS5maWxlLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XHJcblx0XHRcdFx0Y29uc3QgYkZpbGVOYW1lID0gYi5maWxlLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XHJcblx0XHRcdFx0Y29uc3QgbmFtZUNvbXBhcmUgPSBhRmlsZU5hbWUubG9jYWxlQ29tcGFyZShiRmlsZU5hbWUpO1xyXG5cdFx0XHRcdGlmIChuYW1lQ29tcGFyZSAhPT0gMCkgcmV0dXJuIG5hbWVDb21wYXJlO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFNlY29uZGFyeTogcGFyZW50IGZvbGRlciBBLVogKHJvb3QgZmlsZXMgZmlyc3QpXHJcblx0XHRcdFx0Y29uc3QgYVBhcnRzID0gYS5maWxlLnNwbGl0KCcvJyk7XHJcblx0XHRcdFx0Y29uc3QgYlBhcnRzID0gYi5maWxlLnNwbGl0KCcvJyk7XHJcblx0XHRcdFx0Y29uc3QgYVBhcmVudCA9IGFQYXJ0cy5sZW5ndGggPiAxID8gKGFQYXJ0c1thUGFydHMubGVuZ3RoIC0gMl0gfHwgJycpIDogJyc7XHJcblx0XHRcdFx0Y29uc3QgYlBhcmVudCA9IGJQYXJ0cy5sZW5ndGggPiAxID8gKGJQYXJ0c1tiUGFydHMubGVuZ3RoIC0gMl0gfHwgJycpIDogJyc7XHJcblx0XHRcdFx0Y29uc3QgcGFyZW50Q29tcGFyZSA9IGFQYXJlbnQubG9jYWxlQ29tcGFyZShiUGFyZW50KTtcclxuXHRcdFx0XHRpZiAocGFyZW50Q29tcGFyZSAhPT0gMCkgcmV0dXJuIHBhcmVudENvbXBhcmU7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gVGVydGlhcnk6IGlzc3VlcyAoaGlnaCBmaXJzdClcclxuXHRcdFx0XHRpZiAoYi5pc3N1ZXNDb3VudCAhPT0gYS5pc3N1ZXNDb3VudCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGIuaXNzdWVzQ291bnQgLSBhLmlzc3Vlc0NvdW50O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBRdWF0ZXJuYXJ5OiB3YXJuaW5ncyAoaGlnaCBmaXJzdClcclxuXHRcdFx0XHRpZiAoYi53YXJuaW5nc0NvdW50ICE9PSBhLndhcm5pbmdzQ291bnQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBiLndhcm5pbmdzQ291bnQgLSBhLndhcm5pbmdzQ291bnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFF1aW5hcnk6IG5vdGljZXMgKGhpZ2ggZmlyc3QpXHJcblx0XHRcdFx0cmV0dXJuIGIubm90aWNlc0NvdW50IC0gYS5ub3RpY2VzQ291bnQ7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UgJ2ZpbGVuYW1lLWRlc2MnOlxyXG5cdFx0XHRzb3J0ZWRGaWxlcy5zb3J0KChhLCBiKSA9PiB7XHJcblx0XHRcdFx0Ly8gUHJpbWFyeTogZmlsZSBuYW1lIFotQVxyXG5cdFx0XHRcdGNvbnN0IGFGaWxlTmFtZSA9IGEuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdGNvbnN0IGJGaWxlTmFtZSA9IGIuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdGNvbnN0IG5hbWVDb21wYXJlID0gYkZpbGVOYW1lLmxvY2FsZUNvbXBhcmUoYUZpbGVOYW1lKTtcclxuXHRcdFx0XHRpZiAobmFtZUNvbXBhcmUgIT09IDApIHJldHVybiBuYW1lQ29tcGFyZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBTZWNvbmRhcnk6IHBhcmVudCBmb2xkZXIgWi1BIChyb290IGZpbGVzIGxhc3QpXHJcblx0XHRcdFx0Y29uc3QgYVBhcnRzID0gYS5maWxlLnNwbGl0KCcvJyk7XHJcblx0XHRcdFx0Y29uc3QgYlBhcnRzID0gYi5maWxlLnNwbGl0KCcvJyk7XHJcblx0XHRcdFx0Y29uc3QgYVBhcmVudCA9IGFQYXJ0cy5sZW5ndGggPiAxID8gKGFQYXJ0c1thUGFydHMubGVuZ3RoIC0gMl0gfHwgJycpIDogJyc7XHJcblx0XHRcdFx0Y29uc3QgYlBhcmVudCA9IGJQYXJ0cy5sZW5ndGggPiAxID8gKGJQYXJ0c1tiUGFydHMubGVuZ3RoIC0gMl0gfHwgJycpIDogJyc7XHJcblx0XHRcdFx0Y29uc3QgcGFyZW50Q29tcGFyZSA9IGJQYXJlbnQubG9jYWxlQ29tcGFyZShhUGFyZW50KTtcclxuXHRcdFx0XHRpZiAocGFyZW50Q29tcGFyZSAhPT0gMCkgcmV0dXJuIHBhcmVudENvbXBhcmU7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gVGVydGlhcnk6IGlzc3VlcyAoaGlnaCBmaXJzdClcclxuXHRcdFx0XHRpZiAoYi5pc3N1ZXNDb3VudCAhPT0gYS5pc3N1ZXNDb3VudCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGIuaXNzdWVzQ291bnQgLSBhLmlzc3Vlc0NvdW50O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBRdWF0ZXJuYXJ5OiB3YXJuaW5ncyAoaGlnaCBmaXJzdClcclxuXHRcdFx0XHRpZiAoYi53YXJuaW5nc0NvdW50ICE9PSBhLndhcm5pbmdzQ291bnQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBiLndhcm5pbmdzQ291bnQgLSBhLndhcm5pbmdzQ291bnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFF1aW5hcnk6IG5vdGljZXMgKGhpZ2ggZmlyc3QpXHJcblx0XHRcdFx0cmV0dXJuIGIubm90aWNlc0NvdW50IC0gYS5ub3RpY2VzQ291bnQ7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRicmVhaztcclxuXHR9XHJcblx0XHJcblx0cmV0dXJuIHNvcnRlZEZpbGVzO1xyXG59XHJcbiIsICIvKipcclxuICogQ29udGVudCBwYXJzaW5nIHV0aWxpdGllcyBmb3IgU0VPIGNoZWNrc1xyXG4gKiBQcm92aWRlcyBmdW5jdGlvbnMgdG8gY2xlYW4gYW5kIHBhcnNlIG1hcmtkb3duIGNvbnRlbnRcclxuICovXHJcblxyXG4vKipcclxuICogUmVtb3ZlcyBjb2RlIGJsb2NrcywgaW5saW5lIGNvZGUsIGFuZCBIVE1MIGNvbnRlbnQgZnJvbSBjb250ZW50XHJcbiAqIFVzZWQgdG8gYXZvaWQgZmFsc2UgcG9zaXRpdmVzIGluIFNFTyBjaGVja3NcclxuICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgcmF3IG1hcmtkb3duIGNvbnRlbnRcclxuICogQHJldHVybnMgQ2xlYW5lZCBjb250ZW50IHdpdGggY29kZSBibG9ja3MgYW5kIEhUTUwgcmVtb3ZlZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUNvZGVCbG9ja3MoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRyZXR1cm4gY29udGVudFxyXG5cdFx0LnJlcGxhY2UoL2BgYFtcXHNcXFNdKj9gYGAvZywgJycpIC8vIFJlbW92ZSBjb2RlIGJsb2Nrc1xyXG5cdFx0LnJlcGxhY2UoL35+fltcXHNcXFNdKj9+fn4vZywgJycpIC8vIFJlbW92ZSBjb2RlIGJsb2NrcyB3aXRoIH5+flxyXG5cdFx0LnJlcGxhY2UoL2BbXmBcXG5dK2AvZywgJycpIC8vIFJlbW92ZSBpbmxpbmUgY29kZVxyXG5cdFx0LnJlcGxhY2UoLzxbXj5dKj4vZywgJycpIC8vIFJlbW92ZSBIVE1MIHRhZ3MgKGJ1dCBrZWVwIHRleHQgY29udGVudClcclxuXHRcdC5yZXBsYWNlKC9eLS0tXFxuW1xcc1xcU10qP1xcbi0tLVxcbi8sICcnKSAvLyBSZW1vdmUgZnJvbnRtYXR0ZXJcclxuXHRcdC5yZXBsYWNlKC86OlxcdytcXHtbXn1dKlxcfS9nLCAnJyk7IC8vIFJlbW92ZSBPYnNpZGlhbiBjYWxsb3V0LXN0eWxlIGJsb2NrcyBsaWtlIDo6bGlua3t1cmw9XCIuLi5cIn1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbW92ZXMgSFRNTCBhdHRyaWJ1dGVzIGFuZCB0YWdzIGNvbXBsZXRlbHlcclxuICogVXNlZCBzcGVjaWZpY2FsbHkgZm9yIG5ha2VkIGxpbmsgZGV0ZWN0aW9uXHJcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIHJhdyBtYXJrZG93biBjb250ZW50XHJcbiAqIEByZXR1cm5zIENvbnRlbnQgd2l0aCBhbGwgSFRNTCByZW1vdmVkXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlSHRtbEF0dHJpYnV0ZXMoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRyZXR1cm4gY29udGVudFxyXG5cdFx0LnJlcGxhY2UoL2BgYFtcXHNcXFNdKj9gYGAvZywgJycpIC8vIFJlbW92ZSBjb2RlIGJsb2Nrc1xyXG5cdFx0LnJlcGxhY2UoL35+fltcXHNcXFNdKj9+fn4vZywgJycpIC8vIFJlbW92ZSBjb2RlIGJsb2NrcyB3aXRoIH5+flxyXG5cdFx0LnJlcGxhY2UoL2BbXmBcXG5dK2AvZywgJycpIC8vIFJlbW92ZSBpbmxpbmUgY29kZVxyXG5cdFx0LnJlcGxhY2UoLzxbXj5dKj4vZywgJycpIC8vIFJlbW92ZSBIVE1MIHRhZ3MgY29tcGxldGVseVxyXG5cdFx0LnJlcGxhY2UoL14tLS1cXG5bXFxzXFxTXSo/XFxuLS0tXFxuLywgJycpIC8vIFJlbW92ZSBmcm9udG1hdHRlclxyXG5cdFx0LnJlcGxhY2UoLzo6XFx3K1xce1tefV0qXFx9L2csICcnKTsgLy8gUmVtb3ZlIE9ic2lkaWFuIGNhbGxvdXQtc3R5bGUgYmxvY2tzIGxpa2UgOjpsaW5re3VybD1cIi4uLlwifVxyXG59XHJcblxyXG4vKipcclxuICogRmluZHMgdGhlIGxpbmUgbnVtYmVyIHdoZXJlIGEgc3BlY2lmaWMgaW1hZ2UgbWF0Y2ggb2NjdXJzXHJcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIGNvbnRlbnQgdG8gc2VhcmNoIGluXHJcbiAqIEBwYXJhbSBpbWFnZU1hdGNoIC0gVGhlIGltYWdlIG1hdGNoIHN0cmluZyB0byBmaW5kXHJcbiAqIEByZXR1cm5zIExpbmUgbnVtYmVyICgxLWJhc2VkKSB3aGVyZSB0aGUgbWF0Y2ggb2NjdXJzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZmluZExpbmVOdW1iZXJGb3JJbWFnZShjb250ZW50OiBzdHJpbmcsIGltYWdlTWF0Y2g6IHN0cmluZyk6IG51bWJlciB7XHJcblx0Y29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcclxuXHRmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRjb25zdCBsaW5lID0gbGluZXNbaV07XHJcblx0XHRpZiAobGluZSAmJiBsaW5lLmluY2x1ZGVzKGltYWdlTWF0Y2gpKSB7XHJcblx0XHRcdHJldHVybiBpICsgMTtcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIDE7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXRzIGNvbnRleHQgYXJvdW5kIGEgc3BlY2lmaWMgbGluZSBudW1iZXJcclxuICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgY29udGVudCB0byBleHRyYWN0IGNvbnRleHQgZnJvbVxyXG4gKiBAcGFyYW0gbGluZU51bWJlciAtIFRoZSBsaW5lIG51bWJlciB0byBnZXQgY29udGV4dCBhcm91bmRcclxuICogQHBhcmFtIGNvbnRleHRMaW5lcyAtIE51bWJlciBvZiBsaW5lcyBiZWZvcmUgYW5kIGFmdGVyIHRvIGluY2x1ZGVcclxuICogQHJldHVybnMgQ29udGV4dCBzdHJpbmcgd2l0aCBzdXJyb3VuZGluZyBsaW5lc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRleHRBcm91bmRMaW5lKGNvbnRlbnQ6IHN0cmluZywgbGluZU51bWJlcjogbnVtYmVyLCBjb250ZXh0TGluZXM6IG51bWJlciA9IDIpOiBzdHJpbmcge1xyXG5cdGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XHJcblx0Y29uc3Qgc3RhcnQgPSBNYXRoLm1heCgwLCBsaW5lTnVtYmVyIC0gMSAtIGNvbnRleHRMaW5lcyk7XHJcblx0Y29uc3QgZW5kID0gTWF0aC5taW4obGluZXMubGVuZ3RoLCBsaW5lTnVtYmVyIC0gMSArIGNvbnRleHRMaW5lcyArIDEpO1xyXG5cdHJldHVybiBsaW5lcy5zbGljZShzdGFydCwgZW5kKS5qb2luKCdcXG4nKTtcclxufVxyXG4iLCAiLyoqXHJcbiAqIFBvc2l0aW9uIGFuZCBsaW5lIG51bWJlciB1dGlsaXRpZXMgZm9yIFNFTyBjaGVja3NcclxuICogUHJvdmlkZXMgZnVuY3Rpb25zIHRvIGZpbmQgYW5kIG5hdmlnYXRlIHRvIHNwZWNpZmljIGNvbnRlbnQgcG9zaXRpb25zXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEZpbmRzIHRoZSBsaW5lIG51bWJlciB3aGVyZSBhIHNwZWNpZmljIGltYWdlIG1hdGNoIG9jY3Vyc1xyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSBjb250ZW50IHRvIHNlYXJjaCBpblxyXG4gKiBAcGFyYW0gaW1hZ2VNYXRjaCAtIFRoZSBpbWFnZSBtYXRjaCBzdHJpbmcgdG8gZmluZFxyXG4gKiBAcmV0dXJucyBMaW5lIG51bWJlciAoMS1iYXNlZCkgd2hlcmUgdGhlIG1hdGNoIG9jY3Vyc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRMaW5lTnVtYmVyRm9ySW1hZ2UoY29udGVudDogc3RyaW5nLCBpbWFnZU1hdGNoOiBzdHJpbmcpOiBudW1iZXIge1xyXG5cdGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0Y29uc3QgbGluZSA9IGxpbmVzW2ldO1xyXG5cdFx0aWYgKGxpbmUgJiYgbGluZS5pbmNsdWRlcyhpbWFnZU1hdGNoKSkge1xyXG5cdFx0XHRyZXR1cm4gaSArIDE7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiAxO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0cyBjb250ZXh0IGFyb3VuZCBhIHNwZWNpZmljIGxpbmUgbnVtYmVyXHJcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIGNvbnRlbnQgdG8gZXh0cmFjdCBjb250ZXh0IGZyb21cclxuICogQHBhcmFtIGxpbmVOdW1iZXIgLSBUaGUgbGluZSBudW1iZXIgdG8gZ2V0IGNvbnRleHQgYXJvdW5kXHJcbiAqIEBwYXJhbSBjb250ZXh0TGluZXMgLSBOdW1iZXIgb2YgbGluZXMgYmVmb3JlIGFuZCBhZnRlciB0byBpbmNsdWRlXHJcbiAqIEByZXR1cm5zIENvbnRleHQgc3RyaW5nIHdpdGggc3Vycm91bmRpbmcgbGluZXNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZXh0QXJvdW5kTGluZShjb250ZW50OiBzdHJpbmcsIGxpbmVOdW1iZXI6IG51bWJlciwgY29udGV4dExpbmVzOiBudW1iZXIgPSAyKTogc3RyaW5nIHtcclxuXHRjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xyXG5cdGNvbnN0IHN0YXJ0ID0gTWF0aC5tYXgoMCwgbGluZU51bWJlciAtIDEgLSBjb250ZXh0TGluZXMpO1xyXG5cdGNvbnN0IGVuZCA9IE1hdGgubWluKGxpbmVzLmxlbmd0aCwgbGluZU51bWJlciAtIDEgKyBjb250ZXh0TGluZXMgKyAxKTtcclxuXHRyZXR1cm4gbGluZXMuc2xpY2Uoc3RhcnQsIGVuZCkuam9pbignXFxuJyk7XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBBbHQgdGV4dCB2YWxpZGF0aW9uIGZvciBtZWRpYSBjb250ZW50XHJcbiAqIENoZWNrcyBmb3IgbWlzc2luZyBhbHQgdGV4dCBpbiBtYXJrZG93biwgd2lraWxpbmssIGFuZCBIVE1MIG1lZGlhIGVsZW1lbnRzIChpbWFnZXMsIHZpZGVvcywgZW1iZWRzLCBldGMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IFNFT1NldHRpbmdzIH0gZnJvbSBcIi4uL3NldHRpbmdzXCI7XHJcbmltcG9ydCB7IFNFT0NoZWNrUmVzdWx0IH0gZnJvbSBcIi4uL3R5cGVzXCI7XHJcbmltcG9ydCB7IHJlbW92ZUNvZGVCbG9ja3MgfSBmcm9tIFwiLi91dGlscy9jb250ZW50LXBhcnNlclwiO1xyXG5pbXBvcnQgeyBmaW5kTGluZU51bWJlckZvckltYWdlLCBnZXRDb250ZXh0QXJvdW5kTGluZSB9IGZyb20gXCIuL3V0aWxzL3Bvc2l0aW9uLXV0aWxzXCI7XHJcblxyXG4vKipcclxuICogQ2hlY2tzIGZvciBtaXNzaW5nIGFsdCB0ZXh0IGluIG1lZGlhIGNvbnRlbnRcclxuICogVmFsaWRhdGVzIG1hcmtkb3duIG1lZGlhLCB3aWtpbGluayBtZWRpYSwgYW5kIEhUTUwgbWVkaWEgdGFncyAoaW1hZ2VzLCB2aWRlb3MsIGVtYmVkcywgZXRjLilcclxuICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgbWFya2Rvd24gY29udGVudCB0byBjaGVja1xyXG4gKiBAcGFyYW0gZmlsZSAtIFRoZSBmaWxlIGJlaW5nIGNoZWNrZWRcclxuICogQHBhcmFtIHNldHRpbmdzIC0gUGx1Z2luIHNldHRpbmdzXHJcbiAqIEByZXR1cm5zIEFycmF5IG9mIFNFTyBjaGVjayByZXN1bHRzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tBbHRUZXh0KGNvbnRlbnQ6IHN0cmluZywgZmlsZTogVEZpbGUsIHNldHRpbmdzOiBTRU9TZXR0aW5ncyk6IFByb21pc2U8U0VPQ2hlY2tSZXN1bHRbXT4ge1xyXG5cdGNvbnN0IHJlc3VsdHM6IFNFT0NoZWNrUmVzdWx0W10gPSBbXTtcclxuXHRcclxuXHRpZiAoIXNldHRpbmdzLmNoZWNrQWx0VGV4dCkge1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIFJlbW92ZSBjb2RlIGJsb2NrcyB0byBhdm9pZCBmYWxzZSBwb3NpdGl2ZXNcclxuXHRjb25zdCBjbGVhbkNvbnRlbnQgPSByZW1vdmVDb2RlQmxvY2tzKGNvbnRlbnQpO1xyXG5cdFxyXG5cdC8vIENoZWNrIG1hcmtkb3duIG1lZGlhICFbYWx0XShzcmMpXHJcblx0Y29uc3QgbWFya2Rvd25JbWFnZXMgPSBjbGVhbkNvbnRlbnQubWF0Y2goLyFcXFsoW15cXF1dKilcXF1cXChbXildK1xcKS9nKTtcclxuXHRpZiAobWFya2Rvd25JbWFnZXMpIHtcclxuXHRcdGNvbnN0IG1pc3NpbmdBbHRUZXh0ID0gbWFya2Rvd25JbWFnZXMuZmlsdGVyKG1hdGNoID0+IHtcclxuXHRcdFx0Y29uc3QgYWx0VGV4dCA9IG1hdGNoLm1hdGNoKC8hXFxbKFteXFxdXSopXFxdLyk/LlsxXTtcclxuXHRcdFx0cmV0dXJuICFhbHRUZXh0IHx8IGFsdFRleHQudHJpbSgpID09PSAnJztcclxuXHRcdH0pO1xyXG5cdFx0aWYgKG1pc3NpbmdBbHRUZXh0Lmxlbmd0aCA+IDApIHtcclxuXHRcdFx0Ly8gQ3JlYXRlIGluZGl2aWR1YWwgcmVzdWx0cyBmb3IgZWFjaCBtaXNzaW5nIGFsdCB0ZXh0IG1lZGlhIGVsZW1lbnRcclxuXHRcdFx0bWlzc2luZ0FsdFRleHQuZm9yRWFjaCgobWF0Y2gsIGluZGV4KSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgcGF0aE1hdGNoID0gbWF0Y2gubWF0Y2goLyFcXFtbXlxcXV0qXFxdXFwoKFteKV0rKVxcKS8pO1xyXG5cdFx0XHRcdGNvbnN0IGltYWdlUGF0aCA9IHBhdGhNYXRjaCA/IHBhdGhNYXRjaFsxXSA6IG1hdGNoO1xyXG5cdFx0XHRcdGNvbnN0IGxpbmVOdW1iZXIgPSBmaW5kTGluZU51bWJlckZvckltYWdlKGNvbnRlbnQsIG1hdGNoKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0XHRcdG1lc3NhZ2U6IGBNZWRpYSBtaXNzaW5nIGFsdCB0ZXh0OiAke2ltYWdlUGF0aH1gLFxyXG5cdFx0XHRcdFx0c3VnZ2VzdGlvbjogXCJBZGQgZGVzY3JpcHRpdmUgYWx0IHRleHQgZm9yIGFjY2Vzc2liaWxpdHlcIixcclxuXHRcdFx0XHRcdHNldmVyaXR5OiAnZXJyb3InLFxyXG5cdFx0XHRcdFx0cG9zaXRpb246IHtcclxuXHRcdFx0XHRcdFx0bGluZTogbGluZU51bWJlcixcclxuXHRcdFx0XHRcdFx0c2VhcmNoVGV4dDogbWF0Y2gsXHJcblx0XHRcdFx0XHRcdGNvbnRleHQ6IGdldENvbnRleHRBcm91bmRMaW5lKGNvbnRlbnQsIGxpbmVOdW1iZXIpXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBDaGVjayB3aWtpbGluayBtZWRpYSAhW1ttZWRpYS5wbmddXV0gYW5kICFbW21lZGlhLnBuZ3xhbHQgdGV4dF1dXHJcblx0Y29uc3Qgd2lraWxpbmtJbWFnZXMgPSBjbGVhbkNvbnRlbnQubWF0Y2goLyFcXFtcXFsoW15cXF1dKylcXF1cXF0vZyk7XHJcblx0aWYgKHdpa2lsaW5rSW1hZ2VzKSB7XHJcblx0XHRjb25zdCBtaXNzaW5nQWx0VGV4dCA9IHdpa2lsaW5rSW1hZ2VzLmZpbHRlcihtYXRjaCA9PiAhbWF0Y2guaW5jbHVkZXMoJ3wnKSk7XHJcblx0XHRpZiAobWlzc2luZ0FsdFRleHQubGVuZ3RoID4gMCkge1xyXG5cdFx0XHQvLyBDcmVhdGUgaW5kaXZpZHVhbCByZXN1bHRzIGZvciBlYWNoIG1pc3NpbmcgYWx0IHRleHQgd2lraWxpbmsgbWVkaWEgZWxlbWVudFxyXG5cdFx0XHRtaXNzaW5nQWx0VGV4dC5mb3JFYWNoKChtYXRjaCwgaW5kZXgpID0+IHtcclxuXHRcdFx0XHRjb25zdCBwYXRoTWF0Y2ggPSBtYXRjaC5tYXRjaCgvIVxcW1xcWyhbXlxcXV0rKVxcXVxcXS8pO1xyXG5cdFx0XHRcdGNvbnN0IGltYWdlUGF0aCA9IHBhdGhNYXRjaCA/IHBhdGhNYXRjaFsxXSA6IG1hdGNoO1xyXG5cdFx0XHRcdGNvbnN0IGxpbmVOdW1iZXIgPSBmaW5kTGluZU51bWJlckZvckltYWdlKGNvbnRlbnQsIG1hdGNoKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0XHRcdG1lc3NhZ2U6IGBXaWtpbGluayBtZWRpYSBtaXNzaW5nIGFsdCB0ZXh0OiAke2ltYWdlUGF0aH1gLFxyXG5cdFx0XHRcdFx0c3VnZ2VzdGlvbjogXCJBZGQgYWx0IHRleHQgdXNpbmcgIVtbbWVkaWEucG5nfGFsdCB0ZXh0XV0gc3ludGF4IG9yIGNvbnNpZGVyIHVzaW5nIHN0YW5kYXJkIG1hcmtkb3duIG1lZGlhIHN5bnRheFwiLFxyXG5cdFx0XHRcdFx0c2V2ZXJpdHk6ICdlcnJvcicsXHJcblx0XHRcdFx0XHRwb3NpdGlvbjoge1xyXG5cdFx0XHRcdFx0XHRsaW5lOiBsaW5lTnVtYmVyLFxyXG5cdFx0XHRcdFx0XHRzZWFyY2hUZXh0OiBtYXRjaCxcclxuXHRcdFx0XHRcdFx0Y29udGV4dDogZ2V0Q29udGV4dEFyb3VuZExpbmUoY29udGVudCwgbGluZU51bWJlcilcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdC8vIENoZWNrIEhUTUwgbWVkaWEgPGltZyBhbHQ9XCJ0ZXh0XCI+XHJcblx0Y29uc3QgaHRtbEltYWdlcyA9IGNsZWFuQ29udGVudC5tYXRjaCgvPGltZ1tePl0qPi9nKTtcclxuXHRpZiAoaHRtbEltYWdlcykge1xyXG5cdFx0Y29uc3QgbWlzc2luZ0FsdCA9IGh0bWxJbWFnZXMuZmlsdGVyKGltZyA9PiB7XHJcblx0XHRcdC8vIENoZWNrIGlmIGFsdCBhdHRyaWJ1dGUgaXMgbWlzc2luZyBvciBlbXB0eVxyXG5cdFx0XHRjb25zdCBhbHRNYXRjaCA9IGltZy5tYXRjaCgvYWx0XFxzKj1cXHMqW1wiJ10oW15cIiddKilbXCInXS8pO1xyXG5cdFx0XHRyZXR1cm4gIWFsdE1hdGNoIHx8ICFhbHRNYXRjaFsxXSB8fCBhbHRNYXRjaFsxXS50cmltKCkgPT09ICcnO1xyXG5cdFx0fSk7XHJcblx0XHRpZiAobWlzc2luZ0FsdC5sZW5ndGggPiAwKSB7XHJcblx0XHRcdC8vIENyZWF0ZSBpbmRpdmlkdWFsIHJlc3VsdHMgZm9yIGVhY2ggbWlzc2luZyBhbHQgYXR0cmlidXRlXHJcblx0XHRcdG1pc3NpbmdBbHQuZm9yRWFjaCgoaW1nLCBpbmRleCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHNyY01hdGNoID0gaW1nLm1hdGNoKC9zcmNcXHMqPVxccypbXCInXShbXlwiJ10qKVtcIiddLyk7XHJcblx0XHRcdFx0Y29uc3QgaW1hZ2VQYXRoID0gc3JjTWF0Y2ggPyBzcmNNYXRjaFsxXSA6ICdIVE1MIGltZyB0YWcnO1xyXG5cdFx0XHRcdGNvbnN0IGxpbmVOdW1iZXIgPSBmaW5kTGluZU51bWJlckZvckltYWdlKGNvbnRlbnQsIGltZyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdFx0XHRtZXNzYWdlOiBgSFRNTCBtZWRpYSBtaXNzaW5nIGFsdCBhdHRyaWJ1dGU6ICR7aW1hZ2VQYXRofWAsXHJcblx0XHRcdFx0XHRzdWdnZXN0aW9uOiBcIkFkZCBhbHQgYXR0cmlidXRlIHRvIEhUTUwgbWVkaWEgdGFnXCIsXHJcblx0XHRcdFx0XHRzZXZlcml0eTogJ2Vycm9yJyxcclxuXHRcdFx0XHRcdHBvc2l0aW9uOiB7XHJcblx0XHRcdFx0XHRcdGxpbmU6IGxpbmVOdW1iZXIsXHJcblx0XHRcdFx0XHRcdHNlYXJjaFRleHQ6IGltZyxcclxuXHRcdFx0XHRcdFx0Y29udGV4dDogZ2V0Q29udGV4dEFyb3VuZExpbmUoY29udGVudCwgbGluZU51bWJlcilcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0Ly8gQ2hlY2sgaWYgdGhlcmUgYXJlIGFueSBtZWRpYSBlbGVtZW50cyBhdCBhbGxcclxuXHRcdGNvbnN0IGhhc01lZGlhID0gbWFya2Rvd25JbWFnZXMgJiYgbWFya2Rvd25JbWFnZXMubGVuZ3RoID4gMCB8fCBodG1sSW1hZ2VzICYmIGh0bWxJbWFnZXMubGVuZ3RoID4gMCB8fCB3aWtpbGlua0ltYWdlcyAmJiB3aWtpbGlua0ltYWdlcy5sZW5ndGggPiAwO1xyXG5cdFx0aWYgKGhhc01lZGlhKSB7XHJcblx0XHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRcdG1lc3NhZ2U6IFwiQWxsIG1lZGlhIGVsZW1lbnRzIGhhdmUgYWx0IHRleHRcIixcclxuXHRcdFx0XHRzZXZlcml0eTogJ2luZm8nXHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0XHRwYXNzZWQ6IHRydWUsXHJcblx0XHRcdFx0bWVzc2FnZTogXCJObyBtZWRpYSBlbGVtZW50cyBpbiB0aGlzIHBvc3RcIixcclxuXHRcdFx0XHRzZXZlcml0eTogJ2luZm8nXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG59XHJcbiIsICIvKipcclxuICogTGluayB2YWxpZGF0aW9uIGNoZWNrc1xyXG4gKiBDaGVja3MgZm9yIG5ha2VkIGxpbmtzLCBicm9rZW4gbGlua3MsIGFuZCBleHRlcm5hbCBsaW5rIGlzc3Vlc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgU0VPU2V0dGluZ3MgfSBmcm9tIFwiLi4vc2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgU0VPQ2hlY2tSZXN1bHQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcclxuaW1wb3J0IHsgcmVtb3ZlSHRtbEF0dHJpYnV0ZXMgfSBmcm9tIFwiLi91dGlscy9jb250ZW50LXBhcnNlclwiO1xyXG5pbXBvcnQgeyBmaW5kTGluZU51bWJlckZvckltYWdlLCBnZXRDb250ZXh0QXJvdW5kTGluZSB9IGZyb20gXCIuL3V0aWxzL3Bvc2l0aW9uLXV0aWxzXCI7XHJcblxyXG4vKipcclxuICogQ2hlY2tzIGZvciBuYWtlZCBsaW5rcyAoVVJMcyB3aXRob3V0IG1hcmtkb3duIGxpbmsgc3ludGF4KVxyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSBtYXJrZG93biBjb250ZW50IHRvIGNoZWNrXHJcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBQbHVnaW4gc2V0dGluZ3NcclxuICogQHJldHVybnMgQXJyYXkgb2YgU0VPIGNoZWNrIHJlc3VsdHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja05ha2VkTGlua3MoY29udGVudDogc3RyaW5nLCBmaWxlOiBURmlsZSwgc2V0dGluZ3M6IFNFT1NldHRpbmdzKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0Y29uc3QgcmVzdWx0czogU0VPQ2hlY2tSZXN1bHRbXSA9IFtdO1xyXG5cdFxyXG5cdGlmICghc2V0dGluZ3MuY2hlY2tOYWtlZExpbmtzKSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcclxuXHR9XHJcblx0XHJcblx0Ly8gUmVtb3ZlIGNvZGUgYmxvY2tzIGFuZCBIVE1MIGNvbnRlbnQgdG8gYXZvaWQgZmFsc2UgcG9zaXRpdmVzXHJcblx0Y29uc3QgY2xlYW5Db250ZW50ID0gcmVtb3ZlSHRtbEF0dHJpYnV0ZXMoY29udGVudCk7XHJcblx0XHJcblx0Ly8gRmluZCBuYWtlZCBsaW5rcyAoVVJMcyB3aXRob3V0IG1hcmtkb3duIGxpbmsgc3ludGF4KVxyXG5cdC8vIFVzZSBuZWdhdGl2ZSBsb29rYmVoaW5kIHRvIGF2b2lkIG1hdGNoaW5nIFVSTHMgd2l0aGluIG90aGVyIFVSTHNcclxuXHRjb25zdCBuYWtlZExpbmtzID0gY2xlYW5Db250ZW50Lm1hdGNoKC8oPzwhXFxdXFwoKSg/PCFodHRwcz86XFwvXFwvW15cXHMpXSpcXC8paHR0cHM/OlxcL1xcL1teXFxzKV0rL2cpO1xyXG5cdGlmIChuYWtlZExpbmtzKSB7XHJcblx0XHRuYWtlZExpbmtzLmZvckVhY2goKGxpbmssIGluZGV4KSA9PiB7XHJcblx0XHRcdC8vIFNraXAgYXJjaGl2YWwgVVJMcyBhcyB0aGV5IGFyZSBtZWFudCB0byBiZSBkaXNwbGF5ZWQgYXMtaXNcclxuXHRcdFx0aWYgKGxpbmsuaW5jbHVkZXMoJ3dlYi5hcmNoaXZlLm9yZy93ZWIvJykgfHwgXHJcblx0XHRcdFx0bGluay5pbmNsdWRlcygnYXJjaGl2ZS50b2RheS8nKSB8fFxyXG5cdFx0XHRcdGxpbmsuaW5jbHVkZXMoJ2FyY2hpdmUuaXMvJykgfHxcclxuXHRcdFx0XHRsaW5rLmluY2x1ZGVzKCd3ZWIuYXJjaGl2ZS5vcmcvc2F2ZS8nKSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3QgbGluZU51bWJlciA9IGZpbmRMaW5lTnVtYmVyRm9ySW1hZ2UoY29udGVudCwgbGluayk7XHJcblx0XHRcdFxyXG5cdFx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdFx0bWVzc2FnZTogYE5ha2VkIGxpbmsgZm91bmQ6ICR7bGlua31gLFxyXG5cdFx0XHRcdHN1Z2dlc3Rpb246IFwiQ29udmVydCB0byBtYXJrZG93biBsaW5rIGZvcm1hdDogW2xpbmsgdGV4dF0odXJsKVwiLFxyXG5cdFx0XHRcdHNldmVyaXR5OiAnd2FybmluZycsXHJcblx0XHRcdFx0cG9zaXRpb246IHtcclxuXHRcdFx0XHRcdGxpbmU6IGxpbmVOdW1iZXIsXHJcblx0XHRcdFx0XHRzZWFyY2hUZXh0OiBsaW5rLFxyXG5cdFx0XHRcdFx0Y29udGV4dDogZ2V0Q29udGV4dEFyb3VuZExpbmUoY29udGVudCwgbGluZU51bWJlcilcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBcIk5vIG5ha2VkIGxpbmtzIGZvdW5kXCIsXHJcblx0XHRcdHNldmVyaXR5OiAnaW5mbydcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2tzIGZvciBicm9rZW4gaW50ZXJuYWwgbGlua3NcclxuICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgbWFya2Rvd24gY29udGVudCB0byBjaGVja1xyXG4gKiBAcGFyYW0gZmlsZSAtIFRoZSBmaWxlIGJlaW5nIGNoZWNrZWRcclxuICogQHBhcmFtIHNldHRpbmdzIC0gUGx1Z2luIHNldHRpbmdzXHJcbiAqIEBwYXJhbSBhcHAgLSBPYnNpZGlhbiBhcHAgaW5zdGFuY2UgKG9wdGlvbmFsKVxyXG4gKiBAcmV0dXJucyBBcnJheSBvZiBTRU8gY2hlY2sgcmVzdWx0c1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrQnJva2VuTGlua3MoY29udGVudDogc3RyaW5nLCBmaWxlOiBURmlsZSwgc2V0dGluZ3M6IFNFT1NldHRpbmdzLCBhcHA/OiBBcHApOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcclxuXHRjb25zdCByZXN1bHRzOiBTRU9DaGVja1Jlc3VsdFtdID0gW107XHJcblx0XHJcblx0aWYgKCFzZXR0aW5ncy5jaGVja0Jyb2tlbkxpbmtzKSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcclxuXHR9XHJcblx0XHJcblx0Ly8gRmluZCB3aWtpbGlua3MgW1tsaW5rXV0gYW5kIFtbbGlua3xkaXNwbGF5IHRleHRdXVxyXG5cdC8vIEZpcnN0IGZpbmQgYWxsIHdpa2lsaW5rcyBpbiB0aGUgb3JpZ2luYWwgY29udGVudFxyXG5cdGNvbnN0IGFsbFdpa2lsaW5rcyA9IGNvbnRlbnQubWF0Y2goL1xcW1xcWyhbXlxcXV0rKVxcXVxcXS9nKTtcclxuXHRpZiAoYWxsV2lraWxpbmtzKSB7XHJcblx0XHRjb25zdCBicm9rZW5MaW5rcyA9IFtdO1xyXG5cdFx0XHJcblx0XHRmb3IgKGNvbnN0IHdpa2lsaW5rIG9mIGFsbFdpa2lsaW5rcykge1xyXG5cdFx0XHQvLyBDaGVjayBpZiB0aGlzIGxpbmsgaXMgaW5zaWRlIGEgY29kZSBibG9ja1xyXG5cdFx0XHRjb25zdCBsaW5rU3RhcnQgPSBjb250ZW50LmluZGV4T2Yod2lraWxpbmspO1xyXG5cdFx0XHRpZiAobGlua1N0YXJ0ID09PSAtMSkgY29udGludWU7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDaGVjayBpZiB0aGUgbGluayBpcyBpbnNpZGUgYSBjb2RlIGJsb2NrIGJ5IGxvb2tpbmcgYXQgY29udGVudCBiZWZvcmUgaXRcclxuXHRcdFx0Y29uc3QgY29udGVudEJlZm9yZUxpbmsgPSBjb250ZW50LnN1YnN0cmluZygwLCBsaW5rU3RhcnQpO1xyXG5cdFx0XHRjb25zdCBjb2RlQmxvY2tNYXRjaGVzID0gY29udGVudEJlZm9yZUxpbmsubWF0Y2goL2BgYFtcXHNcXFNdKj9gYGB8fn5+W1xcc1xcU10qP35+fi9nKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIENvdW50IHVuY2xvc2VkIGNvZGUgYmxvY2tzXHJcblx0XHRcdGNvbnN0IG9wZW5Db2RlQmxvY2tzID0gKGNvbnRlbnRCZWZvcmVMaW5rLm1hdGNoKC9gYGAvZykgfHwgW10pLmxlbmd0aCAtIChjb2RlQmxvY2tNYXRjaGVzIHx8IFtdKS5sZW5ndGg7XHJcblx0XHRcdGNvbnN0IG9wZW5UaWxkZUJsb2NrcyA9IChjb250ZW50QmVmb3JlTGluay5tYXRjaCgvfn5+L2cpIHx8IFtdKS5sZW5ndGggLSAoY29kZUJsb2NrTWF0Y2hlcyB8fCBbXSkubGVuZ3RoO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gU2tpcCBpZiB3ZSdyZSBpbnNpZGUgYSBjb2RlIGJsb2NrXHJcblx0XHRcdGlmIChvcGVuQ29kZUJsb2NrcyA+IDAgfHwgb3BlblRpbGRlQmxvY2tzID4gMCkge1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnN0IGxpbmtNYXRjaCA9IHdpa2lsaW5rLm1hdGNoKC9cXFtcXFsoW15cXF1dKylcXF1cXF0vKTtcclxuXHRcdFx0aWYgKCFsaW5rTWF0Y2ggfHwgIWxpbmtNYXRjaFsxXSkgY29udGludWU7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBsaW5rVGV4dCA9IGxpbmtNYXRjaFsxXTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFBhcnNlIHdpa2lsaW5rOiBoYW5kbGUgYm90aCBbW3BhdGh8ZGlzcGxheV1dIGFuZCBbW3BhdGgjYW5jaG9yfGRpc3BsYXldXSBmb3JtYXRzXHJcblx0XHRcdGxldCBsaW5rUGF0aDogc3RyaW5nO1xyXG5cdFx0XHRsZXQgZGlzcGxheVRleHQ6IHN0cmluZztcclxuXHRcdFx0bGV0IGFuY2hvcjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDaGVjayBpZiB0aGVyZSdzIGEgZGlzcGxheSB0ZXh0IHNlcGFyYXRvclxyXG5cdFx0XHRpZiAobGlua1RleHQuaW5jbHVkZXMoJ3wnKSkge1xyXG5cdFx0XHRcdGNvbnN0IHBhcnRzID0gbGlua1RleHQuc3BsaXQoJ3wnKTtcclxuXHRcdFx0XHRjb25zdCBsaW5rUGFydCA9IHBhcnRzWzBdIHx8ICcnO1xyXG5cdFx0XHRcdGRpc3BsYXlUZXh0ID0gcGFydHNbMV0gfHwgbGlua1BhcnQ7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgbGluayBwYXJ0IGhhcyBhbiBhbmNob3JcclxuXHRcdFx0XHRpZiAobGlua1BhcnQuaW5jbHVkZXMoJyMnKSkge1xyXG5cdFx0XHRcdFx0Y29uc3QgYW5jaG9yUGFydHMgPSBsaW5rUGFydC5zcGxpdCgnIycpO1xyXG5cdFx0XHRcdFx0bGlua1BhdGggPSBhbmNob3JQYXJ0c1swXSB8fCAnJztcclxuXHRcdFx0XHRcdGFuY2hvciA9IGFuY2hvclBhcnRzWzFdIHx8IG51bGw7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGxpbmtQYXRoID0gbGlua1BhcnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIE5vIGRpc3BsYXkgdGV4dCwgY2hlY2sgaWYgdGhlcmUncyBhbiBhbmNob3JcclxuXHRcdFx0XHRpZiAobGlua1RleHQuaW5jbHVkZXMoJyMnKSkge1xyXG5cdFx0XHRcdFx0Y29uc3QgYW5jaG9yUGFydHMgPSBsaW5rVGV4dC5zcGxpdCgnIycpO1xyXG5cdFx0XHRcdFx0bGlua1BhdGggPSBhbmNob3JQYXJ0c1swXSB8fCAnJztcclxuXHRcdFx0XHRcdGFuY2hvciA9IGFuY2hvclBhcnRzWzFdIHx8IG51bGw7XHJcblx0XHRcdFx0XHRkaXNwbGF5VGV4dCA9IGxpbmtQYXRoOyAvLyBVc2UgcGF0aCBhcyBkaXNwbGF5IHRleHRcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0bGlua1BhdGggPSBsaW5rVGV4dDtcclxuXHRcdFx0XHRcdGRpc3BsYXlUZXh0ID0gbGlua1RleHQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDaGVjayBpZiB0aGUgbGlua2VkIGZpbGUgZXhpc3RzIHVzaW5nIE9ic2lkaWFuJ3MgbGluayByZXNvbHV0aW9uXHJcblx0XHRcdGlmIChhcHApIHtcclxuXHRcdFx0XHQvLyBVc2UgT2JzaWRpYW4ncyBidWlsdC1pbiBsaW5rIHJlc29sdXRpb24gdG8gY2hlY2sgaWYgdGhlIGxpbmsgd29ya3NcclxuXHRcdFx0XHRjb25zdCByZXNvbHZlZExpbmsgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChsaW5rUGF0aCwgZmlsZS5wYXRoKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoIXJlc29sdmVkTGluaykge1xyXG5cdFx0XHRcdFx0YnJva2VuTGlua3MucHVzaCh7XHJcblx0XHRcdFx0XHRcdGxpbms6IHdpa2lsaW5rLFxyXG5cdFx0XHRcdFx0XHRwYXRoOiBsaW5rUGF0aCxcclxuXHRcdFx0XHRcdFx0ZGlzcGxheVRleHQ6IGRpc3BsYXlUZXh0LFxyXG5cdFx0XHRcdFx0XHRhbmNob3I6IGFuY2hvclxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmIChicm9rZW5MaW5rcy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdGJyb2tlbkxpbmtzLmZvckVhY2goKHsgbGluaywgcGF0aCwgZGlzcGxheVRleHQsIGFuY2hvciB9KSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgbGluZU51bWJlciA9IGZpbmRMaW5lTnVtYmVyRm9ySW1hZ2UoY29udGVudCwgbGluayk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQ3JlYXRlIGEgbW9yZSBoZWxwZnVsIHN1Z2dlc3Rpb24gbWVzc2FnZVxyXG5cdFx0XHRcdGxldCBzdWdnZXN0aW9uID0gYENoZWNrIGlmIHRoZSBmaWxlIFwiJHtwYXRofS5tZFwiIGV4aXN0cyBvciB1cGRhdGUgdGhlIGxpbmtgO1xyXG5cdFx0XHRcdGlmIChhbmNob3IpIHtcclxuXHRcdFx0XHRcdHN1Z2dlc3Rpb24gKz0gYCAoYW5jaG9yOiAjJHthbmNob3J9KWA7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRcdFx0bWVzc2FnZTogYEJyb2tlbiBpbnRlcm5hbCBsaW5rOiAke2Rpc3BsYXlUZXh0fWAsXHJcblx0XHRcdFx0XHRzdWdnZXN0aW9uOiBzdWdnZXN0aW9uLFxyXG5cdFx0XHRcdFx0c2V2ZXJpdHk6ICdlcnJvcicsXHJcblx0XHRcdFx0XHRwb3NpdGlvbjoge1xyXG5cdFx0XHRcdFx0XHRsaW5lOiBsaW5lTnVtYmVyLFxyXG5cdFx0XHRcdFx0XHRzZWFyY2hUZXh0OiBsaW5rLFxyXG5cdFx0XHRcdFx0XHRjb250ZXh0OiBnZXRDb250ZXh0QXJvdW5kTGluZShjb250ZW50LCBsaW5lTnVtYmVyKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Ly8gRmluZCBtYXJrZG93biBsaW5rcyBbdGV4dF0odXJsKSAtIGNoZWNrIGZvciByZWxhdGl2ZS9pbnRlcm5hbCBsaW5rcyAoZXhjbHVkZSBpbWFnZXMpXHJcblx0Ly8gRmlyc3QgZmluZCBhbGwgbWFya2Rvd24gbGlua3MgaW4gdGhlIG9yaWdpbmFsIGNvbnRlbnRcclxuXHRjb25zdCBhbGxNYXJrZG93bkxpbmtzID0gY29udGVudC5tYXRjaCgvXFxbKFteXFxdXSspXFxdXFwoKFteKV0rKVxcKS9nKTtcclxuXHRpZiAoYWxsTWFya2Rvd25MaW5rcykge1xyXG5cdFx0Zm9yIChjb25zdCBtYXJrZG93bkxpbmsgb2YgYWxsTWFya2Rvd25MaW5rcykge1xyXG5cdFx0XHQvLyBDaGVjayBpZiB0aGlzIGxpbmsgaXMgaW5zaWRlIGEgY29kZSBibG9ja1xyXG5cdFx0XHRjb25zdCBsaW5rU3RhcnQgPSBjb250ZW50LmluZGV4T2YobWFya2Rvd25MaW5rKTtcclxuXHRcdFx0aWYgKGxpbmtTdGFydCA9PT0gLTEpIGNvbnRpbnVlO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIGxpbmsgaXMgaW5zaWRlIGEgY29kZSBibG9jayBieSBsb29raW5nIGF0IGNvbnRlbnQgYmVmb3JlIGl0XHJcblx0XHRcdGNvbnN0IGNvbnRlbnRCZWZvcmVMaW5rID0gY29udGVudC5zdWJzdHJpbmcoMCwgbGlua1N0YXJ0KTtcclxuXHRcdFx0Y29uc3QgY29kZUJsb2NrTWF0Y2hlcyA9IGNvbnRlbnRCZWZvcmVMaW5rLm1hdGNoKC9gYGBbXFxzXFxTXSo/YGBgfH5+fltcXHNcXFNdKj9+fn4vZyk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDb3VudCB1bmNsb3NlZCBjb2RlIGJsb2Nrc1xyXG5cdFx0XHRjb25zdCBvcGVuQ29kZUJsb2NrcyA9IChjb250ZW50QmVmb3JlTGluay5tYXRjaCgvYGBgL2cpIHx8IFtdKS5sZW5ndGggLSAoY29kZUJsb2NrTWF0Y2hlcyB8fCBbXSkubGVuZ3RoO1xyXG5cdFx0XHRjb25zdCBvcGVuVGlsZGVCbG9ja3MgPSAoY29udGVudEJlZm9yZUxpbmsubWF0Y2goL35+fi9nKSB8fCBbXSkubGVuZ3RoIC0gKGNvZGVCbG9ja01hdGNoZXMgfHwgW10pLmxlbmd0aDtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFNraXAgaWYgd2UncmUgaW5zaWRlIGEgY29kZSBibG9ja1xyXG5cdFx0XHRpZiAob3BlbkNvZGVCbG9ja3MgPiAwIHx8IG9wZW5UaWxkZUJsb2NrcyA+IDApIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3QgbGlua01hdGNoID0gbWFya2Rvd25MaW5rLm1hdGNoKC9cXFsoW15cXF1dKylcXF1cXCgoW14pXSspXFwpLyk7XHJcblx0XHRcdGlmICghbGlua01hdGNoIHx8ICFsaW5rTWF0Y2hbMV0gfHwgIWxpbmtNYXRjaFsyXSkgY29udGludWU7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBsaW5rVGV4dCA9IGxpbmtNYXRjaFsxXTtcclxuXHRcdFx0Y29uc3QgbGlua1VybCA9IGxpbmtNYXRjaFsyXTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFNraXAgaW1hZ2UgbGlua3MgYW5kIGxpbmtlZCBpbWFnZXMgLSB0aGV5IHNob3VsZCBub3QgYmUgY2hlY2tlZCBhcyBicm9rZW4gbGlua3NcclxuXHRcdFx0aWYgKG1hcmtkb3duTGluay5zdGFydHNXaXRoKCchWycpIHx8IGxpbmtUZXh0LnN0YXJ0c1dpdGgoJyFbJykpIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ2hlY2sgaWYgaXQncyBhIHJlbGF0aXZlL2ludGVybmFsIGxpbmsgKG5vdCBleHRlcm5hbClcclxuXHRcdFx0aWYgKCFsaW5rVXJsLnN0YXJ0c1dpdGgoJ2h0dHA6Ly8nKSAmJiAhbGlua1VybC5zdGFydHNXaXRoKCdodHRwczovLycpICYmICFsaW5rVXJsLnN0YXJ0c1dpdGgoJ21haWx0bzonKSAmJiAhbGlua1VybC5zdGFydHNXaXRoKCcjJykpIHtcclxuXHRcdFx0XHQvLyBUaGlzIGlzIGEgcmVsYXRpdmUvaW50ZXJuYWwgbGlua1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIENoZWNrIGlmIGZsZXhpYmxlIHJlbGF0aXZlIHBhdGggY2hlY2sgaXMgZW5hYmxlZCAocHVibGlzaCBtb2RlKVxyXG5cdFx0XHRcdGlmIChzZXR0aW5ncy5wdWJsaXNoTW9kZSAmJiBsaW5rVXJsLnN0YXJ0c1dpdGgoJy8nKSkge1xyXG5cdFx0XHRcdFx0Ly8gSW4gcHVibGlzaCBtb2RlLCBhYnNvbHV0ZSBwYXRocyBsaWtlIC9hYm91dC8gYXJlIGNvbnNpZGVyZWQgdmFsaWQgZm9yIHN0YXRpYyBzaXRlIGdlbmVyYXRvcnNcclxuXHRcdFx0XHRcdC8vIFNraXAgdGhlc2UgbGlua3MgLSB0aGV5IHNob3VsZCBiZSBoYW5kbGVkIGJ5IHRoZSBwb3RlbnRpYWxseSBicm9rZW4gbGlua3MgY2hlY2tcclxuXHRcdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoYXBwKSB7XHJcblx0XHRcdFx0XHQvLyBTdHJpcCBhbmNob3IgZnJvbSBsaW5rIFVSTCBiZWZvcmUgcmVzb2x1dGlvbiAoc2FtZSBhcyB3aWtpbGlua3MpXHJcblx0XHRcdFx0XHRsZXQgbGlua1BhdGggPSBsaW5rVXJsO1xyXG5cdFx0XHRcdFx0bGV0IGFuY2hvcjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmIChsaW5rUGF0aC5pbmNsdWRlcygnIycpKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGFuY2hvclBhcnRzID0gbGlua1BhdGguc3BsaXQoJyMnKTtcclxuXHRcdFx0XHRcdFx0bGlua1BhdGggPSBhbmNob3JQYXJ0c1swXSB8fCAnJztcclxuXHRcdFx0XHRcdFx0YW5jaG9yID0gYW5jaG9yUGFydHNbMV0gfHwgbnVsbDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gVXNlIE9ic2lkaWFuJ3MgbGluayByZXNvbHV0aW9uIHRvIGNoZWNrIGlmIHRoZSBsaW5rIHdvcmtzXHJcblx0XHRcdFx0XHRjb25zdCByZXNvbHZlZExpbmsgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChsaW5rUGF0aCwgZmlsZS5wYXRoKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKCFyZXNvbHZlZExpbmspIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbGluZU51bWJlciA9IGZpbmRMaW5lTnVtYmVyRm9ySW1hZ2UoY29udGVudCwgbWFya2Rvd25MaW5rKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIENyZWF0ZSBhIG1vcmUgaGVscGZ1bCBzdWdnZXN0aW9uIG1lc3NhZ2UgKHNhbWUgZm9ybWF0IGFzIHdpa2lsaW5rcylcclxuXHRcdFx0XHRcdFx0bGV0IHN1Z2dlc3RlZFBhdGggPSBsaW5rUGF0aC5lbmRzV2l0aCgnLm1kJykgPyBsaW5rUGF0aCA6IGxpbmtQYXRoICsgJy5tZCc7XHJcblx0XHRcdFx0XHRcdGxldCBzdWdnZXN0aW9uID0gYENoZWNrIGlmIHRoZSBmaWxlIFwiJHtzdWdnZXN0ZWRQYXRofVwiIGV4aXN0cyBvciB1cGRhdGUgdGhlIGxpbmtgO1xyXG5cdFx0XHRcdFx0XHRpZiAoYW5jaG9yKSB7XHJcblx0XHRcdFx0XHRcdFx0c3VnZ2VzdGlvbiArPSBgIChhbmNob3I6ICMke2FuY2hvcn0pYDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0XHRcdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRcdFx0XHRcdG1lc3NhZ2U6IGBCcm9rZW4gaW50ZXJuYWwgbGluazogJHtsaW5rVGV4dH1gLFxyXG5cdFx0XHRcdFx0XHRcdHN1Z2dlc3Rpb246IHN1Z2dlc3Rpb24sXHJcblx0XHRcdFx0XHRcdFx0c2V2ZXJpdHk6ICdlcnJvcicsXHJcblx0XHRcdFx0XHRcdFx0cG9zaXRpb246IHtcclxuXHRcdFx0XHRcdFx0XHRcdGxpbmU6IGxpbmVOdW1iZXIsXHJcblx0XHRcdFx0XHRcdFx0XHRzZWFyY2hUZXh0OiBtYXJrZG93bkxpbmssXHJcblx0XHRcdFx0XHRcdFx0XHRjb250ZXh0OiBnZXRDb250ZXh0QXJvdW5kTGluZShjb250ZW50LCBsaW5lTnVtYmVyKVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBcIk5vIGJyb2tlbiBpbnRlcm5hbCBsaW5rcyBmb3VuZFwiLFxyXG5cdFx0XHRzZXZlcml0eTogJ2luZm8nXHJcblx0XHR9KTtcclxuXHR9XHJcblx0XHJcblx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrcyBmb3IgcG90ZW50aWFsbHkgYnJva2VuIGxpbmtzIChsaW5rcyB0aGF0IG1pZ2h0IGJlIGJyb2tlbilcclxuICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgbWFya2Rvd24gY29udGVudCB0byBjaGVja1xyXG4gKiBAcGFyYW0gZmlsZSAtIFRoZSBmaWxlIGJlaW5nIGNoZWNrZWRcclxuICogQHBhcmFtIHNldHRpbmdzIC0gUGx1Z2luIHNldHRpbmdzXHJcbiAqIEBwYXJhbSBhcHAgLSBPYnNpZGlhbiBhcHAgaW5zdGFuY2UgKG9wdGlvbmFsKVxyXG4gKiBAcmV0dXJucyBBcnJheSBvZiBTRU8gY2hlY2sgcmVzdWx0c1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrUG90ZW50aWFsbHlCcm9rZW5MaW5rcyhjb250ZW50OiBzdHJpbmcsIGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MsIGFwcD86IEFwcCk6IFByb21pc2U8U0VPQ2hlY2tSZXN1bHRbXT4ge1xyXG5cdGNvbnN0IHJlc3VsdHM6IFNFT0NoZWNrUmVzdWx0W10gPSBbXTtcclxuXHRcclxuXHQvLyBPbmx5IHJ1biB0aGlzIGNoZWNrIGluIHB1Ymxpc2ggbW9kZSAoZmxleGlibGUgcmVsYXRpdmUgbGlua3MpLCBhbmQgd2hlbiBlbmFibGVkXHJcblx0aWYgKCFzZXR0aW5ncy5jaGVja1BvdGVudGlhbGx5QnJva2VuTGlua3MgfHwgIXNldHRpbmdzLnB1Ymxpc2hNb2RlKSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcclxuXHR9XHJcblx0XHJcblx0Ly8gRmlyc3QsIGdldCB0aGUgbGlzdCBvZiBkZWZpbml0ZWx5IGJyb2tlbiBsaW5rcyB0byBhdm9pZCBkdXBsaWNhdGVzXHJcblx0Y29uc3QgYnJva2VuTGlua3NSZXN1bHRzID0gYXdhaXQgY2hlY2tCcm9rZW5MaW5rcyhjb250ZW50LCBmaWxlLCBzZXR0aW5ncywgYXBwKTtcclxuXHRjb25zdCBkZWZpbml0ZWx5QnJva2VuTGlua3MgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuXHRcclxuXHRicm9rZW5MaW5rc1Jlc3VsdHMuZm9yRWFjaChyZXN1bHQgPT4ge1xyXG5cdFx0aWYgKCFyZXN1bHQucGFzc2VkICYmIHJlc3VsdC5wb3NpdGlvbj8uc2VhcmNoVGV4dCkge1xyXG5cdFx0XHRkZWZpbml0ZWx5QnJva2VuTGlua3MuYWRkKHJlc3VsdC5wb3NpdGlvbi5zZWFyY2hUZXh0KTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHRcclxuXHQvLyBGaW5kIG1hcmtkb3duIGxpbmtzIHRoYXQgbWlnaHQgYmUgZmxleGlibGUgcmVsYXRpdmUgbGlua3MgKGV4Y2x1ZGUgaW1hZ2VzIGFuZCBsaW5rZWQgaW1hZ2VzKVxyXG5cdC8vIFVzZSBhIG1hbnVhbCBhcHByb2FjaCB0byBwcm9wZXJseSBoYW5kbGUgbmVzdGVkIGJyYWNrZXRzXHJcblx0bGV0IHBvcyA9IDA7XHJcblx0d2hpbGUgKHBvcyA8IGNvbnRlbnQubGVuZ3RoKSB7XHJcblx0XHQvLyBGaW5kIHRoZSBuZXh0IG9wZW5pbmcgYnJhY2tldFxyXG5cdFx0Y29uc3Qgb3BlbkJyYWNrZXQgPSBjb250ZW50LmluZGV4T2YoJ1snLCBwb3MpO1xyXG5cdFx0aWYgKG9wZW5CcmFja2V0ID09PSAtMSkgYnJlYWs7XHJcblx0XHRcclxuXHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgaW5zaWRlIGEgY29kZSBibG9ja1xyXG5cdFx0Y29uc3QgY29udGVudEJlZm9yZUJyYWNrZXQgPSBjb250ZW50LnN1YnN0cmluZygwLCBvcGVuQnJhY2tldCk7XHJcblx0XHRjb25zdCBjb2RlQmxvY2tNYXRjaGVzID0gY29udGVudEJlZm9yZUJyYWNrZXQubWF0Y2goL2BgYFtcXHNcXFNdKj9gYGB8fn5+W1xcc1xcU10qP35+fi9nKTtcclxuXHRcdGNvbnN0IG9wZW5Db2RlQmxvY2tzID0gKGNvbnRlbnRCZWZvcmVCcmFja2V0Lm1hdGNoKC9gYGAvZykgfHwgW10pLmxlbmd0aCAtIChjb2RlQmxvY2tNYXRjaGVzIHx8IFtdKS5sZW5ndGg7XHJcblx0XHRjb25zdCBvcGVuVGlsZGVCbG9ja3MgPSAoY29udGVudEJlZm9yZUJyYWNrZXQubWF0Y2goL35+fi9nKSB8fCBbXSkubGVuZ3RoIC0gKGNvZGVCbG9ja01hdGNoZXMgfHwgW10pLmxlbmd0aDtcclxuXHRcdFxyXG5cdFx0Ly8gU2tpcCBpZiB3ZSdyZSBpbnNpZGUgYSBjb2RlIGJsb2NrXHJcblx0XHRpZiAob3BlbkNvZGVCbG9ja3MgPiAwIHx8IG9wZW5UaWxkZUJsb2NrcyA+IDApIHtcclxuXHRcdFx0cG9zID0gb3BlbkJyYWNrZXQgKyAxO1xyXG5cdFx0XHRjb250aW51ZTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gRmluZCB0aGUgbWF0Y2hpbmcgY2xvc2luZyBicmFja2V0XHJcblx0XHRsZXQgYnJhY2tldENvdW50ID0gMTtcclxuXHRcdGxldCBjbG9zZUJyYWNrZXQgPSBvcGVuQnJhY2tldCArIDE7XHJcblx0XHR3aGlsZSAoY2xvc2VCcmFja2V0IDwgY29udGVudC5sZW5ndGggJiYgYnJhY2tldENvdW50ID4gMCkge1xyXG5cdFx0XHRpZiAoY29udGVudFtjbG9zZUJyYWNrZXRdID09PSAnWycpIHtcclxuXHRcdFx0XHRicmFja2V0Q291bnQrKztcclxuXHRcdFx0fSBlbHNlIGlmIChjb250ZW50W2Nsb3NlQnJhY2tldF0gPT09ICddJykge1xyXG5cdFx0XHRcdGJyYWNrZXRDb3VudC0tO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNsb3NlQnJhY2tldCsrO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoYnJhY2tldENvdW50ID4gMCkge1xyXG5cdFx0XHQvLyBObyBtYXRjaGluZyBjbG9zaW5nIGJyYWNrZXQgZm91bmRcclxuXHRcdFx0cG9zID0gb3BlbkJyYWNrZXQgKyAxO1xyXG5cdFx0XHRjb250aW51ZTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gQ2hlY2sgaWYgdGhlcmUncyBhIFVSTCBwYXJ0IGFmdGVyIHRoZSBjbG9zaW5nIGJyYWNrZXRcclxuXHRcdGlmIChjbG9zZUJyYWNrZXQgPCBjb250ZW50Lmxlbmd0aCAmJiBjb250ZW50W2Nsb3NlQnJhY2tldF0gPT09ICcoJykge1xyXG5cdFx0XHQvLyBGaW5kIHRoZSBtYXRjaGluZyBjbG9zaW5nIHBhcmVudGhlc2lzXHJcblx0XHRcdGxldCBwYXJlbkNvdW50ID0gMTtcclxuXHRcdFx0bGV0IGNsb3NlUGFyZW4gPSBjbG9zZUJyYWNrZXQgKyAxO1xyXG5cdFx0XHR3aGlsZSAoY2xvc2VQYXJlbiA8IGNvbnRlbnQubGVuZ3RoICYmIHBhcmVuQ291bnQgPiAwKSB7XHJcblx0XHRcdFx0aWYgKGNvbnRlbnRbY2xvc2VQYXJlbl0gPT09ICcoJykge1xyXG5cdFx0XHRcdFx0cGFyZW5Db3VudCsrO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoY29udGVudFtjbG9zZVBhcmVuXSA9PT0gJyknKSB7XHJcblx0XHRcdFx0XHRwYXJlbkNvdW50LS07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNsb3NlUGFyZW4rKztcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHBhcmVuQ291bnQgPT09IDApIHtcclxuXHRcdFx0XHQvLyBXZSBmb3VuZCBhIGNvbXBsZXRlIG1hcmtkb3duIGxpbmtcclxuXHRcdFx0XHRjb25zdCBsaW5rVGV4dCA9IGNvbnRlbnQuc3Vic3RyaW5nKG9wZW5CcmFja2V0ICsgMSwgY2xvc2VCcmFja2V0IC0gMSk7XHJcblx0XHRcdFx0Y29uc3QgbGlua1VybCA9IGNvbnRlbnQuc3Vic3RyaW5nKGNsb3NlQnJhY2tldCArIDEsIGNsb3NlUGFyZW4gLSAxKTtcclxuXHRcdFx0XHRjb25zdCBmdWxsTGluayA9IGNvbnRlbnQuc3Vic3RyaW5nKG9wZW5CcmFja2V0LCBjbG9zZVBhcmVuKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBTa2lwIGlmIHRoaXMgaXMgYSBsaW5rZWQgaW1hZ2UgKGxpbmsgdGV4dCBzdGFydHMgd2l0aCAhWylcclxuXHRcdFx0XHQvLyBMaW5rZWQgaW1hZ2VzIHNob3VsZCBiZSBoYW5kbGVkIGJ5IGV4dGVybmFsIGxpbmsgY2hlY2tzLCBub3QgcG90ZW50aWFsbHkgYnJva2VuIGxpbmsgY2hlY2tzXHJcblx0XHRcdFx0aWYgKGxpbmtUZXh0LnN0YXJ0c1dpdGgoJyFbJykpIHtcclxuXHRcdFx0XHRcdHBvcyA9IGNsb3NlUGFyZW47XHJcblx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgaXQncyBhIGZsZXhpYmxlIHJlbGF0aXZlIGxpbmsgKHB1Ymxpc2ggbW9kZSlcclxuXHRcdFx0XHQvLyBPbmx5IGNoZWNrIGZvciByZWxhdGl2ZSBwYXRocywgbm90IGV4dGVybmFsIFVSTHNcclxuXHRcdFx0XHRpZiAoc2V0dGluZ3MucHVibGlzaE1vZGUgJiYgbGlua1VybC5zdGFydHNXaXRoKCcvJykgJiYgIWxpbmtVcmwuc3RhcnRzV2l0aCgnaHR0cDovLycpICYmICFsaW5rVXJsLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGxpbmVOdW1iZXIgPSBmaW5kTGluZU51bWJlckZvckltYWdlKGNvbnRlbnQsIGZ1bGxMaW5rKTtcclxuXHRcdFx0XHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdFx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0XHRcdFx0bWVzc2FnZTogYFJlbGF0aXZlIHBhdGggbGluazogJHtsaW5rVGV4dH1gLFxyXG5cdFx0XHRcdFx0XHRzdWdnZXN0aW9uOiBcIlRoaXMgbGluayBtYXkgYmUgdmFsaWQgZm9yIHN0YXRpYyBzaXRlIGdlbmVyYXRvcnMgYnV0IG1heSBub3Qgd29yayBpbiBPYnNpZGlhblwiLFxyXG5cdFx0XHRcdFx0XHRzZXZlcml0eTogJ25vdGljZScsXHJcblx0XHRcdFx0XHRcdHBvc2l0aW9uOiB7XHJcblx0XHRcdFx0XHRcdFx0bGluZTogbGluZU51bWJlcixcclxuXHRcdFx0XHRcdFx0XHRzZWFyY2hUZXh0OiBmdWxsTGluayxcclxuXHRcdFx0XHRcdFx0XHRjb250ZXh0OiBnZXRDb250ZXh0QXJvdW5kTGluZShjb250ZW50LCBsaW5lTnVtYmVyKVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0cG9zID0gY2xvc2VQYXJlbjtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRwb3MgPSBjbG9zZUJyYWNrZXQ7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHBvcyA9IGNsb3NlQnJhY2tldDtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Ly8gRmluZCB3aWtpbGlua3MgdGhhdCBtaWdodCBiZSBicm9rZW5cclxuXHQvLyBGaXJzdCBmaW5kIGFsbCB3aWtpbGlua3MgaW4gdGhlIG9yaWdpbmFsIGNvbnRlbnRcclxuXHRjb25zdCBhbGxXaWtpbGlua3MgPSBjb250ZW50Lm1hdGNoKC9cXFtcXFsoW15cXF1dKylcXF1cXF0vZyk7XHJcblx0aWYgKGFsbFdpa2lsaW5rcykge1xyXG5cdFx0Y29uc3QgcG90ZW50aWFsbHlCcm9rZW4gPSBbXTtcclxuXHRcdFxyXG5cdFx0Zm9yIChjb25zdCB3aWtpbGluayBvZiBhbGxXaWtpbGlua3MpIHtcclxuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBsaW5rIGlzIGluc2lkZSBhIGNvZGUgYmxvY2tcclxuXHRcdFx0Y29uc3QgbGlua1N0YXJ0ID0gY29udGVudC5pbmRleE9mKHdpa2lsaW5rKTtcclxuXHRcdFx0aWYgKGxpbmtTdGFydCA9PT0gLTEpIGNvbnRpbnVlO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIGxpbmsgaXMgaW5zaWRlIGEgY29kZSBibG9jayBieSBsb29raW5nIGF0IGNvbnRlbnQgYmVmb3JlIGl0XHJcblx0XHRcdGNvbnN0IGNvbnRlbnRCZWZvcmVMaW5rID0gY29udGVudC5zdWJzdHJpbmcoMCwgbGlua1N0YXJ0KTtcclxuXHRcdFx0Y29uc3QgY29kZUJsb2NrTWF0Y2hlcyA9IGNvbnRlbnRCZWZvcmVMaW5rLm1hdGNoKC9gYGBbXFxzXFxTXSo/YGBgfH5+fltcXHNcXFNdKj9+fn4vZyk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDb3VudCB1bmNsb3NlZCBjb2RlIGJsb2Nrc1xyXG5cdFx0XHRjb25zdCBvcGVuQ29kZUJsb2NrcyA9IChjb250ZW50QmVmb3JlTGluay5tYXRjaCgvYGBgL2cpIHx8IFtdKS5sZW5ndGggLSAoY29kZUJsb2NrTWF0Y2hlcyB8fCBbXSkubGVuZ3RoO1xyXG5cdFx0XHRjb25zdCBvcGVuVGlsZGVCbG9ja3MgPSAoY29udGVudEJlZm9yZUxpbmsubWF0Y2goL35+fi9nKSB8fCBbXSkubGVuZ3RoIC0gKGNvZGVCbG9ja01hdGNoZXMgfHwgW10pLmxlbmd0aDtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFNraXAgaWYgd2UncmUgaW5zaWRlIGEgY29kZSBibG9ja1xyXG5cdFx0XHRpZiAob3BlbkNvZGVCbG9ja3MgPiAwIHx8IG9wZW5UaWxkZUJsb2NrcyA+IDApIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3QgbGlua01hdGNoID0gd2lraWxpbmsubWF0Y2goL1xcW1xcWyhbXlxcXV0rKVxcXVxcXS8pO1xyXG5cdFx0XHRpZiAoIWxpbmtNYXRjaCB8fCAhbGlua01hdGNoWzFdKSBjb250aW51ZTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFNraXAgaWYgdGhpcyBsaW5rIGlzIGFscmVhZHkgZmxhZ2dlZCBhcyBkZWZpbml0ZWx5IGJyb2tlblxyXG5cdFx0XHRpZiAoZGVmaW5pdGVseUJyb2tlbkxpbmtzLmhhcyh3aWtpbGluaykpIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3QgbGlua1RleHQgPSBsaW5rTWF0Y2hbMV07XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBQYXJzZSB3aWtpbGluazogaGFuZGxlIGJvdGggW1twYXRofGRpc3BsYXldXSBhbmQgW1twYXRoI2FuY2hvcnxkaXNwbGF5XV0gZm9ybWF0c1xyXG5cdFx0XHRsZXQgbGlua1BhdGg6IHN0cmluZztcclxuXHRcdFx0bGV0IGRpc3BsYXlUZXh0OiBzdHJpbmc7XHJcblx0XHRcdGxldCBhbmNob3I6IHN0cmluZyB8IG51bGwgPSBudWxsO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhlcmUncyBhIGRpc3BsYXkgdGV4dCBzZXBhcmF0b3JcclxuXHRcdFx0aWYgKGxpbmtUZXh0LmluY2x1ZGVzKCd8JykpIHtcclxuXHRcdFx0XHRjb25zdCBwYXJ0cyA9IGxpbmtUZXh0LnNwbGl0KCd8Jyk7XHJcblx0XHRcdFx0Y29uc3QgbGlua1BhcnQgPSBwYXJ0c1swXSB8fCAnJztcclxuXHRcdFx0XHRkaXNwbGF5VGV4dCA9IHBhcnRzWzFdIHx8IGxpbmtQYXJ0O1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIENoZWNrIGlmIGxpbmsgcGFydCBoYXMgYW4gYW5jaG9yXHJcblx0XHRcdFx0aWYgKGxpbmtQYXJ0LmluY2x1ZGVzKCcjJykpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGFuY2hvclBhcnRzID0gbGlua1BhcnQuc3BsaXQoJyMnKTtcclxuXHRcdFx0XHRcdGxpbmtQYXRoID0gYW5jaG9yUGFydHNbMF0gfHwgJyc7XHJcblx0XHRcdFx0XHRhbmNob3IgPSBhbmNob3JQYXJ0c1sxXSB8fCBudWxsO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRsaW5rUGF0aCA9IGxpbmtQYXJ0O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBObyBkaXNwbGF5IHRleHQsIGNoZWNrIGlmIHRoZXJlJ3MgYW4gYW5jaG9yXHJcblx0XHRcdFx0aWYgKGxpbmtUZXh0LmluY2x1ZGVzKCcjJykpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGFuY2hvclBhcnRzID0gbGlua1RleHQuc3BsaXQoJyMnKTtcclxuXHRcdFx0XHRcdGxpbmtQYXRoID0gYW5jaG9yUGFydHNbMF0gfHwgJyc7XHJcblx0XHRcdFx0XHRhbmNob3IgPSBhbmNob3JQYXJ0c1sxXSB8fCBudWxsO1xyXG5cdFx0XHRcdFx0ZGlzcGxheVRleHQgPSBsaW5rUGF0aDsgLy8gVXNlIHBhdGggYXMgZGlzcGxheSB0ZXh0XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGxpbmtQYXRoID0gbGlua1RleHQ7XHJcblx0XHRcdFx0XHRkaXNwbGF5VGV4dCA9IGxpbmtUZXh0O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ2hlY2sgZm9yIGNvbW1vbiBpc3N1ZXMgdGhhdCBtaWdodCBpbmRpY2F0ZSBicm9rZW4gbGlua3NcclxuXHRcdFx0aWYgKGFwcCAmJiBsaW5rUGF0aCkge1xyXG5cdFx0XHRcdC8vIFVzZSBPYnNpZGlhbidzIGxpbmsgcmVzb2x1dGlvbiB0byBjaGVjayBpZiB0aGUgbGluayB3b3Jrc1xyXG5cdFx0XHRcdGNvbnN0IHJlc29sdmVkTGluayA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGxpbmtQYXRoLCBmaWxlLnBhdGgpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmICghcmVzb2x2ZWRMaW5rKSB7XHJcblx0XHRcdFx0XHQvLyBGaWxlIGRvZXNuJ3QgZXhpc3QsIGNoZWNrIGlmIHRoZXJlJ3MgYSBzaW1pbGFyIGZpbGUgKGNhc2Ugc2Vuc2l0aXZpdHksIHNwYWNlcywgZXRjLilcclxuXHRcdFx0XHRcdGNvbnN0IGFsbEZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuXHRcdFx0XHRcdGNvbnN0IHNpbWlsYXJGaWxlcyA9IGFsbEZpbGVzLmZpbHRlcigoZjogVEZpbGUpID0+IFxyXG5cdFx0XHRcdFx0XHRmLnBhdGgudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsaW5rUGF0aC50b0xvd2VyQ2FzZSgpKSB8fFxyXG5cdFx0XHRcdFx0XHRmLmJhc2VuYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobGlua1BhdGgudG9Mb3dlckNhc2UoKSlcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmIChzaW1pbGFyRmlsZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0XHRwb3RlbnRpYWxseUJyb2tlbi5wdXNoKHtcclxuXHRcdFx0XHRcdFx0XHRsaW5rOiB3aWtpbGluayxcclxuXHRcdFx0XHRcdFx0XHRwYXRoOiBsaW5rUGF0aCxcclxuXHRcdFx0XHRcdFx0XHRkaXNwbGF5VGV4dDogZGlzcGxheVRleHQsXHJcblx0XHRcdFx0XHRcdFx0YW5jaG9yOiBhbmNob3IsXHJcblx0XHRcdFx0XHRcdFx0c3VnZ2VzdGlvbnM6IHNpbWlsYXJGaWxlcy5tYXAoKGY6IFRGaWxlKSA9PiBmLnBhdGgpXHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAocG90ZW50aWFsbHlCcm9rZW4ubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRwb3RlbnRpYWxseUJyb2tlbi5mb3JFYWNoKCh7IGxpbmssIHBhdGgsIGRpc3BsYXlUZXh0LCBzdWdnZXN0aW9ucyB9KSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgbGluZU51bWJlciA9IGZpbmRMaW5lTnVtYmVyRm9ySW1hZ2UoY29udGVudCwgbGluayk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdFx0XHRtZXNzYWdlOiBgUG90ZW50aWFsbHkgYnJva2VuIGxpbms6ICR7ZGlzcGxheVRleHR9YCxcclxuXHRcdFx0XHRcdHN1Z2dlc3Rpb246IGBDb25zaWRlciB0aGVzZSBzaW1pbGFyIGZpbGVzOiAke3N1Z2dlc3Rpb25zLnNsaWNlKDAsIDMpLmpvaW4oJywgJyl9YCxcclxuXHRcdFx0XHRcdHNldmVyaXR5OiAnd2FybmluZycsXHJcblx0XHRcdFx0XHRwb3NpdGlvbjoge1xyXG5cdFx0XHRcdFx0XHRsaW5lOiBsaW5lTnVtYmVyLFxyXG5cdFx0XHRcdFx0XHRzZWFyY2hUZXh0OiBsaW5rLFxyXG5cdFx0XHRcdFx0XHRjb250ZXh0OiBnZXRDb250ZXh0QXJvdW5kTGluZShjb250ZW50LCBsaW5lTnVtYmVyKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0aWYgKHJlc3VsdHMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IHRydWUsXHJcblx0XHRcdG1lc3NhZ2U6IFwiTm8gcG90ZW50aWFsbHkgYnJva2VuIGxpbmtzIGZvdW5kXCIsXHJcblx0XHRcdHNldmVyaXR5OiAnaW5mbydcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG59XHJcbiIsICIvKipcbiAqIEV4dGVybmFsIGxpbmsgdmFsaWRhdGlvbiBjaGVja3NcbiAqIENoZWNrcyBmb3IgZXh0ZXJuYWwgbGlua3MgYW5kIGJyb2tlbiBleHRlcm5hbCBsaW5rcyB3aXRoIG5ldHdvcmsgcmVxdWVzdHNcbiAqL1xuXG5pbXBvcnQgeyBURmlsZSwgcmVxdWVzdFVybCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgU0VPU2V0dGluZ3MgfSBmcm9tIFwiLi4vc2V0dGluZ3NcIjtcbmltcG9ydCB7IFNFT0NoZWNrUmVzdWx0IH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBmaW5kTGluZU51bWJlckZvckltYWdlLCBnZXRDb250ZXh0QXJvdW5kTGluZSB9IGZyb20gXCIuL3V0aWxzL3Bvc2l0aW9uLXV0aWxzXCI7XG5pbXBvcnQgeyByZW1vdmVDb2RlQmxvY2tzIH0gZnJvbSBcIi4vdXRpbHMvY29udGVudC1wYXJzZXJcIjtcblxuLyoqXG4gKiBWYWxpZGF0ZXMgaWYgYSBVUkwgaXMgcHJvcGVybHkgZm9ybWF0dGVkIGFuZCBub3QgZW1iZWRkZWQgaW4gSFRNTCBlbnRpdGllc1xuICogQHBhcmFtIHVybCAtIFRoZSBVUkwgdG8gdmFsaWRhdGVcbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIFVSTCBpcyB2YWxpZCBhbmQgc2hvdWxkIGJlIGNoZWNrZWRcbiAqL1xuZnVuY3Rpb24gaXNWYWxpZFVybCh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHQvLyBDaGVjayBpZiBVUkwgY29udGFpbnMgSFRNTCBlbnRpdGllcyBvciBtYWxmb3JtZWQgY2hhcmFjdGVyc1xuXHRpZiAodXJsLmluY2x1ZGVzKCcmZ3Q7JykgfHwgdXJsLmluY2x1ZGVzKCcmbHQ7JykgfHwgdXJsLmluY2x1ZGVzKCcmYW1wOycpIHx8IFxuXHRcdHVybC5pbmNsdWRlcygnJnF1b3Q7JykgfHwgdXJsLmluY2x1ZGVzKCcmYXBvczsnKSB8fCB1cmwuaW5jbHVkZXMoJyZuYnNwOycpKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdFxuXHQvLyBDaGVjayBpZiBVUkwgY29udGFpbnMgSFRNTCB0YWdzIG9yIG1hbGZvcm1lZCBIVE1MXG5cdGlmICh1cmwuaW5jbHVkZXMoJzwnKSB8fCB1cmwuaW5jbHVkZXMoJz4nKSB8fCB1cmwuaW5jbHVkZXMoJ1wiJykgfHwgdXJsLmluY2x1ZGVzKFwiJ1wiKSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0Ly8gQ2hlY2sgaWYgVVJMIGVuZHMgd2l0aCBIVE1MLWxpa2UgZnJhZ21lbnRzXG5cdGlmICh1cmwuZW5kc1dpdGgoJyZndDsnKSB8fCB1cmwuZW5kc1dpdGgoJyZsdDsnKSB8fCB1cmwuZW5kc1dpdGgoJyZhbXA7JykgfHxcblx0XHR1cmwuZW5kc1dpdGgoJyZxdW90OycpIHx8IHVybC5lbmRzV2l0aCgnJmFwb3M7JykgfHwgdXJsLmVuZHNXaXRoKCcmbmJzcDsnKSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0Ly8gQ2hlY2sgaWYgVVJMIGNvbnRhaW5zIHN1c3BpY2lvdXMgcGF0dGVybnMgdGhhdCBpbmRpY2F0ZSBIVE1MIGZyYWdtZW50c1xuXHRpZiAodXJsLmluY2x1ZGVzKCcvYSZndDsnKSB8fCB1cmwuaW5jbHVkZXMoJy9wJmd0OycpIHx8IHVybC5pbmNsdWRlcygnL2RpdiZndDsnKSB8fFxuXHRcdHVybC5pbmNsdWRlcygnL3NwYW4mZ3Q7JykgfHwgdXJsLmluY2x1ZGVzKCcvaW1nJmd0OycpIHx8IHVybC5pbmNsdWRlcygnL3NjcmlwdCZndDsnKSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0Ly8gQmFzaWMgVVJMIGZvcm1hdCB2YWxpZGF0aW9uXG5cdHRyeSB7XG5cdFx0Y29uc3QgdXJsT2JqID0gbmV3IFVSTCh1cmwpO1xuXHRcdC8vIEVuc3VyZSBpdCdzIGh0dHAgb3IgaHR0cHNcblx0XHRpZiAodXJsT2JqLnByb3RvY29sICE9PSAnaHR0cDonICYmIHVybE9iai5wcm90b2NvbCAhPT0gJ2h0dHBzOicpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0Ly8gRW5zdXJlIGhvc3RuYW1lIGlzIG5vdCBlbXB0eVxuXHRcdGlmICghdXJsT2JqLmhvc3RuYW1lIHx8IHVybE9iai5ob3N0bmFtZS5sZW5ndGggPT09IDApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0Ly8gRW5zdXJlIGhvc3RuYW1lIGRvZXNuJ3QgY29udGFpbiBzdXNwaWNpb3VzIGNoYXJhY3RlcnNcblx0XHRpZiAodXJsT2JqLmhvc3RuYW1lLmluY2x1ZGVzKCc8JykgfHwgdXJsT2JqLmhvc3RuYW1lLmluY2x1ZGVzKCc+JykgfHwgXG5cdFx0XHR1cmxPYmouaG9zdG5hbWUuaW5jbHVkZXMoJ1wiJykgfHwgdXJsT2JqLmhvc3RuYW1lLmluY2x1ZGVzKFwiJ1wiKSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSBjYXRjaCB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59XG5cbi8qKlxuICogRXh0cmFjdHMgYW5kIHZhbGlkYXRlcyBleHRlcm5hbCBsaW5rcyBmcm9tIGNvbnRlbnRcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIGNvbnRlbnQgdG8gZXh0cmFjdCBsaW5rcyBmcm9tXG4gKiBAcmV0dXJucyBBcnJheSBvZiB2YWxpZCBleHRlcm5hbCBVUkxzXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RWYWxpZEV4dGVybmFsTGlua3MoY29udGVudDogc3RyaW5nKTogc3RyaW5nW10ge1xuXHQvLyBVc2UgdGhlIGNvbnRlbnQgcGFyc2VyIHRvIHJlbW92ZSBjb2RlIGJsb2NrcywgSFRNTCwgYW5kIG90aGVyIG5vbi1jb250ZW50XG5cdGNvbnN0IGNsZWFuQ29udGVudCA9IHJlbW92ZUNvZGVCbG9ja3MoY29udGVudCk7XG5cdFxuXHRjb25zdCBleHRlcm5hbExpbmtzOiBzdHJpbmdbXSA9IFtdO1xuXHRcblx0Ly8gRmluZCBtYXJrZG93biBsaW5rcyB3aXRoIGh0dHAvaHR0cHMgVVJMcyB1c2luZyBtYW51YWwgcGFyc2luZyB0byBoYW5kbGUgbmVzdGVkIGJyYWNrZXRzXG5cdGxldCBwb3MgPSAwO1xuXHR3aGlsZSAocG9zIDwgY2xlYW5Db250ZW50Lmxlbmd0aCkge1xuXHRcdC8vIEZpbmQgdGhlIG5leHQgb3BlbmluZyBicmFja2V0XG5cdFx0Y29uc3Qgb3BlbkJyYWNrZXQgPSBjbGVhbkNvbnRlbnQuaW5kZXhPZignWycsIHBvcyk7XG5cdFx0aWYgKG9wZW5CcmFja2V0ID09PSAtMSkgYnJlYWs7XG5cdFx0XG5cdFx0Ly8gRmluZCB0aGUgbWF0Y2hpbmcgY2xvc2luZyBicmFja2V0XG5cdFx0bGV0IGJyYWNrZXRDb3VudCA9IDE7XG5cdFx0bGV0IGNsb3NlQnJhY2tldCA9IG9wZW5CcmFja2V0ICsgMTtcblx0XHR3aGlsZSAoY2xvc2VCcmFja2V0IDwgY2xlYW5Db250ZW50Lmxlbmd0aCAmJiBicmFja2V0Q291bnQgPiAwKSB7XG5cdFx0XHRpZiAoY2xlYW5Db250ZW50W2Nsb3NlQnJhY2tldF0gPT09ICdbJykge1xuXHRcdFx0XHRicmFja2V0Q291bnQrKztcblx0XHRcdH0gZWxzZSBpZiAoY2xlYW5Db250ZW50W2Nsb3NlQnJhY2tldF0gPT09ICddJykge1xuXHRcdFx0XHRicmFja2V0Q291bnQtLTtcblx0XHRcdH1cblx0XHRcdGNsb3NlQnJhY2tldCsrO1xuXHRcdH1cblx0XHRcblx0XHRpZiAoYnJhY2tldENvdW50ID4gMCkge1xuXHRcdFx0Ly8gTm8gbWF0Y2hpbmcgY2xvc2luZyBicmFja2V0IGZvdW5kXG5cdFx0XHRwb3MgPSBvcGVuQnJhY2tldCArIDE7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gQ2hlY2sgaWYgdGhlcmUncyBhIFVSTCBwYXJ0IGFmdGVyIHRoZSBjbG9zaW5nIGJyYWNrZXRcblx0XHRpZiAoY2xvc2VCcmFja2V0IDwgY2xlYW5Db250ZW50Lmxlbmd0aCAmJiBjbGVhbkNvbnRlbnRbY2xvc2VCcmFja2V0XSA9PT0gJygnKSB7XG5cdFx0XHQvLyBGaW5kIHRoZSBtYXRjaGluZyBjbG9zaW5nIHBhcmVudGhlc2lzXG5cdFx0XHRsZXQgcGFyZW5Db3VudCA9IDE7XG5cdFx0XHRsZXQgY2xvc2VQYXJlbiA9IGNsb3NlQnJhY2tldCArIDE7XG5cdFx0XHR3aGlsZSAoY2xvc2VQYXJlbiA8IGNsZWFuQ29udGVudC5sZW5ndGggJiYgcGFyZW5Db3VudCA+IDApIHtcblx0XHRcdFx0aWYgKGNsZWFuQ29udGVudFtjbG9zZVBhcmVuXSA9PT0gJygnKSB7XG5cdFx0XHRcdFx0cGFyZW5Db3VudCsrO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGNsZWFuQ29udGVudFtjbG9zZVBhcmVuXSA9PT0gJyknKSB7XG5cdFx0XHRcdFx0cGFyZW5Db3VudC0tO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNsb3NlUGFyZW4rKztcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYgKHBhcmVuQ291bnQgPT09IDApIHtcblx0XHRcdFx0Ly8gV2UgZm91bmQgYSBjb21wbGV0ZSBtYXJrZG93biBsaW5rXG5cdFx0XHRcdGNvbnN0IGxpbmtVcmwgPSBjbGVhbkNvbnRlbnQuc3Vic3RyaW5nKGNsb3NlQnJhY2tldCArIDEsIGNsb3NlUGFyZW4gLSAxKTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIENoZWNrIGlmIGl0J3MgYW4gZXh0ZXJuYWwgVVJMXG5cdFx0XHRcdGlmIChsaW5rVXJsLnN0YXJ0c1dpdGgoJ2h0dHA6Ly8nKSB8fCBsaW5rVXJsLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykpIHtcblx0XHRcdFx0XHRpZiAoaXNWYWxpZFVybChsaW5rVXJsKSkge1xuXHRcdFx0XHRcdFx0ZXh0ZXJuYWxMaW5rcy5wdXNoKGxpbmtVcmwpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0cG9zID0gY2xvc2VQYXJlbjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHBvcyA9IGNsb3NlQnJhY2tldDtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0cG9zID0gY2xvc2VCcmFja2V0O1xuXHRcdH1cblx0fVxuXHRcblx0Ly8gRmluZCBuYWtlZCBVUkxzIHdpdGggaW1wcm92ZWQgcmVnZXggYW5kIHZhbGlkYXRpb25cblx0Y29uc3QgbmFrZWRVcmxzID0gY2xlYW5Db250ZW50Lm1hdGNoKC9odHRwcz86XFwvXFwvW15cXHMpXFxdXSsvZyk7XG5cdGlmIChuYWtlZFVybHMpIHtcblx0XHQvLyBHZXQgYWxsIG1hcmtkb3duIGxpbmsgVVJMcyB0byBleGNsdWRlIHRoZW0gZnJvbSBuYWtlZCBVUkxzXG5cdFx0Y29uc3QgbWFya2Rvd25MaW5rVXJscyA9IG5ldyBTZXQ8c3RyaW5nPihleHRlcm5hbExpbmtzKTtcblx0XHRcblx0XHRuYWtlZFVybHMuZm9yRWFjaCh1cmwgPT4ge1xuXHRcdFx0Ly8gU2tpcCBpZiBVUkwgaXMgYWxyZWFkeSBpbiBhIG1hcmtkb3duIGxpbmtcblx0XHRcdGlmIChtYXJrZG93bkxpbmtVcmxzLmhhcyh1cmwpKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gU2tpcCBhcmNoaXZhbCBVUkxzIGFzIHRoZXkgYXJlIG1lYW50IHRvIGJlIGRpc3BsYXllZCBhcy1pc1xuXHRcdFx0aWYgKHVybC5pbmNsdWRlcygnd2ViLmFyY2hpdmUub3JnL3dlYi8nKSB8fCBcblx0XHRcdFx0dXJsLmluY2x1ZGVzKCdhcmNoaXZlLnRvZGF5LycpIHx8XG5cdFx0XHRcdHVybC5pbmNsdWRlcygnYXJjaGl2ZS5pcy8nKSB8fFxuXHRcdFx0XHR1cmwuaW5jbHVkZXMoJ3dlYi5hcmNoaXZlLm9yZy9zYXZlLycpKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gVmFsaWRhdGUgdGhlIFVSTCBiZWZvcmUgYWRkaW5nIGl0XG5cdFx0XHRpZiAoaXNWYWxpZFVybCh1cmwpKSB7XG5cdFx0XHRcdGV4dGVybmFsTGlua3MucHVzaCh1cmwpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdFxuXHQvLyBSZW1vdmUgZHVwbGljYXRlc1xuXHRyZXR1cm4gWy4uLm5ldyBTZXQoZXh0ZXJuYWxMaW5rcyldO1xufVxuXG4vKipcbiAqIENoZWNrcyBmb3IgZXh0ZXJuYWwgbGlua3MgYW5kIHJldHVybnMgdGhlbSBhcyBub3RpY2VzXG4gKiBUaGlzIGlzIHRoZSBub3RpY2UtYmFzZWQgZXh0ZXJuYWwgbGlua3MgbGlzdFxuICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgbWFya2Rvd24gY29udGVudCB0byBjaGVja1xuICogQHBhcmFtIGZpbGUgLSBUaGUgZmlsZSBiZWluZyBjaGVja2VkXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBQbHVnaW4gc2V0dGluZ3NcbiAqIEByZXR1cm5zIEFycmF5IG9mIFNFTyBjaGVjayByZXN1bHRzIChub3RpY2VzKVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tFeHRlcm5hbExpbmtzKGNvbnRlbnQ6IHN0cmluZywgZmlsZTogVEZpbGUsIHNldHRpbmdzOiBTRU9TZXR0aW5ncyk6IFByb21pc2U8U0VPQ2hlY2tSZXN1bHRbXT4ge1xuXHRjb25zdCByZXN1bHRzOiBTRU9DaGVja1Jlc3VsdFtdID0gW107XG5cdFxuXHRpZiAoIXNldHRpbmdzLmNoZWNrRXh0ZXJuYWxMaW5rcykge1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xuXHR9XG5cdFxuXHQvLyBVc2UgdGhlIGltcHJvdmVkIGxpbmsgZXh0cmFjdGlvblxuXHRjb25zdCB1bmlxdWVMaW5rcyA9IGV4dHJhY3RWYWxpZEV4dGVybmFsTGlua3MoY29udGVudCk7XG5cdFxuXHRpZiAodW5pcXVlTGlua3MubGVuZ3RoID4gMCkge1xuXHRcdC8vIExpc3QgZWFjaCBleHRlcm5hbCBsaW5rIGFzIGEgbm90aWNlXG5cdFx0dW5pcXVlTGlua3MuZm9yRWFjaCgodXJsLCBpbmRleCkgPT4ge1xuXHRcdFx0Y29uc3QgbGluZU51bWJlciA9IGZpbmRMaW5lTnVtYmVyRm9ySW1hZ2UoY29udGVudCwgdXJsKTtcblx0XHRcdHJlc3VsdHMucHVzaCh7XG5cdFx0XHRcdHBhc3NlZDogdHJ1ZSxcblx0XHRcdFx0bWVzc2FnZTogYEV4dGVybmFsIGxpbms6ICR7dXJsfWAsXG5cdFx0XHRcdHN1Z2dlc3Rpb246IFwiVG8gZmluZCBpZiBhbnkgb2YgdGhlc2UgYXJlIGJyb2tlbiwgdXNlIHRoZSAnQ2hlY2sgZXh0ZXJuYWwgbGlua3MgZm9yIDQwNHMnIGJ1dHRvbiB0byB0cmlnZ2VyIGl0LlwiLFxuXHRcdFx0XHRzZXZlcml0eTogJ25vdGljZScsXG5cdFx0XHRcdHBvc2l0aW9uOiB7XG5cdFx0XHRcdFx0bGluZTogbGluZU51bWJlcixcblx0XHRcdFx0XHRzZWFyY2hUZXh0OiB1cmwsXG5cdFx0XHRcdFx0Y29udGV4dDogZ2V0Q29udGV4dEFyb3VuZExpbmUoY29udGVudCwgbGluZU51bWJlcilcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0cmVzdWx0cy5wdXNoKHtcblx0XHRcdHBhc3NlZDogdHJ1ZSxcblx0XHRcdG1lc3NhZ2U6IFwiTm8gZXh0ZXJuYWwgbGlua3MgZm91bmRcIixcblx0XHRcdHNldmVyaXR5OiAnaW5mbydcblx0XHR9KTtcblx0fVxuXHRcblx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgZm9yIGJyb2tlbiBleHRlcm5hbCBsaW5rcyB3aXRoIG5ldHdvcmsgcmVxdWVzdHNcbiAqIFRoaXMgcGVyZm9ybXMgYWN0dWFsIDQwNCBjaGVja2luZyB3aXRoIHRpbWVvdXQgaGFuZGxpbmdcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIG1hcmtkb3duIGNvbnRlbnQgdG8gY2hlY2tcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxuICogQHBhcmFtIHNldHRpbmdzIC0gUGx1Z2luIHNldHRpbmdzXG4gKiBAcmV0dXJucyBBcnJheSBvZiBTRU8gY2hlY2sgcmVzdWx0cyAoZXJyb3JzIGZvciBicm9rZW4gbGlua3MpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0V4dGVybmFsQnJva2VuTGlua3MoY29udGVudDogc3RyaW5nLCBmaWxlOiBURmlsZSwgc2V0dGluZ3M6IFNFT1NldHRpbmdzLCBhYm9ydENvbnRyb2xsZXI/OiBBYm9ydENvbnRyb2xsZXIpOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcblx0Y29uc3QgcmVzdWx0czogU0VPQ2hlY2tSZXN1bHRbXSA9IFtdO1xuXHRcblx0aWYgKCFzZXR0aW5ncy5lbmFibGVFeHRlcm5hbExpbmtWYXVsdENoZWNrKSB7XG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XG5cdH1cblx0XG5cdC8vIFVzZSB0aGUgaW1wcm92ZWQgbGluayBleHRyYWN0aW9uXG5cdGNvbnN0IHVuaXF1ZUxpbmtzID0gZXh0cmFjdFZhbGlkRXh0ZXJuYWxMaW5rcyhjb250ZW50KTtcblx0XG5cdGlmICh1bmlxdWVMaW5rcy5sZW5ndGggPT09IDApIHtcblx0XHRyZXN1bHRzLnB1c2goe1xuXHRcdFx0cGFzc2VkOiB0cnVlLFxuXHRcdFx0bWVzc2FnZTogXCJObyBleHRlcm5hbCBsaW5rcyBmb3VuZFwiLFxuXHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xuXHRcdH0pO1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XG5cdH1cblx0XG5cdC8vIENoZWNrIGVhY2ggZXh0ZXJuYWwgbGlua1xuXHRmb3IgKGNvbnN0IHVybCBvZiB1bmlxdWVMaW5rcykge1xuXHRcdC8vIENoZWNrIGZvciBnbG9iYWwgY2FuY2VsbGF0aW9uIGJlZm9yZSBwcm9jZXNzaW5nIGVhY2ggbGlua1xuXHRcdGlmIChhYm9ydENvbnRyb2xsZXI/LnNpZ25hbC5hYm9ydGVkKSB7XG5cdFx0XHRjb25zb2xlLmRlYnVnKCdFeHRlcm5hbCBsaW5rIGNoZWNrIGNhbmNlbGxlZCcpO1xuXHRcdFx0dGhyb3cgbmV3IERPTUV4Y2VwdGlvbignT3BlcmF0aW9uIHdhcyBhYm9ydGVkJywgJ0Fib3J0RXJyb3InKTtcblx0XHR9XG5cdFx0XG5cdFx0bGV0IGxpbmtJc0Jyb2tlbiA9IGZhbHNlO1xuXHRcdGxldCBlcnJvck1lc3NhZ2UgPSAnJztcblx0XHRsZXQgc3VnZ2VzdGlvbiA9ICcnO1xuXHRcdFxuXHRcdHRyeSB7XG5cdFx0XHQvLyBVc2UgT2JzaWRpYW4ncyByZXF1ZXN0VXJsXG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuXHRcdFx0XHR1cmw6IHVybCxcblx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdCdVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChjb21wYXRpYmxlOyBPYnNpZGlhbi1TRU8tUGx1Z2luLzEuMCknXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBDaGVjayB0aGUgcmVzcG9uc2Ugc3RhdHVzXG5cdFx0XHRpZiAocmVzcG9uc2Uuc3RhdHVzID49IDQwMCkge1xuXHRcdFx0XHRsaW5rSXNCcm9rZW4gPSB0cnVlO1xuXHRcdFx0XHRpZiAocmVzcG9uc2Uuc3RhdHVzID49IDQwMCAmJiByZXNwb25zZS5zdGF0dXMgPCA1MDApIHtcblx0XHRcdFx0XHRlcnJvck1lc3NhZ2UgPSBgRXh0ZXJuYWwgbGluayBlcnJvciAoJHtyZXNwb25zZS5zdGF0dXN9KTogJHt1cmx9YDtcblx0XHRcdFx0XHRzdWdnZXN0aW9uID0gYFRoaXMgbGluayByZXR1cm5lZCBhICR7cmVzcG9uc2Uuc3RhdHVzfSBlcnJvci4gVGhlIHBhZ2UgbWF5IG5vdCBleGlzdCBvciBtYXkgcmVxdWlyZSBhdXRoZW50aWNhdGlvbi5gO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSA1MDApIHtcblx0XHRcdFx0XHRlcnJvck1lc3NhZ2UgPSBgRXh0ZXJuYWwgbGluayBzZXJ2ZXIgZXJyb3IgKCR7cmVzcG9uc2Uuc3RhdHVzfSk6ICR7dXJsfWA7XG5cdFx0XHRcdFx0c3VnZ2VzdGlvbiA9IGBUaGlzIGxpbmsgcmV0dXJuZWQgYSAke3Jlc3BvbnNlLnN0YXR1c30gc2VydmVyIGVycm9yLiBUaGUgc2VydmVyIG1heSBiZSBleHBlcmllbmNpbmcgaXNzdWVzLmA7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZXJyb3JNZXNzYWdlID0gYEV4dGVybmFsIGxpbmsgZXJyb3IgKCR7cmVzcG9uc2Uuc3RhdHVzfSk6ICR7dXJsfWA7XG5cdFx0XHRcdFx0c3VnZ2VzdGlvbiA9IGBUaGlzIGxpbmsgcmV0dXJuZWQgYW4gdW5leHBlY3RlZCBzdGF0dXMgY29kZTogJHtyZXNwb25zZS5zdGF0dXN9YDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGxpbmtJc0Jyb2tlbiA9IHRydWU7XG5cdFx0XHRcblx0XHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCd0aW1lb3V0JykgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnVGltZW91dCcpKSkge1xuXHRcdFx0XHRlcnJvck1lc3NhZ2UgPSBgRXh0ZXJuYWwgbGluayB0aW1lb3V0OiAke3VybH1gO1xuXHRcdFx0XHRzdWdnZXN0aW9uID0gJ1RoaXMgbGluayB0b29rIHRvbyBsb25nIHRvIHJlc3BvbmQuIFRoZSBzZXJ2ZXIgbWlnaHQgYmUgc2xvdyBvciB0aGUgbGluayBtaWdodCBiZSBicm9rZW4uJztcblx0XHRcdH0gZWxzZSBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnRmFpbGVkIHRvIGZldGNoJykgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnbmV0OjpFUlJfJykgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnTmV0d29ya0Vycm9yJykpKSB7XG5cdFx0XHRcdGVycm9yTWVzc2FnZSA9IGBFeHRlcm5hbCBsaW5rIHVucmVhY2hhYmxlOiAke3VybH1gO1xuXHRcdFx0XHRzdWdnZXN0aW9uID0gJ1RoaXMgbGluayBjb3VsZCBub3QgYmUgcmVhY2hlZC4gQ2hlY2sgaWYgdGhlIFVSTCBpcyBjb3JyZWN0IG9yIGlmIHRoZSBzZXJ2ZXIgaXMgZG93bi4nO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZXJyb3JNZXNzYWdlID0gYEV4dGVybmFsIGxpbmsgZXJyb3I6ICR7dXJsfWA7XG5cdFx0XHRcdHN1Z2dlc3Rpb24gPSAnVGhpcyBsaW5rIGNvdWxkIG5vdCBiZSB2ZXJpZmllZC4gUGxlYXNlIGNoZWNrIHRoZSBVUkwgbWFudWFsbHkuJztcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0Ly8gSWYgd2UgZGV0ZWN0ZWQgYSBicm9rZW4gbGluaywgYWRkIGl0IHRvIHJlc3VsdHNcblx0XHRpZiAobGlua0lzQnJva2VuKSB7XG5cdFx0XHRjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuXHRcdFx0bGV0IGxpbmVOdW1iZXIgPSAxO1xuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRjb25zdCBsaW5lID0gbGluZXNbaV07XG5cdFx0XHRcdGlmIChsaW5lICYmIHVybCAmJiBsaW5lLmluY2x1ZGVzKHVybCkpIHtcblx0XHRcdFx0XHRsaW5lTnVtYmVyID0gaSArIDE7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0cmVzdWx0cy5wdXNoKHtcblx0XHRcdFx0cGFzc2VkOiBmYWxzZSxcblx0XHRcdFx0bWVzc2FnZTogZXJyb3JNZXNzYWdlLFxuXHRcdFx0XHRzdWdnZXN0aW9uOiBzdWdnZXN0aW9uLFxuXHRcdFx0XHRzZXZlcml0eTogJ2Vycm9yJyxcblx0XHRcdFx0cG9zaXRpb246IHtcblx0XHRcdFx0XHRsaW5lOiBsaW5lTnVtYmVyLFxuXHRcdFx0XHRcdHNlYXJjaFRleHQ6IHVybCxcblx0XHRcdFx0XHRjb250ZXh0OiBnZXRDb250ZXh0QXJvdW5kTGluZShjb250ZW50LCBsaW5lTnVtYmVyKVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblx0XG5cdC8vIElmIG5vIGVycm9ycyB3ZXJlIGZvdW5kLCBhZGQgc3VjY2VzcyBtZXNzYWdlXG5cdGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gMCAmJiB1bmlxdWVMaW5rcy5sZW5ndGggPiAwKSB7XG5cdFx0cmVzdWx0cy5wdXNoKHtcblx0XHRcdHBhc3NlZDogdHJ1ZSxcblx0XHRcdG1lc3NhZ2U6IGBGb3VuZCAke3VuaXF1ZUxpbmtzLmxlbmd0aH0gZXh0ZXJuYWwgbGluayhzKSwgYWxsIGFwcGVhciB0byByZXNvbHZlIGFuZCBhcmUgd29ya2luZ2AsXG5cdFx0XHRzZXZlcml0eTogJ2luZm8nXG5cdFx0fSk7XG5cdH0gZWxzZSBpZiAodW5pcXVlTGlua3MubGVuZ3RoID4gMCkge1xuXHRcdC8vIEFkZCBzdW1tYXJ5IG1lc3NhZ2Ugd2hlbiB0aGVyZSBhcmUgYm90aCB3b3JraW5nIGFuZCBicm9rZW4gbGlua3Ncblx0XHRjb25zdCB3b3JraW5nTGlua3MgPSB1bmlxdWVMaW5rcy5sZW5ndGggLSByZXN1bHRzLmZpbHRlcihyID0+ICFyLnBhc3NlZCkubGVuZ3RoO1xuXHRcdGlmICh3b3JraW5nTGlua3MgPiAwKSB7XG5cdFx0XHRyZXN1bHRzLnB1c2goe1xuXHRcdFx0XHRwYXNzZWQ6IHRydWUsXG5cdFx0XHRcdG1lc3NhZ2U6IGAke3dvcmtpbmdMaW5rc30gb2YgJHt1bmlxdWVMaW5rcy5sZW5ndGh9IGV4dGVybmFsIGxpbmsocykgYXJlIHdvcmtpbmdgLFxuXHRcdFx0XHRzZXZlcml0eTogJ2luZm8nXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblx0XG5cdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XG59XG5cblxuLyoqXG4gKiBDaGVja3MgZm9yIGV4dGVybmFsIGxpbmtzIG9ubHkgKHNpbXBsaWZpZWQgdmVyc2lvbilcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIG1hcmtkb3duIGNvbnRlbnQgdG8gY2hlY2tcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxuICogQHBhcmFtIHNldHRpbmdzIC0gUGx1Z2luIHNldHRpbmdzXG4gKiBAcmV0dXJucyBBcnJheSBvZiBTRU8gY2hlY2sgcmVzdWx0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tFeHRlcm5hbExpbmtzT25seShjb250ZW50OiBzdHJpbmcsIGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcblx0Ly8gVGhpcyBpcyBhIHNpbXBsaWZpZWQgdmVyc2lvbiB0aGF0IGp1c3QgbGlzdHMgZXh0ZXJuYWwgbGlua3Ncblx0cmV0dXJuIGNoZWNrRXh0ZXJuYWxMaW5rcyhjb250ZW50LCBmaWxlLCBzZXR0aW5ncyk7XG59IiwgIi8qKlxyXG4gKiBSZWFkaW5nIGxldmVsIGFuYWx5c2lzIHV0aWxpdGllc1xyXG4gKiBQcm92aWRlcyBmdW5jdGlvbnMgdG8gY2FsY3VsYXRlIHJlYWRpbmcgbGV2ZWwgYW5kIHN5bGxhYmxlIGNvdW50aW5nXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIENvdW50cyBzeWxsYWJsZXMgaW4gYSB3b3JkIHVzaW5nIGEgc2ltcGxlIGhldXJpc3RpY1xyXG4gKiBAcGFyYW0gd29yZCAtIFRoZSB3b3JkIHRvIGNvdW50IHN5bGxhYmxlcyBmb3JcclxuICogQHJldHVybnMgTnVtYmVyIG9mIHN5bGxhYmxlcyBpbiB0aGUgd29yZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNvdW50U3lsbGFibGVzKHdvcmQ6IHN0cmluZyk6IG51bWJlciB7XHJcblx0Ly8gUmVtb3ZlIHB1bmN0dWF0aW9uIGFuZCBjb252ZXJ0IHRvIGxvd2VyY2FzZVxyXG5cdGNvbnN0IGNsZWFuV29yZCA9IHdvcmQudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXmEtel0vZywgJycpO1xyXG5cdFxyXG5cdC8vIEhhbmRsZSBlbXB0eSB3b3Jkc1xyXG5cdGlmIChjbGVhbldvcmQubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcclxuXHRcclxuXHQvLyBDb3VudCB2b3dlbCBncm91cHNcclxuXHRsZXQgc3lsbGFibGVzID0gMDtcclxuXHRsZXQgcHJldmlvdXNXYXNWb3dlbCA9IGZhbHNlO1xyXG5cdFxyXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgY2xlYW5Xb3JkLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRjb25zdCBjaGFyID0gY2xlYW5Xb3JkW2ldO1xyXG5cdFx0aWYgKGNoYXIpIHtcclxuXHRcdFx0Y29uc3QgaXNWb3dlbCA9IC9bYWVpb3V5XS8udGVzdChjaGFyKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChpc1Zvd2VsICYmICFwcmV2aW91c1dhc1Zvd2VsKSB7XHJcblx0XHRcdFx0c3lsbGFibGVzKys7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHByZXZpb3VzV2FzVm93ZWwgPSBpc1Zvd2VsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBIYW5kbGUgc2lsZW50ICdlJyBhdCB0aGUgZW5kXHJcblx0aWYgKGNsZWFuV29yZC5lbmRzV2l0aCgnZScpICYmIHN5bGxhYmxlcyA+IDEpIHtcclxuXHRcdHN5bGxhYmxlcy0tO1xyXG5cdH1cclxuXHRcclxuXHQvLyBFdmVyeSB3b3JkIGhhcyBhdCBsZWFzdCBvbmUgc3lsbGFibGVcclxuXHRyZXR1cm4gTWF0aC5tYXgoMSwgc3lsbGFibGVzKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldHMgYSBodW1hbi1yZWFkYWJsZSBkZXNjcmlwdGlvbiBvZiB0aGUgcmVhZGluZyBsZXZlbFxyXG4gKiBAcGFyYW0gbGV2ZWwgLSBUaGUgRmxlc2NoLUtpbmNhaWQgcmVhZGluZyBsZXZlbFxyXG4gKiBAcmV0dXJucyBEZXNjcmlwdGlvbiBvZiB0aGUgcmVhZGluZyBsZXZlbFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlYWRpbmdMZXZlbERlc2NyaXB0aW9uKGxldmVsOiBudW1iZXIpOiBzdHJpbmcge1xyXG5cdGlmIChsZXZlbCA8PSA2KSByZXR1cm4gXCJWZXJ5IGVhc3kgdG8gcmVhZFwiO1xyXG5cdGlmIChsZXZlbCA8PSA5KSByZXR1cm4gXCJFYXN5IHRvIHJlYWRcIjtcclxuXHRpZiAobGV2ZWwgPD0gMTIpIHJldHVybiBcIk1vZGVyYXRlbHkgZWFzeSB0byByZWFkXCI7XHJcblx0aWYgKGxldmVsIDw9IDE1KSByZXR1cm4gXCJNb2RlcmF0ZWx5IGRpZmZpY3VsdCB0byByZWFkXCI7XHJcblx0aWYgKGxldmVsIDw9IDE4KSByZXR1cm4gXCJEaWZmaWN1bHQgdG8gcmVhZFwiO1xyXG5cdHJldHVybiBcIlZlcnkgZGlmZmljdWx0IHRvIHJlYWRcIjtcclxufVxyXG4iLCAiLyoqXHJcbiAqIENvbnRlbnQgdmFsaWRhdGlvbiBjaGVja3NcclxuICogQ2hlY2tzIGZvciBjb250ZW50IGxlbmd0aCwgcmVhZGluZyBsZXZlbCwgYW5kIGR1cGxpY2F0ZSBjb250ZW50XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgU0VPU2V0dGluZ3MgfSBmcm9tIFwiLi4vc2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgU0VPQ2hlY2tSZXN1bHQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcclxuaW1wb3J0IHsgcmVtb3ZlQ29kZUJsb2NrcyB9IGZyb20gXCIuL3V0aWxzL2NvbnRlbnQtcGFyc2VyXCI7XHJcbmltcG9ydCB7IGNvdW50U3lsbGFibGVzLCBnZXRSZWFkaW5nTGV2ZWxEZXNjcmlwdGlvbiB9IGZyb20gXCIuL3V0aWxzL3JlYWRpbmctbGV2ZWxcIjtcclxuaW1wb3J0IHsgVmF1bHREdXBsaWNhdGVEZXRlY3RvciB9IGZyb20gXCIuL2R1cGxpY2F0ZS1kZXRlY3Rpb25cIjtcclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgY29udGVudCBsZW5ndGggYWdhaW5zdCBtaW5pbXVtIHJlcXVpcmVtZW50c1xyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSBtYXJrZG93biBjb250ZW50IHRvIGNoZWNrXHJcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBQbHVnaW4gc2V0dGluZ3NcclxuICogQHJldHVybnMgQXJyYXkgb2YgU0VPIGNoZWNrIHJlc3VsdHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja0NvbnRlbnRMZW5ndGgoY29udGVudDogc3RyaW5nLCBmaWxlOiBURmlsZSwgc2V0dGluZ3M6IFNFT1NldHRpbmdzKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0Y29uc3QgcmVzdWx0czogU0VPQ2hlY2tSZXN1bHRbXSA9IFtdO1xyXG5cdFxyXG5cdGlmICghc2V0dGluZ3MuY2hlY2tDb250ZW50TGVuZ3RoKSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcclxuXHR9XHJcblx0XHJcblx0Ly8gUmVtb3ZlIG9ubHkgZnJvbnRtYXR0ZXIgYW5kIGNvZGUgYmxvY2tzIC0gY291bnQgZXZlcnl0aGluZyBhIHJlYWRlciB3b3VsZCBzZWVcclxuXHRsZXQgYm9keUNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoL14tLS1cXG5bXFxzXFxTXSo/XFxuLS0tXFxuLywgJycpOyAvLyBSZW1vdmUgZnJvbnRtYXR0ZXJcclxuXHRib2R5Q29udGVudCA9IGJvZHlDb250ZW50LnJlcGxhY2UoL2BgYFtcXHNcXFNdKj9gYGAvZywgJycpOyAvLyBSZW1vdmUgY29kZSBibG9ja3NcclxuXHRib2R5Q29udGVudCA9IGJvZHlDb250ZW50LnJlcGxhY2UoL35+fltcXHNcXFNdKj9+fn4vZywgJycpOyAvLyBSZW1vdmUgY29kZSBibG9ja3Mgd2l0aCB+fn5cclxuXHQvLyBLZWVwIGV2ZXJ5dGhpbmcgZWxzZSAtIHdpa2lsaW5rcywgaW1hZ2VzLCBIVE1MLCBoZWFkaW5ncywgbGlzdHMgLSBhbGwgYXJlIHJlYWRhYmxlIGNvbnRlbnRcclxuXHRcclxuXHRjb25zdCB3b3JkQ291bnQgPSBib2R5Q29udGVudC5zcGxpdCgvXFxzKy8pLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMCkubGVuZ3RoO1xyXG5cdFxyXG5cdGlmICh3b3JkQ291bnQgPCBzZXR0aW5ncy5taW5Db250ZW50TGVuZ3RoKSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRtZXNzYWdlOiBgQ29udGVudCB0b28gc2hvcnQ6ICR7d29yZENvdW50fSB3b3Jkc2AsXHJcblx0XHRcdHN1Z2dlc3Rpb246IGBBaW0gZm9yIGF0IGxlYXN0ICR7c2V0dGluZ3MubWluQ29udGVudExlbmd0aH0gd29yZHNgLFxyXG5cdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnXHJcblx0XHR9KTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBgR29vZCBjb250ZW50IGxlbmd0aDogJHt3b3JkQ291bnR9IHdvcmRzYCxcclxuXHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgcmVhZGluZyBsZXZlbCBvZiB0aGUgY29udGVudFxyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSBtYXJrZG93biBjb250ZW50IHRvIGNoZWNrXHJcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBQbHVnaW4gc2V0dGluZ3NcclxuICogQHJldHVybnMgQXJyYXkgb2YgU0VPIGNoZWNrIHJlc3VsdHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja1JlYWRpbmdMZXZlbChjb250ZW50OiBzdHJpbmcsIGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcclxuXHRjb25zdCByZXN1bHRzOiBTRU9DaGVja1Jlc3VsdFtdID0gW107XHJcblx0XHJcblx0aWYgKCFzZXR0aW5ncy5jaGVja1JlYWRpbmdMZXZlbCkge1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIFJlbW92ZSBjb2RlIGJsb2NrcyBhbmQgZnJvbnRtYXR0ZXIgZm9yIHJlYWRpbmcgbGV2ZWwgYW5hbHlzaXNcclxuXHRjb25zdCBjbGVhbkNvbnRlbnQgPSByZW1vdmVDb2RlQmxvY2tzKGNvbnRlbnQpO1xyXG5cdFxyXG5cdC8vIFNwbGl0IGludG8gc2VudGVuY2VzIGFuZCB3b3Jkc1xyXG5cdGNvbnN0IHNlbnRlbmNlcyA9IGNsZWFuQ29udGVudC5zcGxpdCgvWy4hP10rLykuZmlsdGVyKHMgPT4gcy50cmltKCkubGVuZ3RoID4gMCk7XHJcblx0Y29uc3Qgd29yZHMgPSBjbGVhbkNvbnRlbnQuc3BsaXQoL1xccysvKS5maWx0ZXIod29yZCA9PiB3b3JkLmxlbmd0aCA+IDApO1xyXG5cdFxyXG5cdGlmIChzZW50ZW5jZXMubGVuZ3RoID09PSAwIHx8IHdvcmRzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBcIk5vIHJlYWRhYmxlIGNvbnRlbnQgZm91bmQgZm9yIHJlYWRpbmcgbGV2ZWwgYW5hbHlzaXNcIixcclxuXHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xyXG5cdFx0fSk7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHRcclxuXHQvLyBDYWxjdWxhdGUgRmxlc2NoLUtpbmNhaWQgcmVhZGluZyBsZXZlbFxyXG5cdGNvbnN0IHRvdGFsU3lsbGFibGVzID0gd29yZHMucmVkdWNlKChzdW0sIHdvcmQpID0+IHN1bSArIGNvdW50U3lsbGFibGVzKHdvcmQpLCAwKTtcclxuXHRjb25zdCBhdmdXb3Jkc1BlclNlbnRlbmNlID0gd29yZHMubGVuZ3RoIC8gc2VudGVuY2VzLmxlbmd0aDtcclxuXHRjb25zdCBhdmdTeWxsYWJsZXNQZXJXb3JkID0gdG90YWxTeWxsYWJsZXMgLyB3b3Jkcy5sZW5ndGg7XHJcblx0XHJcblx0Y29uc3QgcmVhZGluZ0xldmVsID0gMC4zOSAqIGF2Z1dvcmRzUGVyU2VudGVuY2UgKyAxMS44ICogYXZnU3lsbGFibGVzUGVyV29yZCAtIDE1LjU5O1xyXG5cdFxyXG5cdGNvbnN0IGRlc2NyaXB0aW9uID0gZ2V0UmVhZGluZ0xldmVsRGVzY3JpcHRpb24ocmVhZGluZ0xldmVsKTtcclxuXHRcclxuXHRpZiAocmVhZGluZ0xldmVsID4gMTIpIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdG1lc3NhZ2U6IGBSZWFkaW5nIGxldmVsIHRvbyBoaWdoOiAke3JlYWRpbmdMZXZlbC50b0ZpeGVkKDEpfSAoJHtkZXNjcmlwdGlvbn0pYCxcclxuXHRcdFx0c3VnZ2VzdGlvbjogXCJDb25zaWRlciBzaW1wbGlmeWluZyBzZW50ZW5jZSBzdHJ1Y3R1cmUgYW5kIHVzaW5nIHNob3J0ZXIgd29yZHNcIixcclxuXHRcdFx0c2V2ZXJpdHk6ICd3YXJuaW5nJ1xyXG5cdFx0fSk7XHJcblx0fSBlbHNlIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0bWVzc2FnZTogYEdvb2QgcmVhZGluZyBsZXZlbDogJHtyZWFkaW5nTGV2ZWwudG9GaXhlZCgxKX0gKCR7ZGVzY3JpcHRpb259KWAsXHJcblx0XHRcdHNldmVyaXR5OiAnaW5mbydcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2tzIGZvciBkdXBsaWNhdGUgY29udGVudFxyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSBtYXJrZG93biBjb250ZW50IHRvIGNoZWNrXHJcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBQbHVnaW4gc2V0dGluZ3NcclxuICogQHJldHVybnMgQXJyYXkgb2YgU0VPIGNoZWNrIHJlc3VsdHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja0R1cGxpY2F0ZUNvbnRlbnQoY29udGVudDogc3RyaW5nLCBmaWxlOiBURmlsZSwgc2V0dGluZ3M6IFNFT1NldHRpbmdzKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0Y29uc3QgcmVzdWx0czogU0VPQ2hlY2tSZXN1bHRbXSA9IFtdO1xyXG5cdFxyXG5cdGlmICghc2V0dGluZ3MuY2hlY2tEdXBsaWNhdGVDb250ZW50KSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcclxuXHR9XHJcblx0XHJcblx0Ly8gVGhpcyBpcyBhIHNpbXBsaWZpZWQgdmVyc2lvbiAtIGluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgeW91J2QgY29tcGFyZSBhZ2FpbnN0IG90aGVyIGZpbGVzXHJcblx0Ly8gRm9yIG5vdywgd2UnbGwganVzdCBjaGVjayBmb3Igb2J2aW91cyBkdXBsaWNhdGlvbiB3aXRoaW4gdGhlIHNhbWUgZmlsZVxyXG5cdFxyXG5cdC8vIFJlbW92ZSBjb2RlIGJsb2NrcyBhbmQgZnJvbnRtYXR0ZXJcclxuXHRjb25zdCBjbGVhbkNvbnRlbnQgPSByZW1vdmVDb2RlQmxvY2tzKGNvbnRlbnQpO1xyXG5cdFxyXG5cdC8vIFNwbGl0IGludG8gcGFyYWdyYXBoc1xyXG5cdGNvbnN0IHBhcmFncmFwaHMgPSBjbGVhbkNvbnRlbnQuc3BsaXQoL1xcblxccypcXG4vKS5maWx0ZXIocCA9PiBwLnRyaW0oKS5sZW5ndGggPiAyMCk7XHJcblx0XHJcblx0Ly8gQ2hlY2sgZm9yIHJlcGVhdGVkIHBhcmFncmFwaHNcclxuXHRjb25zdCBkdXBsaWNhdGVQYXJhZ3JhcGhzID0gW107XHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBwYXJhZ3JhcGhzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRmb3IgKGxldCBqID0gaSArIDE7IGogPCBwYXJhZ3JhcGhzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdGNvbnN0IHBhcmFncmFwaDEgPSBwYXJhZ3JhcGhzW2ldO1xyXG5cdFx0XHRjb25zdCBwYXJhZ3JhcGgyID0gcGFyYWdyYXBoc1tqXTtcclxuXHRcdFx0aWYgKHBhcmFncmFwaDEgJiYgcGFyYWdyYXBoMikge1xyXG5cdFx0XHRcdGNvbnN0IHNpbWlsYXJpdHkgPSBjYWxjdWxhdGVTaW1pbGFyaXR5KHBhcmFncmFwaDEsIHBhcmFncmFwaDIpO1xyXG5cdFx0XHRcdGlmIChzaW1pbGFyaXR5ID4gc2V0dGluZ3MuZHVwbGljYXRlVGhyZXNob2xkKSB7XHJcblx0XHRcdFx0XHRkdXBsaWNhdGVQYXJhZ3JhcGhzLnB1c2goe1xyXG5cdFx0XHRcdFx0XHRwYXJhZ3JhcGgxOiBpICsgMSxcclxuXHRcdFx0XHRcdFx0cGFyYWdyYXBoMjogaiArIDEsXHJcblx0XHRcdFx0XHRcdHNpbWlsYXJpdHk6IHNpbWlsYXJpdHlcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRpZiAoZHVwbGljYXRlUGFyYWdyYXBocy5sZW5ndGggPiAwKSB7XHJcblx0XHRkdXBsaWNhdGVQYXJhZ3JhcGhzLmZvckVhY2goKHsgcGFyYWdyYXBoMSwgcGFyYWdyYXBoMiwgc2ltaWxhcml0eSB9KSA9PiB7XHJcblx0XHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0XHRtZXNzYWdlOiBgRHVwbGljYXRlIGNvbnRlbnQgZGV0ZWN0ZWQgYmV0d2VlbiBwYXJhZ3JhcGhzICR7cGFyYWdyYXBoMX0gYW5kICR7cGFyYWdyYXBoMn1gLFxyXG5cdFx0XHRcdHN1Z2dlc3Rpb246IGBTaW1pbGFyaXR5OiAke3NpbWlsYXJpdHkudG9GaXhlZCgxKX0lIC0gY29uc2lkZXIgcmV3cml0aW5nIG9uZSBvZiB0aGVzZSBwYXJhZ3JhcGhzYCxcclxuXHRcdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnXHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fSBlbHNlIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0bWVzc2FnZTogXCJObyBkdXBsaWNhdGUgY29udGVudCBkZXRlY3RlZFwiLFxyXG5cdFx0XHRzZXZlcml0eTogJ2luZm8nXHJcblx0XHR9KTtcclxuXHR9XHJcblx0XHJcblx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgc2ltaWxhcml0eSBiZXR3ZWVuIHR3byB0ZXh0IHN0cmluZ3NcclxuICogQHBhcmFtIHRleHQxIC0gRmlyc3QgdGV4dCBzdHJpbmdcclxuICogQHBhcmFtIHRleHQyIC0gU2Vjb25kIHRleHQgc3RyaW5nXHJcbiAqIEByZXR1cm5zIFNpbWlsYXJpdHkgcGVyY2VudGFnZSAoMC0xMDApXHJcbiAqL1xyXG5mdW5jdGlvbiBjYWxjdWxhdGVTaW1pbGFyaXR5KHRleHQxOiBzdHJpbmcsIHRleHQyOiBzdHJpbmcpOiBudW1iZXIge1xyXG5cdGNvbnN0IHdvcmRzMSA9IHRleHQxLnRvTG93ZXJDYXNlKCkuc3BsaXQoL1xccysvKTtcclxuXHRjb25zdCB3b3JkczIgPSB0ZXh0Mi50b0xvd2VyQ2FzZSgpLnNwbGl0KC9cXHMrLyk7XHJcblx0XHJcblx0Y29uc3Qgc2V0MSA9IG5ldyBTZXQod29yZHMxKTtcclxuXHRjb25zdCBzZXQyID0gbmV3IFNldCh3b3JkczIpO1xyXG5cdFxyXG5cdGNvbnN0IGludGVyc2VjdGlvbiA9IG5ldyBTZXQoWy4uLnNldDFdLmZpbHRlcih4ID0+IHNldDIuaGFzKHgpKSk7XHJcblx0Y29uc3QgdW5pb24gPSBuZXcgU2V0KFsuLi5zZXQxLCAuLi5zZXQyXSk7XHJcblx0XHJcblx0cmV0dXJuIChpbnRlcnNlY3Rpb24uc2l6ZSAvIHVuaW9uLnNpemUpICogMTAwO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgZm9yIGR1cGxpY2F0ZSB0aXRsZXMgYWNyb3NzIHRoZSB2YXVsdFxyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSBtYXJrZG93biBjb250ZW50IHRvIGNoZWNrXHJcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBQbHVnaW4gc2V0dGluZ3NcclxuICogQHBhcmFtIHZhdWx0RGV0ZWN0b3IgLSBWYXVsdCBkdXBsaWNhdGUgZGV0ZWN0b3IgaW5zdGFuY2VcclxuICogQHJldHVybnMgQXJyYXkgb2YgU0VPIGNoZWNrIHJlc3VsdHNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0R1cGxpY2F0ZVRpdGxlcyhcclxuXHRjb250ZW50OiBzdHJpbmcsIFxyXG5cdGZpbGU6IFRGaWxlLCBcclxuXHRzZXR0aW5nczogU0VPU2V0dGluZ3MsIFxyXG5cdHZhdWx0RGV0ZWN0b3I6IFZhdWx0RHVwbGljYXRlRGV0ZWN0b3JcclxuKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0cmV0dXJuIGF3YWl0IHZhdWx0RGV0ZWN0b3IuY2hlY2tEdXBsaWNhdGVUaXRsZXMoZmlsZSwgc2V0dGluZ3MpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgZm9yIGR1cGxpY2F0ZSBkZXNjcmlwdGlvbnMgYWNyb3NzIHRoZSB2YXVsdFxyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSBtYXJrZG93biBjb250ZW50IHRvIGNoZWNrXHJcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBQbHVnaW4gc2V0dGluZ3NcclxuICogQHBhcmFtIHZhdWx0RGV0ZWN0b3IgLSBWYXVsdCBkdXBsaWNhdGUgZGV0ZWN0b3IgaW5zdGFuY2VcclxuICogQHJldHVybnMgQXJyYXkgb2YgU0VPIGNoZWNrIHJlc3VsdHNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0R1cGxpY2F0ZURlc2NyaXB0aW9ucyhcclxuXHRjb250ZW50OiBzdHJpbmcsIFxyXG5cdGZpbGU6IFRGaWxlLCBcclxuXHRzZXR0aW5nczogU0VPU2V0dGluZ3MsIFxyXG5cdHZhdWx0RGV0ZWN0b3I6IFZhdWx0RHVwbGljYXRlRGV0ZWN0b3JcclxuKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0cmV0dXJuIGF3YWl0IHZhdWx0RGV0ZWN0b3IuY2hlY2tEdXBsaWNhdGVEZXNjcmlwdGlvbnMoZmlsZSwgc2V0dGluZ3MpO1xyXG59XHJcblxyXG4vKipcclxuICogRW5oYW5jZWQgZHVwbGljYXRlIGNvbnRlbnQgZGV0ZWN0aW9uIHVzaW5nIHZhdWx0LXdpZGUgYW5hbHlzaXNcclxuICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgbWFya2Rvd24gY29udGVudCB0byBjaGVja1xyXG4gKiBAcGFyYW0gZmlsZSAtIFRoZSBmaWxlIGJlaW5nIGNoZWNrZWRcclxuICogQHBhcmFtIHNldHRpbmdzIC0gUGx1Z2luIHNldHRpbmdzXHJcbiAqIEBwYXJhbSB2YXVsdERldGVjdG9yIC0gVmF1bHQgZHVwbGljYXRlIGRldGVjdG9yIGluc3RhbmNlXHJcbiAqIEByZXR1cm5zIEFycmF5IG9mIFNFTyBjaGVjayByZXN1bHRzXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tWYXVsdER1cGxpY2F0ZUNvbnRlbnQoXHJcblx0Y29udGVudDogc3RyaW5nLCBcclxuXHRmaWxlOiBURmlsZSwgXHJcblx0c2V0dGluZ3M6IFNFT1NldHRpbmdzLCBcclxuXHR2YXVsdERldGVjdG9yOiBWYXVsdER1cGxpY2F0ZURldGVjdG9yXHJcbik6IFByb21pc2U8U0VPQ2hlY2tSZXN1bHRbXT4ge1xyXG5cdHJldHVybiBhd2FpdCB2YXVsdERldGVjdG9yLmNoZWNrRHVwbGljYXRlQ29udGVudChmaWxlLCBzZXR0aW5ncyk7XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBNZXRhIGRhdGEgdmFsaWRhdGlvbiBjaGVja3NcclxuICogQ2hlY2tzIGZvciB0aXRsZSBsZW5ndGgsIG1ldGEgZGVzY3JpcHRpb25zLCBhbmQga2V5d29yZCBkZW5zaXR5XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgU0VPU2V0dGluZ3MgfSBmcm9tIFwiLi4vc2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgU0VPQ2hlY2tSZXN1bHQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcclxuaW1wb3J0IHsgcmVtb3ZlQ29kZUJsb2NrcyB9IGZyb20gXCIuL3V0aWxzL2NvbnRlbnQtcGFyc2VyXCI7XHJcblxyXG4vKipcclxuICogQ2hlY2tzIG1ldGEgZGVzY3JpcHRpb24gbGVuZ3RoIGFuZCBwcmVzZW5jZVxyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSBtYXJrZG93biBjb250ZW50IHRvIGNoZWNrXHJcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBQbHVnaW4gc2V0dGluZ3NcclxuICogQHJldHVybnMgQXJyYXkgb2YgU0VPIGNoZWNrIHJlc3VsdHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja01ldGFEZXNjcmlwdGlvbihjb250ZW50OiBzdHJpbmcsIGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcclxuXHRjb25zdCByZXN1bHRzOiBTRU9DaGVja1Jlc3VsdFtdID0gW107XHJcblx0XHJcblx0aWYgKCFzZXR0aW5ncy5kZXNjcmlwdGlvblByb3BlcnR5KSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcclxuXHR9XHJcblx0XHJcblx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcclxuXHRpZiAoIWZyb250bWF0dGVyTWF0Y2gpIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdG1lc3NhZ2U6IFwiTm8gcHJvcGVydGllcyBmb3VuZFwiLFxyXG5cdFx0XHRzdWdnZXN0aW9uOiBcIkFkZCBwcm9wZXJ0aWVzIHdpdGggZGVzY3JpcHRpb24gcHJvcGVydHlcIixcclxuXHRcdFx0c2V2ZXJpdHk6ICd3YXJuaW5nJ1xyXG5cdFx0fSk7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHRcclxuXHRjb25zdCBmcm9udG1hdHRlciA9IGZyb250bWF0dGVyTWF0Y2hbMV07XHJcblx0aWYgKCFmcm9udG1hdHRlcikge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0bWVzc2FnZTogXCJObyBwcm9wZXJ0aWVzIGNvbnRlbnQgZm91bmRcIixcclxuXHRcdFx0c3VnZ2VzdGlvbjogXCJBZGQgcHJvcGVydGllcyB3aXRoIGRlc2NyaXB0aW9uIHByb3BlcnR5XCIsXHJcblx0XHRcdHNldmVyaXR5OiAnd2FybmluZydcclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblx0Y29uc3QgZGVzY3JpcHRpb25NYXRjaCA9IGZyb250bWF0dGVyLm1hdGNoKG5ldyBSZWdFeHAoYF4ke3NldHRpbmdzLmRlc2NyaXB0aW9uUHJvcGVydHl9OlxcXFxzKiguKykkYCwgJ20nKSk7XHJcblx0XHJcblx0aWYgKCFkZXNjcmlwdGlvbk1hdGNoIHx8ICFkZXNjcmlwdGlvbk1hdGNoWzFdKSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRtZXNzYWdlOiBgTm8gJHtzZXR0aW5ncy5kZXNjcmlwdGlvblByb3BlcnR5fSBmb3VuZCBpbiBwcm9wZXJ0aWVzYCxcclxuXHRcdFx0c3VnZ2VzdGlvbjogYEFkZCAke3NldHRpbmdzLmRlc2NyaXB0aW9uUHJvcGVydHl9IHRvIHByb3BlcnRpZXNgLFxyXG5cdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnXHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cdFxyXG5cdGxldCBkZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uTWF0Y2hbMV0udHJpbSgpO1xyXG5cdFxyXG5cdC8vIFJlbW92ZSBzdXJyb3VuZGluZyBxdW90ZXMgaWYgcHJlc2VudFxyXG5cdGlmICgoZGVzY3JpcHRpb24uc3RhcnRzV2l0aCgnXCInKSAmJiBkZXNjcmlwdGlvbi5lbmRzV2l0aCgnXCInKSkgfHwgXHJcblx0XHQoZGVzY3JpcHRpb24uc3RhcnRzV2l0aChcIidcIikgJiYgZGVzY3JpcHRpb24uZW5kc1dpdGgoXCInXCIpKSkge1xyXG5cdFx0ZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbi5zbGljZSgxLCAtMSk7XHJcblx0fVxyXG5cdGNvbnN0IGxlbmd0aCA9IGRlc2NyaXB0aW9uLmxlbmd0aDtcclxuXHRcclxuXHRpZiAobGVuZ3RoIDwgMTIwKSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRtZXNzYWdlOiBgRGVzY3JpcHRpb24gdG9vIHNob3J0OiAke2xlbmd0aH0gY2hhcmFjdGVyc2AsXHJcblx0XHRcdHN1Z2dlc3Rpb246IFwiQWltIGZvciAxMjAtMTYwIGNoYXJhY3RlcnNcIixcclxuXHRcdFx0c2V2ZXJpdHk6ICd3YXJuaW5nJ1xyXG5cdFx0fSk7XHJcblx0fSBlbHNlIGlmIChsZW5ndGggPiAxNjApIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdG1lc3NhZ2U6IGBEZXNjcmlwdGlvbiB0b28gbG9uZzogJHtsZW5ndGh9IGNoYXJhY3RlcnNgLFxyXG5cdFx0XHRzdWdnZXN0aW9uOiBcIkFpbSBmb3IgMTIwLTE2MCBjaGFyYWN0ZXJzXCIsXHJcblx0XHRcdHNldmVyaXR5OiAnd2FybmluZydcclxuXHRcdH0pO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IHRydWUsXHJcblx0XHRcdG1lc3NhZ2U6IGBHb29kIGRlc2NyaXB0aW9uIGxlbmd0aDogJHtsZW5ndGh9IGNoYXJhY3RlcnNgLFxyXG5cdFx0XHRzZXZlcml0eTogJ2luZm8nXHJcblx0XHR9KTtcclxuXHR9XHJcblx0XHJcblx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrcyB0aXRsZSBsZW5ndGggYW5kIHByZXNlbmNlXHJcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIG1hcmtkb3duIGNvbnRlbnQgdG8gY2hlY2tcclxuICogQHBhcmFtIGZpbGUgLSBUaGUgZmlsZSBiZWluZyBjaGVja2VkXHJcbiAqIEBwYXJhbSBzZXR0aW5ncyAtIFBsdWdpbiBzZXR0aW5nc1xyXG4gKiBAcmV0dXJucyBBcnJheSBvZiBTRU8gY2hlY2sgcmVzdWx0c1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrVGl0bGVMZW5ndGgoY29udGVudDogc3RyaW5nLCBmaWxlOiBURmlsZSwgc2V0dGluZ3M6IFNFT1NldHRpbmdzKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0Y29uc3QgcmVzdWx0czogU0VPQ2hlY2tSZXN1bHRbXSA9IFtdO1xyXG5cdFxyXG5cdGlmICghc2V0dGluZ3MuY2hlY2tUaXRsZUxlbmd0aCkge1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XHJcblx0fVxyXG5cdFxyXG5cdGxldCB0aXRsZSA9ICcnO1xyXG5cdFxyXG5cdC8vIENoZWNrIGZyb250bWF0dGVyIGZpcnN0XHJcblx0aWYgKHNldHRpbmdzLnRpdGxlUHJvcGVydHkpIHtcclxuXHRcdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XHJcblx0XHRpZiAoZnJvbnRtYXR0ZXJNYXRjaCAmJiBmcm9udG1hdHRlck1hdGNoWzFdKSB7XHJcblx0XHRcdGNvbnN0IGZyb250bWF0dGVyID0gZnJvbnRtYXR0ZXJNYXRjaFsxXTtcclxuXHRcdFx0Y29uc3QgdGl0bGVNYXRjaCA9IGZyb250bWF0dGVyLm1hdGNoKG5ldyBSZWdFeHAoYF4ke3NldHRpbmdzLnRpdGxlUHJvcGVydHl9OlxcXFxzKiguKykkYCwgJ20nKSk7XHJcblx0XHRcdGlmICh0aXRsZU1hdGNoICYmIHRpdGxlTWF0Y2hbMV0pIHtcclxuXHRcdFx0XHR0aXRsZSA9IHRpdGxlTWF0Y2hbMV0udHJpbSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdC8vIEZhbGxiYWNrIHRvIGZpbGVuYW1lIGlmIGVuYWJsZWRcclxuXHRpZiAoIXRpdGxlICYmIHNldHRpbmdzLnVzZUZpbGVuYW1lQXNUaXRsZSkge1xyXG5cdFx0dGl0bGUgPSBmaWxlLmJhc2VuYW1lO1xyXG5cdH1cclxuXHRcclxuXHQvLyBGYWxsYmFjayB0byBmaXJzdCBIMSBoZWFkaW5nXHJcblx0aWYgKCF0aXRsZSkge1xyXG5cdFx0Y29uc3QgaDFNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14jXFxzKyguKykkL20pO1xyXG5cdFx0aWYgKGgxTWF0Y2ggJiYgaDFNYXRjaFsxXSkge1xyXG5cdFx0XHR0aXRsZSA9IGgxTWF0Y2hbMV0udHJpbSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBPbmx5IGNoZWNrIHRpdGxlIGxlbmd0aCBpZiB3ZSBoYXZlIGEgdGl0bGUgZnJvbSBmcm9udG1hdHRlciBvciBmaWxlbmFtZVxyXG5cdC8vIERvbid0IHNob3cgdGhlIGNoZWNrIGF0IGFsbCBpZiBubyB0aXRsZSBpcyBjb25maWd1cmVkXHJcblx0aWYgKCF0aXRsZSkge1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTsgLy8gUmV0dXJuIGVtcHR5IHJlc3VsdHMgLSBkb24ndCBzaG93IHRoZSBjaGVja1xyXG5cdH1cclxuXHRcclxuXHQvLyBBcHBseSBwcmVmaXgvc3VmZml4IGlmIGNvbmZpZ3VyZWQgKGFkZHMgc3BhY2UgZm9yIGNoYXJhY3RlciBjb3VudClcclxuXHRjb25zdCBmdWxsVGl0bGUgPSBzZXR0aW5ncy50aXRsZVByZWZpeFN1ZmZpeCA/IGAke3RpdGxlfSAke3NldHRpbmdzLnRpdGxlUHJlZml4U3VmZml4fWAgOiB0aXRsZTtcclxuXHRjb25zdCBsZW5ndGggPSBmdWxsVGl0bGUubGVuZ3RoO1xyXG5cdFxyXG5cdGlmIChsZW5ndGggPCAzMCkge1xyXG5cdFx0Y29uc3QgbWVzc2FnZSA9IHNldHRpbmdzLnRpdGxlUHJlZml4U3VmZml4IFxyXG5cdFx0XHQ/IGBUaXRsZSB0b28gc2hvcnQ6ICR7bGVuZ3RofSBjaGFyYWN0ZXJzICgke3RpdGxlfSArIFwiICR7c2V0dGluZ3MudGl0bGVQcmVmaXhTdWZmaXh9XCIpYFxyXG5cdFx0XHQ6IGBUaXRsZSB0b28gc2hvcnQ6ICR7bGVuZ3RofSBjaGFyYWN0ZXJzYDtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdG1lc3NhZ2UsXHJcblx0XHRcdHN1Z2dlc3Rpb246IFwiQWltIGZvciAzMC02MCBjaGFyYWN0ZXJzXCIsXHJcblx0XHRcdHNldmVyaXR5OiAnd2FybmluZydcclxuXHRcdH0pO1xyXG5cdH0gZWxzZSBpZiAobGVuZ3RoID4gNjApIHtcclxuXHRcdGNvbnN0IG1lc3NhZ2UgPSBzZXR0aW5ncy50aXRsZVByZWZpeFN1ZmZpeCBcclxuXHRcdFx0PyBgVGl0bGUgdG9vIGxvbmc6ICR7bGVuZ3RofSBjaGFyYWN0ZXJzICgke3RpdGxlfSArIFwiICR7c2V0dGluZ3MudGl0bGVQcmVmaXhTdWZmaXh9XCIpYFxyXG5cdFx0XHQ6IGBUaXRsZSB0b28gbG9uZzogJHtsZW5ndGh9IGNoYXJhY3RlcnNgO1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0bWVzc2FnZSxcclxuXHRcdFx0c3VnZ2VzdGlvbjogXCJBaW0gZm9yIDMwLTYwIGNoYXJhY3RlcnNcIixcclxuXHRcdFx0c2V2ZXJpdHk6ICd3YXJuaW5nJ1xyXG5cdFx0fSk7XHJcblx0fSBlbHNlIHtcclxuXHRcdGNvbnN0IG1lc3NhZ2UgPSBzZXR0aW5ncy50aXRsZVByZWZpeFN1ZmZpeCBcclxuXHRcdFx0PyBgR29vZCB0aXRsZSBsZW5ndGg6ICR7bGVuZ3RofSBjaGFyYWN0ZXJzICgke3RpdGxlfSArIFwiICR7c2V0dGluZ3MudGl0bGVQcmVmaXhTdWZmaXh9XCIpYFxyXG5cdFx0XHQ6IGBHb29kIHRpdGxlIGxlbmd0aDogJHtsZW5ndGh9IGNoYXJhY3RlcnNgO1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlLFxyXG5cdFx0XHRzZXZlcml0eTogJ2luZm8nXHJcblx0XHR9KTtcclxuXHR9XHJcblx0XHJcblx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrcyBrZXl3b3JkIGRlbnNpdHkgaW4gY29udGVudFxyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSBtYXJrZG93biBjb250ZW50IHRvIGNoZWNrXHJcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBQbHVnaW4gc2V0dGluZ3NcclxuICogQHJldHVybnMgQXJyYXkgb2YgU0VPIGNoZWNrIHJlc3VsdHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja0tleXdvcmREZW5zaXR5KGNvbnRlbnQ6IHN0cmluZywgZmlsZTogVEZpbGUsIHNldHRpbmdzOiBTRU9TZXR0aW5ncyk6IFByb21pc2U8U0VPQ2hlY2tSZXN1bHRbXT4ge1xyXG5cdGNvbnN0IHJlc3VsdHM6IFNFT0NoZWNrUmVzdWx0W10gPSBbXTtcclxuXHRcclxuXHRpZiAoIXNldHRpbmdzLmtleXdvcmRQcm9wZXJ0eSkge1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIEdldCBrZXl3b3JkIGZyb20gZnJvbnRtYXR0ZXJcclxuXHRjb25zdCBmcm9udG1hdHRlck1hdGNoID0gY29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xyXG5cdGlmICghZnJvbnRtYXR0ZXJNYXRjaCkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0bWVzc2FnZTogXCJObyBwcm9wZXJ0aWVzIGZvdW5kXCIsXHJcblx0XHRcdHN1Z2dlc3Rpb246IFwiQWRkIHByb3BlcnRpZXMgd2l0aCBrZXl3b3JkIHByb3BlcnR5XCIsXHJcblx0XHRcdHNldmVyaXR5OiAnd2FybmluZydcclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblx0XHJcblx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBmcm9udG1hdHRlck1hdGNoWzFdO1xyXG5cdGlmICghZnJvbnRtYXR0ZXIpIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdG1lc3NhZ2U6IFwiTm8gcHJvcGVydGllcyBjb250ZW50IGZvdW5kXCIsXHJcblx0XHRcdHN1Z2dlc3Rpb246IFwiQWRkIHByb3BlcnRpZXMgd2l0aCBrZXl3b3JkIHByb3BlcnR5XCIsXHJcblx0XHRcdHNldmVyaXR5OiAnd2FybmluZydcclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblx0Ly8gUGFyc2UgbGluZSBieSBsaW5lIGluc3RlYWQgb2YgdXNpbmcgcmVnZXhcclxuXHRjb25zdCBsaW5lcyA9IGZyb250bWF0dGVyLnNwbGl0KCdcXG4nKTtcclxuXHRsZXQga2V5d29yZCA9ICcnO1xyXG5cdGxldCBmb3VuZEtleXdvcmRMaW5lID0gZmFsc2U7XHJcblx0XHJcblx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XHJcblx0XHRpZiAobGluZS5zdGFydHNXaXRoKHNldHRpbmdzLmtleXdvcmRQcm9wZXJ0eSArICc6JykpIHtcclxuXHRcdFx0Zm91bmRLZXl3b3JkTGluZSA9IHRydWU7XHJcblx0XHRcdGtleXdvcmQgPSBsaW5lLnN1YnN0cmluZyhzZXR0aW5ncy5rZXl3b3JkUHJvcGVydHkubGVuZ3RoICsgMSkudHJpbSgpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0aWYgKCFmb3VuZEtleXdvcmRMaW5lKSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IHRydWUsXHJcblx0XHRcdG1lc3NhZ2U6IGBObyAke3NldHRpbmdzLmtleXdvcmRQcm9wZXJ0eX0gZGVmaW5lZCBpbiBwcm9wZXJ0aWVzYCxcclxuXHRcdFx0c2V2ZXJpdHk6ICdub3RpY2UnXHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIFZhbGlkYXRlIHRoYXQgdGhlIGtleXdvcmQgaXMgbWVhbmluZ2Z1bCAobm90IGp1c3QgYSBib29sZWFuIG9yIGVtcHR5KVxyXG5cdGlmICgha2V5d29yZCB8fCBrZXl3b3JkID09PSAnZmFsc2UnIHx8IGtleXdvcmQgPT09ICd0cnVlJyB8fCBrZXl3b3JkID09PSAnbnVsbCcgfHwga2V5d29yZCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0bWVzc2FnZTogYE5vIHZhbGlkIGtleXdvcmQgZGVmaW5lZCBpbiBwcm9wZXJ0aWVzYCxcclxuXHRcdFx0c2V2ZXJpdHk6ICdub3RpY2UnXHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIFJlbW92ZSBjb2RlIGJsb2NrcyBhbmQgZnJvbnRtYXR0ZXIgZm9yIGtleXdvcmQgYW5hbHlzaXNcclxuXHRsZXQgY2xlYW5Db250ZW50ID0gcmVtb3ZlQ29kZUJsb2Nrcyhjb250ZW50KTtcclxuXHRcclxuXHQvLyBBZGQgdGl0bGUgdG8gY29udGVudCBmb3Iga2V5d29yZCBkZW5zaXR5IGNhbGN1bGF0aW9uIGlmIGl0IGV4aXN0c1xyXG5cdGNvbnN0IHRpdGxlRnJvbnRtYXR0ZXJNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcclxuXHRpZiAodGl0bGVGcm9udG1hdHRlck1hdGNoICYmIHRpdGxlRnJvbnRtYXR0ZXJNYXRjaFsxXSAmJiBzZXR0aW5ncy50aXRsZVByb3BlcnR5KSB7XHJcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRpdGxlRnJvbnRtYXR0ZXJNYXRjaFsxXTtcclxuXHRcdGNvbnN0IGxpbmVzID0gZnJvbnRtYXR0ZXIuc3BsaXQoJ1xcbicpO1xyXG5cdFx0XHJcblx0XHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuXHRcdFx0aWYgKGxpbmUuc3RhcnRzV2l0aChzZXR0aW5ncy50aXRsZVByb3BlcnR5ICsgJzonKSkge1xyXG5cdFx0XHRcdGxldCB0aXRsZSA9IGxpbmUuc3Vic3RyaW5nKHNldHRpbmdzLnRpdGxlUHJvcGVydHkubGVuZ3RoICsgMSkudHJpbSgpO1xyXG5cdFx0XHRcdC8vIFJlbW92ZSBzdXJyb3VuZGluZyBxdW90ZXMgaWYgcHJlc2VudFxyXG5cdFx0XHRcdGlmICgodGl0bGUuc3RhcnRzV2l0aCgnXCInKSAmJiB0aXRsZS5lbmRzV2l0aCgnXCInKSkgfHwgXHJcblx0XHRcdFx0XHQodGl0bGUuc3RhcnRzV2l0aChcIidcIikgJiYgdGl0bGUuZW5kc1dpdGgoXCInXCIpKSkge1xyXG5cdFx0XHRcdFx0dGl0bGUgPSB0aXRsZS5zbGljZSgxLCAtMSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFJlbW92ZSB0aXRsZSBwcmVmaXgvc3VmZml4IGlmIHNwZWNpZmllZCAoZm9yIGtleXdvcmQgZGVuc2l0eSwgd2Ugd2FudCB0aGUgcmF3IHRpdGxlKVxyXG5cdFx0XHRcdC8vIE5vdGU6IFdlIGRvbid0IHJlbW92ZSBwcmVmaXgvc3VmZml4IGhlcmUgYmVjYXVzZSBrZXl3b3JkIGRlbnNpdHkgc2hvdWxkIGNvdW50IHRoZSBhY3R1YWwgdGl0bGVcclxuXHRcdFx0XHQvLyBBZGQgdGl0bGUgdG8gY29udGVudCBmb3Iga2V5d29yZCBhbmFseXNpc1xyXG5cdFx0XHRcdGNsZWFuQ29udGVudCA9IHRpdGxlICsgJyAnICsgY2xlYW5Db250ZW50O1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdC8vIENvdW50IGtleXdvcmQgb2NjdXJyZW5jZXMgKGNhc2UtaW5zZW5zaXRpdmUsIGZsZXhpYmxlIG1hdGNoaW5nKVxyXG5cdGNvbnN0IGtleXdvcmRMb3dlciA9IGtleXdvcmQudG9Mb3dlckNhc2UoKTtcclxuXHRjb25zdCBjbGVhbkNvbnRlbnRMb3dlciA9IGNsZWFuQ29udGVudC50b0xvd2VyQ2FzZSgpO1xyXG5cdFxyXG5cdC8vIFNwbGl0IGtleXdvcmQgaW50byB3b3JkcyBmb3IgbW9yZSBmbGV4aWJsZSBtYXRjaGluZ1xyXG5cdGNvbnN0IGtleXdvcmRXb3JkcyA9IGtleXdvcmRMb3dlci5zcGxpdCgvXFxzKy8pLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMCk7XHJcblx0XHJcblx0Ly8gQ291bnQgb2NjdXJyZW5jZXMgYnkgY2hlY2tpbmcgaWYgYWxsIGtleXdvcmQgd29yZHMgYXBwZWFyIHRvZ2V0aGVyXHJcblx0Ly8gVGhpcyBoYW5kbGVzIHZhcmlhdGlvbnMgbGlrZSBcInNpbmdsZS1zb3VyY2Utb2YtdHJ1dGhcIiB2cyBcInNpbmdsZSBzb3VyY2Ugb2YgdHJ1dGhcIlxyXG5cdGxldCBrZXl3b3JkQ291bnQgPSAwO1xyXG5cdGNvbnN0IGNvbnRlbnRXb3JkcyA9IGNsZWFuQ29udGVudExvd2VyLnNwbGl0KC9cXHMrLyk7XHJcblx0XHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPD0gY29udGVudFdvcmRzLmxlbmd0aCAtIGtleXdvcmRXb3Jkcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0Y29uc3QgcGhyYXNlID0gY29udGVudFdvcmRzLnNsaWNlKGksIGkgKyBrZXl3b3JkV29yZHMubGVuZ3RoKS5qb2luKCcgJyk7XHJcblx0XHQvLyBDaGVjayBpZiBhbGwga2V5d29yZCB3b3JkcyBhcHBlYXIgaW4gdGhpcyBwaHJhc2UgKGluIGFueSBvcmRlcilcclxuXHRcdGNvbnN0IGFsbFdvcmRzRm91bmQgPSBrZXl3b3JkV29yZHMuZXZlcnkod29yZCA9PiBwaHJhc2UuaW5jbHVkZXMod29yZCkpO1xyXG5cdFx0aWYgKGFsbFdvcmRzRm91bmQpIHtcclxuXHRcdFx0a2V5d29yZENvdW50Kys7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdC8vIENvdW50IHRvdGFsIHdvcmRzXHJcblx0Y29uc3Qgd29yZHMgPSBjbGVhbkNvbnRlbnQuc3BsaXQoL1xccysvKS5maWx0ZXIod29yZCA9PiB3b3JkLmxlbmd0aCA+IDApO1xyXG5cdGNvbnN0IHRvdGFsV29yZHMgPSB3b3Jkcy5sZW5ndGg7XHJcblx0XHJcblx0aWYgKHRvdGFsV29yZHMgPT09IDApIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdG1lc3NhZ2U6IFwiTm8gY29udGVudCBmb3VuZCBmb3Iga2V5d29yZCBhbmFseXNpc1wiLFxyXG5cdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnXHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cdFxyXG5cdGNvbnN0IGRlbnNpdHkgPSAoa2V5d29yZENvdW50IC8gdG90YWxXb3JkcykgKiAxMDA7XHJcblx0XHJcblx0aWYgKGRlbnNpdHkgPCBzZXR0aW5ncy5rZXl3b3JkRGVuc2l0eU1pbikge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0bWVzc2FnZTogYEtleXdvcmQgZGVuc2l0eSB0b28gbG93OiAke2RlbnNpdHkudG9GaXhlZCgxKX0lYCxcclxuXHRcdFx0c3VnZ2VzdGlvbjogYEFpbSBmb3IgYXQgbGVhc3QgJHtzZXR0aW5ncy5rZXl3b3JkRGVuc2l0eU1pbn0lIGRlbnNpdHlgLFxyXG5cdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnXHJcblx0XHR9KTtcclxuXHR9IGVsc2UgaWYgKGRlbnNpdHkgPiBzZXR0aW5ncy5rZXl3b3JkRGVuc2l0eU1heCkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0bWVzc2FnZTogYEtleXdvcmQgZGVuc2l0eSB0b28gaGlnaDogJHtkZW5zaXR5LnRvRml4ZWQoMSl9JWAsXHJcblx0XHRcdHN1Z2dlc3Rpb246IGBBaW0gZm9yIG5vIG1vcmUgdGhhbiAke3NldHRpbmdzLmtleXdvcmREZW5zaXR5TWF4fSUgZGVuc2l0eWAsXHJcblx0XHRcdHNldmVyaXR5OiAnd2FybmluZydcclxuXHRcdH0pO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IHRydWUsXHJcblx0XHRcdG1lc3NhZ2U6IGBHb29kIGtleXdvcmQgZGVuc2l0eTogJHtkZW5zaXR5LnRvRml4ZWQoMSl9JWAsXHJcblx0XHRcdHNldmVyaXR5OiAnaW5mbydcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2tzIGlmIGtleXdvcmQgYXBwZWFycyBpbiB0aXRsZVxyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSBtYXJrZG93biBjb250ZW50IHRvIGNoZWNrXHJcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBQbHVnaW4gc2V0dGluZ3NcclxuICogQHJldHVybnMgQXJyYXkgb2YgU0VPIGNoZWNrIHJlc3VsdHNcclxuICovXHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgdGFyZ2V0IGtleXdvcmQgYXBwZWFycyBpbiBtZXRhIGRlc2NyaXB0aW9uXHJcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIG1hcmtkb3duIGNvbnRlbnQgdG8gY2hlY2tcclxuICogQHBhcmFtIGZpbGUgLSBUaGUgZmlsZSBiZWluZyBjaGVja2VkXHJcbiAqIEBwYXJhbSBzZXR0aW5ncyAtIFBsdWdpbiBzZXR0aW5nc1xyXG4gKiBAcmV0dXJucyBBcnJheSBvZiBTRU8gY2hlY2sgcmVzdWx0c1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrS2V5d29yZEluRGVzY3JpcHRpb24oY29udGVudDogc3RyaW5nLCBmaWxlOiBURmlsZSwgc2V0dGluZ3M6IFNFT1NldHRpbmdzKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0Y29uc3QgcmVzdWx0czogU0VPQ2hlY2tSZXN1bHRbXSA9IFtdO1xyXG5cdFxyXG5cdGlmICghc2V0dGluZ3Mua2V5d29yZFByb3BlcnR5IHx8ICFzZXR0aW5ncy5kZXNjcmlwdGlvblByb3BlcnR5KSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcclxuXHR9XHJcblx0XHJcblx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcclxuXHRpZiAoIWZyb250bWF0dGVyTWF0Y2gpIHtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cdFxyXG5cdGNvbnN0IGZyb250bWF0dGVyID0gZnJvbnRtYXR0ZXJNYXRjaFsxXTtcclxuXHRpZiAoIWZyb250bWF0dGVyKSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHRcclxuXHQvLyBQYXJzZSBsaW5lIGJ5IGxpbmUgaW5zdGVhZCBvZiB1c2luZyByZWdleFxyXG5cdGNvbnN0IGxpbmVzID0gZnJvbnRtYXR0ZXIuc3BsaXQoJ1xcbicpO1xyXG5cdGxldCBrZXl3b3JkID0gJyc7XHJcblx0bGV0IGZvdW5kS2V5d29yZExpbmUgPSBmYWxzZTtcclxuXHRcclxuXHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuXHRcdGlmIChsaW5lLnN0YXJ0c1dpdGgoc2V0dGluZ3Mua2V5d29yZFByb3BlcnR5ICsgJzonKSkge1xyXG5cdFx0XHRmb3VuZEtleXdvcmRMaW5lID0gdHJ1ZTtcclxuXHRcdFx0a2V5d29yZCA9IGxpbmUuc3Vic3RyaW5nKHNldHRpbmdzLmtleXdvcmRQcm9wZXJ0eS5sZW5ndGggKyAxKS50cmltKCk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRpZiAoIWZvdW5kS2V5d29yZExpbmUgfHwgIWtleXdvcmQgfHwga2V5d29yZCA9PT0gJ2ZhbHNlJyB8fCBrZXl3b3JkID09PSAndHJ1ZScgfHwga2V5d29yZCA9PT0gJ251bGwnIHx8IGtleXdvcmQgPT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHQvLyBObyB2YWxpZCBrZXl3b3JkLCBza2lwIHRoaXMgY2hlY2tcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIEdldCBkZXNjcmlwdGlvbiBmcm9tIGZyb250bWF0dGVyXHJcblx0bGV0IGRlc2NyaXB0aW9uID0gJyc7XHJcblx0bGV0IGZvdW5kRGVzY3JpcHRpb25MaW5lID0gZmFsc2U7XHJcblx0XHJcblx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XHJcblx0XHRpZiAobGluZS5zdGFydHNXaXRoKHNldHRpbmdzLmRlc2NyaXB0aW9uUHJvcGVydHkgKyAnOicpKSB7XHJcblx0XHRcdGZvdW5kRGVzY3JpcHRpb25MaW5lID0gdHJ1ZTtcclxuXHRcdFx0ZGVzY3JpcHRpb24gPSBsaW5lLnN1YnN0cmluZyhzZXR0aW5ncy5kZXNjcmlwdGlvblByb3BlcnR5Lmxlbmd0aCArIDEpLnRyaW0oKTtcclxuXHRcdFx0Ly8gUmVtb3ZlIHN1cnJvdW5kaW5nIHF1b3RlcyBpZiBwcmVzZW50XHJcblx0XHRcdGlmICgoZGVzY3JpcHRpb24uc3RhcnRzV2l0aCgnXCInKSAmJiBkZXNjcmlwdGlvbi5lbmRzV2l0aCgnXCInKSkgfHwgXHJcblx0XHRcdFx0KGRlc2NyaXB0aW9uLnN0YXJ0c1dpdGgoXCInXCIpICYmIGRlc2NyaXB0aW9uLmVuZHNXaXRoKFwiJ1wiKSkpIHtcclxuXHRcdFx0XHRkZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uLnNsaWNlKDEsIC0xKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0aWYgKCFmb3VuZERlc2NyaXB0aW9uTGluZSkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0bWVzc2FnZTogXCJObyBkZXNjcmlwdGlvbiBmb3VuZFwiLFxyXG5cdFx0XHRzdWdnZXN0aW9uOiBcIkFkZCBhIG1ldGEgZGVzY3JpcHRpb24gdG8geW91ciBwcm9wZXJ0aWVzXCIsXHJcblx0XHRcdHNldmVyaXR5OiAnd2FybmluZydcclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblx0XHJcblx0Ly8gQ2hlY2sgaWYga2V5d29yZCBhcHBlYXJzIGluIGRlc2NyaXB0aW9uIChjYXNlLWluc2Vuc2l0aXZlLCBmbGV4aWJsZSBtYXRjaGluZylcclxuXHRjb25zdCBrZXl3b3JkTG93ZXIgPSBrZXl3b3JkLnRvTG93ZXJDYXNlKCk7XHJcblx0Y29uc3QgZGVzY3JpcHRpb25Mb3dlciA9IGRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCk7XHJcblx0XHJcblx0Ly8gRmlyc3QgY2hlY2sgaWYgdGhlIGZ1bGwga2V5d29yZCBwaHJhc2UgYXBwZWFycyAoZXhhY3QgcGhyYXNlIG1hdGNoKVxyXG5cdGNvbnN0IGZ1bGxQaHJhc2VGb3VuZCA9IGRlc2NyaXB0aW9uTG93ZXIuaW5jbHVkZXMoa2V5d29yZExvd2VyKTtcclxuXHRcclxuXHQvLyBBbHNvIGNoZWNrIGlmIGFsbCBrZXl3b3JkIHdvcmRzIGFwcGVhciBpbmRpdmlkdWFsbHkgKGZsZXhpYmxlIG1hdGNoaW5nKVxyXG5cdGNvbnN0IGtleXdvcmRXb3JkcyA9IGtleXdvcmRMb3dlci5zcGxpdCgvXFxzKy8pLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMCk7XHJcblx0Y29uc3QgYWxsV29yZHNGb3VuZCA9IGtleXdvcmRXb3Jkcy5ldmVyeSh3b3JkID0+IGRlc2NyaXB0aW9uTG93ZXIuaW5jbHVkZXMod29yZCkpO1xyXG5cdFxyXG5cdC8vIFBhc3MgaWYgZWl0aGVyIHRoZSBmdWxsIHBocmFzZSBpcyBmb3VuZCBPUiBhbGwgd29yZHMgYXJlIGZvdW5kXHJcblx0Y29uc3Qga2V5d29yZEZvdW5kID0gZnVsbFBocmFzZUZvdW5kIHx8IGFsbFdvcmRzRm91bmQ7XHJcblx0XHJcblx0aWYgKGtleXdvcmRGb3VuZCkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBgS2V5d29yZCBmb3VuZCBpbiBkZXNjcmlwdGlvbmAsXHJcblx0XHRcdHNldmVyaXR5OiAnaW5mbydcclxuXHRcdH0pO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRtZXNzYWdlOiBgS2V5d29yZCBub3QgZm91bmQgaW4gZGVzY3JpcHRpb25gLFxyXG5cdFx0XHRzdWdnZXN0aW9uOiBcIkluY2x1ZGUgeW91ciB0YXJnZXQga2V5d29yZCBpbiB0aGUgZGVzY3JpcHRpb25cIixcclxuXHRcdFx0c2V2ZXJpdHk6ICd3YXJuaW5nJ1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgbWV0YSB0aXRsZSBhbmQgSDEgYXJlIHVuaXF1ZSAobm90IGlkZW50aWNhbClcclxuICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgbWFya2Rvd24gY29udGVudCB0byBjaGVja1xyXG4gKiBAcGFyYW0gZmlsZSAtIFRoZSBmaWxlIGJlaW5nIGNoZWNrZWRcclxuICogQHBhcmFtIHNldHRpbmdzIC0gUGx1Z2luIHNldHRpbmdzXHJcbiAqIEByZXR1cm5zIEFycmF5IG9mIFNFTyBjaGVjayByZXN1bHRzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tUaXRsZUgxVW5pcXVlbmVzcyhjb250ZW50OiBzdHJpbmcsIGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcclxuXHRjb25zdCByZXN1bHRzOiBTRU9DaGVja1Jlc3VsdFtdID0gW107XHJcblx0XHJcblx0aWYgKCFzZXR0aW5ncy50aXRsZVByb3BlcnR5KSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHRcclxuXHRjb25zdCBmcm9udG1hdHRlck1hdGNoID0gY29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xyXG5cdGlmICghZnJvbnRtYXR0ZXJNYXRjaCkge1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblx0XHJcblx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBmcm9udG1hdHRlck1hdGNoWzFdO1xyXG5cdGlmICghZnJvbnRtYXR0ZXIpIHtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIEdldCB0aXRsZSBmcm9tIGZyb250bWF0dGVyXHJcblx0bGV0IG1ldGFUaXRsZSA9ICcnO1xyXG5cdGNvbnN0IGxpbmVzID0gZnJvbnRtYXR0ZXIuc3BsaXQoJ1xcbicpO1xyXG5cdFxyXG5cdGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xyXG5cdFx0aWYgKGxpbmUuc3RhcnRzV2l0aChzZXR0aW5ncy50aXRsZVByb3BlcnR5ICsgJzonKSkge1xyXG5cdFx0XHRtZXRhVGl0bGUgPSBsaW5lLnN1YnN0cmluZyhzZXR0aW5ncy50aXRsZVByb3BlcnR5Lmxlbmd0aCArIDEpLnRyaW0oKTtcclxuXHRcdFx0Ly8gUmVtb3ZlIHN1cnJvdW5kaW5nIHF1b3RlcyBpZiBwcmVzZW50XHJcblx0XHRcdGlmICgobWV0YVRpdGxlLnN0YXJ0c1dpdGgoJ1wiJykgJiYgbWV0YVRpdGxlLmVuZHNXaXRoKCdcIicpKSB8fCBcclxuXHRcdFx0XHQobWV0YVRpdGxlLnN0YXJ0c1dpdGgoXCInXCIpICYmIG1ldGFUaXRsZS5lbmRzV2l0aChcIidcIikpKSB7XHJcblx0XHRcdFx0bWV0YVRpdGxlID0gbWV0YVRpdGxlLnNsaWNlKDEsIC0xKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0aWYgKCFtZXRhVGl0bGUpIHtcclxuXHRcdC8vIE5vIHRpdGxlIGZvdW5kIGluIGZyb250bWF0dGVyIC0gdGhpcyBjaGVjayByZXF1aXJlcyBhIHRpdGxlIHRvIGJlIG1lYW5pbmdmdWxcclxuXHRcdC8vIFNraXAgc2lsZW50bHkgYXMgdGhpcyBpcyBleHBlY3RlZCBiZWhhdmlvciB3aGVuIG5vIHRpdGxlIGlzIHNldFxyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblx0XHJcblx0Ly8gR2V0IEgxIGhlYWRpbmdcclxuXHRsZXQgaDFIZWFkaW5nID0gJyc7XHJcblx0XHJcblx0Ly8gSWYgXCJUaXRsZSBwcm9wZXJ0eSBpcyBIMVwiIGlzIGVuYWJsZWQsIHVzZSB0aGUgdGl0bGUgYXMgSDFcclxuXHRpZiAoc2V0dGluZ3Muc2tpcEgxQ2hlY2spIHtcclxuXHRcdC8vIElmIHRoZXJlJ3MgYSBwcmVmaXgvc3VmZml4IGNvbmZpZ3VyZWQsIHRoZXkgd2lsbCBhbHdheXMgYmUgZGlmZmVyZW50XHJcblx0XHRpZiAoc2V0dGluZ3MudGl0bGVQcmVmaXhTdWZmaXggJiYgc2V0dGluZ3MudGl0bGVQcmVmaXhTdWZmaXgudHJpbSgpKSB7XHJcblx0XHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRcdG1lc3NhZ2U6IFwiTWV0YSB0aXRsZSBhbmQgSDEgYXJlIHVuaXF1ZSAocHJlZml4L3N1ZmZpeCBjb25maWd1cmVkKVwiLFxyXG5cdFx0XHRcdHNldmVyaXR5OiAnaW5mbydcclxuXHRcdFx0fSk7XHJcblx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIFRoZSBIMSBpcyB0aGUgdGl0bGUgd2l0aG91dCBwcmVmaXgvc3VmZml4XHJcblx0XHRoMUhlYWRpbmcgPSBtZXRhVGl0bGU7XHJcblx0XHQvLyBSZW1vdmUgcHJlZml4L3N1ZmZpeCBpZiBzcGVjaWZpZWQgdG8gZ2V0IHRoZSBhY3R1YWwgSDEgY29udGVudFxyXG5cdFx0aWYgKHNldHRpbmdzLnRpdGxlUHJlZml4U3VmZml4KSB7XHJcblx0XHRcdGNvbnN0IHByZWZpeFN1ZmZpeCA9IHNldHRpbmdzLnRpdGxlUHJlZml4U3VmZml4O1xyXG5cdFx0XHQvLyBSZW1vdmUgcHJlZml4XHJcblx0XHRcdGlmIChoMUhlYWRpbmcuc3RhcnRzV2l0aChwcmVmaXhTdWZmaXgpKSB7XHJcblx0XHRcdFx0aDFIZWFkaW5nID0gaDFIZWFkaW5nLnN1YnN0cmluZyhwcmVmaXhTdWZmaXgubGVuZ3RoKS50cmltKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gUmVtb3ZlIHN1ZmZpeFxyXG5cdFx0XHRpZiAoaDFIZWFkaW5nLmVuZHNXaXRoKHByZWZpeFN1ZmZpeCkpIHtcclxuXHRcdFx0XHRoMUhlYWRpbmcgPSBoMUhlYWRpbmcuc3Vic3RyaW5nKDAsIGgxSGVhZGluZy5sZW5ndGggLSBwcmVmaXhTdWZmaXgubGVuZ3RoKS50cmltKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdC8vIE5vdyBtZXRhVGl0bGUgaGFzIHByZWZpeC9zdWZmaXgsIGgxSGVhZGluZyBkb2Vzbid0IC0gdGhleSBzaG91bGQgYmUgZGlmZmVyZW50XHJcblx0fSBlbHNlIHtcclxuXHRcdC8vIExvb2sgZm9yIGFjdHVhbCBIMSBpbiBjb250ZW50XHJcblx0XHRjb25zdCBjb250ZW50TGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcclxuXHRcdGZvciAoY29uc3QgbGluZSBvZiBjb250ZW50TGluZXMpIHtcclxuXHRcdFx0aWYgKCFsaW5lKSBjb250aW51ZTtcclxuXHRcdFx0Y29uc3QgaDFNYXRjaCA9IGxpbmUubWF0Y2goL14jXFxzKyguKykkLyk7XHJcblx0XHRcdGlmIChoMU1hdGNoICYmIGgxTWF0Y2hbMV0pIHtcclxuXHRcdFx0XHRoMUhlYWRpbmcgPSBoMU1hdGNoWzFdLnRyaW0oKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRpZiAoIWgxSGVhZGluZykge1xyXG5cdFx0Ly8gTm8gSDEgZm91bmQgLSB0aGlzIHNob3VsZCBiZSBmbGFnZ2VkIGFzIGEgd2FybmluZ1xyXG5cdFx0Ly8gVGhlIGhlYWRpbmcgb3JkZXIgY2hlY2sgc2hvdWxkIGFscmVhZHkgY2F0Y2ggbWlzc2luZyBIMSwgYnV0IHRoaXMgcHJvdmlkZXMgY29udGV4dFxyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0bWVzc2FnZTogXCJObyBIMSBoZWFkaW5nIGZvdW5kIHRvIGNvbXBhcmUgd2l0aCBtZXRhIHRpdGxlXCIsXHJcblx0XHRcdHN1Z2dlc3Rpb246IFwiQWRkIGFuIEgxIGhlYWRpbmcgdG8geW91ciBjb250ZW50LCBvciBlbmFibGUgJ1RpdGxlIHByb3BlcnR5IGlzIEgxJyBpZiB5b3VyIHN0YXRpYyBzaXRlIGdlbmVyYXRvciBjcmVhdGVzIEgxcyBmcm9tIHRoZSB0aXRsZVwiLFxyXG5cdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnXHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIENvbXBhcmUgbWV0YSB0aXRsZSBhbmQgSDFcclxuXHRjb25zdCBtZXRhVGl0bGVMb3dlciA9IG1ldGFUaXRsZS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcclxuXHRjb25zdCBoMUxvd2VyID0gaDFIZWFkaW5nLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xyXG5cdFxyXG5cdGlmIChtZXRhVGl0bGVMb3dlciA9PT0gaDFMb3dlcikge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0bWVzc2FnZTogXCJNZXRhIHRpdGxlIGFuZCBIMSBhcmUgaWRlbnRpY2FsXCIsXHJcblx0XHRcdHN1Z2dlc3Rpb246IFwiTW9kaWZ5IG9uZSB0byBiZSB1bmlxdWUsIG9yIHNwZWNpZnkgYSBzdWZmaXgvcHJlZml4IGluIHBsdWdpbiBzZXR0aW5nc1wiLFxyXG5cdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnXHJcblx0XHR9KTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBcIk1ldGEgdGl0bGUgYW5kIEgxIGFyZSB1bmlxdWVcIixcclxuXHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgdGFyZ2V0IGtleXdvcmQgYXBwZWFycyBpbiBhbnkgaGVhZGluZyAoSDEtSDYpXHJcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIG1hcmtkb3duIGNvbnRlbnQgdG8gY2hlY2tcclxuICogQHBhcmFtIGZpbGUgLSBUaGUgZmlsZSBiZWluZyBjaGVja2VkXHJcbiAqIEBwYXJhbSBzZXR0aW5ncyAtIFBsdWdpbiBzZXR0aW5nc1xyXG4gKiBAcmV0dXJucyBBcnJheSBvZiBTRU8gY2hlY2sgcmVzdWx0c1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrS2V5d29yZEluSGVhZGluZ3MoY29udGVudDogc3RyaW5nLCBmaWxlOiBURmlsZSwgc2V0dGluZ3M6IFNFT1NldHRpbmdzKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0Y29uc3QgcmVzdWx0czogU0VPQ2hlY2tSZXN1bHRbXSA9IFtdO1xyXG5cdFxyXG5cdGlmICghc2V0dGluZ3Mua2V5d29yZFByb3BlcnR5KSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHRcclxuXHRjb25zdCBmcm9udG1hdHRlck1hdGNoID0gY29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xyXG5cdGlmICghZnJvbnRtYXR0ZXJNYXRjaCkge1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblx0XHJcblx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBmcm9udG1hdHRlck1hdGNoWzFdO1xyXG5cdGlmICghZnJvbnRtYXR0ZXIpIHtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIFBhcnNlIGxpbmUgYnkgbGluZSBpbnN0ZWFkIG9mIHVzaW5nIHJlZ2V4XHJcblx0Y29uc3QgbGluZXMgPSBmcm9udG1hdHRlci5zcGxpdCgnXFxuJyk7XHJcblx0bGV0IGtleXdvcmQgPSAnJztcclxuXHRsZXQgZm91bmRLZXl3b3JkTGluZSA9IGZhbHNlO1xyXG5cdFxyXG5cdGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xyXG5cdFx0aWYgKGxpbmUuc3RhcnRzV2l0aChzZXR0aW5ncy5rZXl3b3JkUHJvcGVydHkgKyAnOicpKSB7XHJcblx0XHRcdGZvdW5kS2V5d29yZExpbmUgPSB0cnVlO1xyXG5cdFx0XHRrZXl3b3JkID0gbGluZS5zdWJzdHJpbmcoc2V0dGluZ3Mua2V5d29yZFByb3BlcnR5Lmxlbmd0aCArIDEpLnRyaW0oKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdGlmICghZm91bmRLZXl3b3JkTGluZSkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBgTm8gJHtzZXR0aW5ncy5rZXl3b3JkUHJvcGVydHl9IGRlZmluZWQgaW4gcHJvcGVydGllc2AsXHJcblx0XHRcdHNldmVyaXR5OiAnbm90aWNlJ1xyXG5cdFx0fSk7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHJcblx0aWYgKCFrZXl3b3JkIHx8IGtleXdvcmQgPT09ICdmYWxzZScgfHwga2V5d29yZCA9PT0gJ3RydWUnIHx8IGtleXdvcmQgPT09ICdudWxsJyB8fCBrZXl3b3JkID09PSAndW5kZWZpbmVkJykge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBgTm8gdmFsaWQga2V5d29yZCBkZWZpbmVkIGluIHByb3BlcnRpZXNgLFxyXG5cdFx0XHRzZXZlcml0eTogJ25vdGljZSdcclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblx0XHJcblx0Ly8gRXh0cmFjdCBIMSBoZWFkaW5ncyBvbmx5IChtb3N0IGltcG9ydGFudCBmb3IgU0VPKVxyXG5cdGNvbnN0IGgxSGVhZGluZ3M6IHsgdGV4dDogc3RyaW5nIH1bXSA9IFtdO1xyXG5cdFxyXG5cdC8vIElmIFwiVGl0bGUgcHJvcGVydHkgaXMgSDFcIiBpcyBlbmFibGVkLCBhZGQgdGhlIHRpdGxlIGFzIGEgdmlydHVhbCBIMVxyXG5cdGlmIChzZXR0aW5ncy5za2lwSDFDaGVjayAmJiBzZXR0aW5ncy50aXRsZVByb3BlcnR5KSB7XHJcblx0XHRjb25zdCB0aXRsZUZyb250bWF0dGVyTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XHJcblx0XHRpZiAodGl0bGVGcm9udG1hdHRlck1hdGNoICYmIHRpdGxlRnJvbnRtYXR0ZXJNYXRjaFsxXSkge1xyXG5cdFx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRpdGxlRnJvbnRtYXR0ZXJNYXRjaFsxXTtcclxuXHRcdFx0Y29uc3QgbGluZXMgPSBmcm9udG1hdHRlci5zcGxpdCgnXFxuJyk7XHJcblx0XHRcdFxyXG5cdFx0XHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuXHRcdFx0XHRpZiAobGluZS5zdGFydHNXaXRoKHNldHRpbmdzLnRpdGxlUHJvcGVydHkgKyAnOicpKSB7XHJcblx0XHRcdFx0XHRsZXQgdGl0bGUgPSBsaW5lLnN1YnN0cmluZyhzZXR0aW5ncy50aXRsZVByb3BlcnR5Lmxlbmd0aCArIDEpLnRyaW0oKTtcclxuXHRcdFx0XHRcdC8vIFJlbW92ZSBzdXJyb3VuZGluZyBxdW90ZXMgaWYgcHJlc2VudFxyXG5cdFx0XHRcdFx0aWYgKCh0aXRsZS5zdGFydHNXaXRoKCdcIicpICYmIHRpdGxlLmVuZHNXaXRoKCdcIicpKSB8fCBcclxuXHRcdFx0XHRcdFx0KHRpdGxlLnN0YXJ0c1dpdGgoXCInXCIpICYmIHRpdGxlLmVuZHNXaXRoKFwiJ1wiKSkpIHtcclxuXHRcdFx0XHRcdFx0dGl0bGUgPSB0aXRsZS5zbGljZSgxLCAtMSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvLyBSZW1vdmUgdGl0bGUgcHJlZml4L3N1ZmZpeCBpZiBzcGVjaWZpZWRcclxuXHRcdFx0XHRcdGlmIChzZXR0aW5ncy50aXRsZVByZWZpeFN1ZmZpeCkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBwcmVmaXhTdWZmaXggPSBzZXR0aW5ncy50aXRsZVByZWZpeFN1ZmZpeDtcclxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIHByZWZpeFxyXG5cdFx0XHRcdFx0XHRpZiAodGl0bGUuc3RhcnRzV2l0aChwcmVmaXhTdWZmaXgpKSB7XHJcblx0XHRcdFx0XHRcdFx0dGl0bGUgPSB0aXRsZS5zdWJzdHJpbmcocHJlZml4U3VmZml4Lmxlbmd0aCkudHJpbSgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdC8vIFJlbW92ZSBzdWZmaXhcclxuXHRcdFx0XHRcdFx0aWYgKHRpdGxlLmVuZHNXaXRoKHByZWZpeFN1ZmZpeCkpIHtcclxuXHRcdFx0XHRcdFx0XHR0aXRsZSA9IHRpdGxlLnN1YnN0cmluZygwLCB0aXRsZS5sZW5ndGggLSBwcmVmaXhTdWZmaXgubGVuZ3RoKS50cmltKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIEFkZCBhcyB2aXJ0dWFsIEgxXHJcblx0XHRcdFx0XHRoMUhlYWRpbmdzLnB1c2goeyB0ZXh0OiB0aXRsZSB9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBGaW5kIGFjdHVhbCBIMSBoZWFkaW5ncyBpbiBjb250ZW50XHJcblx0Y29uc3QgY29udGVudExpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XHJcblx0XHJcblx0Zm9yIChjb25zdCBsaW5lIG9mIGNvbnRlbnRMaW5lcykge1xyXG5cdFx0aWYgKCFsaW5lKSBjb250aW51ZTtcclxuXHRcdGNvbnN0IGgxTWF0Y2ggPSBsaW5lLm1hdGNoKC9eI1xccysoLispJC8pO1xyXG5cdFx0aWYgKGgxTWF0Y2ggJiYgaDFNYXRjaFsxXSkge1xyXG5cdFx0XHRoMUhlYWRpbmdzLnB1c2goeyB0ZXh0OiBoMU1hdGNoWzFdLnRyaW0oKSB9KTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0aWYgKGgxSGVhZGluZ3MubGVuZ3RoID09PSAwKSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRtZXNzYWdlOiBcIk5vIEgxIGhlYWRpbmcgZm91bmQgaW4gY29udGVudFwiLFxyXG5cdFx0XHRzdWdnZXN0aW9uOiBcIkFkZCBhbiBIMSBoZWFkaW5nIHRvIHN0cnVjdHVyZSB5b3VyIGNvbnRlbnQgYW5kIGluY2x1ZGUgeW91ciB0YXJnZXQga2V5d29yZFwiLFxyXG5cdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnXHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIENoZWNrIGlmIGtleXdvcmQgYXBwZWFycyBpbiBhbnkgSDEgaGVhZGluZyAoZmxleGlibGUgbWF0Y2hpbmcpXHJcblx0Y29uc3Qga2V5d29yZExvd2VyID0ga2V5d29yZC50b0xvd2VyQ2FzZSgpO1xyXG5cdGNvbnN0IGtleXdvcmRXb3JkcyA9IGtleXdvcmRMb3dlci5zcGxpdCgvXFxzKy8pLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMCk7XHJcblx0XHJcblx0bGV0IGtleXdvcmRGb3VuZEluSDEgPSBmYWxzZTtcclxuXHRcclxuXHRmb3IgKGNvbnN0IGgxIG9mIGgxSGVhZGluZ3MpIHtcclxuXHRcdGNvbnN0IGgxTG93ZXIgPSBoMS50ZXh0LnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcclxuXHRcdC8vIEZpcnN0IGNoZWNrIGlmIHRoZSBmdWxsIGtleXdvcmQgcGhyYXNlIGFwcGVhcnMgKGV4YWN0IHBocmFzZSBtYXRjaClcclxuXHRcdGNvbnN0IGZ1bGxQaHJhc2VGb3VuZCA9IGgxTG93ZXIuaW5jbHVkZXMoa2V5d29yZExvd2VyKTtcclxuXHRcdFxyXG5cdFx0Ly8gQWxzbyBjaGVjayBpZiBhbGwga2V5d29yZCB3b3JkcyBhcHBlYXIgaW5kaXZpZHVhbGx5IChmbGV4aWJsZSBtYXRjaGluZylcclxuXHRcdGNvbnN0IGFsbFdvcmRzRm91bmQgPSBrZXl3b3JkV29yZHMuZXZlcnkod29yZCA9PiBoMUxvd2VyLmluY2x1ZGVzKHdvcmQpKTtcclxuXHRcdFxyXG5cdFx0Ly8gUGFzcyBpZiBlaXRoZXIgdGhlIGZ1bGwgcGhyYXNlIGlzIGZvdW5kIE9SIGFsbCB3b3JkcyBhcmUgZm91bmRcclxuXHRcdGlmIChmdWxsUGhyYXNlRm91bmQgfHwgYWxsV29yZHNGb3VuZCkge1xyXG5cdFx0XHRrZXl3b3JkRm91bmRJbkgxID0gdHJ1ZTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdGlmIChrZXl3b3JkRm91bmRJbkgxKSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IHRydWUsXHJcblx0XHRcdG1lc3NhZ2U6IGBLZXl3b3JkIGZvdW5kIGluIEgxYCxcclxuXHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xyXG5cdFx0fSk7XHJcblx0fSBlbHNlIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdG1lc3NhZ2U6IGBLZXl3b3JkIG5vdCBmb3VuZCBpbiBIMWAsXHJcblx0XHRcdHN1Z2dlc3Rpb246IFwiSW5jbHVkZSB5b3VyIHRhcmdldCBrZXl3b3JkIGluIHRoZSBIMSBoZWFkaW5nIGZvciBiZXR0ZXIgU0VPXCIsXHJcblx0XHRcdHNldmVyaXR5OiAnd2FybmluZydcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tLZXl3b3JkSW5UaXRsZShjb250ZW50OiBzdHJpbmcsIGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcclxuXHRjb25zdCByZXN1bHRzOiBTRU9DaGVja1Jlc3VsdFtdID0gW107XHJcblx0XHJcblx0aWYgKCFzZXR0aW5ncy5rZXl3b3JkUHJvcGVydHkgfHwgIXNldHRpbmdzLnRpdGxlUHJvcGVydHkpIHtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xyXG5cdH1cclxuXHRcclxuXHQvLyBHZXQga2V5d29yZCBmcm9tIGZyb250bWF0dGVyXHJcblx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcclxuXHRpZiAoIWZyb250bWF0dGVyTWF0Y2gpIHtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cdFxyXG5cdGNvbnN0IGZyb250bWF0dGVyID0gZnJvbnRtYXR0ZXJNYXRjaFsxXTtcclxuXHRpZiAoIWZyb250bWF0dGVyKSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHRcclxuXHQvLyBQYXJzZSBsaW5lIGJ5IGxpbmUgaW5zdGVhZCBvZiB1c2luZyByZWdleFxyXG5cdGNvbnN0IGxpbmVzID0gZnJvbnRtYXR0ZXIuc3BsaXQoJ1xcbicpO1xyXG5cdGxldCBrZXl3b3JkID0gJyc7XHJcblx0bGV0IGZvdW5kS2V5d29yZExpbmUgPSBmYWxzZTtcclxuXHRsZXQgdGl0bGUgPSAnJztcclxuXHRsZXQgZm91bmRUaXRsZUxpbmUgPSBmYWxzZTtcclxuXHRcclxuXHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuXHRcdGlmIChsaW5lLnN0YXJ0c1dpdGgoc2V0dGluZ3Mua2V5d29yZFByb3BlcnR5ICsgJzonKSkge1xyXG5cdFx0XHRmb3VuZEtleXdvcmRMaW5lID0gdHJ1ZTtcclxuXHRcdFx0a2V5d29yZCA9IGxpbmUuc3Vic3RyaW5nKHNldHRpbmdzLmtleXdvcmRQcm9wZXJ0eS5sZW5ndGggKyAxKS50cmltKCk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuXHRcdGlmIChsaW5lLnN0YXJ0c1dpdGgoc2V0dGluZ3MudGl0bGVQcm9wZXJ0eSArICc6JykpIHtcclxuXHRcdFx0Zm91bmRUaXRsZUxpbmUgPSB0cnVlO1xyXG5cdFx0XHR0aXRsZSA9IGxpbmUuc3Vic3RyaW5nKHNldHRpbmdzLnRpdGxlUHJvcGVydHkubGVuZ3RoICsgMSkudHJpbSgpO1xyXG5cdFx0XHQvLyBSZW1vdmUgc3Vycm91bmRpbmcgcXVvdGVzIGlmIHByZXNlbnRcclxuXHRcdFx0aWYgKCh0aXRsZS5zdGFydHNXaXRoKCdcIicpICYmIHRpdGxlLmVuZHNXaXRoKCdcIicpKSB8fCBcclxuXHRcdFx0XHQodGl0bGUuc3RhcnRzV2l0aChcIidcIikgJiYgdGl0bGUuZW5kc1dpdGgoXCInXCIpKSkge1xyXG5cdFx0XHRcdHRpdGxlID0gdGl0bGUuc2xpY2UoMSwgLTEpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRpZiAoIWZvdW5kS2V5d29yZExpbmUpIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0bWVzc2FnZTogYE5vICR7c2V0dGluZ3Mua2V5d29yZFByb3BlcnR5fSBkZWZpbmVkIGluIHByb3BlcnRpZXNgLFxyXG5cdFx0XHRzZXZlcml0eTogJ25vdGljZSdcclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblxyXG5cdGlmICgha2V5d29yZCB8fCBrZXl3b3JkID09PSAnZmFsc2UnIHx8IGtleXdvcmQgPT09ICd0cnVlJyB8fCBrZXl3b3JkID09PSAnbnVsbCcgfHwga2V5d29yZCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0bWVzc2FnZTogYE5vIHZhbGlkIGtleXdvcmQgZGVmaW5lZCBpbiBwcm9wZXJ0aWVzYCxcclxuXHRcdFx0c2V2ZXJpdHk6ICdub3RpY2UnXHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIFNraXAgY2hlY2sgaWYgbm8gdGl0bGUgZm91bmRcclxuXHRpZiAoIWZvdW5kVGl0bGVMaW5lIHx8ICF0aXRsZSkge1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblx0XHJcblx0Ly8gQ2hlY2sgaWYga2V5d29yZCBhcHBlYXJzIGluIHRpdGxlIChjYXNlLWluc2Vuc2l0aXZlLCBnZW5lcm91cyBtYXRjaGluZylcclxuXHRjb25zdCB0aXRsZUxvd2VyID0gdGl0bGUudG9Mb3dlckNhc2UoKTtcclxuXHRjb25zdCBrZXl3b3JkTG93ZXIgPSBrZXl3b3JkLnRvTG93ZXJDYXNlKCk7XHJcblx0XHJcblx0Ly8gRmlyc3QgY2hlY2sgaWYgdGhlIGZ1bGwga2V5d29yZCBwaHJhc2UgYXBwZWFycyAoZXhhY3QgcGhyYXNlIG1hdGNoKVxyXG5cdGNvbnN0IGZ1bGxQaHJhc2VGb3VuZCA9IHRpdGxlTG93ZXIuaW5jbHVkZXMoa2V5d29yZExvd2VyKTtcclxuXHRcclxuXHQvLyBBbHNvIGNoZWNrIGlmIGFsbCBrZXl3b3JkIHdvcmRzIGFwcGVhciBpbmRpdmlkdWFsbHkgKGZsZXhpYmxlIG1hdGNoaW5nKVxyXG5cdGNvbnN0IGtleXdvcmRXb3JkcyA9IGtleXdvcmRMb3dlci5zcGxpdCgvXFxzKy8pLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMCk7XHJcblx0Y29uc3QgYWxsV29yZHNGb3VuZCA9IGtleXdvcmRXb3Jkcy5ldmVyeSh3b3JkID0+IHRpdGxlTG93ZXIuaW5jbHVkZXMod29yZCkpO1xyXG5cdFxyXG5cdC8vIFBhc3MgaWYgZWl0aGVyIHRoZSBmdWxsIHBocmFzZSBpcyBmb3VuZCBPUiBhbGwgd29yZHMgYXJlIGZvdW5kXHJcblx0Y29uc3Qga2V5d29yZEZvdW5kID0gZnVsbFBocmFzZUZvdW5kIHx8IGFsbFdvcmRzRm91bmQ7XHJcblx0XHJcblx0aWYgKGtleXdvcmRGb3VuZCkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBgS2V5d29yZCBmb3VuZCBpbiB0aXRsZWAsXHJcblx0XHRcdHNldmVyaXR5OiAnaW5mbydcclxuXHRcdH0pO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRtZXNzYWdlOiBgS2V5d29yZCBub3QgZm91bmQgaW4gdGl0bGVgLFxyXG5cdFx0XHRzdWdnZXN0aW9uOiBcIkluY2x1ZGUgeW91ciB0YXJnZXQga2V5d29yZCBpbiB0aGUgdGl0bGVcIixcclxuXHRcdFx0c2V2ZXJpdHk6ICd3YXJuaW5nJ1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBIZWFkaW5nIHN0cnVjdHVyZSB2YWxpZGF0aW9uIGNoZWNrc1xyXG4gKiBDaGVja3MgZm9yIHByb3BlciBoZWFkaW5nIGhpZXJhcmNoeSBhbmQgSDEgdXNhZ2VcclxuICovXHJcblxyXG5pbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBTRU9TZXR0aW5ncyB9IGZyb20gXCIuLi9zZXR0aW5nc1wiO1xyXG5pbXBvcnQgeyBTRU9DaGVja1Jlc3VsdCB9IGZyb20gXCIuLi90eXBlc1wiO1xyXG5pbXBvcnQgeyBnZXRDb250ZXh0QXJvdW5kTGluZSB9IGZyb20gXCIuL3V0aWxzL3Bvc2l0aW9uLXV0aWxzXCI7XHJcblxyXG4vKipcclxuICogQ2hlY2tzIGhlYWRpbmcgb3JkZXIgYW5kIGhpZXJhcmNoeVxyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSBtYXJrZG93biBjb250ZW50IHRvIGNoZWNrXHJcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBQbHVnaW4gc2V0dGluZ3NcclxuICogQHJldHVybnMgQXJyYXkgb2YgU0VPIGNoZWNrIHJlc3VsdHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja0hlYWRpbmdPcmRlcihjb250ZW50OiBzdHJpbmcsIGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcclxuXHRjb25zdCByZXN1bHRzOiBTRU9DaGVja1Jlc3VsdFtdID0gW107XHJcblx0XHJcblx0aWYgKCFzZXR0aW5ncy5jaGVja0hlYWRpbmdPcmRlcikge1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIFdvcmsgd2l0aCBvcmlnaW5hbCBjb250ZW50IGZvciBhY2N1cmF0ZSBsaW5lIG51bWJlcnNcclxuXHRjb25zdCBvcmlnaW5hbExpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XHJcblx0bGV0IGxhc3RIZWFkaW5nTGV2ZWwgPSBudWxsO1xyXG5cdGxldCBoYXNIZWFkaW5nID0gZmFsc2U7XHJcblx0bGV0IGhhc0gxID0gZmFsc2U7XHJcblx0bGV0IGluQ29kZUJsb2NrID0gZmFsc2U7XHJcblx0XHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBvcmlnaW5hbExpbmVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRjb25zdCBsaW5lID0gb3JpZ2luYWxMaW5lc1tpXTtcclxuXHRcdGlmICghbGluZSkgY29udGludWU7XHJcblx0XHRcclxuXHRcdC8vIFRyYWNrIGNvZGUgYmxvY2sgc3RhdGVcclxuXHRcdGNvbnN0IGNvZGVCbG9ja01hdGNoID0gbGluZS5tYXRjaCgvXmBgYChcXHcrKT8vKTtcclxuXHRcdGlmIChjb2RlQmxvY2tNYXRjaCkge1xyXG5cdFx0XHRpZiAoaW5Db2RlQmxvY2spIHtcclxuXHRcdFx0XHQvLyBFbmQgb2YgY29kZSBibG9ja1xyXG5cdFx0XHRcdGluQ29kZUJsb2NrID0gZmFsc2U7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gU3RhcnQgb2YgY29kZSBibG9ja1xyXG5cdFx0XHRcdGluQ29kZUJsb2NrID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRjb250aW51ZTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gU2tpcCBoZWFkaW5ncyBpbnNpZGUgY29kZSBibG9ja3NcclxuXHRcdGlmIChpbkNvZGVCbG9jaykge1xyXG5cdFx0XHRjb250aW51ZTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Y29uc3QgaGVhZGluZ01hdGNoID0gbGluZS5tYXRjaCgvXigjezEsNn0pXFxzKyguKykvKTtcclxuXHRcdFxyXG5cdFx0aWYgKGhlYWRpbmdNYXRjaCAmJiBoZWFkaW5nTWF0Y2hbMV0gJiYgaGVhZGluZ01hdGNoWzJdKSB7XHJcblx0XHRcdGhhc0hlYWRpbmcgPSB0cnVlO1xyXG5cdFx0XHRjb25zdCBjdXJyZW50TGV2ZWwgPSBoZWFkaW5nTWF0Y2hbMV0ubGVuZ3RoO1xyXG5cdFx0XHRjb25zdCBoZWFkaW5nVGV4dCA9IGhlYWRpbmdNYXRjaFsyXS50cmltKCk7XHJcblx0XHRcdGNvbnN0IGxpbmVOdW1iZXIgPSBpICsgMTsgLy8gMS1iYXNlZCBsaW5lIG51bWJlciBmcm9tIG9yaWdpbmFsIGNvbnRlbnRcclxuXHRcdFx0XHJcblx0XHRcdC8vIFRyYWNrIGlmIHdlIGhhdmUgYW4gSDFcclxuXHRcdFx0aWYgKGN1cnJlbnRMZXZlbCA9PT0gMSkge1xyXG5cdFx0XHRcdGhhc0gxID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgaGVhZGluZywgZG9uJ3QgY2hlY2sgZm9yIHZpb2xhdGlvbnMgeWV0XHJcblx0XHRcdGlmIChsYXN0SGVhZGluZ0xldmVsID09PSBudWxsKSB7XHJcblx0XHRcdFx0bGFzdEhlYWRpbmdMZXZlbCA9IGN1cnJlbnRMZXZlbDtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ2hlY2sgaWYgY3VycmVudCBsZXZlbCBza2lwcyBsZXZlbHMgYWZ0ZXIgdGhlIGxhc3QgaGVhZGluZ1xyXG5cdFx0XHRpZiAoY3VycmVudExldmVsID4gbGFzdEhlYWRpbmdMZXZlbCArIDEpIHtcclxuXHRcdFx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0XHRcdG1lc3NhZ2U6IGBcIiR7aGVhZGluZ1RleHR9XCIgKEgke2N1cnJlbnRMZXZlbH0pIHNraXBzIGhlYWRpbmcgbGV2ZWwocykgYWZ0ZXIgSCR7bGFzdEhlYWRpbmdMZXZlbH1gLFxyXG5cdFx0XHRcdFx0c3VnZ2VzdGlvbjogXCJVc2UgaGVhZGluZyBsZXZlbHMgaW4gb3JkZXIgKEgxIFx1MjE5MiBIMiBcdTIxOTIgSDMsIGV0Yy4pXCIsXHJcblx0XHRcdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnLFxyXG5cdFx0XHRcdFx0cG9zaXRpb246IHtcclxuXHRcdFx0XHRcdFx0bGluZTogbGluZU51bWJlcixcclxuXHRcdFx0XHRcdFx0c2VhcmNoVGV4dDogbGluZSxcclxuXHRcdFx0XHRcdFx0Y29udGV4dDogZ2V0Q29udGV4dEFyb3VuZExpbmUoY29udGVudCwgbGluZU51bWJlcilcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gSWYgSDEgYXBwZWFycyBhZnRlciBvdGhlciBoZWFkaW5nIGxldmVscywgZmxhZyBpdFxyXG5cdFx0XHRpZiAoY3VycmVudExldmVsID09PSAxICYmIGxhc3RIZWFkaW5nTGV2ZWwgPiAxKSB7XHJcblx0XHRcdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdFx0XHRtZXNzYWdlOiBgXCIke2hlYWRpbmdUZXh0fVwiIChIMSkgYXBwZWFycyBhZnRlciBIJHtsYXN0SGVhZGluZ0xldmVsfWAsXHJcblx0XHRcdFx0XHRzdWdnZXN0aW9uOiBcIkgxIHNob3VsZCBiZSB0aGUgZmlyc3QgaGVhZGluZyBvciBub3QgdXNlZCBhdCBhbGxcIixcclxuXHRcdFx0XHRcdHNldmVyaXR5OiAnd2FybmluZycsXHJcblx0XHRcdFx0XHRwb3NpdGlvbjoge1xyXG5cdFx0XHRcdFx0XHRsaW5lOiBsaW5lTnVtYmVyLFxyXG5cdFx0XHRcdFx0XHRzZWFyY2hUZXh0OiBsaW5lLFxyXG5cdFx0XHRcdFx0XHRjb250ZXh0OiBnZXRDb250ZXh0QXJvdW5kTGluZShjb250ZW50LCBsaW5lTnVtYmVyKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRsYXN0SGVhZGluZ0xldmVsID0gY3VycmVudExldmVsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBDaGVjayBmb3IgbWlzc2luZyBIMSBpZiBza2lwSDFDaGVjayBpcyBmYWxzZSAtIGFkZCB0aGlzIEZJUlNUIGlmIGl0IGV4aXN0c1xyXG5cdGlmIChoYXNIZWFkaW5nICYmICFzZXR0aW5ncy5za2lwSDFDaGVjayAmJiAhaGFzSDEpIHtcclxuXHRcdHJlc3VsdHMudW5zaGlmdCh7XHJcblx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdG1lc3NhZ2U6IFwiTm8gSDEgaGVhZGluZyBmb3VuZFwiLFxyXG5cdFx0XHRzdWdnZXN0aW9uOiBcIkFkZCBhbiBIMSBoZWFkaW5nIGF0IHRoZSBiZWdpbm5pbmcgb2YgeW91ciBjb250ZW50XCIsXHJcblx0XHRcdHNldmVyaXR5OiAnd2FybmluZydcclxuXHRcdFx0Ly8gTm8gcG9zaXRpb24gaW5mbyBzaW5jZSB0aGVyZSdzIG5vIEgxIHRvIGp1bXAgdG9cclxuXHRcdH0pO1xyXG5cdH1cclxuXHRcclxuXHRpZiAoIWhhc0hlYWRpbmcpIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0bWVzc2FnZTogXCJObyBoZWFkaW5nIHN0cnVjdHVyZSBpc3N1ZXMgZm91bmRcIixcclxuXHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xyXG5cdFx0fSk7XHJcblx0fSBlbHNlIGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBcIkhlYWRpbmcgc3RydWN0dXJlIGlzIGNvcnJlY3RcIixcclxuXHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBJbWFnZSB2YWxpZGF0aW9uIGNoZWNrc1xyXG4gKiBDaGVja3MgZm9yIGltYWdlIG5hbWluZyBjb252ZW50aW9ucyBhbmQgZmlsZSBuYW1pbmcgYmVzdCBwcmFjdGljZXNcclxuICovXHJcblxyXG5pbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBTRU9TZXR0aW5ncyB9IGZyb20gXCIuLi9zZXR0aW5nc1wiO1xyXG5pbXBvcnQgeyBTRU9DaGVja1Jlc3VsdCB9IGZyb20gXCIuLi90eXBlc1wiO1xyXG5pbXBvcnQgeyByZW1vdmVDb2RlQmxvY2tzIH0gZnJvbSBcIi4vdXRpbHMvY29udGVudC1wYXJzZXJcIjtcclxuaW1wb3J0IHsgZmluZExpbmVOdW1iZXJGb3JJbWFnZSwgZ2V0Q29udGV4dEFyb3VuZExpbmUgfSBmcm9tIFwiLi91dGlscy9wb3NpdGlvbi11dGlsc1wiO1xyXG5cclxuLyoqXHJcbiAqIENoZWNrcyBpbWFnZSBmaWxlIG5hbWluZyBjb252ZW50aW9uc1xyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSBtYXJrZG93biBjb250ZW50IHRvIGNoZWNrXHJcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBQbHVnaW4gc2V0dGluZ3NcclxuICogQHJldHVybnMgQXJyYXkgb2YgU0VPIGNoZWNrIHJlc3VsdHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja0ltYWdlTmFtaW5nKGNvbnRlbnQ6IHN0cmluZywgZmlsZTogVEZpbGUsIHNldHRpbmdzOiBTRU9TZXR0aW5ncyk6IFByb21pc2U8U0VPQ2hlY2tSZXN1bHRbXT4ge1xyXG5cdGNvbnN0IHJlc3VsdHM6IFNFT0NoZWNrUmVzdWx0W10gPSBbXTtcclxuXHRcclxuXHRpZiAoIXNldHRpbmdzLmNoZWNrSW1hZ2VOYW1pbmcpIHtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xyXG5cdH1cclxuXHRcclxuXHQvLyBSZW1vdmUgY29kZSBibG9ja3MgdG8gYXZvaWQgZmFsc2UgcG9zaXRpdmVzXHJcblx0Y29uc3QgY2xlYW5Db250ZW50ID0gcmVtb3ZlQ29kZUJsb2Nrcyhjb250ZW50KTtcclxuXHRcclxuXHQvLyBGaW5kIGltYWdlIHJlZmVyZW5jZXNcclxuXHRjb25zdCBpbWFnZU1hdGNoZXMgPSBjbGVhbkNvbnRlbnQubWF0Y2goLyFcXFtbXlxcXV0qXFxdXFwoKFteKV0rKVxcKS9nKTtcclxuXHRpZiAoaW1hZ2VNYXRjaGVzKSB7XHJcblx0XHRpbWFnZU1hdGNoZXMuZm9yRWFjaCgobWF0Y2gsIGluZGV4KSA9PiB7XHJcblx0XHRcdGNvbnN0IGltYWdlUGF0aCA9IG1hdGNoLm1hdGNoKC8hXFxbW15cXF1dKlxcXVxcKChbXildKylcXCkvKT8uWzFdO1xyXG5cdFx0XHRpZiAoaW1hZ2VQYXRoKSB7XHJcblx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSBpbWFnZVBhdGguc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBGaW5kIHRoZSBsaW5lIG51bWJlciBmb3IgdGhpcyBpbWFnZVxyXG5cdFx0XHRcdGNvbnN0IGxpbmVOdW1iZXIgPSBmaW5kTGluZU51bWJlckZvckltYWdlKGNvbnRlbnQsIG1hdGNoKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBDaGVjayBmb3IgcHJvYmxlbWF0aWMgcGF0dGVybnNcclxuXHRcdFx0XHRpZiAoZmlsZU5hbWUuaW5jbHVkZXMoJyAnKSB8fCBmaWxlTmFtZS5pbmNsdWRlcygnJTIwJykpIHtcclxuXHRcdFx0XHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdFx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdFx0XHRcdG1lc3NhZ2U6IGBJbWFnZSAke2luZGV4ICsgMX0gaGFzIHNwYWNlcyBpbiBmaWxlIG5hbWU6ICR7ZmlsZU5hbWV9YCxcclxuXHRcdFx0XHRcdFx0c3VnZ2VzdGlvbjogXCJVc2Uga2ViYWItY2FzZSBvciB1bmRlcnNjb3JlcyBpbnN0ZWFkIG9mIHNwYWNlc1wiLFxyXG5cdFx0XHRcdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnLFxyXG5cdFx0XHRcdFx0XHRwb3NpdGlvbjoge1xyXG5cdFx0XHRcdFx0XHRcdGxpbmU6IGxpbmVOdW1iZXIsXHJcblx0XHRcdFx0XHRcdFx0c2VhcmNoVGV4dDogbWF0Y2gsXHJcblx0XHRcdFx0XHRcdFx0Y29udGV4dDogZ2V0Q29udGV4dEFyb3VuZExpbmUoY29udGVudCwgbGluZU51bWJlcilcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSBlbHNlIGlmIChmaWxlTmFtZS5tYXRjaCgvXlthLWYwLTldezgsfSQvKSB8fCBcclxuXHRcdFx0XHRcdFx0ICAgZmlsZU5hbWUubWF0Y2goL15bYS1mMC05XXs4LH1fW0EtWjAtOV0rXFwuLykgfHxcclxuXHRcdFx0XHRcdFx0ICAgZmlsZU5hbWUubWF0Y2goL15bYS1mMC05XXs4LH1fTUQ1XFwuLykgfHxcclxuXHRcdFx0XHRcdFx0ICAgZmlsZU5hbWUubWF0Y2goL15bYS1mMC05XXsyMCx9XFwuLykpIHtcclxuXHRcdFx0XHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdFx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdFx0XHRcdG1lc3NhZ2U6IGBJbWFnZSAke2luZGV4ICsgMX0gaGFzIHJhbmRvbSBmaWxlIG5hbWU6ICR7ZmlsZU5hbWV9YCxcclxuXHRcdFx0XHRcdFx0c3VnZ2VzdGlvbjogXCJVc2UgZGVzY3JpcHRpdmUgZmlsZSBuYW1lc1wiLFxyXG5cdFx0XHRcdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnLFxyXG5cdFx0XHRcdFx0XHRwb3NpdGlvbjoge1xyXG5cdFx0XHRcdFx0XHRcdGxpbmU6IGxpbmVOdW1iZXIsXHJcblx0XHRcdFx0XHRcdFx0c2VhcmNoVGV4dDogbWF0Y2gsXHJcblx0XHRcdFx0XHRcdFx0Y29udGV4dDogZ2V0Q29udGV4dEFyb3VuZExpbmUoY29udGVudCwgbGluZU51bWJlcilcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSBlbHNlIGlmIChmaWxlTmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdwYXN0ZWQnKSB8fCBcclxuXHRcdFx0XHRcdFx0ICAgZmlsZU5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygndW50aXRsZWQnKSB8fFxyXG5cdFx0XHRcdFx0XHQgICBmaWxlTmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdwaG90bycpIHx8XHJcblx0XHRcdFx0XHRcdCAgIC8vIE9ubHkgZmxhZyBnZW5lcmljIHNjcmVlbnNob3RzIChubyBkZXNjcmlwdGl2ZSBjb250ZW50KVxyXG5cdFx0XHRcdFx0XHQgICBmaWxlTmFtZS5tYXRjaCgvXnNjcmVlbnNob3RcXGQqXFwuKHBuZ3xqcGd8anBlZ3xnaWZ8d2VicCkkL2kpIHx8XHJcblx0XHRcdFx0XHRcdCAgIC8vIEZsYWcgc2NyZWVuc2hvdHMgd2l0aCBvbmx5IHJhbmRvbSBjaGFyYWN0ZXJzXHJcblx0XHRcdFx0XHRcdCAgIChmaWxlTmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdzY3JlZW5zaG90JykgJiYgXHJcblx0XHRcdFx0XHRcdCAgICBmaWxlTmFtZS5tYXRjaCgvXnNjcmVlbnNob3RbYS1mMC05XXs2LH1cXC4ocG5nfGpwZ3xqcGVnfGdpZnx3ZWJwKSQvaSkpKSB7XHJcblx0XHRcdFx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRcdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRcdFx0XHRtZXNzYWdlOiBgSW1hZ2UgJHtpbmRleCArIDF9IGhhcyBhIHBvdGVudGlhbGx5IGdlbmVyaWMgZmlsZSBuYW1lOiAke2ZpbGVOYW1lfWAsXHJcblx0XHRcdFx0XHRcdHN1Z2dlc3Rpb246IFwiVXNlIGRlc2NyaXB0aXZlIGZpbGUgbmFtZXNcIixcclxuXHRcdFx0XHRcdFx0c2V2ZXJpdHk6ICd3YXJuaW5nJyxcclxuXHRcdFx0XHRcdFx0cG9zaXRpb246IHtcclxuXHRcdFx0XHRcdFx0XHRsaW5lOiBsaW5lTnVtYmVyLFxyXG5cdFx0XHRcdFx0XHRcdHNlYXJjaFRleHQ6IG1hdGNoLFxyXG5cdFx0XHRcdFx0XHRcdGNvbnRleHQ6IGdldENvbnRleHRBcm91bmRMaW5lKGNvbnRlbnQsIGxpbmVOdW1iZXIpXHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoZmlsZU5hbWUubGVuZ3RoIDwgNSB8fCBmaWxlTmFtZS5sZW5ndGggPiA1MCkge1xyXG5cdFx0XHRcdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0XHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0XHRcdFx0bWVzc2FnZTogYEltYWdlICR7aW5kZXggKyAxfSBleGNlZWRzIHN1Z2dlc3RlZCBmaWxlIG5hbWUgbGVuZ3RoOiAke2ZpbGVOYW1lfWAsXHJcblx0XHRcdFx0XHRcdHN1Z2dlc3Rpb246IFwiVXNlIGRlc2NyaXB0aXZlIGZpbGUgbmFtZXMgYmV0d2VlbiA1LTUwIGNoYXJhY3RlcnNcIixcclxuXHRcdFx0XHRcdFx0c2V2ZXJpdHk6ICd3YXJuaW5nJyxcclxuXHRcdFx0XHRcdFx0cG9zaXRpb246IHtcclxuXHRcdFx0XHRcdFx0XHRsaW5lOiBsaW5lTnVtYmVyLFxyXG5cdFx0XHRcdFx0XHRcdHNlYXJjaFRleHQ6IG1hdGNoLFxyXG5cdFx0XHRcdFx0XHRcdGNvbnRleHQ6IGdldENvbnRleHRBcm91bmRMaW5lKGNvbnRlbnQsIGxpbmVOdW1iZXIpXHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBcIkFsbCBpbWFnZXMgaGF2ZSBnb29kIGZpbGUgbmFtZXNcIixcclxuXHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBTRU8gQ2hlY2tzIC0gTWFpbiBFeHBvcnQgRmlsZVxyXG4gKiBUaGlzIGZpbGUgZXhwb3J0cyBhbGwgU0VPIGNoZWNrIGZ1bmN0aW9ucyBmcm9tIHRoZWlyIGZvY3VzZWQgbW9kdWxlc1xyXG4gKi9cclxuXHJcbi8vIEFsdCB0ZXh0IGNoZWNrc1xyXG5leHBvcnQgeyBjaGVja0FsdFRleHQgfSBmcm9tICcuL2FsdC10ZXh0LWNoZWNrJztcclxuXHJcbi8vIExpbmsgY2hlY2tzXHJcbmV4cG9ydCB7IFxyXG5cdGNoZWNrTmFrZWRMaW5rcywgXHJcblx0Y2hlY2tCcm9rZW5MaW5rcywgXHJcblx0Y2hlY2tQb3RlbnRpYWxseUJyb2tlbkxpbmtzIFxyXG59IGZyb20gJy4vbGluay1jaGVja3MnO1xyXG5cclxuLy8gRXh0ZXJuYWwgbGluayBjaGVja3NcclxuZXhwb3J0IHsgXHJcblx0Y2hlY2tFeHRlcm5hbExpbmtzLCBcclxuXHRjaGVja0V4dGVybmFsQnJva2VuTGlua3MsIFxyXG5cdGNoZWNrRXh0ZXJuYWxMaW5rc09ubHkgXHJcbn0gZnJvbSAnLi9leHRlcm5hbC1saW5rLWNoZWNrcyc7XHJcblxyXG4vLyBDb250ZW50IGNoZWNrc1xyXG5leHBvcnQgeyBcclxuXHRjaGVja0NvbnRlbnRMZW5ndGgsIFxyXG5cdGNoZWNrUmVhZGluZ0xldmVsLCBcclxuXHRjaGVja0R1cGxpY2F0ZUNvbnRlbnQgXHJcbn0gZnJvbSAnLi9jb250ZW50LWNoZWNrcyc7XHJcblxyXG4vLyBNZXRhIGNoZWNrc1xyXG5leHBvcnQgeyBcclxuXHRjaGVja01ldGFEZXNjcmlwdGlvbiwgXHJcblx0Y2hlY2tUaXRsZUxlbmd0aCwgXHJcblx0Y2hlY2tUaXRsZUgxVW5pcXVlbmVzcyxcclxuXHRjaGVja0tleXdvcmREZW5zaXR5LCBcclxuXHRjaGVja0tleXdvcmRJblRpdGxlLFxyXG5cdGNoZWNrS2V5d29yZEluRGVzY3JpcHRpb24sXHJcblx0Y2hlY2tLZXl3b3JkSW5IZWFkaW5nc1xyXG59IGZyb20gJy4vbWV0YS1jaGVja3MnO1xyXG5cclxuLy8gSGVhZGluZyBjaGVja3NcclxuZXhwb3J0IHsgY2hlY2tIZWFkaW5nT3JkZXIgfSBmcm9tICcuL2hlYWRpbmctY2hlY2tzJztcclxuXHJcbi8vIEltYWdlIGNoZWNrc1xyXG5leHBvcnQgeyBjaGVja0ltYWdlTmFtaW5nIH0gZnJvbSAnLi9pbWFnZS1jaGVja3MnO1xyXG5cclxuLy8gVXRpbGl0eSBmdW5jdGlvbnNcclxuZXhwb3J0IHsgXHJcblx0cmVtb3ZlQ29kZUJsb2NrcywgXHJcblx0cmVtb3ZlSHRtbEF0dHJpYnV0ZXMgXHJcbn0gZnJvbSAnLi91dGlscy9jb250ZW50LXBhcnNlcic7XHJcblxyXG5leHBvcnQgeyBcclxuXHRmaW5kTGluZU51bWJlckZvckltYWdlLCBcclxuXHRnZXRDb250ZXh0QXJvdW5kTGluZSBcclxufSBmcm9tICcuL3V0aWxzL3Bvc2l0aW9uLXV0aWxzJztcclxuXHJcbmV4cG9ydCB7IFxyXG5cdGNvdW50U3lsbGFibGVzLCBcclxuXHRnZXRSZWFkaW5nTGV2ZWxEZXNjcmlwdGlvbiBcclxufSBmcm9tICcuL3V0aWxzL3JlYWRpbmctbGV2ZWwnO1xyXG5cclxuLy8gTGVnYWN5IGZ1bmN0aW9ucyB0aGF0IG5lZWQgdG8gYmUgbW92ZWQgb3IgcmVmYWN0b3JlZFxyXG4vLyBUaGVzZSBhcmUgc3RpbGwgaW4gdGhlIG9yaWdpbmFsIGZpbGUgYW5kIG5lZWQgdG8gYmUgYWRkcmVzc2VkXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tOb3RpY2VzKGNvbnRlbnQ6IHN0cmluZywgZmlsZTogVEZpbGUsIHNldHRpbmdzOiBTRU9TZXR0aW5ncyk6IFByb21pc2U8U0VPQ2hlY2tSZXN1bHRbXT4ge1xyXG5cdC8vIFRPRE86IE1vdmUgdGhpcyB0byBjb250ZW50LWNoZWNrcy50c1xyXG5cdHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tLZXl3b3JkSW5TbHVnKGNvbnRlbnQ6IHN0cmluZywgZmlsZTogVEZpbGUsIHNldHRpbmdzOiBTRU9TZXR0aW5ncyk6IFByb21pc2U8U0VPQ2hlY2tSZXN1bHRbXT4ge1xyXG5cdGNvbnN0IHJlc3VsdHM6IFNFT0NoZWNrUmVzdWx0W10gPSBbXTtcclxuXHRcclxuXHRpZiAoIXNldHRpbmdzLmtleXdvcmRQcm9wZXJ0eSkge1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblx0XHJcblx0Ly8gR2V0IGtleXdvcmQgZnJvbSBmcm9udG1hdHRlclxyXG5cdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XHJcblx0aWYgKCFmcm9udG1hdHRlck1hdGNoKSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHRcclxuXHRjb25zdCBmcm9udG1hdHRlciA9IGZyb250bWF0dGVyTWF0Y2hbMV07XHJcblx0aWYgKCFmcm9udG1hdHRlcikge1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblx0XHJcblx0Ly8gUGFyc2UgbGluZSBieSBsaW5lIGluc3RlYWQgb2YgdXNpbmcgcmVnZXhcclxuXHRjb25zdCBsaW5lcyA9IGZyb250bWF0dGVyLnNwbGl0KCdcXG4nKTtcclxuXHRsZXQga2V5d29yZCA9ICcnO1xyXG5cdGxldCBmb3VuZEtleXdvcmRMaW5lID0gZmFsc2U7XHJcblx0XHJcblx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XHJcblx0XHRpZiAobGluZS5zdGFydHNXaXRoKHNldHRpbmdzLmtleXdvcmRQcm9wZXJ0eSArICc6JykpIHtcclxuXHRcdFx0Zm91bmRLZXl3b3JkTGluZSA9IHRydWU7XHJcblx0XHRcdGtleXdvcmQgPSBsaW5lLnN1YnN0cmluZyhzZXR0aW5ncy5rZXl3b3JkUHJvcGVydHkubGVuZ3RoICsgMSkudHJpbSgpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0aWYgKCFmb3VuZEtleXdvcmRMaW5lKSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IHRydWUsXHJcblx0XHRcdG1lc3NhZ2U6IGBObyAke3NldHRpbmdzLmtleXdvcmRQcm9wZXJ0eX0gZGVmaW5lZCBpbiBwcm9wZXJ0aWVzYCxcclxuXHRcdFx0c2V2ZXJpdHk6ICdub3RpY2UnXHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIFZhbGlkYXRlIHRoYXQgdGhlIGtleXdvcmQgaXMgbWVhbmluZ2Z1bCAobm90IGp1c3QgYSBib29sZWFuIG9yIGVtcHR5KVxyXG5cdGlmICgha2V5d29yZCB8fCBrZXl3b3JkID09PSAnZmFsc2UnIHx8IGtleXdvcmQgPT09ICd0cnVlJyB8fCBrZXl3b3JkID09PSAnbnVsbCcgfHwga2V5d29yZCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0bWVzc2FnZTogYE5vIHZhbGlkIGtleXdvcmQgZGVmaW5lZCBpbiBwcm9wZXJ0aWVzYCxcclxuXHRcdFx0c2V2ZXJpdHk6ICdub3RpY2UnXHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIEdldCB0aGUgZmlsZSBzbHVnIChmaWxlbmFtZSB3aXRob3V0IGV4dGVuc2lvbilcclxuXHRjb25zdCBzbHVnID0gZmlsZS5iYXNlbmFtZS50b0xvd2VyQ2FzZSgpO1xyXG5cdGNvbnN0IGtleXdvcmRMb3dlciA9IGtleXdvcmQudG9Mb3dlckNhc2UoKTtcclxuXHRcclxuXHQvLyBDaGVjayBpZiBrZXl3b3JkIGFwcGVhcnMgaW4gc2x1ZyAoY2FzZS1pbnNlbnNpdGl2ZSwgZ2VuZXJvdXMgbWF0Y2hpbmcpXHJcblx0Y29uc3Qga2V5d29yZFdvcmRzID0ga2V5d29yZExvd2VyLnNwbGl0KC9cXHMrLykuZmlsdGVyKHdvcmQgPT4gd29yZC5sZW5ndGggPiAwKTtcclxuXHRjb25zdCBhbGxXb3Jkc0ZvdW5kID0ga2V5d29yZFdvcmRzLmV2ZXJ5KHdvcmQgPT4gc2x1Zy5pbmNsdWRlcyh3b3JkKSk7XHJcblx0XHJcblx0aWYgKGFsbFdvcmRzRm91bmQpIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0bWVzc2FnZTogYFRhcmdldCBrZXl3b3JkIFwiJHtrZXl3b3JkfVwiIGZvdW5kIGluIHNsdWdgLFxyXG5cdFx0XHRzZXZlcml0eTogJ2luZm8nXHJcblx0XHR9KTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0bWVzc2FnZTogYFRhcmdldCBrZXl3b3JkIFwiJHtrZXl3b3JkfVwiIG5vdCBmb3VuZCBpbiBzbHVnYCxcclxuXHRcdFx0c3VnZ2VzdGlvbjogXCJJbmNsdWRlIHlvdXIgdGFyZ2V0IGtleXdvcmQgaW4gdGhlIGZpbGVuYW1lXCIsXHJcblx0XHRcdHNldmVyaXR5OiAnd2FybmluZydcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tTbHVnRm9ybWF0KGNvbnRlbnQ6IHN0cmluZywgZmlsZTogVEZpbGUsIHNldHRpbmdzOiBTRU9TZXR0aW5ncyk6IFByb21pc2U8U0VPQ2hlY2tSZXN1bHRbXT4ge1xyXG5cdC8vIFRPRE86IE1vdmUgdGhpcyB0byBtZXRhLWNoZWNrcy50c1xyXG5cdHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tQb3RlbnRpYWxseUJyb2tlbkVtYmVkcyhjb250ZW50OiBzdHJpbmcsIGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcclxuXHQvLyBUT0RPOiBNb3ZlIHRoaXMgdG8gbGluay1jaGVja3MudHNcclxuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldERpc3BsYXlOYW1lKGZpbGU6IFRGaWxlLCBjb250ZW50OiBzdHJpbmcsIHNldHRpbmdzOiBTRU9TZXR0aW5ncyk6IHN0cmluZyB7XHJcblx0aWYgKHNldHRpbmdzLnVzZU5vdGVUaXRsZXMgJiYgc2V0dGluZ3MudGl0bGVQcm9wZXJ0eS50cmltKCkpIHtcclxuXHRcdC8vIFRyeSB0byBnZXQgdGl0bGUgZnJvbSBmcm9udG1hdHRlciAtIGhhbmRsZSB2YXJpb3VzIGZvcm1hdHNcclxuXHRcdGxldCBmcm9udG1hdHRlck1hdGNoID0gY29udGVudC5tYXRjaCgvXi0tLVxccj9cXG4oW1xcc1xcU10qPylcXHI/XFxuLS0tLyk7XHJcblx0XHRpZiAoIWZyb250bWF0dGVyTWF0Y2gpIHtcclxuXHRcdFx0Ly8gVHJ5IHdpdGhvdXQgY2FycmlhZ2UgcmV0dXJuc1xyXG5cdFx0XHRmcm9udG1hdHRlck1hdGNoID0gY29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCFmcm9udG1hdHRlck1hdGNoKSB7XHJcblx0XHRcdC8vIFRyeSB3aXRoIGp1c3QgZGFzaGVzIGFuZCBhbnkgd2hpdGVzcGFjZVxyXG5cdFx0XHRmcm9udG1hdHRlck1hdGNoID0gY29udGVudC5tYXRjaCgvXi0tLVxccypcXG4oW1xcc1xcU10qPylcXG5cXHMqLS0tLyk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGZyb250bWF0dGVyTWF0Y2ggJiYgZnJvbnRtYXR0ZXJNYXRjaFsxXSkge1xyXG5cdFx0XHRjb25zdCBmcm9udG1hdHRlciA9IGZyb250bWF0dGVyTWF0Y2hbMV07XHJcblxyXG5cdFx0XHQvLyBTcGxpdCBieSBsaW5lcyBhbmQgbG9vayBmb3IgdGhlIHByb3BlcnR5XHJcblx0XHRcdGNvbnN0IGxpbmVzID0gZnJvbnRtYXR0ZXIuc3BsaXQoJ1xcbicpO1xyXG5cclxuXHRcdFx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XHJcblx0XHRcdFx0aWYgKCFsaW5lKSBjb250aW51ZTtcclxuXHRcdFx0XHRjb25zdCB0cmltbWVkTGluZSA9IGxpbmUudHJpbSgpO1xyXG5cclxuXHRcdFx0XHRpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aChzZXR0aW5ncy50aXRsZVByb3BlcnR5ICsgJzonKSkge1xyXG5cdFx0XHRcdFx0Ly8gRXh0cmFjdCB0aGUgdmFsdWUgYWZ0ZXIgdGhlIGNvbG9uXHJcblx0XHRcdFx0XHRjb25zdCBjb2xvbkluZGV4ID0gdHJpbW1lZExpbmUuaW5kZXhPZignOicpO1xyXG5cdFx0XHRcdFx0aWYgKGNvbG9uSW5kZXggIT09IC0xKSB7XHJcblx0XHRcdFx0XHRcdGxldCB0aXRsZSA9IHRyaW1tZWRMaW5lLnN1YnN0cmluZyhjb2xvbkluZGV4ICsgMSkudHJpbSgpO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIHN1cnJvdW5kaW5nIHF1b3RlcyBpZiBwcmVzZW50XHJcblx0XHRcdFx0XHRcdGlmICgodGl0bGUuc3RhcnRzV2l0aCgnXCInKSAmJiB0aXRsZS5lbmRzV2l0aCgnXCInKSkgfHxcclxuXHRcdFx0XHRcdFx0XHQodGl0bGUuc3RhcnRzV2l0aChcIidcIikgJiYgdGl0bGUuZW5kc1dpdGgoXCInXCIpKSkge1xyXG5cdFx0XHRcdFx0XHRcdHRpdGxlID0gdGl0bGUuc2xpY2UoMSwgLTEpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRpZiAodGl0bGUpIHtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdGl0bGU7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0Ly8gRmFsbGJhY2sgdG8gZmlsZSBwYXRoIHdpdGggcGFyZW50IGZvbGRlclxyXG5cdHJldHVybiBnZXREaXNwbGF5UGF0aChmaWxlLnBhdGgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2x1Z0Zyb21GaWxlKGZpbGU6IFRGaWxlLCBjb250ZW50OiBzdHJpbmcsIHNldHRpbmdzOiBTRU9TZXR0aW5ncyk6IHN0cmluZyB7XHJcblx0Ly8gVE9ETzogTW92ZSB0aGlzIHRvIHV0aWxzXHJcblx0cmV0dXJuIGZpbGUuYmFzZW5hbWU7XHJcbn1cclxuXHJcbi8vIEltcG9ydCB0eXBlc1xyXG5pbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBTRU9TZXR0aW5ncyB9IGZyb20gXCIuLi9zZXR0aW5nc1wiO1xyXG5pbXBvcnQgeyBTRU9DaGVja1Jlc3VsdCB9IGZyb20gXCIuLi90eXBlc1wiO1xyXG5pbXBvcnQgeyBnZXREaXNwbGF5UGF0aCB9IGZyb20gXCIuLi91aS9wYW5lbC11dGlsc1wiO1xyXG4iLCAiLyoqXHJcbiAqIFZhdWx0LXdpZGUgZHVwbGljYXRlIGRldGVjdGlvbiBzeXN0ZW1cclxuICogSGFuZGxlcyBkdXBsaWNhdGUgdGl0bGVzLCBkZXNjcmlwdGlvbnMsIGFuZCBjb250ZW50IGFjcm9zcyB0aGUgZW50aXJlIHZhdWx0XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVEZpbGUsIEFwcCB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBTRU9TZXR0aW5ncyB9IGZyb20gXCIuLi9zZXR0aW5nc1wiO1xyXG5pbXBvcnQgeyBTRU9DaGVja1Jlc3VsdCB9IGZyb20gXCIuLi90eXBlc1wiO1xyXG5pbXBvcnQgeyByZW1vdmVDb2RlQmxvY2tzIH0gZnJvbSBcIi4vdXRpbHMvY29udGVudC1wYXJzZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBWYXVsdCBkYXRhIHN0cnVjdHVyZSBmb3Igc3RvcmluZyBmaWxlIG1ldGFkYXRhXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0RGF0YSB7XHJcblx0LyoqIE1hcCBvZiBmaWxlIHBhdGhzIHRvIHRoZWlyIG1ldGFkYXRhICovXHJcblx0ZmlsZXM6IE1hcDxzdHJpbmcsIEZpbGVNZXRhZGF0YT47XHJcblx0LyoqIE1hcCBvZiB0aXRsZXMgdG8gZmlsZSBwYXRocyB0aGF0IHVzZSB0aGVtICovXHJcblx0dGl0bGVNYXA6IE1hcDxzdHJpbmcsIHN0cmluZ1tdPjtcclxuXHQvKiogTWFwIG9mIGRlc2NyaXB0aW9ucyB0byBmaWxlIHBhdGhzIHRoYXQgdXNlIHRoZW0gKi9cclxuXHRkZXNjcmlwdGlvbk1hcDogTWFwPHN0cmluZywgc3RyaW5nW10+O1xyXG5cdC8qKiBUaW1lc3RhbXAgd2hlbiBkYXRhIHdhcyBsYXN0IGNvbGxlY3RlZCAqL1xyXG5cdGxhc3RVcGRhdGVkOiBudW1iZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNZXRhZGF0YSBmb3IgYSBzaW5nbGUgZmlsZVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBGaWxlTWV0YWRhdGEge1xyXG5cdC8qKiBGaWxlIHBhdGggKi9cclxuXHRwYXRoOiBzdHJpbmc7XHJcblx0LyoqIEV4dHJhY3RlZCB0aXRsZSAqL1xyXG5cdHRpdGxlOiBzdHJpbmc7XHJcblx0LyoqIEV4dHJhY3RlZCBkZXNjcmlwdGlvbiAqL1xyXG5cdGRlc2NyaXB0aW9uPzogc3RyaW5nO1xyXG5cdC8qKiBGaWxlIGNvbnRlbnQgZm9yIGNvbnRlbnQgZHVwbGljYXRlIGRldGVjdGlvbiAqL1xyXG5cdGNvbnRlbnQ6IHN0cmluZztcclxuXHQvKiogV2hldGhlciB0aGlzIGZpbGUgc2hvdWxkIGJlIGlnbm9yZWQgKi9cclxuXHRpZ25vcmVkOiBib29sZWFuO1xyXG59XHJcblxyXG4vKipcclxuICogVmF1bHQgZGF0YSBjb2xsZWN0aW9uIGFuZCBkdXBsaWNhdGUgZGV0ZWN0aW9uIG1hbmFnZXJcclxuICovXHJcbmV4cG9ydCBjbGFzcyBWYXVsdER1cGxpY2F0ZURldGVjdG9yIHtcclxuXHRwcml2YXRlIHZhdWx0RGF0YTogVmF1bHREYXRhIHwgbnVsbCA9IG51bGw7XHJcblx0cHJpdmF0ZSBhcHA6IEFwcDtcclxuXHRwcml2YXRlIHNldHRpbmdzOiBTRU9TZXR0aW5ncztcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHNldHRpbmdzOiBTRU9TZXR0aW5ncykge1xyXG5cdFx0dGhpcy5hcHAgPSBhcHA7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDb2xsZWN0IHZhdWx0LXdpZGUgZGF0YSBmb3IgZHVwbGljYXRlIGRldGVjdGlvblxyXG5cdCAqL1xyXG5cdGFzeW5jIGNvbGxlY3RWYXVsdERhdGEoKTogUHJvbWlzZTxWYXVsdERhdGE+IHtcclxuXHRcdGNvbnN0IHZhdWx0RGF0YTogVmF1bHREYXRhID0ge1xyXG5cdFx0XHRmaWxlczogbmV3IE1hcCgpLFxyXG5cdFx0XHR0aXRsZU1hcDogbmV3IE1hcCgpLFxyXG5cdFx0XHRkZXNjcmlwdGlvbk1hcDogbmV3IE1hcCgpLFxyXG5cdFx0XHRsYXN0VXBkYXRlZDogRGF0ZS5ub3coKVxyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBHZXQgYWxsIG1hcmtkb3duIGZpbGVzXHJcblx0XHRjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuXHRcdFxyXG5cdFx0Ly8gRmlsdGVyIGZpbGVzIGJhc2VkIG9uIHNldHRpbmdzXHJcblx0XHRjb25zdCBmaWx0ZXJlZEZpbGVzID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4ge1xyXG5cdFx0XHQvLyBDaGVjayBpZ25vcmUgdW5kZXJzY29yZSBmaWxlcyBzZXR0aW5nXHJcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmlnbm9yZVVuZGVyc2NvcmVGaWxlcyAmJiBmaWxlLmJhc2VuYW1lLnN0YXJ0c1dpdGgoJ18nKSkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ2hlY2sgc2NhbiBkaXJlY3RvcmllcyBzZXR0aW5nXHJcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnNjYW5EaXJlY3Rvcmllcykge1xyXG5cdFx0XHRcdGNvbnN0IGRpcmVjdG9yaWVzID0gdGhpcy5zZXR0aW5ncy5zY2FuRGlyZWN0b3JpZXMuc3BsaXQoJywnKS5tYXAoZCA9PiBkLnRyaW0oKSk7XHJcblx0XHRcdFx0cmV0dXJuIGRpcmVjdG9yaWVzLnNvbWUoZGlyID0+IGZpbGUucGF0aC5zdGFydHNXaXRoKGRpcikpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFByb2Nlc3MgZWFjaCBmaWxlXHJcblx0XHRmb3IgKGNvbnN0IGZpbGUgb2YgZmlsdGVyZWRGaWxlcykge1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG5cdFx0XHRcdGNvbnN0IG1ldGFkYXRhID0gdGhpcy5leHRyYWN0RmlsZU1ldGFkYXRhKGZpbGUsIGNvbnRlbnQpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmICghbWV0YWRhdGEuaWdub3JlZCkge1xyXG5cdFx0XHRcdFx0dmF1bHREYXRhLmZpbGVzLnNldChmaWxlLnBhdGgsIG1ldGFkYXRhKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gQWRkIHRvIHRpdGxlIG1hcFxyXG5cdFx0XHRcdFx0Y29uc3QgdGl0bGVLZXkgPSBtZXRhZGF0YS50aXRsZS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcclxuXHRcdFx0XHRcdGlmICh0aXRsZUtleSkge1xyXG5cdFx0XHRcdFx0XHRpZiAoIXZhdWx0RGF0YS50aXRsZU1hcC5oYXModGl0bGVLZXkpKSB7XHJcblx0XHRcdFx0XHRcdFx0dmF1bHREYXRhLnRpdGxlTWFwLnNldCh0aXRsZUtleSwgW10pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHZhdWx0RGF0YS50aXRsZU1hcC5nZXQodGl0bGVLZXkpIS5wdXNoKGZpbGUucGF0aCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIEFkZCB0byBkZXNjcmlwdGlvbiBtYXBcclxuXHRcdFx0XHRcdGlmIChtZXRhZGF0YS5kZXNjcmlwdGlvbikge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBkZXNjS2V5ID0gbWV0YWRhdGEuZGVzY3JpcHRpb24udG9Mb3dlckNhc2UoKS50cmltKCk7XHJcblx0XHRcdFx0XHRcdGlmIChkZXNjS2V5KSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCF2YXVsdERhdGEuZGVzY3JpcHRpb25NYXAuaGFzKGRlc2NLZXkpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHR2YXVsdERhdGEuZGVzY3JpcHRpb25NYXAuc2V0KGRlc2NLZXksIFtdKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0dmF1bHREYXRhLmRlc2NyaXB0aW9uTWFwLmdldChkZXNjS2V5KSEucHVzaChmaWxlLnBhdGgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybihgRmFpbGVkIHRvIHByb2Nlc3MgZmlsZSAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy52YXVsdERhdGEgPSB2YXVsdERhdGE7XHJcblx0XHRyZXR1cm4gdmF1bHREYXRhO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRXh0cmFjdCBtZXRhZGF0YSBmcm9tIGEgZmlsZVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgZXh0cmFjdEZpbGVNZXRhZGF0YShmaWxlOiBURmlsZSwgY29udGVudDogc3RyaW5nKTogRmlsZU1ldGFkYXRhIHtcclxuXHRcdC8vIEV4dHJhY3QgZnJvbnRtYXR0ZXJcclxuXHRcdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tXFxuLyk7XHJcblx0XHRjb25zdCBmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7fTtcclxuXHRcdFxyXG5cdFx0aWYgKGZyb250bWF0dGVyTWF0Y2ggJiYgZnJvbnRtYXR0ZXJNYXRjaFsxXSkge1xyXG5cdFx0XHRjb25zdCBmcm9udG1hdHRlckNvbnRlbnQgPSBmcm9udG1hdHRlck1hdGNoWzFdO1xyXG5cdFx0XHRjb25zdCBsaW5lcyA9IGZyb250bWF0dGVyQ29udGVudC5zcGxpdCgnXFxuJyk7XHJcblx0XHRcdFxyXG5cdFx0XHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuXHRcdFx0XHRjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2goL14oXFx3Kyk6XFxzKiguKikkLyk7XHJcblx0XHRcdFx0aWYgKG1hdGNoICYmIG1hdGNoWzFdICYmIG1hdGNoWzJdICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGtleSA9IG1hdGNoWzFdO1xyXG5cdFx0XHRcdFx0bGV0IHZhbHVlID0gbWF0Y2hbMl07XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFJlbW92ZSBxdW90ZXMgaWYgcHJlc2VudFxyXG5cdFx0XHRcdFx0aWYgKCh2YWx1ZS5zdGFydHNXaXRoKCdcIicpICYmIHZhbHVlLmVuZHNXaXRoKCdcIicpKSB8fCBcclxuXHRcdFx0XHRcdFx0KHZhbHVlLnN0YXJ0c1dpdGgoXCInXCIpICYmIHZhbHVlLmVuZHNXaXRoKFwiJ1wiKSkpIHtcclxuXHRcdFx0XHRcdFx0dmFsdWUgPSB2YWx1ZS5zbGljZSgxLCAtMSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGZyb250bWF0dGVyW2tleV0gPSB2YWx1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBFeHRyYWN0IHRpdGxlXHJcblx0XHRsZXQgdGl0bGUgPSAnJztcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLnRpdGxlUHJvcGVydHkgJiYgZnJvbnRtYXR0ZXJbdGhpcy5zZXR0aW5ncy50aXRsZVByb3BlcnR5XSkge1xyXG5cdFx0XHRjb25zdCB0aXRsZVZhbHVlID0gZnJvbnRtYXR0ZXJbdGhpcy5zZXR0aW5ncy50aXRsZVByb3BlcnR5XTtcclxuXHRcdFx0dGl0bGUgPSB0eXBlb2YgdGl0bGVWYWx1ZSA9PT0gJ3N0cmluZycgPyB0aXRsZVZhbHVlIDogZmlsZS5iYXNlbmFtZTtcclxuXHRcdH0gZWxzZSBpZiAodGhpcy5zZXR0aW5ncy51c2VGaWxlbmFtZUFzVGl0bGUpIHtcclxuXHRcdFx0dGl0bGUgPSBmaWxlLmJhc2VuYW1lO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGl0bGUgPSBmaWxlLmJhc2VuYW1lOyAvLyBEZWZhdWx0IGZhbGxiYWNrXHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRXh0cmFjdCBkZXNjcmlwdGlvblxyXG5cdFx0bGV0IGRlc2NyaXB0aW9uOiBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5kZXNjcmlwdGlvblByb3BlcnR5ICYmIGZyb250bWF0dGVyW3RoaXMuc2V0dGluZ3MuZGVzY3JpcHRpb25Qcm9wZXJ0eV0pIHtcclxuXHRcdFx0Y29uc3QgZGVzY1ZhbHVlID0gZnJvbnRtYXR0ZXJbdGhpcy5zZXR0aW5ncy5kZXNjcmlwdGlvblByb3BlcnR5XTtcclxuXHRcdFx0ZGVzY3JpcHRpb24gPSB0eXBlb2YgZGVzY1ZhbHVlID09PSAnc3RyaW5nJyA/IGRlc2NWYWx1ZSA6IHVuZGVmaW5lZDtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRwYXRoOiBmaWxlLnBhdGgsXHJcblx0XHRcdHRpdGxlLFxyXG5cdFx0XHRkZXNjcmlwdGlvbixcclxuXHRcdFx0Y29udGVudCxcclxuXHRcdFx0aWdub3JlZDogZmFsc2VcclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBmb3IgZHVwbGljYXRlIHRpdGxlc1xyXG5cdCAqL1xyXG5cdGFzeW5jIGNoZWNrRHVwbGljYXRlVGl0bGVzKGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcclxuXHRcdGNvbnN0IHJlc3VsdHM6IFNFT0NoZWNrUmVzdWx0W10gPSBbXTtcclxuXHRcdFxyXG5cdFx0Ly8gT25seSBydW4gaWYgZHVwbGljYXRlIGNvbnRlbnQgY2hlY2tpbmcgaXMgZW5hYmxlZCBBTkQgd2UgaGF2ZSB0aXRsZSBjb25maWd1cmF0aW9uXHJcblx0XHRpZiAoIXNldHRpbmdzLmNoZWNrRHVwbGljYXRlQ29udGVudCB8fCAoIXNldHRpbmdzLnRpdGxlUHJvcGVydHkgJiYgIXNldHRpbmdzLnVzZUZpbGVuYW1lQXNUaXRsZSkpIHtcclxuXHRcdFx0cmV0dXJuIHJlc3VsdHM7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRW5zdXJlIHZhdWx0IGRhdGEgaXMgY29sbGVjdGVkXHJcblx0XHRpZiAoIXRoaXMudmF1bHREYXRhKSB7XHJcblx0XHRcdGF3YWl0IHRoaXMuY29sbGVjdFZhdWx0RGF0YSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGZpbGVNZXRhZGF0YSA9IHRoaXMudmF1bHREYXRhIS5maWxlcy5nZXQoZmlsZS5wYXRoKTtcclxuXHRcdGlmICghZmlsZU1ldGFkYXRhKSB7XHJcblx0XHRcdHJldHVybiByZXN1bHRzO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHRpdGxlS2V5ID0gZmlsZU1ldGFkYXRhLnRpdGxlLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xyXG5cdFx0aWYgKCF0aXRsZUtleSkge1xyXG5cdFx0XHRyZXR1cm4gcmVzdWx0cztcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBkdXBsaWNhdGVGaWxlcyA9IHRoaXMudmF1bHREYXRhPy50aXRsZU1hcC5nZXQodGl0bGVLZXkpIHx8IFtdO1xyXG5cdFx0XHJcblx0XHRpZiAoZHVwbGljYXRlRmlsZXMubGVuZ3RoID4gMSkge1xyXG5cdFx0XHRjb25zdCBvdGhlckZpbGVzID0gZHVwbGljYXRlRmlsZXMuZmlsdGVyKGYgPT4gZiAhPT0gZmlsZS5wYXRoKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIENoZWNrIGZvciBnZW5lcmljIHRpdGxlc1xyXG5cdFx0XHRjb25zdCBnZW5lcmljVGl0bGVzID0gWyd1bnRpdGxlZCcsICduZXcgbm90ZScsICd1bnRpdGxlZCBub3RlJywgJ25ldyBmaWxlJywgJ2RvY3VtZW50J107XHJcblx0XHRcdGNvbnN0IGlzR2VuZXJpYyA9IGdlbmVyaWNUaXRsZXMuaW5jbHVkZXModGl0bGVLZXkpO1xyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3Qgc2V2ZXJpdHkgPSBpc0dlbmVyaWMgPyAnd2FybmluZycgOiAnZXJyb3InO1xyXG5cdFx0XHRjb25zdCBtZXNzYWdlID0gaXNHZW5lcmljIFxyXG5cdFx0XHRcdD8gYEdlbmVyaWMgdGl0bGUgXCIke2ZpbGVNZXRhZGF0YS50aXRsZX1cIiB1c2VkIGluICR7ZHVwbGljYXRlRmlsZXMubGVuZ3RofSBmaWxlc2BcclxuXHRcdFx0XHQ6IGBEdXBsaWNhdGUgdGl0bGUgXCIke2ZpbGVNZXRhZGF0YS50aXRsZX1cIiBmb3VuZCBpbiAke2R1cGxpY2F0ZUZpbGVzLmxlbmd0aH0gZmlsZXNgO1xyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3Qgc3VnZ2VzdGlvbiA9IGlzR2VuZXJpY1xyXG5cdFx0XHRcdD8gJ0NvbnNpZGVyIHVzaW5nIGEgbW9yZSBkZXNjcmlwdGl2ZSB0aXRsZSdcclxuXHRcdFx0XHQ6IGBUaGlzIHRpdGxlIGlzIGFsc28gdXNlZCBpbjogJHtvdGhlckZpbGVzLm1hcChmID0+IGA8YSBocmVmPVwiI1wiIGRhdGEtZmlsZS1wYXRoPVwiJHtmfVwiIGNsYXNzPVwic2VvLWZpbGUtbGlua1wiPiR7dGhpcy5nZXREaXNwbGF5UGF0aChmKX08L2E+YCkuam9pbignLCAnKX1gO1xyXG5cclxuXHRcdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRcdG1lc3NhZ2UsXHJcblx0XHRcdFx0c3VnZ2VzdGlvbixcclxuXHRcdFx0XHRzZXZlcml0eSxcclxuXHRcdFx0XHRwb3NpdGlvbjoge1xyXG5cdFx0XHRcdFx0bGluZTogMSxcclxuXHRcdFx0XHRcdHNlYXJjaFRleHQ6IHRoaXMuc2V0dGluZ3MudGl0bGVQcm9wZXJ0eSB8fCAndGl0bGUnLFxyXG5cdFx0XHRcdFx0Y29udGV4dDogYHRpdGxlOiBcIiR7ZmlsZU1ldGFkYXRhLnRpdGxlfVwiYFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0XHRtZXNzYWdlOiBgVW5pcXVlIHRpdGxlOiBcIiR7ZmlsZU1ldGFkYXRhLnRpdGxlfVwiYCxcclxuXHRcdFx0XHRzZXZlcml0eTogJ2luZm8nXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiByZXN1bHRzO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgZm9yIGR1cGxpY2F0ZSBkZXNjcmlwdGlvbnNcclxuXHQgKi9cclxuXHRhc3luYyBjaGVja0R1cGxpY2F0ZURlc2NyaXB0aW9ucyhmaWxlOiBURmlsZSwgc2V0dGluZ3M6IFNFT1NldHRpbmdzKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0XHRjb25zdCByZXN1bHRzOiBTRU9DaGVja1Jlc3VsdFtdID0gW107XHJcblx0XHRcclxuXHRcdC8vIE9ubHkgcnVuIGlmIGR1cGxpY2F0ZSBjb250ZW50IGNoZWNraW5nIGlzIGVuYWJsZWQgQU5EIHdlIGhhdmUgZGVzY3JpcHRpb24gcHJvcGVydHkgY29uZmlndXJlZFxyXG5cdFx0aWYgKCFzZXR0aW5ncy5jaGVja0R1cGxpY2F0ZUNvbnRlbnQgfHwgIXNldHRpbmdzLmRlc2NyaXB0aW9uUHJvcGVydHkpIHtcclxuXHRcdFx0cmV0dXJuIHJlc3VsdHM7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRW5zdXJlIHZhdWx0IGRhdGEgaXMgY29sbGVjdGVkXHJcblx0XHRpZiAoIXRoaXMudmF1bHREYXRhKSB7XHJcblx0XHRcdGF3YWl0IHRoaXMuY29sbGVjdFZhdWx0RGF0YSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGZpbGVNZXRhZGF0YSA9IHRoaXMudmF1bHREYXRhIS5maWxlcy5nZXQoZmlsZS5wYXRoKTtcclxuXHRcdGlmICghZmlsZU1ldGFkYXRhIHx8ICFmaWxlTWV0YWRhdGEuZGVzY3JpcHRpb24pIHtcclxuXHRcdFx0cmV0dXJuIHJlc3VsdHM7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgZGVzY0tleSA9IGZpbGVNZXRhZGF0YS5kZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcclxuXHRcdGNvbnN0IGR1cGxpY2F0ZUZpbGVzID0gdGhpcy52YXVsdERhdGE/LmRlc2NyaXB0aW9uTWFwLmdldChkZXNjS2V5KSB8fCBbXTtcclxuXHRcdFxyXG5cdFx0aWYgKGR1cGxpY2F0ZUZpbGVzLmxlbmd0aCA+IDEpIHtcclxuXHRcdFx0Y29uc3Qgb3RoZXJGaWxlcyA9IGR1cGxpY2F0ZUZpbGVzLmZpbHRlcihmID0+IGYgIT09IGZpbGUucGF0aCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDaGVjayBmb3IgZ2VuZXJpYyBkZXNjcmlwdGlvbnNcclxuXHRcdFx0Y29uc3QgZ2VuZXJpY0Rlc2NyaXB0aW9ucyA9IFsnZGVzY3JpcHRpb24nLCAnbWV0YSBkZXNjcmlwdGlvbicsICdwYWdlIGRlc2NyaXB0aW9uJ107XHJcblx0XHRcdGNvbnN0IGlzR2VuZXJpYyA9IGdlbmVyaWNEZXNjcmlwdGlvbnMuaW5jbHVkZXMoZGVzY0tleSk7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBzZXZlcml0eSA9IGlzR2VuZXJpYyA/ICd3YXJuaW5nJyA6ICdlcnJvcic7XHJcblx0XHRcdGNvbnN0IG1lc3NhZ2UgPSBpc0dlbmVyaWMgXHJcblx0XHRcdFx0PyBgR2VuZXJpYyBkZXNjcmlwdGlvbiBcIiR7ZmlsZU1ldGFkYXRhLmRlc2NyaXB0aW9ufVwiIHVzZWQgaW4gJHtkdXBsaWNhdGVGaWxlcy5sZW5ndGh9IGZpbGVzYFxyXG5cdFx0XHRcdDogYER1cGxpY2F0ZSBkZXNjcmlwdGlvbiBcIiR7ZmlsZU1ldGFkYXRhLmRlc2NyaXB0aW9ufVwiIGZvdW5kIGluICR7ZHVwbGljYXRlRmlsZXMubGVuZ3RofSBmaWxlc2A7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBzdWdnZXN0aW9uID0gaXNHZW5lcmljXHJcblx0XHRcdFx0PyAnQ29uc2lkZXIgdXNpbmcgYSBtb3JlIGRlc2NyaXB0aXZlIG1ldGEgZGVzY3JpcHRpb24nXHJcblx0XHRcdFx0OiBgVGhpcyBkZXNjcmlwdGlvbiBpcyBhbHNvIHVzZWQgaW46ICR7b3RoZXJGaWxlcy5tYXAoZiA9PiBgPGEgaHJlZj1cIiNcIiBkYXRhLWZpbGUtcGF0aD1cIiR7Zn1cIiBjbGFzcz1cInNlby1maWxlLWxpbmtcIj4ke3RoaXMuZ2V0RGlzcGxheVBhdGgoZil9PC9hPmApLmpvaW4oJywgJyl9YDtcclxuXHJcblx0XHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0XHRtZXNzYWdlLFxyXG5cdFx0XHRcdHN1Z2dlc3Rpb24sXHJcblx0XHRcdFx0c2V2ZXJpdHksXHJcblx0XHRcdFx0cG9zaXRpb246IHtcclxuXHRcdFx0XHRcdGxpbmU6IDEsXHJcblx0XHRcdFx0XHRzZWFyY2hUZXh0OiB0aGlzLnNldHRpbmdzLmRlc2NyaXB0aW9uUHJvcGVydHkgfHwgJ2Rlc2NyaXB0aW9uJyxcclxuXHRcdFx0XHRcdGNvbnRleHQ6IGBkZXNjcmlwdGlvbjogXCIke2ZpbGVNZXRhZGF0YS5kZXNjcmlwdGlvbn1cImBcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0XHRwYXNzZWQ6IHRydWUsXHJcblx0XHRcdFx0bWVzc2FnZTogYFVuaXF1ZSBkZXNjcmlwdGlvbjogXCIke2ZpbGVNZXRhZGF0YS5kZXNjcmlwdGlvbn1cImAsXHJcblx0XHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcmVzdWx0cztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGZvciBkdXBsaWNhdGUgY29udGVudCB1c2luZyBKYWNjYXJkIHNpbWlsYXJpdHlcclxuXHQgKi9cclxuXHRhc3luYyBjaGVja0R1cGxpY2F0ZUNvbnRlbnQoZmlsZTogVEZpbGUsIHNldHRpbmdzOiBTRU9TZXR0aW5ncyk6IFByb21pc2U8U0VPQ2hlY2tSZXN1bHRbXT4ge1xyXG5cdFx0Y29uc3QgcmVzdWx0czogU0VPQ2hlY2tSZXN1bHRbXSA9IFtdO1xyXG5cdFx0XHJcblx0XHRpZiAoIXNldHRpbmdzLmNoZWNrRHVwbGljYXRlQ29udGVudCkge1xyXG5cdFx0XHRyZXR1cm4gcmVzdWx0cztcclxuXHRcdH1cclxuXHJcblx0XHQvLyBFbnN1cmUgdmF1bHQgZGF0YSBpcyBjb2xsZWN0ZWRcclxuXHRcdGlmICghdGhpcy52YXVsdERhdGEpIHtcclxuXHRcdFx0YXdhaXQgdGhpcy5jb2xsZWN0VmF1bHREYXRhKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgZmlsZU1ldGFkYXRhID0gdGhpcy52YXVsdERhdGE/LmZpbGVzLmdldChmaWxlLnBhdGgpO1xyXG5cdFx0aWYgKCFmaWxlTWV0YWRhdGEpIHtcclxuXHRcdFx0cmV0dXJuIHJlc3VsdHM7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU3BsaXQgY29udGVudCBpbnRvIHBhcmFncmFwaHNcclxuXHRcdGNvbnN0IHBhcmFncmFwaHMgPSB0aGlzLnNwbGl0SW50b1BhcmFncmFwaHMoZmlsZU1ldGFkYXRhLmNvbnRlbnQpO1xyXG5cdFx0Y29uc3QgZHVwbGljYXRlczogQXJyYXk8e1xyXG5cdFx0XHRwYXJhZ3JhcGg6IG51bWJlcjtcclxuXHRcdFx0c2ltaWxhckZpbGVzOiBBcnJheTx7IGZpbGU6IHN0cmluZzsgc2ltaWxhcml0eTogbnVtYmVyIH0+O1xyXG5cdFx0fT4gPSBbXTtcclxuXHJcblx0XHQvLyBDb21wYXJlIGVhY2ggcGFyYWdyYXBoIGFnYWluc3QgYWxsIG90aGVyIGZpbGVzXHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFncmFwaHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0Y29uc3QgcGFyYWdyYXBoID0gcGFyYWdyYXBoc1tpXTtcclxuXHRcdFx0aWYgKCFwYXJhZ3JhcGggfHwgcGFyYWdyYXBoLmxlbmd0aCA8IDUwKSBjb250aW51ZTsgLy8gU2tpcCBzaG9ydCBwYXJhZ3JhcGhzXHJcblxyXG5cdFx0XHRjb25zdCBzaW1pbGFyRmlsZXM6IEFycmF5PHsgZmlsZTogc3RyaW5nOyBzaW1pbGFyaXR5OiBudW1iZXIgfT4gPSBbXTtcclxuXHJcblx0XHRcdC8vIENoZWNrIGFnYWluc3QgYWxsIG90aGVyIGZpbGVzXHJcblx0XHRcdGZvciAoY29uc3QgW290aGVyRmlsZVBhdGgsIG90aGVyTWV0YWRhdGFdIG9mIHRoaXMudmF1bHREYXRhPy5maWxlcyB8fCBbXSkge1xyXG5cdFx0XHRcdGlmIChvdGhlckZpbGVQYXRoID09PSBmaWxlLnBhdGgpIGNvbnRpbnVlO1xyXG5cclxuXHRcdFx0XHRjb25zdCBvdGhlclBhcmFncmFwaHMgPSB0aGlzLnNwbGl0SW50b1BhcmFncmFwaHMob3RoZXJNZXRhZGF0YS5jb250ZW50KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRmb3IgKGNvbnN0IG90aGVyUGFyYWdyYXBoIG9mIG90aGVyUGFyYWdyYXBocykge1xyXG5cdFx0XHRcdFx0aWYgKCFvdGhlclBhcmFncmFwaCB8fCBvdGhlclBhcmFncmFwaC5sZW5ndGggPCA1MCkgY29udGludWU7XHJcblxyXG5cdFx0XHRcdFx0Y29uc3Qgc2ltaWxhcml0eSA9IHRoaXMuY2FsY3VsYXRlSmFjY2FyZFNpbWlsYXJpdHkocGFyYWdyYXBoLCBvdGhlclBhcmFncmFwaCk7XHJcblx0XHRcdFx0XHRpZiAoc2ltaWxhcml0eSA+PSBzZXR0aW5ncy5kdXBsaWNhdGVUaHJlc2hvbGQpIHtcclxuXHRcdFx0XHRcdFx0c2ltaWxhckZpbGVzLnB1c2goe1xyXG5cdFx0XHRcdFx0XHRcdGZpbGU6IG90aGVyRmlsZVBhdGgsXHJcblx0XHRcdFx0XHRcdFx0c2ltaWxhcml0eVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChzaW1pbGFyRmlsZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdGR1cGxpY2F0ZXMucHVzaCh7XHJcblx0XHRcdFx0XHRwYXJhZ3JhcGg6IGkgKyAxLFxyXG5cdFx0XHRcdFx0c2ltaWxhckZpbGVzXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBHZW5lcmF0ZSByZXN1bHRzXHJcblx0XHRpZiAoZHVwbGljYXRlcy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdGR1cGxpY2F0ZXMuZm9yRWFjaCgoeyBwYXJhZ3JhcGgsIHNpbWlsYXJGaWxlcyB9KSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgbWF4U2ltaWxhcml0eSA9IE1hdGgubWF4KC4uLnNpbWlsYXJGaWxlcy5tYXAocyA9PiBzLnNpbWlsYXJpdHkpKTtcclxuXHRcdFx0XHRjb25zdCBmaWxlTGlzdCA9IHNpbWlsYXJGaWxlc1xyXG5cdFx0XHRcdFx0LnNvcnQoKGEsIGIpID0+IGIuc2ltaWxhcml0eSAtIGEuc2ltaWxhcml0eSlcclxuXHRcdFx0XHRcdC5zbGljZSgwLCAzKSAvLyBTaG93IHRvcCAzIG1hdGNoZXNcclxuXHRcdFx0XHRcdC5tYXAocyA9PiBgPGEgaHJlZj1cIiNcIiBkYXRhLWZpbGUtcGF0aD1cIiR7cy5maWxlfVwiIGNsYXNzPVwic2VvLWZpbGUtbGlua1wiPiR7dGhpcy5nZXREaXNwbGF5UGF0aChzLmZpbGUpfTwvYT4gKCR7cy5zaW1pbGFyaXR5LnRvRml4ZWQoMSl9JSlgKVxyXG5cdFx0XHRcdFx0LmpvaW4oJywgJyk7XHJcblxyXG5cdFx0XHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRcdFx0bWVzc2FnZTogYER1cGxpY2F0ZSBjb250ZW50IGRldGVjdGVkIGluIHBhcmFncmFwaCAke3BhcmFncmFwaH1gLFxyXG5cdFx0XHRcdFx0c3VnZ2VzdGlvbjogYFNpbWlsYXJpdHk6ICR7bWF4U2ltaWxhcml0eS50b0ZpeGVkKDEpfSUgd2l0aDogJHtmaWxlTGlzdH1gLFxyXG5cdFx0XHRcdFx0c2V2ZXJpdHk6ICdlcnJvcicsXHJcblx0XHRcdFx0XHRwb3NpdGlvbjoge1xyXG5cdFx0XHRcdFx0XHRsaW5lOiB0aGlzLmZpbmRQYXJhZ3JhcGhMaW5lKGZpbGVNZXRhZGF0YS5jb250ZW50LCBwYXJhZ3JhcGggLSAxKSxcclxuXHRcdFx0XHRcdFx0c2VhcmNoVGV4dDogcGFyYWdyYXBoc1twYXJhZ3JhcGggLSAxXT8uc3Vic3RyaW5nKDAsIDUwKSArICcuLi4nLFxyXG5cdFx0XHRcdFx0XHRjb250ZXh0OiBgUGFyYWdyYXBoICR7cGFyYWdyYXBofSBjb250ZW50YFxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRcdG1lc3NhZ2U6IFwiTm8gZHVwbGljYXRlIGNvbnRlbnQgZGV0ZWN0ZWRcIixcclxuXHRcdFx0XHRzZXZlcml0eTogJ2luZm8nXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiByZXN1bHRzO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU3BsaXQgY29udGVudCBpbnRvIHBhcmFncmFwaHMsIGZpbHRlcmluZyBvdXQgbm9uLWNvbnRlbnQgZWxlbWVudHNcclxuXHQgKi9cclxuXHRwcml2YXRlIHNwbGl0SW50b1BhcmFncmFwaHMoY29udGVudDogc3RyaW5nKTogc3RyaW5nW10ge1xyXG5cdFx0Ly8gVXNlIHRoZSBjb250ZW50IHBhcnNlciB0byByZW1vdmUgY29kZSBibG9ja3MsIEhUTUwsIGFuZCBvdGhlciBub24tY29udGVudFxyXG5cdFx0bGV0IGNsZWFuQ29udGVudCA9IHJlbW92ZUNvZGVCbG9ja3MoY29udGVudCk7XHJcblx0XHRcclxuXHRcdC8vIEFkZGl0aW9uYWwgZmlsdGVyaW5nIGZvciBzdHJ1Y3R1cmFsIGVsZW1lbnRzXHJcblx0XHRjbGVhbkNvbnRlbnQgPSBjbGVhbkNvbnRlbnRcclxuXHRcdFx0LnJlcGxhY2UoL14jezEsNn1cXHMrL2dtLCAnJykgLy8gUmVtb3ZlIGhlYWRpbmcgbWFya2Vyc1xyXG5cdFx0XHQucmVwbGFjZSgvXlxccypbLSorXVxccysvZ20sICcnKSAvLyBSZW1vdmUgbGlzdCBtYXJrZXJzXHJcblx0XHRcdC5yZXBsYWNlKC9eXFxzKlxcZCtcXC5cXHMrL2dtLCAnJykgLy8gUmVtb3ZlIG51bWJlcmVkIGxpc3QgbWFya2Vyc1xyXG5cdFx0XHQucmVwbGFjZSgvXlxccyo+XFxzKi9nbSwgJycpIC8vIFJlbW92ZSBibG9ja3F1b3RlIG1hcmtlcnNcclxuXHRcdFx0LnJlcGxhY2UoL15cXHMqXFx8LipcXHwuKiQvZ20sICcnKSAvLyBSZW1vdmUgdGFibGUgcm93c1xyXG5cdFx0XHQucmVwbGFjZSgvXlxccypcXHwuKiQvZ20sICcnKSAvLyBSZW1vdmUgdGFibGUgc2VwYXJhdG9yc1xyXG5cdFx0XHQucmVwbGFjZSgvXFxbXFxbLio/XFxdXFxdL2csICcnKSAvLyBSZW1vdmUgT2JzaWRpYW4gaW50ZXJuYWwgbGlua3NcclxuXHRcdFx0LnJlcGxhY2UoLyFcXFtcXFsuKj9cXF1cXF0vZywgJycpIC8vIFJlbW92ZSBPYnNpZGlhbiBpbWFnZSBsaW5rc1xyXG5cdFx0XHQucmVwbGFjZSgvXFxbLio/XFxdXFwoLio/XFwpL2csICcnKSAvLyBSZW1vdmUgbWFya2Rvd24gbGlua3NcclxuXHRcdFx0LnJlcGxhY2UoLyFcXFsuKj9cXF1cXCguKj9cXCkvZywgJycpIC8vIFJlbW92ZSBtYXJrZG93biBpbWFnZXNcclxuXHRcdFx0LnJlcGxhY2UoL15cXHMqLS0tXFxzKiQvZ20sICcnKSAvLyBSZW1vdmUgaG9yaXpvbnRhbCBydWxlc1xyXG5cdFx0XHQucmVwbGFjZSgvXlxccypcXCtcXCtcXCtcXHMqJC9nbSwgJycpIC8vIFJlbW92ZSBPYnNpZGlhbiBzcG9pbGVyc1xyXG5cdFx0XHQucmVwbGFjZSgvXlxccyo9PVxccyokL2dtLCAnJykgLy8gUmVtb3ZlIE9ic2lkaWFuIGhpZ2hsaWdodHNcclxuXHRcdFx0LnJlcGxhY2UoL15cXHMqISFcXHMqJC9nbSwgJycpIC8vIFJlbW92ZSBPYnNpZGlhbiBjYWxsb3V0c1xyXG5cdFx0XHQucmVwbGFjZSgvXlxccyo+XFxzKlxcWyEuKj9cXF1cXHMqJC9nbSwgJycpIC8vIFJlbW92ZSBPYnNpZGlhbiBjYWxsb3V0IGhlYWRlcnNcclxuXHRcdFx0LnJlcGxhY2UoL15cXHMqPlxccyokL2dtLCAnJykgLy8gUmVtb3ZlIGVtcHR5IGJsb2NrcXVvdGVzXHJcblx0XHRcdC5yZXBsYWNlKC9eXFxzKiQvZ20sICcnKSAvLyBSZW1vdmUgZW1wdHkgbGluZXNcclxuXHRcdFx0LnRyaW0oKTtcclxuXHRcdFxyXG5cdFx0Ly8gU3BsaXQgaW50byBwYXJhZ3JhcGhzIGFuZCBmaWx0ZXIgb3V0IG5vbi1jb250ZW50XHJcblx0XHRyZXR1cm4gY2xlYW5Db250ZW50XHJcblx0XHRcdC5zcGxpdCgvXFxuXFxzKlxcbi8pXHJcblx0XHRcdC5tYXAocCA9PiBwLnRyaW0oKSlcclxuXHRcdFx0LmZpbHRlcihwID0+IHtcclxuXHRcdFx0XHQvLyBGaWx0ZXIgb3V0IHBhcmFncmFwaHMgdGhhdCBhcmUgdG9vIHNob3J0IG9yIGNvbnRhaW4gb25seSBzdHJ1Y3R1cmFsIGVsZW1lbnRzXHJcblx0XHRcdFx0aWYgKHAubGVuZ3RoIDwgMzApIHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBGaWx0ZXIgb3V0IHBhcmFncmFwaHMgdGhhdCBhcmUgbW9zdGx5IEhUTUwtbGlrZSBjb250ZW50XHJcblx0XHRcdFx0Y29uc3QgaHRtbExpa2VSYXRpbyA9IChwLm1hdGNoKC88W14+XSo+L2cpIHx8IFtdKS5qb2luKCcnKS5sZW5ndGggLyBwLmxlbmd0aDtcclxuXHRcdFx0XHRpZiAoaHRtbExpa2VSYXRpbyA+IDAuMykgcmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIEZpbHRlciBvdXQgcGFyYWdyYXBocyB0aGF0IGFyZSBtb3N0bHkgc3BlY2lhbCBjaGFyYWN0ZXJzIG9yIGZvcm1hdHRpbmdcclxuXHRcdFx0XHRjb25zdCBzcGVjaWFsQ2hhclJhdGlvID0gKHAubWF0Y2goL1teXFx3XFxzLiwhPzs6J1wiKCktXS9nKSB8fCBbXSkubGVuZ3RoIC8gcC5sZW5ndGg7XHJcblx0XHRcdFx0aWYgKHNwZWNpYWxDaGFyUmF0aW8gPiAwLjUpIHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBGaWx0ZXIgb3V0IHBhcmFncmFwaHMgdGhhdCBhcmUgbW9zdGx5IG51bWJlcnMgb3Igc3ltYm9sc1xyXG5cdFx0XHRcdGNvbnN0IHdvcmRSYXRpbyA9IChwLm1hdGNoKC9cXGJcXHcrXFxiL2cpIHx8IFtdKS5sZW5ndGggLyBwLnNwbGl0KC9cXHMrLykubGVuZ3RoO1xyXG5cdFx0XHRcdGlmICh3b3JkUmF0aW8gPCAwLjMpIHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDYWxjdWxhdGUgSmFjY2FyZCBzaW1pbGFyaXR5IGJldHdlZW4gdHdvIHRleHRzXHJcblx0ICovXHJcblx0cHJpdmF0ZSBjYWxjdWxhdGVKYWNjYXJkU2ltaWxhcml0eSh0ZXh0MTogc3RyaW5nLCB0ZXh0Mjogc3RyaW5nKTogbnVtYmVyIHtcclxuXHRcdC8vIE5vcm1hbGl6ZSB0ZXh0IGJ5IHJlbW92aW5nIGV4dHJhIHdoaXRlc3BhY2UgYW5kIGNvbnZlcnRpbmcgdG8gbG93ZXJjYXNlXHJcblx0XHRjb25zdCBub3JtYWxpemUgPSAodGV4dDogc3RyaW5nKSA9PiB0ZXh0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzKy9nLCAnICcpLnRyaW0oKTtcclxuXHRcdFxyXG5cdFx0Y29uc3Qgbm9ybWFsaXplZDEgPSBub3JtYWxpemUodGV4dDEpO1xyXG5cdFx0Y29uc3Qgbm9ybWFsaXplZDIgPSBub3JtYWxpemUodGV4dDIpO1xyXG5cdFx0XHJcblx0XHQvLyBFeHRyYWN0IHdvcmRzLCBmaWx0ZXJpbmcgb3V0IHZlcnkgc2hvcnQgd29yZHMgYW5kIGNvbW1vbiBzdG9wIHdvcmRzXHJcblx0XHRjb25zdCBzdG9wV29yZHMgPSBuZXcgU2V0KFsndGhlJywgJ2FuZCcsICdvcicsICdidXQnLCAnaW4nLCAnb24nLCAnYXQnLCAndG8nLCAnZm9yJywgJ29mJywgJ3dpdGgnLCAnYnknLCAnYScsICdhbicsICdpcycsICdhcmUnLCAnd2FzJywgJ3dlcmUnLCAnYmUnLCAnYmVlbicsICdoYXZlJywgJ2hhcycsICdoYWQnLCAnZG8nLCAnZG9lcycsICdkaWQnLCAnd2lsbCcsICd3b3VsZCcsICdjb3VsZCcsICdzaG91bGQnLCAnbWF5JywgJ21pZ2h0JywgJ2NhbicsICd0aGlzJywgJ3RoYXQnLCAndGhlc2UnLCAndGhvc2UnLCAnaScsICd5b3UnLCAnaGUnLCAnc2hlJywgJ2l0JywgJ3dlJywgJ3RoZXknLCAnbWUnLCAnaGltJywgJ2hlcicsICd1cycsICd0aGVtJ10pO1xyXG5cdFx0XHJcblx0XHRjb25zdCB3b3JkczEgPSBuZXcgU2V0KFxyXG5cdFx0XHRub3JtYWxpemVkMVxyXG5cdFx0XHRcdC5zcGxpdCgvXFxzKy8pXHJcblx0XHRcdFx0LmZpbHRlcih3ID0+IHcubGVuZ3RoID4gMiAmJiAhc3RvcFdvcmRzLmhhcyh3KSlcclxuXHRcdFx0XHQubWFwKHcgPT4gdy5yZXBsYWNlKC9bXlxcd10vZywgJycpKSAvLyBSZW1vdmUgcHVuY3R1YXRpb25cclxuXHRcdFx0XHQuZmlsdGVyKHcgPT4gdy5sZW5ndGggPiAwKVxyXG5cdFx0KTtcclxuXHRcdFxyXG5cdFx0Y29uc3Qgd29yZHMyID0gbmV3IFNldChcclxuXHRcdFx0bm9ybWFsaXplZDJcclxuXHRcdFx0XHQuc3BsaXQoL1xccysvKVxyXG5cdFx0XHRcdC5maWx0ZXIodyA9PiB3Lmxlbmd0aCA+IDIgJiYgIXN0b3BXb3Jkcy5oYXModykpXHJcblx0XHRcdFx0Lm1hcCh3ID0+IHcucmVwbGFjZSgvW15cXHddL2csICcnKSkgLy8gUmVtb3ZlIHB1bmN0dWF0aW9uXHJcblx0XHRcdFx0LmZpbHRlcih3ID0+IHcubGVuZ3RoID4gMClcclxuXHRcdCk7XHJcblx0XHRcclxuXHRcdC8vIElmIGVpdGhlciBzZXQgaXMgZW1wdHksIHJldHVybiAwIHNpbWlsYXJpdHlcclxuXHRcdGlmICh3b3JkczEuc2l6ZSA9PT0gMCB8fCB3b3JkczIuc2l6ZSA9PT0gMCkge1xyXG5cdFx0XHRyZXR1cm4gMDtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Y29uc3QgaW50ZXJzZWN0aW9uID0gbmV3IFNldChbLi4ud29yZHMxXS5maWx0ZXIoeCA9PiB3b3JkczIuaGFzKHgpKSk7XHJcblx0XHRjb25zdCB1bmlvbiA9IG5ldyBTZXQoWy4uLndvcmRzMSwgLi4ud29yZHMyXSk7XHJcblx0XHRcclxuXHRcdHJldHVybiAoaW50ZXJzZWN0aW9uLnNpemUgLyB1bmlvbi5zaXplKSAqIDEwMDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEZpbmQgdGhlIGxpbmUgbnVtYmVyIG9mIGEgcGFyYWdyYXBoIGluIHRoZSBjb250ZW50XHJcblx0ICovXHJcblx0cHJpdmF0ZSBmaW5kUGFyYWdyYXBoTGluZShjb250ZW50OiBzdHJpbmcsIHBhcmFncmFwaEluZGV4OiBudW1iZXIpOiBudW1iZXIge1xyXG5cdFx0Y29uc3QgcGFyYWdyYXBocyA9IHRoaXMuc3BsaXRJbnRvUGFyYWdyYXBocyhjb250ZW50KTtcclxuXHRcdGlmIChwYXJhZ3JhcGhJbmRleCA+PSBwYXJhZ3JhcGhzLmxlbmd0aCkgcmV0dXJuIDE7XHJcblx0XHRcclxuXHRcdGNvbnN0IHRhcmdldFBhcmFncmFwaCA9IHBhcmFncmFwaHNbcGFyYWdyYXBoSW5kZXhdO1xyXG5cdFx0aWYgKCF0YXJnZXRQYXJhZ3JhcGgpIHJldHVybiAxO1xyXG5cdFx0XHJcblx0XHRjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xyXG5cdFx0XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGNvbnN0IGxpbmUgPSBsaW5lc1tpXTtcclxuXHRcdFx0aWYgKGxpbmUgJiYgbGluZS5pbmNsdWRlcyh0YXJnZXRQYXJhZ3JhcGguc3Vic3RyaW5nKDAsIDUwKSkpIHtcclxuXHRcdFx0XHRyZXR1cm4gaSArIDE7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIDE7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZXQgZGlzcGxheSBwYXRoIGZvciBhIGZpbGVcclxuXHQgKi9cclxuXHRwcml2YXRlIGdldERpc3BsYXlQYXRoKGZpbGVQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0Ly8gSWYgd2UgaGF2ZSB2YXVsdCBkYXRhIGFuZCB1c2VOb3RlVGl0bGVzIGlzIGVuYWJsZWQsIHRyeSB0byBnZXQgdGhlIHRpdGxlXHJcblx0XHRpZiAodGhpcy52YXVsdERhdGEgJiYgdGhpcy5zZXR0aW5ncy51c2VOb3RlVGl0bGVzKSB7XHJcblx0XHRcdGNvbnN0IGZpbGVNZXRhZGF0YSA9IHRoaXMudmF1bHREYXRhLmZpbGVzLmdldChmaWxlUGF0aCk7XHJcblx0XHRcdGlmIChmaWxlTWV0YWRhdGEgJiYgZmlsZU1ldGFkYXRhLnRpdGxlKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZpbGVNZXRhZGF0YS50aXRsZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBGYWxsYmFjayB0byBmaWxlbmFtZVxyXG5cdFx0Y29uc3QgcGFydHMgPSBmaWxlUGF0aC5zcGxpdCgnLycpO1xyXG5cdFx0cmV0dXJuIHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdIHx8IGZpbGVQYXRoO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2xlYXIgY2FjaGVkIHZhdWx0IGRhdGFcclxuXHQgKi9cclxuXHRjbGVhckNhY2hlKCk6IHZvaWQge1xyXG5cdFx0dGhpcy52YXVsdERhdGEgPSBudWxsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IGN1cnJlbnQgdmF1bHQgZGF0YVxyXG5cdCAqL1xyXG5cdGdldFZhdWx0RGF0YSgpOiBWYXVsdERhdGEgfCBudWxsIHtcclxuXHRcdHJldHVybiB0aGlzLnZhdWx0RGF0YTtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBTRU9QbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xuaW1wb3J0IHsgU0VPUmVzdWx0cyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBTRU9TZXR0aW5ncyB9IGZyb20gXCIuL3NldHRpbmdzXCI7XG5cbi8vIFNpbXBsZSBjYWNoZSBmb3IgU0VPIHJlc3VsdHNcbmludGVyZmFjZSBDYWNoZUVudHJ5IHtcblx0cmVzdWx0OiBTRU9SZXN1bHRzO1xuXHR0aW1lc3RhbXA6IG51bWJlcjtcblx0ZmlsZUhhc2g6IHN0cmluZztcblx0c2V0dGluZ3NIYXNoOiBzdHJpbmc7XG59XG5cbmNvbnN0IGNhY2hlID0gbmV3IE1hcDxzdHJpbmcsIENhY2hlRW50cnk+KCk7XG5jb25zdCBDQUNIRV9FWFBJUllfTVMgPSAyNCAqIDYwICogNjAgKiAxMDAwOyAvLyAyNCBob3Vyc1xuaW1wb3J0IHtcblx0Y2hlY2tBbHRUZXh0LCBcblx0Y2hlY2tOYWtlZExpbmtzLCBcblx0Y2hlY2tIZWFkaW5nT3JkZXIsIFxuXHRjaGVja0tleXdvcmREZW5zaXR5LFxuXHRjaGVja0Jyb2tlbkxpbmtzLFxuXHRjaGVja0V4dGVybmFsTGlua3MsXG5cdGNoZWNrRXh0ZXJuYWxCcm9rZW5MaW5rcyxcblx0Y2hlY2tQb3RlbnRpYWxseUJyb2tlbkxpbmtzLFxuXHRjaGVja01ldGFEZXNjcmlwdGlvbixcblx0Y2hlY2tUaXRsZUxlbmd0aCxcblx0Y2hlY2tUaXRsZUgxVW5pcXVlbmVzcyxcblx0Y2hlY2tDb250ZW50TGVuZ3RoLFxuXHRjaGVja0ltYWdlTmFtaW5nLFxuXHRjaGVja0R1cGxpY2F0ZUNvbnRlbnQsXG5cdGNoZWNrUmVhZGluZ0xldmVsLFxuXHRjaGVja05vdGljZXMsXG5cdGNoZWNrS2V5d29yZEluVGl0bGUsXG5cdGNoZWNrS2V5d29yZEluRGVzY3JpcHRpb24sXG5cdGNoZWNrS2V5d29yZEluSGVhZGluZ3MsXG5cdGNoZWNrS2V5d29yZEluU2x1Zyxcblx0Y2hlY2tTbHVnRm9ybWF0LFxuXHRnZXREaXNwbGF5TmFtZVxufSBmcm9tIFwiLi9jaGVja3NcIjtcbmltcG9ydCB7IFxuXHRjaGVja0R1cGxpY2F0ZVRpdGxlcywgXG5cdGNoZWNrRHVwbGljYXRlRGVzY3JpcHRpb25zLCBcblx0Y2hlY2tWYXVsdER1cGxpY2F0ZUNvbnRlbnQgXG59IGZyb20gXCIuL2NoZWNrcy9jb250ZW50LWNoZWNrc1wiO1xuaW1wb3J0IHsgVmF1bHREdXBsaWNhdGVEZXRlY3RvciB9IGZyb20gXCIuL2NoZWNrcy9kdXBsaWNhdGUtZGV0ZWN0aW9uXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5TRU9DaGVjayhwbHVnaW46IFNFT1BsdWdpbiwgZmlsZXM6IFRGaWxlW10sIGFib3J0Q29udHJvbGxlcj86IEFib3J0Q29udHJvbGxlcik6IFByb21pc2U8U0VPUmVzdWx0c1tdPiB7XG5cdGNvbnN0IHJlc3VsdHM6IFNFT1Jlc3VsdHNbXSA9IFtdO1xuXHRcblx0Ly8gQ3JlYXRlIHZhdWx0IGRldGVjdG9yIGZvciBkdXBsaWNhdGUgZGV0ZWN0aW9uXG5cdGNvbnN0IHZhdWx0RGV0ZWN0b3IgPSBuZXcgVmF1bHREdXBsaWNhdGVEZXRlY3RvcihwbHVnaW4uYXBwLCBwbHVnaW4uc2V0dGluZ3MpO1xuXHRcblx0Ly8gQ29sbGVjdCB2YXVsdCBkYXRhIGlmIGR1cGxpY2F0ZSBkZXRlY3Rpb24gaXMgZW5hYmxlZFxuXHRpZiAocGx1Z2luLnNldHRpbmdzLmNoZWNrRHVwbGljYXRlQ29udGVudCkge1xuXHRcdGF3YWl0IHZhdWx0RGV0ZWN0b3IuY29sbGVjdFZhdWx0RGF0YSgpO1xuXHR9XG5cdFxuXHRmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcblx0XHQvLyBDaGVjayBmb3IgY2FuY2VsbGF0aW9uIGJlZm9yZSBwcm9jZXNzaW5nIGVhY2ggZmlsZVxuXHRcdGlmIChhYm9ydENvbnRyb2xsZXI/LnNpZ25hbC5hYm9ydGVkKSB7XG5cdFx0XHR0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdPcGVyYXRpb24gd2FzIGFib3J0ZWQnLCAnQWJvcnRFcnJvcicpO1xuXHRcdH1cblx0XHRcblx0XHR0cnkge1xuXHRcdFx0Ly8gQ2hlY2sgY2FjaGUgZmlyc3Rcblx0XHRcdGNvbnN0IGNhY2hlZFJlc3VsdCA9IGdldENhY2hlZFJlc3VsdChmaWxlLCBwbHVnaW4pO1xuXHRcdFx0aWYgKGNhY2hlZFJlc3VsdCkge1xuXHRcdFx0XHRyZXN1bHRzLnB1c2goY2FjaGVkUmVzdWx0KTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIFJ1biBmcmVzaCBjaGVja1xuXHRcdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IHBsdWdpbi5hcHAudmF1bHQucmVhZChmaWxlKTtcblx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNoZWNrRmlsZShwbHVnaW4sIGZpbGUsIGNvbnRlbnQsIHZhdWx0RGV0ZWN0b3IsIGFib3J0Q29udHJvbGxlcik7XG5cdFx0XHRcblx0XHRcdC8vIENhY2hlIHRoZSByZXN1bHRcblx0XHRcdHZvaWQgY2FjaGVSZXN1bHQoZmlsZSwgcmVzdWx0LCBwbHVnaW4pO1xuXHRcdFx0cmVzdWx0cy5wdXNoKHJlc3VsdCk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuXHRcdFx0XHR0aHJvdyBlcnJvcjsgLy8gUmUtdGhyb3cgQWJvcnRFcnJvciB0byBwcm9wYWdhdGUgY2FuY2VsbGF0aW9uXG5cdFx0XHR9XG5cdFx0XHRjb25zb2xlLmVycm9yKGBFcnJvciBjaGVja2luZyBmaWxlICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XG5cdFx0fVxuXHR9XG5cdFxuXHQvLyBEb24ndCBzaG93IG5vdGlmaWNhdGlvbiBoZXJlIC0gbGV0IHRoZSBjYWxsaW5nIGNvZGUgaGFuZGxlIGl0XG5cdHJldHVybiByZXN1bHRzO1xufVxuXG5hc3luYyBmdW5jdGlvbiBjaGVja0ZpbGUocGx1Z2luOiBTRU9QbHVnaW4sIGZpbGU6IFRGaWxlLCBjb250ZW50OiBzdHJpbmcsIHZhdWx0RGV0ZWN0b3I6IFZhdWx0RHVwbGljYXRlRGV0ZWN0b3IsIGFib3J0Q29udHJvbGxlcj86IEFib3J0Q29udHJvbGxlcik6IFByb21pc2U8U0VPUmVzdWx0cz4ge1xuXHRjb25zdCBjaGVja3MgPSB7XG5cdFx0dGl0bGVMZW5ndGg6IGF3YWl0IGNoZWNrVGl0bGVMZW5ndGgoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKSxcblx0XHRtZXRhRGVzY3JpcHRpb246IGF3YWl0IGNoZWNrTWV0YURlc2NyaXB0aW9uKGNvbnRlbnQsIGZpbGUsIHBsdWdpbi5zZXR0aW5ncyksXG5cdFx0dGl0bGVIMVVuaXF1ZW5lc3M6IGF3YWl0IGNoZWNrVGl0bGVIMVVuaXF1ZW5lc3MoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKSxcblx0XHRrZXl3b3JkSW5UaXRsZTogYXdhaXQgY2hlY2tLZXl3b3JkSW5UaXRsZShjb250ZW50LCBmaWxlLCBwbHVnaW4uc2V0dGluZ3MpLFxuXHRcdGtleXdvcmRJbkRlc2NyaXB0aW9uOiBhd2FpdCBjaGVja0tleXdvcmRJbkRlc2NyaXB0aW9uKGNvbnRlbnQsIGZpbGUsIHBsdWdpbi5zZXR0aW5ncyksXG5cdFx0a2V5d29yZEluSGVhZGluZ3M6IGF3YWl0IGNoZWNrS2V5d29yZEluSGVhZGluZ3MoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKSxcblx0XHRrZXl3b3JkSW5TbHVnOiBhd2FpdCBjaGVja0tleXdvcmRJblNsdWcoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKSxcblx0XHRzbHVnRm9ybWF0OiBhd2FpdCBjaGVja1NsdWdGb3JtYXQoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKSxcblx0XHRrZXl3b3JkRGVuc2l0eTogYXdhaXQgY2hlY2tLZXl3b3JkRGVuc2l0eShjb250ZW50LCBmaWxlLCBwbHVnaW4uc2V0dGluZ3MpLFxuXHRcdGhlYWRpbmdPcmRlcjogYXdhaXQgY2hlY2tIZWFkaW5nT3JkZXIoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKSxcblx0XHRjb250ZW50TGVuZ3RoOiBhd2FpdCBjaGVja0NvbnRlbnRMZW5ndGgoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKSxcblx0XHRkdXBsaWNhdGVUaXRsZXM6IGF3YWl0IGNoZWNrRHVwbGljYXRlVGl0bGVzKGNvbnRlbnQsIGZpbGUsIHBsdWdpbi5zZXR0aW5ncywgdmF1bHREZXRlY3RvciksXG5cdFx0ZHVwbGljYXRlRGVzY3JpcHRpb25zOiBhd2FpdCBjaGVja0R1cGxpY2F0ZURlc2NyaXB0aW9ucyhjb250ZW50LCBmaWxlLCBwbHVnaW4uc2V0dGluZ3MsIHZhdWx0RGV0ZWN0b3IpLFxuXHRcdGR1cGxpY2F0ZUNvbnRlbnQ6IHBsdWdpbi5zZXR0aW5ncy5jaGVja0R1cGxpY2F0ZUNvbnRlbnQgXG5cdFx0XHQ/IGF3YWl0IGNoZWNrVmF1bHREdXBsaWNhdGVDb250ZW50KGNvbnRlbnQsIGZpbGUsIHBsdWdpbi5zZXR0aW5ncywgdmF1bHREZXRlY3Rvcilcblx0XHRcdDogYXdhaXQgY2hlY2tEdXBsaWNhdGVDb250ZW50KGNvbnRlbnQsIGZpbGUsIHBsdWdpbi5zZXR0aW5ncyksXG5cdFx0YWx0VGV4dDogYXdhaXQgY2hlY2tBbHRUZXh0KGNvbnRlbnQsIGZpbGUsIHBsdWdpbi5zZXR0aW5ncyksXG5cdFx0aW1hZ2VGaWxlTmFtZXM6IGF3YWl0IGNoZWNrSW1hZ2VOYW1pbmcoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKSxcblx0XHRuYWtlZExpbmtzOiBhd2FpdCBjaGVja05ha2VkTGlua3MoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKSxcblx0XHRicm9rZW5MaW5rczogYXdhaXQgY2hlY2tCcm9rZW5MaW5rcyhjb250ZW50LCBmaWxlLCBwbHVnaW4uc2V0dGluZ3MsIHBsdWdpbi5hcHApLFxuXHRcdHBvdGVudGlhbGx5QnJva2VuTGlua3M6IGF3YWl0IGNoZWNrUG90ZW50aWFsbHlCcm9rZW5MaW5rcyhjb250ZW50LCBmaWxlLCBwbHVnaW4uc2V0dGluZ3MsIHBsdWdpbi5hcHApLFxuXHRcdHBvdGVudGlhbGx5QnJva2VuRW1iZWRzOiBhd2FpdCBjaGVja05vdGljZXMoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKSxcblx0XHRleHRlcm5hbEJyb2tlbkxpbmtzOiBwbHVnaW4uc2V0dGluZ3MuZW5hYmxlRXh0ZXJuYWxMaW5rVmF1bHRDaGVjayBcblx0XHRcdD8gYXdhaXQgY2hlY2tFeHRlcm5hbEJyb2tlbkxpbmtzKGNvbnRlbnQsIGZpbGUsIHBsdWdpbi5zZXR0aW5ncywgYWJvcnRDb250cm9sbGVyKVxuXHRcdFx0OiAocGx1Z2luLnNldHRpbmdzLmNoZWNrRXh0ZXJuYWxMaW5rcyA/IGF3YWl0IGNoZWNrRXh0ZXJuYWxMaW5rcyhjb250ZW50LCBmaWxlLCBwbHVnaW4uc2V0dGluZ3MpIDogW10pLFxuXHRcdHJlYWRpbmdMZXZlbDogYXdhaXQgY2hlY2tSZWFkaW5nTGV2ZWwoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKVxuXHR9O1xuXG5cdC8vIENhbGN1bGF0ZSBvdmVyYWxsIHNjb3JlIGFuZCBjb3VudHNcblx0Y29uc3QgYWxsUmVzdWx0cyA9IE9iamVjdC52YWx1ZXMoY2hlY2tzKS5mbGF0KCk7XG5cdGNvbnN0IGlzc3Vlc0NvdW50ID0gYWxsUmVzdWx0cy5maWx0ZXIociA9PiByLnNldmVyaXR5ID09PSAnZXJyb3InKS5sZW5ndGg7XG5cdGNvbnN0IHdhcm5pbmdzQ291bnQgPSBhbGxSZXN1bHRzLmZpbHRlcihyID0+IHIuc2V2ZXJpdHkgPT09ICd3YXJuaW5nJykubGVuZ3RoO1xuXHRjb25zdCBub3RpY2VzQ291bnQgPSBhbGxSZXN1bHRzLmZpbHRlcihyID0+IHIuc2V2ZXJpdHkgPT09ICdub3RpY2UnKS5sZW5ndGg7XG5cdFxuXHQvLyBJbXByb3ZlZCBTRU8gc2NvcmluZyBzeXN0ZW0gd2l0aCB3ZWlnaHRlZCBjaGVja3MgYW5kIG5vIGRvdWJsZSBwZW5hbHRpZXNcblx0bGV0IG92ZXJhbGxTY29yZTogbnVtYmVyO1xuXHRcblx0aWYgKGFsbFJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG5cdFx0b3ZlcmFsbFNjb3JlID0gMTAwO1xuXHR9IGVsc2Uge1xuXHRcdC8vIENhbGN1bGF0ZSB3ZWlnaHRlZCBiYXNlIHNjb3JlIChubyBkb3VibGUgcGVuYWx0aWVzKVxuXHRcdGxldCB3ZWlnaHRlZFNjb3JlID0gMDtcblx0XHRsZXQgdG90YWxXZWlnaHQgPSAwO1xuXHRcdFxuXHRcdC8vIFdlaWdodCBjaGVja3MgYnkgU0VPIGltcG9ydGFuY2UgKGV4Y2x1ZGUgbm90aWNlcyBmcm9tIHNjb3JpbmcpXG5cdFx0YWxsUmVzdWx0cy5mb3JFYWNoKHJlc3VsdCA9PiB7XG5cdFx0XHQvLyBTa2lwIG5vdGljZXMgLSB0aGV5IGRvbid0IGFmZmVjdCB0aGUgc2NvcmVcblx0XHRcdGlmIChyZXN1bHQuc2V2ZXJpdHkgPT09ICdub3RpY2UnKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0bGV0IHdlaWdodCA9IDE7IC8vIERlZmF1bHQgd2VpZ2h0XG5cdFx0XHRsZXQgcG9pbnRzID0gMDtcblx0XHRcdFxuXHRcdFx0Ly8gQ3JpdGljYWwgU0VPIGZhY3RvcnMgKDEweCB3ZWlnaHQpXG5cdFx0XHRpZiAocmVzdWx0Lm1lc3NhZ2UuaW5jbHVkZXMoJ0Jyb2tlbiBsaW5rJykgJiYgIXJlc3VsdC5wYXNzZWQpIHtcblx0XHRcdFx0d2VpZ2h0ID0gMTA7XG5cdFx0XHRcdHBvaW50cyA9IDA7IC8vIE1ham9yIHBlbmFsdHkgZm9yIGJyb2tlbiBsaW5rc1xuXHRcdFx0fSBlbHNlIGlmIChyZXN1bHQubWVzc2FnZS5pbmNsdWRlcygndGl0bGUnKSAmJiAhcmVzdWx0LnBhc3NlZCAmJiByZXN1bHQubWVzc2FnZS5pbmNsdWRlcygnTm8gcHJvcGVydGllcycpKSB7XG5cdFx0XHRcdHdlaWdodCA9IDEwO1xuXHRcdFx0XHRwb2ludHMgPSAwOyAvLyBNYWpvciBwZW5hbHR5IGZvciBtaXNzaW5nIHRpdGxlcyBlbnRpcmVseVxuXHRcdFx0fVxuXHRcdFx0Ly8gSW1wb3J0YW50IFNFTyBmYWN0b3JzICg1eCB3ZWlnaHQpXG5cdFx0XHRlbHNlIGlmIChyZXN1bHQubWVzc2FnZS5pbmNsdWRlcygnYWx0IHRleHQnKSAmJiAhcmVzdWx0LnBhc3NlZCkge1xuXHRcdFx0XHR3ZWlnaHQgPSA1O1xuXHRcdFx0XHRwb2ludHMgPSAwOyAvLyBTaWduaWZpY2FudCBwZW5hbHR5IGZvciBtaXNzaW5nIGFsdCB0ZXh0XG5cdFx0XHR9IGVsc2UgaWYgKHJlc3VsdC5tZXNzYWdlLmluY2x1ZGVzKCdtZXRhIGRlc2NyaXB0aW9uJykgJiYgIXJlc3VsdC5wYXNzZWQpIHtcblx0XHRcdFx0d2VpZ2h0ID0gNTtcblx0XHRcdFx0cG9pbnRzID0gMDsgLy8gU2lnbmlmaWNhbnQgcGVuYWx0eSBmb3IgbWlzc2luZyBtZXRhIGRlc2NyaXB0aW9uXG5cdFx0XHR9XG5cdFx0XHQvLyBDcml0aWNhbCBrZXl3b3JkIGZhY3RvcnMgKDh4IHdlaWdodCkgLSBrZXl3b3JkcyBhcmUgZXh0cmVtZWx5IGltcG9ydGFudCBmb3IgU0VPXG5cdFx0XHQvLyBPbmx5IGFwcGx5IGhpZ2ggd2VpZ2h0IHRvIGFjdHVhbCBrZXl3b3JkIG9wdGltaXphdGlvbiBmYWlsdXJlcywgbm90IG1pc3Npbmcga2V5d29yZCBkZWZpbml0aW9uc1xuXHRcdFx0ZWxzZSBpZiAocmVzdWx0Lm1lc3NhZ2UuaW5jbHVkZXMoJ2tleXdvcmQnKSAmJiAhcmVzdWx0LnBhc3NlZCAmJiBcblx0XHRcdFx0KHJlc3VsdC5tZXNzYWdlLmluY2x1ZGVzKCdkZW5zaXR5JykgfHwgcmVzdWx0Lm1lc3NhZ2UuaW5jbHVkZXMoJ25vdCBmb3VuZCBpbiB0aXRsZScpIHx8IHJlc3VsdC5tZXNzYWdlLmluY2x1ZGVzKCdub3QgZm91bmQgaW4gc2x1ZycpKSkge1xuXHRcdFx0XHR3ZWlnaHQgPSA4O1xuXHRcdFx0XHRwb2ludHMgPSAwOyAvLyBIaWdoIHBlbmFsdHkgZm9yIGtleXdvcmQgb3B0aW1pemF0aW9uIGlzc3Vlc1xuXHRcdFx0fVxuXHRcdFx0Ly8gTW9kZXJhdGUgU0VPIGZhY3RvcnMgKDN4IHdlaWdodClcblx0XHRcdGVsc2UgaWYgKHJlc3VsdC5tZXNzYWdlLmluY2x1ZGVzKCdjb250ZW50IGxlbmd0aCcpICYmICFyZXN1bHQucGFzc2VkKSB7XG5cdFx0XHRcdHdlaWdodCA9IDM7XG5cdFx0XHRcdHBvaW50cyA9IDA7IC8vIE1vZGVyYXRlIHBlbmFsdHkgZm9yIGNvbnRlbnQgaXNzdWVzXG5cdFx0XHR9XG5cdFx0XHQvLyBNaW5vci1Nb2RlcmF0ZSBTRU8gZmFjdG9ycyAoMnggd2VpZ2h0KSAtIHRpdGxlIGxlbmd0aCBpc3N1ZXNcblx0XHRcdGVsc2UgaWYgKHJlc3VsdC5tZXNzYWdlLmluY2x1ZGVzKCd0aXRsZScpICYmICFyZXN1bHQucGFzc2VkICYmIChyZXN1bHQubWVzc2FnZS5pbmNsdWRlcygndG9vIHNob3J0JykgfHwgcmVzdWx0Lm1lc3NhZ2UuaW5jbHVkZXMoJ3RvbyBsb25nJykpKSB7XG5cdFx0XHRcdHdlaWdodCA9IDI7XG5cdFx0XHRcdHBvaW50cyA9IDA7IC8vIE1pbm9yLW1vZGVyYXRlIHBlbmFsdHkgZm9yIHRpdGxlIGxlbmd0aCBpc3N1ZXNcblx0XHRcdH1cblx0XHRcdC8vIE1pbm9yIFNFTyBmYWN0b3JzICgxeCB3ZWlnaHQpIC0gcmVhZGluZyBsZXZlbCBtb3ZlZCBoZXJlIGFzIGl0J3MgbGVzcyBjcml0aWNhbFxuXHRcdFx0ZWxzZSBpZiAocmVzdWx0Lm1lc3NhZ2UuaW5jbHVkZXMoJ3JlYWRpbmcgbGV2ZWwnKSAmJiAhcmVzdWx0LnBhc3NlZCkge1xuXHRcdFx0XHR3ZWlnaHQgPSAxO1xuXHRcdFx0XHRwb2ludHMgPSAwOyAvLyBNaW5vciBwZW5hbHR5IGZvciByZWFkYWJpbGl0eSBpc3N1ZXNcblx0XHRcdH1cblx0XHRcdC8vIE90aGVyIG1pbm9yIFNFTyBmYWN0b3JzICgxeCB3ZWlnaHQpXG5cdFx0XHRlbHNlIGlmIChyZXN1bHQuc2V2ZXJpdHkgPT09ICd3YXJuaW5nJyAmJiAhcmVzdWx0LnBhc3NlZCkge1xuXHRcdFx0XHR3ZWlnaHQgPSAxO1xuXHRcdFx0XHRwb2ludHMgPSAwOyAvLyBNaW5vciBwZW5hbHR5IGZvciB3YXJuaW5nc1xuXHRcdFx0fVxuXHRcdFx0Ly8gUGFzc2VkIGNoZWNrcyBnZXQgZnVsbCBwb2ludHNcblx0XHRcdGVsc2UgaWYgKHJlc3VsdC5wYXNzZWQpIHtcblx0XHRcdFx0cG9pbnRzID0gMTAwOyAvLyBGdWxsIHBvaW50cyBmb3IgcGFzc2VkIGNoZWNrc1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHR3ZWlnaHRlZFNjb3JlICs9IHBvaW50cyAqIHdlaWdodDtcblx0XHRcdHRvdGFsV2VpZ2h0ICs9IHdlaWdodDtcblx0XHR9KTtcblx0XHRcblx0XHQvLyBDYWxjdWxhdGUgYmFzZSBzY29yZSBmcm9tIHdlaWdodGVkIGF2ZXJhZ2Vcblx0XHRjb25zdCBiYXNlU2NvcmUgPSB0b3RhbFdlaWdodCA+IDAgPyB3ZWlnaHRlZFNjb3JlIC8gdG90YWxXZWlnaHQgOiAxMDA7XG5cdFx0XG5cdFx0Ly8gQXBwbHkgYWRkaXRpb25hbCBwZW5hbHRpZXMgZm9yIGNyaXRpY2FsIGlzc3VlcyAoYnV0IG5vdCBkb3VibGUtY291bnRpbmcpXG5cdFx0bGV0IGFkZGl0aW9uYWxQZW5hbHR5ID0gMDtcblx0XHRcblx0XHQvLyBCcm9rZW4gbGlua3M6IGFkZGl0aW9uYWwgMiBwb2ludHMgZWFjaCAoYmV5b25kIHRoZSB3ZWlnaHQgcGVuYWx0eSlcblx0XHRjb25zdCBicm9rZW5MaW5rcyA9IGFsbFJlc3VsdHMuZmlsdGVyKHIgPT4gXG5cdFx0XHRyLnNldmVyaXR5ID09PSAnZXJyb3InICYmICFyLnBhc3NlZCAmJiByLm1lc3NhZ2UuaW5jbHVkZXMoJ0Jyb2tlbiBsaW5rJylcblx0XHQpLmxlbmd0aDtcblx0XHRhZGRpdGlvbmFsUGVuYWx0eSArPSBNYXRoLm1pbihicm9rZW5MaW5rcyAqIDIsIDEwKTtcblx0XHRcblx0XHQvLyBNaXNzaW5nIGFsdCB0ZXh0OiBhZGRpdGlvbmFsIDEgcG9pbnQgZWFjaFxuXHRcdGNvbnN0IG1pc3NpbmdBbHRUZXh0ID0gYWxsUmVzdWx0cy5maWx0ZXIociA9PiBcblx0XHRcdHIuc2V2ZXJpdHkgPT09ICdlcnJvcicgJiYgIXIucGFzc2VkICYmIHIubWVzc2FnZS5pbmNsdWRlcygnYWx0IHRleHQnKVxuXHRcdCkubGVuZ3RoO1xuXHRcdGFkZGl0aW9uYWxQZW5hbHR5ICs9IE1hdGgubWluKG1pc3NpbmdBbHRUZXh0ICogMSwgNSk7XG5cdFx0XG5cdFx0Ly8gV2FybmluZ3M6IDAuNSBwb2ludHMgZWFjaCAobWlub3IgaW1wYWN0KVxuXHRcdGNvbnN0IHdhcm5pbmdzID0gYWxsUmVzdWx0cy5maWx0ZXIociA9PiByLnNldmVyaXR5ID09PSAnd2FybmluZycgJiYgIXIucGFzc2VkKS5sZW5ndGg7XG5cdFx0YWRkaXRpb25hbFBlbmFsdHkgKz0gTWF0aC5taW4od2FybmluZ3MgKiAwLjUsIDUpO1xuXHRcdFxuXHRcdC8vIEFwcGx5IHBlbmFsdGllcyB3aXRoIHJlYXNvbmFibGUgY2Fwc1xuXHRcdGFkZGl0aW9uYWxQZW5hbHR5ID0gTWF0aC5taW4oYWRkaXRpb25hbFBlbmFsdHksIDIwKTtcblx0XHRcblx0XHQvLyBDYWxjdWxhdGUgZmluYWwgc2NvcmVcblx0XHRvdmVyYWxsU2NvcmUgPSBNYXRoLm1heCg0MCwgTWF0aC5taW4oMTAwLCBiYXNlU2NvcmUgLSBhZGRpdGlvbmFsUGVuYWx0eSkpO1xuXHR9XG5cblx0cmV0dXJuIHtcblx0XHRmaWxlOiBmaWxlLnBhdGgsXG5cdFx0ZGlzcGxheU5hbWU6IGdldERpc3BsYXlOYW1lKGZpbGUsIGNvbnRlbnQsIHBsdWdpbi5zZXR0aW5ncyksXG5cdFx0Y2hlY2tzLFxuXHRcdG92ZXJhbGxTY29yZSxcblx0XHRpc3N1ZXNDb3VudCxcblx0XHR3YXJuaW5nc0NvdW50LFxuXHRcdG5vdGljZXNDb3VudFxuXHR9O1xufVxuXG4vLyBDYWNoZSBoZWxwZXIgZnVuY3Rpb25zXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUZpbGVIYXNoKGZpbGU6IFRGaWxlLCBhcHA6IEFwcCk6IFByb21pc2U8c3RyaW5nPiB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXHRcdGNvbnN0IHN0YXQgPSBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci5zdGF0KGZpbGUucGF0aCk7XG5cdFx0Ly8gU2ltcGxlIGhhc2ggY29tYmluaW5nIGNvbnRlbnQgbGVuZ3RoIGFuZCBtb2RpZmljYXRpb24gdGltZVxuXHRcdHJldHVybiBgJHtjb250ZW50Lmxlbmd0aH0tJHtzdGF0Py5tdGltZSB8fCBEYXRlLm5vdygpfWA7XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiBgJHtEYXRlLm5vdygpfWA7IC8vIEZhbGxiYWNrIHRvIHRpbWVzdGFtcFxuXHR9XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlU2V0dGluZ3NIYXNoKHNldHRpbmdzOiBTRU9TZXR0aW5ncyk6IHN0cmluZyB7XG5cdC8vIENyZWF0ZSBhIGhhc2ggb2YgdGhlIHNldHRpbmdzIHRoYXQgYWZmZWN0IFNFTyBjaGVja3Ncblx0Ly8gVGhpcyBpbmNsdWRlcyBhbGwgc2V0dGluZ3MgdGhhdCBjb3VsZCBjaGFuZ2UgdGhlIHJlc3VsdHNcblx0Y29uc3QgcmVsZXZhbnRTZXR0aW5ncyA9IHtcblx0XHRrZXl3b3JkUHJvcGVydHk6IHNldHRpbmdzLmtleXdvcmRQcm9wZXJ0eSB8fCAnJyxcblx0XHRrZXl3b3JkRGVuc2l0eU1pbjogc2V0dGluZ3Mua2V5d29yZERlbnNpdHlNaW4sXG5cdFx0a2V5d29yZERlbnNpdHlNYXg6IHNldHRpbmdzLmtleXdvcmREZW5zaXR5TWF4LFxuXHRcdGRlc2NyaXB0aW9uUHJvcGVydHk6IHNldHRpbmdzLmRlc2NyaXB0aW9uUHJvcGVydHkgfHwgJycsXG5cdFx0dGl0bGVQcm9wZXJ0eTogc2V0dGluZ3MudGl0bGVQcm9wZXJ0eSB8fCAnJyxcblx0XHR1c2VGaWxlbmFtZUFzVGl0bGU6IHNldHRpbmdzLnVzZUZpbGVuYW1lQXNUaXRsZSxcblx0XHRjaGVja0NvbnRlbnRMZW5ndGg6IHNldHRpbmdzLmNoZWNrQ29udGVudExlbmd0aCxcblx0XHRtaW5Db250ZW50TGVuZ3RoOiBzZXR0aW5ncy5taW5Db250ZW50TGVuZ3RoLFxuXHRcdHNjYW5EaXJlY3Rvcmllczogc2V0dGluZ3Muc2NhbkRpcmVjdG9yaWVzIHx8ICcnLFxuXHRcdGVuYWJsZU1EWFN1cHBvcnQ6IHNldHRpbmdzLmVuYWJsZU1EWFN1cHBvcnQsXG5cdFx0Ly8gRXh0ZXJuYWwgbGluayBjaGVja2luZyBzZXR0aW5nc1xuXHRcdGNoZWNrRXh0ZXJuYWxMaW5rczogc2V0dGluZ3MuY2hlY2tFeHRlcm5hbExpbmtzLFxuXHRcdGVuYWJsZUV4dGVybmFsTGlua1ZhdWx0Q2hlY2s6IHNldHRpbmdzLmVuYWJsZUV4dGVybmFsTGlua1ZhdWx0Q2hlY2ssXG5cdFx0Y2hlY2tQb3RlbnRpYWxseUJyb2tlbkxpbmtzOiBzZXR0aW5ncy5jaGVja1BvdGVudGlhbGx5QnJva2VuTGlua3MsXG5cdFx0Y2hlY2tQb3RlbnRpYWxseUJyb2tlbkVtYmVkczogc2V0dGluZ3MuY2hlY2tQb3RlbnRpYWxseUJyb2tlbkVtYmVkcyxcblx0XHQvLyBPdGhlciBTRU8gY2hlY2sgc2V0dGluZ3Ncblx0XHRjaGVja0FsdFRleHQ6IHNldHRpbmdzLmNoZWNrQWx0VGV4dCxcblx0XHRjaGVja0Jyb2tlbkxpbmtzOiBzZXR0aW5ncy5jaGVja0Jyb2tlbkxpbmtzLFxuXHRcdGNoZWNrTmFrZWRMaW5rczogc2V0dGluZ3MuY2hlY2tOYWtlZExpbmtzLFxuXHRcdGNoZWNrSGVhZGluZ09yZGVyOiBzZXR0aW5ncy5jaGVja0hlYWRpbmdPcmRlcixcblx0XHRjaGVja1RpdGxlTGVuZ3RoOiBzZXR0aW5ncy5jaGVja1RpdGxlTGVuZ3RoLFxuXHRcdGNoZWNrSW1hZ2VOYW1pbmc6IHNldHRpbmdzLmNoZWNrSW1hZ2VOYW1pbmcsXG5cdFx0Y2hlY2tEdXBsaWNhdGVDb250ZW50OiBzZXR0aW5ncy5jaGVja0R1cGxpY2F0ZUNvbnRlbnQsXG5cdFx0Y2hlY2tSZWFkaW5nTGV2ZWw6IHNldHRpbmdzLmNoZWNrUmVhZGluZ0xldmVsLFxuXHRcdC8vIFRocmVzaG9sZHMgdGhhdCBhZmZlY3QgcmVzdWx0c1xuXHRcdGR1cGxpY2F0ZVRocmVzaG9sZDogc2V0dGluZ3MuZHVwbGljYXRlVGhyZXNob2xkLFxuXHRcdC8vIEFkZCBvdGhlciBzZXR0aW5ncyB0aGF0IGFmZmVjdCBTRU8gcmVzdWx0c1xuXHR9O1xuXHRcblx0Ly8gU2ltcGxlIGhhc2ggb2YgdGhlIHNldHRpbmdzIG9iamVjdFxuXHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkocmVsZXZhbnRTZXR0aW5ncyk7XG59XG5cbmZ1bmN0aW9uIGdldENhY2hlZFJlc3VsdChmaWxlOiBURmlsZSwgcGx1Z2luOiBTRU9QbHVnaW4pOiBTRU9SZXN1bHRzIHwgbnVsbCB7XG5cdGNvbnN0IGVudHJ5ID0gY2FjaGUuZ2V0KGZpbGUucGF0aCk7XG5cdGlmICghZW50cnkpIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXHRcblx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblx0Y29uc3QgaXNFeHBpcmVkID0gKG5vdyAtIGVudHJ5LnRpbWVzdGFtcCkgPiBDQUNIRV9FWFBJUllfTVM7XG5cdFxuXHQvLyBDaGVjayBpZiBzZXR0aW5ncyBoYXZlIGNoYW5nZWRcblx0Y29uc3QgY3VycmVudFNldHRpbmdzSGFzaCA9IGdlbmVyYXRlU2V0dGluZ3NIYXNoKHBsdWdpbi5zZXR0aW5ncyk7XG5cdGNvbnN0IHNldHRpbmdzQ2hhbmdlZCA9IGVudHJ5LnNldHRpbmdzSGFzaCAhPT0gY3VycmVudFNldHRpbmdzSGFzaDtcblx0XG5cdGlmIChpc0V4cGlyZWQgfHwgc2V0dGluZ3NDaGFuZ2VkKSB7XG5cdFx0Ly8gUmVtb3ZlIGV4cGlyZWQgb3IgaW52YWxpZGF0ZWQgZW50cnlcblx0XHRjYWNoZS5kZWxldGUoZmlsZS5wYXRoKTtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXHRcblx0cmV0dXJuIGVudHJ5LnJlc3VsdDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY2FjaGVSZXN1bHQoZmlsZTogVEZpbGUsIHJlc3VsdDogU0VPUmVzdWx0cywgcGx1Z2luOiBTRU9QbHVnaW4pOiBQcm9taXNlPHZvaWQ+IHtcblx0Y29uc3QgZmlsZUhhc2ggPSBhd2FpdCBnZW5lcmF0ZUZpbGVIYXNoKGZpbGUsIHBsdWdpbi5hcHApO1xuXHRjb25zdCBzZXR0aW5nc0hhc2ggPSBnZW5lcmF0ZVNldHRpbmdzSGFzaChwbHVnaW4uc2V0dGluZ3MpO1xuXHRjYWNoZS5zZXQoZmlsZS5wYXRoLCB7XG5cdFx0cmVzdWx0LFxuXHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcblx0XHRmaWxlSGFzaCxcblx0XHRzZXR0aW5nc0hhc2hcblx0fSk7XG59XG5cbi8vIEV4cG9ydCBjYWNoZSBtYW5hZ2VtZW50IGZ1bmN0aW9uc1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyQ2FjaGUoKTogdm9pZCB7XG5cdGNhY2hlLmNsZWFyKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDYWNoZVN0YXRzKCk6IHsgc2l6ZTogbnVtYmVyIH0ge1xuXHRyZXR1cm4geyBzaXplOiBjYWNoZS5zaXplIH07XG59XG5cbi8vIENsZWFyIGNhY2hlIGZvciBhIHNwZWNpZmljIGZpbGUgKHVzZWZ1bCB3aGVuIHNldHRpbmdzIGNoYW5nZSlcbmV4cG9ydCBmdW5jdGlvbiBjbGVhckNhY2hlRm9yRmlsZShmaWxlUGF0aDogc3RyaW5nKTogdm9pZCB7XG5cdGNhY2hlLmRlbGV0ZShmaWxlUGF0aCk7XG59XG5cbi8vIENsZWFyIGNhY2hlIGZvciBhbGwgZmlsZXMgKHVzZWZ1bCB3aGVuIGdsb2JhbCBzZXR0aW5ncyBjaGFuZ2UpXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJBbGxDYWNoZSgpOiB2b2lkIHtcblx0Y2FjaGUuY2xlYXIoKTtcbn1cbiIsICJpbXBvcnQgeyBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IFNFT1NldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcbmltcG9ydCB7IHJlZ2lzdGVyQ29tbWFuZHMgfSBmcm9tIFwiLi9jb21tYW5kc1wiO1xuaW1wb3J0IHsgU0VPU2V0dGluZ1RhYiB9IGZyb20gXCIuL3NldHRpbmdzLXRhYlwiO1xuaW1wb3J0IHsgU0VPU2lkZVBhbmVsIH0gZnJvbSBcIi4vdWkvc2lkZS1wYW5lbFwiO1xuaW1wb3J0IHsgU0VPQ3VycmVudFBhbmVsVmlld1R5cGUsIFNFT0dsb2JhbFBhbmVsVmlld1R5cGUgfSBmcm9tIFwiLi91aS9wYW5lbC1jb25zdGFudHNcIjtcbmltcG9ydCB7IFBhbmVsTWFuYWdlciB9IGZyb20gXCIuL3VpL3BhbmVsLW1hbmFnZXJcIjtcbmltcG9ydCB7IGhhbmRsZUVycm9yLCB3aXRoRXJyb3JIYW5kbGluZywgdmFsaWRhdGVSZXF1aXJlZFBhcmFtcyB9IGZyb20gXCIuL3V0aWxzL2Vycm9yLWhhbmRsZXJcIjtcbmltcG9ydCB7IHNlb0NhY2hlLCBjbGVhckFsbENhY2hlIH0gZnJvbSBcIi4vdXRpbHMvY2FjaGUtbWFuYWdlclwiO1xuaW1wb3J0IHsgUGFuZWxBY3Rpb25zIH0gZnJvbSBcIi4vdWkvcGFuZWwtYWN0aW9uc1wiO1xuXG4vKipcbiAqIE1haW4gU0VPIFBsdWdpbiBjbGFzcyBmb3IgT2JzaWRpYW5cbiAqIFByb3ZpZGVzIFNFTyBhdWRpdGluZyBjYXBhYmlsaXRpZXMgZm9yIG1hcmtkb3duIG5vdGVzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNFT1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzITogU0VPU2V0dGluZ3M7XG5cdHByaXZhdGUgcGFuZWxNYW5hZ2VyOiBQYW5lbE1hbmFnZXIgfCBudWxsID0gbnVsbDtcblx0cHVibGljIHNpZGVQYW5lbDogU0VPU2lkZVBhbmVsIHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgcmliYm9uSWNvbjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblxuXHQvKipcblx0ICogUGx1Z2luIGluaXRpYWxpemF0aW9uIC0gY2FsbGVkIHdoZW4gdGhlIHBsdWdpbiBpcyBsb2FkZWRcblx0ICogU2V0cyB1cCBtYW5hZ2VycywgcmVnaXN0ZXJzIHZpZXdzLCBhbmQgY29tbWFuZHNcblx0ICovXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdFx0Ly8gVmFsaWRhdGUgcmVxdWlyZWQgcGFyYW1ldGVyc1xuXHRcdFx0dmFsaWRhdGVSZXF1aXJlZFBhcmFtcyhcblx0XHRcdFx0eyBhcHA6IHRoaXMuYXBwLCBzZXR0aW5nczogdGhpcy5zZXR0aW5ncyB9LFxuXHRcdFx0XHQncGx1Z2luIGluaXRpYWxpemF0aW9uJ1xuXHRcdFx0KTtcblxuXHRcdFx0Ly8gSW5pdGlhbGl6ZSBtYW5hZ2VycyB3aXRoIGVycm9yIGhhbmRsaW5nXG5cdFx0XHR0aGlzLnBhbmVsTWFuYWdlciA9IGF3YWl0IHdpdGhFcnJvckhhbmRsaW5nKFxuXHRcdFx0XHQoKSA9PiBQcm9taXNlLnJlc29sdmUobmV3IFBhbmVsTWFuYWdlcih0aGlzLmFwcCwgdGhpcykpLFxuXHRcdFx0XHQncGFuZWwgbWFuYWdlciBpbml0aWFsaXphdGlvbicsXG5cdFx0XHRcdG51bGxcblx0XHRcdCk7XG5cblxuXHRcdFx0Ly8gRW5zdXJlIGljb25zIGxvYWQgcHJvcGVybHkgdXNpbmcgT2JzaWRpYW4ncyBBUElcblx0XHRcdHRoaXMuZm9yY2VJY29uUmVmcmVzaCgpO1xuXG5cdFx0XHQvLyBSZWdpc3RlciB0aGUgc2lkZSBwYW5lbCB2aWV3cyB3aXRoIGVycm9yIGhhbmRsaW5nXG5cdFx0XHRhd2FpdCB3aXRoRXJyb3JIYW5kbGluZyhcblx0XHRcdFx0KCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucmVnaXN0ZXJWaWV3KFNFT0N1cnJlbnRQYW5lbFZpZXdUeXBlLCAobGVhZikgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgcGFuZWwgPSBuZXcgU0VPU2lkZVBhbmVsKHRoaXMsICdjdXJyZW50JywgbGVhZik7XG5cdFx0XHRcdFx0XHR0aGlzLnNpZGVQYW5lbCA9IHBhbmVsOyAvLyBTdG9yZSByZWZlcmVuY2UgZm9yIHNldHRpbmdzIHVwZGF0ZXNcblx0XHRcdFx0XHRcdHJldHVybiBwYW5lbDtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR0aGlzLnJlZ2lzdGVyVmlldyhTRU9HbG9iYWxQYW5lbFZpZXdUeXBlLCAobGVhZikgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgcGFuZWwgPSBuZXcgU0VPU2lkZVBhbmVsKHRoaXMsICdnbG9iYWwnLCBsZWFmKTtcblx0XHRcdFx0XHRcdHRoaXMuc2lkZVBhbmVsID0gcGFuZWw7IC8vIFN0b3JlIHJlZmVyZW5jZSBmb3Igc2V0dGluZ3MgdXBkYXRlc1xuXHRcdFx0XHRcdFx0cmV0dXJuIHBhbmVsO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHQnc2lkZSBwYW5lbCByZWdpc3RyYXRpb24nLFxuXHRcdFx0XHR1bmRlZmluZWRcblx0XHRcdCk7XG5cblx0XHRcdC8vIFJlZ2lzdGVyIGNvbW1hbmRzIHdpdGggZXJyb3IgaGFuZGxpbmdcblx0XHRcdGF3YWl0IHdpdGhFcnJvckhhbmRsaW5nKFxuXHRcdFx0XHQoKSA9PiB7XG5cdFx0XHRcdFx0cmVnaXN0ZXJDb21tYW5kcyh0aGlzKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0J2NvbW1hbmQgcmVnaXN0cmF0aW9uJyxcblx0XHRcdFx0dW5kZWZpbmVkXG5cdFx0XHQpO1xuXG5cdFx0XHQvLyBBZGQgc2V0dGluZ3MgdGFiIHdpdGggZXJyb3IgaGFuZGxpbmdcblx0XHRcdGF3YWl0IHdpdGhFcnJvckhhbmRsaW5nKFxuXHRcdFx0XHQoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBTRU9TZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdCdzZXR0aW5ncyB0YWIgcmVnaXN0cmF0aW9uJyxcblx0XHRcdFx0dW5kZWZpbmVkXG5cdFx0XHQpO1xuXG5cblx0XHRcdC8vIEFkZCByaWJib24gaWNvbiBmb3IgZWFzeSBhY2Nlc3MgKGRlZmF1bHQgdG8gZ2xvYmFsKSB3aXRoIGVycm9yIGhhbmRsaW5nXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5zaG93UmliYm9uSWNvbikge1xuXHRcdFx0XHRhd2FpdCB3aXRoRXJyb3JIYW5kbGluZyhcblx0XHRcdFx0XHQoKSA9PiB7XG5cdFx0XHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogXCJTRU9cIiBpcyBhIHByb3BlciBub3VuIChhY3JvbnltKSBhbmQgc2hvdWxkIGJlIGNhcGl0YWxpemVkXG5cdFx0XHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXG5cdFx0XHRcdFx0XHR0aGlzLnJpYmJvbkljb24gPSB0aGlzLmFkZFJpYmJvbkljb24oJ3NlYXJjaC1jaGVjaycsICdPcGVuIFNFTyBhdWRpdCBwYW5lbCcsICgpID0+IHtcblx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBwYW5lbCBhbHJlYWR5IGV4aXN0c1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nUGFuZWxzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnc2VvLWdsb2JhbC1wYW5lbCcpO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGlzRmlyc3RSdW4gPSBleGlzdGluZ1BhbmVscy5sZW5ndGggPT09IDA7XG5cdFx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5vcGVuR2xvYmFsUGFuZWwoKTtcblx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHQvLyBPbmx5IHRyaWdnZXIgbWFudWFsIHJlZnJlc2ggaWYgcGFuZWwgYWxyZWFkeSBleGlzdGVkIChub3QgZmlyc3QgcnVuKVxuXHRcdFx0XHRcdFx0XHRcdGlmICghaXNGaXJzdFJ1bikge1xuXHRcdFx0XHRcdFx0XHRcdFx0dm9pZCBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBnbG9iYWxQYW5lbHMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdzZW8tZ2xvYmFsLXBhbmVsJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZ2xvYmFsUGFuZWxzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgcGFuZWwgPSBnbG9iYWxQYW5lbHNbMF07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChwYW5lbD8udmlldykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIENhc3QgdG8gU0VPU2lkZVBhbmVsIGFuZCB0cmlnZ2VyIHJlZnJlc2hcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBzZW9QYW5lbCA9IHBhbmVsLnZpZXcgYXMgdW5rbm93biBhcyB7IGFjdGlvbnM6IFBhbmVsQWN0aW9uczsgcmVuZGVyKCk6IHZvaWQgfTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBUcmlnZ2VyIHRoZSByZWZyZXNoIGxvZ2ljIChzYW1lIGFzIGNsaWNraW5nIHRoZSByZWZyZXNoIGJ1dHRvbilcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCBzZW9QYW5lbC5hY3Rpb25zLnJlZnJlc2hHbG9iYWxSZXN1bHRzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIHRoZSBwYW5lbCBkaXNwbGF5IHdpdGggbmV3IHJlc3VsdHNcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZW9QYW5lbC5yZW5kZXIoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRoYW5kbGVFcnJvcihlcnJvciwgJ3JpYmJvbiBpY29uIHBhbmVsIHJlZnJlc2gnLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9LCA1MDApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHQvLyBJZiBmaXJzdCBydW4sIGxldCB0aGUgcGFuZWwncyBvbk9wZW4oKSBoYW5kbGUgdGhlIGluaXRpYWwgc2NhbiBhdXRvbWF0aWNhbGx5XG5cdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdFx0aGFuZGxlRXJyb3IoZXJyb3IsICdyaWJib24gaWNvbiBjbGljayBoYW5kbGVyJywgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J3JpYmJvbiBpY29uIHJlZ2lzdHJhdGlvbicsXG5cdFx0XHRcdFx0dW5kZWZpbmVkXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGhhbmRsZUVycm9yKGVycm9yLCAncGx1Z2luIGluaXRpYWxpemF0aW9uJywgdHJ1ZSk7XG5cdFx0fVxuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cdFx0dHJ5IHtcblx0XHRcdC8vIENsZWFuIHVwIGNhY2hlIG1hbmFnZXJzXG5cdFx0XHRzZW9DYWNoZS5kZXN0cm95KCk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGhhbmRsZUVycm9yKGVycm9yLCAncGx1Z2luIHVubG9hZCcsIGZhbHNlKTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gTm90ZTogT2JzaWRpYW4gYXV0b21hdGljYWxseSBjbGVhbnMgdXA6XG5cdFx0Ly8gLSBSZWdpc3RlcmVkIHZpZXdzIChyZWdpc3RlclZpZXcpXG5cdFx0Ly8gLSBSZWdpc3RlcmVkIGNvbW1hbmRzIChhZGRDb21tYW5kKSBcblx0XHQvLyAtIFNldHRpbmdzIHRhYnMgKGFkZFNldHRpbmdUYWIpXG5cdFx0Ly8gLSBSaWJib24gaWNvbnMgKGFkZFJpYmJvbkljb24pXG5cdFx0Ly8gLSBSZWdpc3RlcmVkIGV2ZW50cyAocmVnaXN0ZXJFdmVudClcblx0fVxuXG5cdC8qKlxuXHQgKiBMb2FkIHBsdWdpbiBzZXR0aW5ncyBmcm9tIE9ic2lkaWFuJ3MgZGF0YSBzdG9yZVxuXHQgKiBNZXJnZXMgc2F2ZWQgc2V0dGluZ3Mgd2l0aCBkZWZhdWx0IHZhbHVlc1xuXHQgKi9cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBsb2FkZWREYXRhID0gYXdhaXQgdGhpcy5sb2FkRGF0YSgpIGFzIFBhcnRpYWw8U0VPU2V0dGluZ3M+O1xuXHRcdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGxvYWRlZERhdGEpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRoYW5kbGVFcnJvcihlcnJvciwgJ2xvYWRpbmcgc2V0dGluZ3MnLCB0cnVlKTtcblx0XHRcdC8vIEZhbGxiYWNrIHRvIGRlZmF1bHQgc2V0dGluZ3Ncblx0XHRcdHRoaXMuc2V0dGluZ3MgPSB7IC4uLkRFRkFVTFRfU0VUVElOR1MgfTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogU2F2ZSBwbHVnaW4gc2V0dGluZ3MgdG8gT2JzaWRpYW4ncyBkYXRhIHN0b3JlXG5cdCAqIENsZWFycyBjYWNoZSB0byBlbnN1cmUgZnJlc2ggcmVzdWx0cyBhZnRlciBzZXR0aW5ncyBjaGFuZ2VzXG5cdCAqL1xuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdFx0XHQvLyBDbGVhciBjYWNoZSB3aGVuIHNldHRpbmdzIGNoYW5nZSB0byBlbnN1cmUgZnJlc2ggcmVzdWx0c1xuXHRcdFx0Y2xlYXJBbGxDYWNoZSgpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRoYW5kbGVFcnJvcihlcnJvciwgJ3NhdmluZyBzZXR0aW5ncycsIHRydWUpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBhZGRTdGF0dXNCYXIoKSB7XG5cdFx0Ly8gU3RhdHVzIGJhciByZW1vdmVkIC0gbm90IHVzZWZ1bFxuXHR9XG5cblx0cHVibGljIHJlbW92ZVN0YXR1c0JhcigpIHtcblx0XHQvLyBTdGF0dXMgYmFyIHJlbW92ZWRcblx0fVxuXG5cdC8qKlxuXHQgKiBPcGVucyB0aGUgY3VycmVudCBub3RlIFNFTyBhdWRpdCBwYW5lbFxuXHQgKiBTaG93cyBTRU8gYW5hbHlzaXMgZm9yIHRoZSBjdXJyZW50bHkgYWN0aXZlIG5vdGVcblx0ICovXG5cdG9wZW5DdXJyZW50UGFuZWwoKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGlmICh0aGlzLnBhbmVsTWFuYWdlcikge1xuXHRcdFx0XHR0aGlzLnBhbmVsTWFuYWdlci5vcGVuQ3VycmVudFBhbmVsKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1BhbmVsIG1hbmFnZXIgbm90IGluaXRpYWxpemVkJyk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGhhbmRsZUVycm9yKGVycm9yLCAnb3BlbmluZyBjdXJyZW50IHBhbmVsJywgdHJ1ZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIE9wZW5zIHRoZSBnbG9iYWwgdmF1bHQgU0VPIGF1ZGl0IHBhbmVsXG5cdCAqIFNob3dzIFNFTyBhbmFseXNpcyBmb3IgYWxsIG5vdGVzIGluIHRoZSB2YXVsdFxuXHQgKi9cblx0b3Blbkdsb2JhbFBhbmVsKCkge1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAodGhpcy5wYW5lbE1hbmFnZXIpIHtcblx0XHRcdFx0dGhpcy5wYW5lbE1hbmFnZXIub3Blbkdsb2JhbFBhbmVsKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1BhbmVsIG1hbmFnZXIgbm90IGluaXRpYWxpemVkJyk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGhhbmRsZUVycm9yKGVycm9yLCAnb3BlbmluZyBnbG9iYWwgcGFuZWwnLCB0cnVlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogUnVucyBidWxrIFNFTyBjaGVjayBhY3Jvc3MgYWxsIGNvbmZpZ3VyZWQgZmlsZXNcblx0ICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gYnVsayBjaGVjayBpcyBjb21wbGV0ZVxuXHQgKi9cblx0YXN5bmMgcnVuQnVsa0NoZWNrKCkge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCB7IHJ1blNFT0NoZWNrIH0gPSBhd2FpdCBpbXBvcnQoXCIuL3Nlby1jaGVja2VyXCIpO1xuXHRcdFx0Y29uc3QgZmlsZXMgPSBhd2FpdCB0aGlzLmdldEZpbGVzVG9DaGVjaygpO1xuXHRcdFx0aWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRyZXR1cm4gW107XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBydW5TRU9DaGVjayh0aGlzLCBmaWxlcyk7XG5cdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0aGFuZGxlRXJyb3IoZXJyb3IsICdydW5uaW5nIGJ1bGsgY2hlY2snLCB0cnVlKTtcblx0XHRcdHJldHVybiBbXTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogR2V0cyB0aGUgbGlzdCBvZiBmaWxlcyB0byBjaGVjayBiYXNlZCBvbiBjdXJyZW50IHNldHRpbmdzXG5cdCAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHRvIGFycmF5IG9mIFRGaWxlIG9iamVjdHMgdG8gY2hlY2tcblx0ICovXG5cdGFzeW5jIGdldEZpbGVzVG9DaGVjaygpIHtcblx0XHR0cnkge1xuXHRcdFx0aWYgKHRoaXMucGFuZWxNYW5hZ2VyKSB7XG5cdFx0XHRcdHJldHVybiBhd2FpdCB0aGlzLnBhbmVsTWFuYWdlci5nZXRGaWxlc1RvQ2hlY2soKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignUGFuZWwgbWFuYWdlciBub3QgaW5pdGlhbGl6ZWQnKTtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0aGFuZGxlRXJyb3IoZXJyb3IsICdnZXR0aW5nIGZpbGVzIHRvIGNoZWNrJywgdHJ1ZSk7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fVxuXHR9XG5cblxuXG5cdC8vIFByb3BlciBpY29uIHJlZnJlc2ggdXNpbmcgT2JzaWRpYW4ncyBvbkxheW91dFJlYWR5IEFQSVxuXHRwcml2YXRlIGZvcmNlSWNvblJlZnJlc2goKSB7XG5cdFx0Ly8gVXNlIE9ic2lkaWFuJ3MgcHJvcGVyIEFQSSB0byBlbnN1cmUgaWNvbnMgbG9hZCBjb3JyZWN0bHlcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XG5cdFx0XHQvLyBGb3JjZSByZWZyZXNoIG9mIGFueSBleGlzdGluZyBwYW5lbHNcblx0XHRcdGNvbnN0IGV4aXN0aW5nQ3VycmVudFBhbmVscyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoU0VPQ3VycmVudFBhbmVsVmlld1R5cGUpO1xuXHRcdFx0Y29uc3QgZXhpc3RpbmdHbG9iYWxQYW5lbHMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFNFT0dsb2JhbFBhbmVsVmlld1R5cGUpO1xuXHRcdFx0XG5cdFx0XHRbLi4uZXhpc3RpbmdDdXJyZW50UGFuZWxzLCAuLi5leGlzdGluZ0dsb2JhbFBhbmVsc10uZm9yRWFjaChsZWFmID0+IHtcblx0XHRcdFx0aWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIFNFT1NpZGVQYW5lbCkge1xuXHRcdFx0XHRcdGxlYWYudmlldy5yZW5kZXIoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogVG9nZ2xlcyB0aGUgcmliYm9uIGljb24gdmlzaWJpbGl0eVxuXHQgKiBBZGRzIG9yIHJlbW92ZXMgdGhlIHJpYmJvbiBpY29uIGJhc2VkIG9uIHRoZSBzZXR0aW5nXG5cdCAqL1xuXHR0b2dnbGVSaWJib25JY29uKCkge1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5zaG93UmliYm9uSWNvbikge1xuXHRcdFx0XHQvLyBBZGQgcmliYm9uIGljb24gaWYgaXQgZG9lc24ndCBleGlzdFxuXHRcdFx0aWYgKCF0aGlzLnJpYmJvbkljb24pIHtcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFwiU0VPXCIgaXMgYSBwcm9wZXIgbm91biAoYWNyb255bSkgYW5kIHNob3VsZCBiZSBjYXBpdGFsaXplZFxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXG5cdFx0XHRcdHRoaXMucmliYm9uSWNvbiA9IHRoaXMuYWRkUmliYm9uSWNvbignc2VhcmNoLWNoZWNrJywgJ09wZW4gU0VPIGF1ZGl0IHBhbmVsJywgKCkgPT4ge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgcGFuZWwgYWxyZWFkeSBleGlzdHNcblx0XHRcdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdQYW5lbHMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdzZW8tZ2xvYmFsLXBhbmVsJyk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGlzRmlyc3RSdW4gPSBleGlzdGluZ1BhbmVscy5sZW5ndGggPT09IDA7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHR0aGlzLm9wZW5HbG9iYWxQYW5lbCgpO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gT25seSB0cmlnZ2VyIG1hbnVhbCByZWZyZXNoIGlmIHBhbmVsIGFscmVhZHkgZXhpc3RlZCAobm90IGZpcnN0IHJ1bilcblx0XHRcdFx0XHRcdFx0aWYgKCFpc0ZpcnN0UnVuKSB7XG5cdFx0XHRcdFx0XHRcdFx0dm9pZCBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBnbG9iYWxQYW5lbHMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdzZW8tZ2xvYmFsLXBhbmVsJyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGdsb2JhbFBhbmVscy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBwYW5lbCA9IGdsb2JhbFBhbmVsc1swXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChwYW5lbD8udmlldykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBDYXN0IHRvIFNFT1NpZGVQYW5lbCBhbmQgdHJpZ2dlciByZWZyZXNoXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNlb1BhbmVsID0gcGFuZWwudmlldyBhcyB1bmtub3duIGFzIHsgYWN0aW9uczogUGFuZWxBY3Rpb25zOyByZW5kZXIoKTogdm9pZCB9O1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBUcmlnZ2VyIHRoZSByZWZyZXNoIGxvZ2ljIChzYW1lIGFzIGNsaWNraW5nIHRoZSByZWZyZXNoIGJ1dHRvbilcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgc2VvUGFuZWwuYWN0aW9ucy5yZWZyZXNoR2xvYmFsUmVzdWx0cygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgdGhlIHBhbmVsIGRpc3BsYXkgd2l0aCBuZXcgcmVzdWx0c1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZW9QYW5lbC5yZW5kZXIoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aGFuZGxlRXJyb3IoZXJyb3IsICdyaWJib24gaWNvbiBwYW5lbCByZWZyZXNoJywgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdFx0XHRcdFx0fSwgNTAwKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHQvLyBJZiBmaXJzdCBydW4sIGxldCB0aGUgcGFuZWwncyBvbk9wZW4oKSBoYW5kbGUgdGhlIGluaXRpYWwgc2NhbiBhdXRvbWF0aWNhbGx5XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdFx0XHRoYW5kbGVFcnJvcihlcnJvciwgJ3JpYmJvbiBpY29uIGNsaWNrIGhhbmRsZXInLCB0cnVlKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gUmVtb3ZlIHJpYmJvbiBpY29uIGlmIGl0IGV4aXN0c1xuXHRcdFx0XHRpZiAodGhpcy5yaWJib25JY29uKSB7XG5cdFx0XHRcdFx0Ly8gU3RvcmUgcmVmZXJlbmNlIGJlZm9yZSByZW1vdmFsXG5cdFx0XHRcdFx0Y29uc3QgaWNvblRvUmVtb3ZlID0gdGhpcy5yaWJib25JY29uO1xuXHRcdFx0XHRcdHRoaXMucmliYm9uSWNvbiA9IG51bGw7XG5cdFx0XHRcdFx0Ly8gUmVtb3ZlIGZyb20gRE9NIGNvbXBsZXRlbHkgLSB0aGlzIGFsc28gcmVtb3ZlcyBpdCBmcm9tIHRoZSBjb250ZXh0IG1lbnVcblx0XHRcdFx0XHRpY29uVG9SZW1vdmUucmVtb3ZlKCk7XG5cdFx0XHRcdFx0Ly8gRm9yY2UgbXVsdGlwbGUgcmVmcmVzaCB0cmlnZ2VycyB0byBlbnN1cmUgY29udGV4dCBtZW51IGlzIHVwZGF0ZWRcblx0XHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UudHJpZ2dlcignbGF5b3V0LWNoYW5nZScpO1xuXHRcdFx0XHRcdC8vIEFsc28gdHJ5IHRvIGZpbmQgYW5kIHJlbW92ZSBhbnkgb3JwaGFuZWQgY29udGV4dCBtZW51IGl0ZW1zXG5cdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0XHQvLyBGaW5kIGFueSBjb250ZXh0IG1lbnUgaXRlbXMgdGhhdCBtaWdodCByZWZlcmVuY2UgdGhpcyBpY29uXG5cdFx0XHRcdFx0XHRjb25zdCBjb250ZXh0TWVudXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWVudScpO1xuXHRcdFx0XHRcdFx0Y29udGV4dE1lbnVzLmZvckVhY2gobWVudSA9PiB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGl0ZW1zID0gbWVudS5xdWVyeVNlbGVjdG9yQWxsKCcubWVudS1pdGVtJyk7XG5cdFx0XHRcdFx0XHRcdGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgdGV4dCA9IGl0ZW0udGV4dENvbnRlbnQ/LnRyaW0oKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAodGV4dCA9PT0gJ09wZW4gU0VPIGF1ZGl0IHBhbmVsJykge1xuXHRcdFx0XHRcdFx0XHRcdFx0aXRlbS5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSwgMTAwKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRoYW5kbGVFcnJvcihlcnJvciwgJ3RvZ2dsaW5nIHJpYmJvbiBpY29uJywgdHJ1ZSk7XG5cdFx0fVxuXHR9XG59XG4iLCAiaW1wb3J0IHsgU0VPUmVzdWx0cyB9IGZyb20gXCIuL3R5cGVzXCI7XHJcblxyXG4vKipcclxuICogU0VPIFBsdWdpbiBTZXR0aW5ncyBJbnRlcmZhY2VcclxuICogRGVmaW5lcyBhbGwgY29uZmlndXJhYmxlIG9wdGlvbnMgZm9yIHRoZSBTRU8gcGx1Z2luXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFNFT1NldHRpbmdzIHtcclxuXHQvLyBEaXJlY3Rvcnkgc2V0dGluZ3NcclxuXHQvKiogQ29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgZGlyZWN0b3JpZXMgdG8gc2NhbiBmb3IgU0VPIGFuYWx5c2lzICovXHJcblx0c2NhbkRpcmVjdG9yaWVzOiBzdHJpbmc7XHJcblx0LyoqIElnbm9yZSBmaWxlcyB0aGF0IGJlZ2luIHdpdGggYW4gdW5kZXJzY29yZSAqL1xyXG5cdGlnbm9yZVVuZGVyc2NvcmVGaWxlczogYm9vbGVhbjtcclxuXHQvKiogRW5hYmxlIE1EWCBmaWxlIHN1cHBvcnQgKGluIGFkZGl0aW9uIHRvIE1EIGZpbGVzKSAqL1xyXG5cdGVuYWJsZU1EWFN1cHBvcnQ6IGJvb2xlYW47XHJcblx0XHJcblx0Ly8gUHJvcGVydHkgbmFtZXNcclxuXHQvKiogRnJvbnRtYXR0ZXIgcHJvcGVydHkgbmFtZSBmb3Iga2V5d29yZHMgKi9cclxuXHRrZXl3b3JkUHJvcGVydHk6IHN0cmluZztcclxuXHQvKiogRnJvbnRtYXR0ZXIgcHJvcGVydHkgbmFtZSBmb3IgbWV0YSBkZXNjcmlwdGlvbiAqL1xyXG5cdGRlc2NyaXB0aW9uUHJvcGVydHk6IHN0cmluZztcclxuXHQvKiogRnJvbnRtYXR0ZXIgcHJvcGVydHkgbmFtZSBmb3IgcGFnZSB0aXRsZSAqL1xyXG5cdHRpdGxlUHJvcGVydHk6IHN0cmluZztcclxuXHQvKiogV2hldGhlciB0byB1c2UgZmlsZW5hbWUgYXMgdGl0bGUgd2hlbiBubyB0aXRsZSBwcm9wZXJ0eSBpcyBzZXQgKi9cclxuXHR1c2VGaWxlbmFtZUFzVGl0bGU6IGJvb2xlYW47XHJcblx0LyoqIEZyb250bWF0dGVyIHByb3BlcnR5IG5hbWUgZm9yIFVSTCBzbHVnICovXHJcblx0c2x1Z1Byb3BlcnR5OiBzdHJpbmc7XHJcblx0LyoqIFdoZXRoZXIgdG8gdXNlIGZpbGVuYW1lIGFzIHNsdWcgd2hlbiBubyBzbHVnIHByb3BlcnR5IGlzIHNldCAqL1xyXG5cdHVzZUZpbGVuYW1lQXNTbHVnOiBib29sZWFuO1xyXG5cdC8qKiBGaWxlbmFtZSBwYXR0ZXJuIGZvciBwYXJlbnQgZm9sZGVyIHNsdWcgZ2VuZXJhdGlvbiAqL1xyXG5cdHBhcmVudEZvbGRlclNsdWdGaWxlbmFtZTogc3RyaW5nO1xyXG5cdC8qKiBPcHRpb25hbCBwcmVmaXggb3Igc3VmZml4IHRvIGFwcGVuZCB0byBtZXRhIHRpdGxlIGZvciBjaGFyYWN0ZXIgY291bnQgY2FsY3VsYXRpb25zICovXHJcblx0dGl0bGVQcmVmaXhTdWZmaXg6IHN0cmluZztcclxuXHRcclxuXHQvLyBDaGVjayB0b2dnbGVzXHJcblx0LyoqIEVuYWJsZSB0aXRsZSBsZW5ndGggdmFsaWRhdGlvbiAqL1xyXG5cdGNoZWNrVGl0bGVMZW5ndGg6IGJvb2xlYW47XHJcblx0LyoqIEVuYWJsZSBoZWFkaW5nIGhpZXJhcmNoeSB2YWxpZGF0aW9uICovXHJcblx0Y2hlY2tIZWFkaW5nT3JkZXI6IGJvb2xlYW47XHJcblx0LyoqIEVuYWJsZSBhbHQgdGV4dCB2YWxpZGF0aW9uIGZvciBtZWRpYSBjb250ZW50IChpbWFnZXMsIHZpZGVvcywgZW1iZWRzLCBldGMuKSAqL1xyXG5cdGNoZWNrQWx0VGV4dDogYm9vbGVhbjtcclxuXHQvKiogRW5hYmxlIGltYWdlIGZpbGVuYW1lIHZhbGlkYXRpb24gKi9cclxuXHRjaGVja0ltYWdlTmFtaW5nOiBib29sZWFuO1xyXG5cdC8qKiBFbmFibGUgYnJva2VuIGxpbmsgZGV0ZWN0aW9uICovXHJcblx0Y2hlY2tCcm9rZW5MaW5rczogYm9vbGVhbjtcclxuXHQvKiogRW5hYmxlIGV4dGVybmFsIGxpbmsgdmFsaWRhdGlvbiAqL1xyXG5cdGNoZWNrRXh0ZXJuYWxMaW5rczogYm9vbGVhbjtcclxuXHQvKiogU2hvdyBleHRlcm5hbCBsaW5rIGJ1dHRvbiBpbiByZXN1bHRzICovXHJcblx0ZW5hYmxlRXh0ZXJuYWxMaW5rQnV0dG9uOiBib29sZWFuO1xyXG5cdC8qKiBDaGVjayBleHRlcm5hbCBsaW5rcyBhZ2FpbnN0IHZhdWx0IGZpbGVzICovXHJcblx0ZW5hYmxlRXh0ZXJuYWxMaW5rVmF1bHRDaGVjazogYm9vbGVhbjtcclxuXHQvKiogRW5hYmxlIG5ha2VkIGxpbmsgZGV0ZWN0aW9uICovXHJcblx0Y2hlY2tOYWtlZExpbmtzOiBib29sZWFuO1xyXG5cdC8qKiBFbmFibGUgY29udGVudCBsZW5ndGggdmFsaWRhdGlvbiAqL1xyXG5cdGNoZWNrQ29udGVudExlbmd0aDogYm9vbGVhbjtcclxuXHQvKiogRW5hYmxlIGR1cGxpY2F0ZSBjb250ZW50IGRldGVjdGlvbiAqL1xyXG5cdGNoZWNrRHVwbGljYXRlQ29udGVudDogYm9vbGVhbjtcclxuXHQvKiogRW5hYmxlIHJlYWRpbmcgbGV2ZWwgYW5hbHlzaXMgKi9cclxuXHRjaGVja1JlYWRpbmdMZXZlbDogYm9vbGVhbjtcclxuXHQvKiogRW5hYmxlIHBvdGVudGlhbGx5IGJyb2tlbiBsaW5rIGRldGVjdGlvbiAqL1xyXG5cdGNoZWNrUG90ZW50aWFsbHlCcm9rZW5MaW5rczogYm9vbGVhbjtcclxuXHQvKiogRW5hYmxlIHBvdGVudGlhbGx5IGJyb2tlbiBlbWJlZCBkZXRlY3Rpb24gKi9cclxuXHRjaGVja1BvdGVudGlhbGx5QnJva2VuRW1iZWRzOiBib29sZWFuO1xyXG5cdC8qKiBVc2Ugbm90ZSB0aXRsZXMgaW4gYW5hbHlzaXMgKi9cclxuXHR1c2VOb3RlVGl0bGVzOiBib29sZWFuO1xyXG5cdC8qKiBTa2lwIEgxIGhlYWRpbmcgdmFsaWRhdGlvbiAqL1xyXG5cdHNraXBIMUNoZWNrOiBib29sZWFuO1xyXG5cdFxyXG5cdC8vIFB1Ymxpc2hpbmcgc2V0dGluZ3NcclxuXHQvKiogRW5hYmxlIHB1Ymxpc2hpbmcgbW9kZSBmb3IgcHVibGljLWZhY2luZyBjb250ZW50ICovXHJcblx0cHVibGlzaE1vZGU6IGJvb2xlYW47XHJcblx0XHJcblx0Ly8gVUkgc2V0dGluZ3NcclxuXHQvKiogRGVmYXVsdCBzb3J0IG9yZGVyIGZvciByZXN1bHRzIGRpc3BsYXkgKi9cclxuXHRkZWZhdWx0U29ydDogJ2lzc3Vlcy1kZXNjJyB8ICdpc3N1ZXMtYXNjJyB8ICd3YXJuaW5ncy1kZXNjJyB8ICd3YXJuaW5ncy1hc2MnIHwgJ25vdGljZXMtZGVzYycgfCAnbm90aWNlcy1hc2MnIHwgJ2ZpbGVuYW1lLWFzYycgfCAnZmlsZW5hbWUtZGVzYyc7XHJcblx0LyoqIFdoZXRoZXIgdG8gc2hvdyB0aGUgcmliYm9uIGljb24gKi9cclxuXHRzaG93UmliYm9uSWNvbjogYm9vbGVhbjtcclxuXHRcclxuXHQvLyBUaHJlc2hvbGRzXHJcblx0LyoqIE1pbmltdW0gY29udGVudCBsZW5ndGggaW4gY2hhcmFjdGVycyAqL1xyXG5cdG1pbkNvbnRlbnRMZW5ndGg6IG51bWJlcjtcclxuXHQvKiogTWluaW11bSBrZXl3b3JkIGRlbnNpdHkgcGVyY2VudGFnZSAqL1xyXG5cdGtleXdvcmREZW5zaXR5TWluOiBudW1iZXI7XHJcblx0LyoqIE1heGltdW0ga2V5d29yZCBkZW5zaXR5IHBlcmNlbnRhZ2UgKi9cclxuXHRrZXl3b3JkRGVuc2l0eU1heDogbnVtYmVyO1xyXG5cdC8qKiBEdXBsaWNhdGUgY29udGVudCBzaW1pbGFyaXR5IHRocmVzaG9sZCBwZXJjZW50YWdlICovXHJcblx0ZHVwbGljYXRlVGhyZXNob2xkOiBudW1iZXI7XHJcblx0XHJcblx0Ly8gQ2FjaGVkIHNjYW4gcmVzdWx0c1xyXG5cdC8qKiBDYWNoZWQgcmVzdWx0cyBmcm9tIGdsb2JhbCBzY2FuICovXHJcblx0Y2FjaGVkR2xvYmFsUmVzdWx0czogU0VPUmVzdWx0c1tdO1xyXG5cdC8qKiBUaW1lc3RhbXAgb2YgbGFzdCBzY2FuICovXHJcblx0bGFzdFNjYW5UaW1lc3RhbXA6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFNFT1NldHRpbmdzID0ge1xyXG5cdHNjYW5EaXJlY3RvcmllczogXCJcIixcclxuXHRpZ25vcmVVbmRlcnNjb3JlRmlsZXM6IGZhbHNlLFxyXG5cdGVuYWJsZU1EWFN1cHBvcnQ6IGZhbHNlLFxyXG5cdGtleXdvcmRQcm9wZXJ0eTogXCJcIixcclxuXHRkZXNjcmlwdGlvblByb3BlcnR5OiBcIlwiLFxyXG5cdHRpdGxlUHJvcGVydHk6IFwiXCIsXHJcblx0dXNlRmlsZW5hbWVBc1RpdGxlOiBmYWxzZSxcclxuXHRzbHVnUHJvcGVydHk6IFwiXCIsXHJcblx0dXNlRmlsZW5hbWVBc1NsdWc6IGZhbHNlLFxyXG5cdHBhcmVudEZvbGRlclNsdWdGaWxlbmFtZTogXCJcIixcclxuXHR0aXRsZVByZWZpeFN1ZmZpeDogXCJcIixcclxuXHRjaGVja1RpdGxlTGVuZ3RoOiB0cnVlLFxyXG5cdGNoZWNrSGVhZGluZ09yZGVyOiB0cnVlLFxyXG5cdGNoZWNrQWx0VGV4dDogdHJ1ZSxcclxuXHRjaGVja0ltYWdlTmFtaW5nOiB0cnVlLFxyXG5cdGNoZWNrQnJva2VuTGlua3M6IHRydWUsXHJcblx0Y2hlY2tFeHRlcm5hbExpbmtzOiB0cnVlLFxyXG5cdGVuYWJsZUV4dGVybmFsTGlua0J1dHRvbjogdHJ1ZSxcclxuXHRlbmFibGVFeHRlcm5hbExpbmtWYXVsdENoZWNrOiBmYWxzZSxcclxuXHRjaGVja05ha2VkTGlua3M6IHRydWUsXHJcblx0Y2hlY2tDb250ZW50TGVuZ3RoOiB0cnVlLFxyXG5cdGNoZWNrRHVwbGljYXRlQ29udGVudDogZmFsc2UsXHJcblx0Y2hlY2tSZWFkaW5nTGV2ZWw6IHRydWUsXHJcblx0Y2hlY2tQb3RlbnRpYWxseUJyb2tlbkxpbmtzOiB0cnVlLFxyXG5cdGNoZWNrUG90ZW50aWFsbHlCcm9rZW5FbWJlZHM6IHRydWUsXHJcblx0dXNlTm90ZVRpdGxlczogZmFsc2UsXHJcblx0c2tpcEgxQ2hlY2s6IGZhbHNlLFxyXG5cdHB1Ymxpc2hNb2RlOiBmYWxzZSxcclxuXHRkZWZhdWx0U29ydDogJ2lzc3Vlcy1kZXNjJyxcclxuXHRzaG93UmliYm9uSWNvbjogdHJ1ZSxcclxuXHRtaW5Db250ZW50TGVuZ3RoOiAzMDAsXHJcblx0a2V5d29yZERlbnNpdHlNaW46IDEsXHJcblx0a2V5d29yZERlbnNpdHlNYXg6IDIsXHJcblx0ZHVwbGljYXRlVGhyZXNob2xkOiA4MCxcclxuXHRjYWNoZWRHbG9iYWxSZXN1bHRzOiBbXSxcclxuXHRsYXN0U2NhblRpbWVzdGFtcDogMFxyXG59OyIsICJpbXBvcnQgU0VPUGx1Z2luIGZyb20gXCIuLi9tYWluXCI7XG5pbXBvcnQgeyBQYW5lbEFjdGlvbnMgfSBmcm9tIFwiLi4vdWkvcGFuZWwtYWN0aW9uc1wiO1xuXG4vKipcbiAqIFJlZ2lzdGVycyBhbGwgcGx1Z2luIGNvbW1hbmRzIHdpdGggT2JzaWRpYW5cbiAqIEBwYXJhbSBwbHVnaW4gLSBUaGUgU0VPIHBsdWdpbiBpbnN0YW5jZVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJDb21tYW5kcyhwbHVnaW46IFNFT1BsdWdpbikge1xuXHQvLyBPcGVuIFNFTyBDdXJyZW50IE5vdGUgcGFuZWwgb25seSAod2l0aG91dCBydW5uaW5nIGF1ZGl0KVxuXHRwbHVnaW4uYWRkQ29tbWFuZCh7XG5cdFx0aWQ6IFwib3Blbi1jdXJyZW50XCIsXG5cdFx0bmFtZTogXCJPcGVuIGN1cnJlbnQgbm90ZSBhdWRpdFwiLFxuXHRcdGljb246IFwic2VhcmNoLWNoZWNrXCIsXG5cdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdHBsdWdpbi5vcGVuQ3VycmVudFBhbmVsKCk7XG5cdFx0fVxuXHR9KTtcblxuXHQvLyBPcGVuIFNFTyBHbG9iYWwgcGFuZWwgb25seSAod2l0aG91dCBydW5uaW5nIGF1ZGl0KVxuXHRwbHVnaW4uYWRkQ29tbWFuZCh7XG5cdFx0aWQ6IFwib3Blbi1nbG9iYWxcIixcblx0XHRuYW1lOiBcIk9wZW4gdmF1bHQgYXVkaXRcIixcblx0XHRpY29uOiBcInNlYXJjaC1jaGVja1wiLFxuXHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRwbHVnaW4ub3Blbkdsb2JhbFBhbmVsKCk7XG5cdFx0fVxuXHR9KTtcblxuXHQvLyBSdW4gU0VPIEN1cnJlbnQgTm90ZSBhdWRpdCAob3BlbnMgcGFuZWwgYW5kIHJ1bnMgYXVkaXQpXG5cdHBsdWdpbi5hZGRDb21tYW5kKHtcblx0XHRpZDogXCJydW4tY3VycmVudFwiLFxuXHRcdG5hbWU6IFwiUnVuIGN1cnJlbnQgbm90ZSBhdWRpdFwiLFxuXHRcdGljb246IFwic2VhcmNoLWNoZWNrXCIsXG5cdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdHBsdWdpbi5vcGVuQ3VycmVudFBhbmVsKCk7XG5cdFx0XHQvLyBXYWl0IGZvciBwYW5lbCB0byBvcGVuLCB0aGVuIHRyaWdnZXIgdGhlIGF1ZGl0XG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0Y29uc3QgY3VycmVudFBhbmVsID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdzZW8tY3VycmVudC1wYW5lbCcpWzBdO1xuXHRcdFx0XHRpZiAoY3VycmVudFBhbmVsICYmIGN1cnJlbnRQYW5lbC52aWV3KSB7XG5cdFx0XHRcdFx0Y29uc3QgY2hlY2tCdG4gPSBjdXJyZW50UGFuZWwudmlldy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcuc2VvLXRvcC1idG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcblx0XHRcdFx0XHRpZiAoY2hlY2tCdG4pIHtcblx0XHRcdFx0XHRcdGNoZWNrQnRuLmNsaWNrKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LCAyMDApO1xuXHRcdH1cblx0fSk7XG5cblx0Ly8gUnVuIFNFTyBHbG9iYWwgYXVkaXQgKG9wZW5zIHBhbmVsIGFuZCBydW5zIGF1ZGl0KVxuXHRwbHVnaW4uYWRkQ29tbWFuZCh7XG5cdFx0aWQ6IFwicnVuLWdsb2JhbFwiLFxuXHRcdG5hbWU6IFwiUnVuIHZhdWx0IGF1ZGl0XCIsXG5cdFx0aWNvbjogXCJzZWFyY2gtY2hlY2tcIixcblx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0cGx1Z2luLm9wZW5HbG9iYWxQYW5lbCgpO1xuXHRcdFx0XG5cdFx0XHQvLyBBbHdheXMgY2hlY2sgaWYgcGFuZWwgb3BlbmVkIHN1Y2Nlc3NmdWxseSBhbmQgcnVuIHRoZSBhdWRpdFxuXHRcdFx0dm9pZCBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGdsb2JhbFBhbmVscyA9IHBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnc2VvLWdsb2JhbC1wYW5lbCcpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChnbG9iYWxQYW5lbHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHQvLyBGYWxsYmFjazogdHJ5IHRvIG9wZW4gYWdhaW5cblx0XHRcdFx0XHRcdHBsdWdpbi5vcGVuR2xvYmFsUGFuZWwoKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29uc3QgcGFuZWwgPSBnbG9iYWxQYW5lbHNbMF07XG5cdFx0XHRcdFx0aWYgKHBhbmVsPy52aWV3KSB7XG5cdFx0XHRcdFx0XHRjb25zdCBzZW9QYW5lbCA9IHBhbmVsLnZpZXcgYXMgdW5rbm93biBhcyB7IGFjdGlvbnM6IFBhbmVsQWN0aW9uczsgcmVuZGVyKCk6IHZvaWQgfTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gQWx3YXlzIHRyaWdnZXIgdGhlIHJlZnJlc2ggbG9naWMgKHNhbWUgYXMgY2xpY2tpbmcgdGhlIHJlZnJlc2ggYnV0dG9uKVxuXHRcdFx0XHRcdFx0YXdhaXQgc2VvUGFuZWwuYWN0aW9ucy5yZWZyZXNoR2xvYmFsUmVzdWx0cygpO1xuXHRcdFx0XHRcdFx0Ly8gVXBkYXRlIHRoZSBwYW5lbCBkaXNwbGF5IHdpdGggbmV3IHJlc3VsdHNcblx0XHRcdFx0XHRcdHNlb1BhbmVsLnJlbmRlcigpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkoKTtcblx0XHRcdH0sIDMwMCk7XG5cdFx0fVxuXHR9KTtcblxufVxuIiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgU0VPUGx1Z2luIGZyb20gXCIuL21haW5cIjtcclxuaW1wb3J0IHsgY3JlYXRlU2V0dGluZ3NHcm91cCB9IGZyb20gXCIuL3V0aWxzL3NldHRpbmdzLWNvbXBhdFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNFT1NldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwbHVnaW46IFNFT1BsdWdpbjtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogU0VPUGx1Z2luKSB7XHJcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdGRpc3BsYXkoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcblx0XHQvLyBHbG9iYWwgZ3JvdXBcclxuXHRcdGNvbnN0IGdsb2JhbEdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ0dsb2JhbCcsICdzZW8nKTtcclxuXHJcblx0XHRnbG9iYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnU2NhbiBkaXJlY3RvcmllcycpXHJcblx0XHRcdC5zZXREZXNjKCdDb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiBkaXJlY3RvcnkgbmFtZXMgdG8gc2Nhbi4gTGVhdmUgYmxhbmsgdG8gc2NhbiBhbGwgZGlyZWN0b3JpZXMuJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB7XHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFwibGlrZSBibG9nLCBwb3N0cywgcHVibGljXCIgaXMgYSBwbGFjZWhvbGRlciBleGFtcGxlLCBub3QgVUkgdGV4dFxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHR0ZXh0LnNldFBsYWNlaG9sZGVyKCdsaWtlIGJsb2csIHBvc3RzLCBwdWJsaWMnKTtcclxuXHRcdFx0XHR0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNjYW5EaXJlY3Rvcmllcyk7XHJcblx0XHRcdFx0dGV4dC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNjYW5EaXJlY3RvcmllcyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z2xvYmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1VzZSBub3RlIHRpdGxlcyBpbnN0ZWFkIG9mIGZpbGUgbmFtZXMnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdEaXNwbGF5IG5vdGUgdGl0bGVzIGZyb20gcHJvcGVydGllcyBpbnN0ZWFkIG9mIGZpbGUgbmFtZXMgaW4gdGhlIGlzc3VlcyBsaXN0IGFuZCBjdXJyZW50IG5vdGUgYXVkaXQnKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZU5vdGVUaXRsZXMpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZU5vdGVUaXRsZXMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRnbG9iYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnVGl0bGUgcHJlZml4IC8gc3VmZml4JylcclxuXHRcdFx0XHQuc2V0RGVzYygnU3BlY2lmeSBhbiBvcHRpb25hbCBwcmVmaXggb3Igc3VmZml4IHRoYXQgZ2V0cyBhcHBlbmRlZCB0byB5b3VyIG1ldGEgdGl0bGUgLSB1c2VkIHRvIGZhY3RvciBpbiBjaGFyYWN0ZXIgY291bnQgZm9yIHRoZSB0aXRsZSBsZW5ndGggY2hlY2snKVxyXG5cdFx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdBdXRob3IgbmFtZScpXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGl0bGVQcmVmaXhTdWZmaXgpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRpdGxlUHJlZml4U3VmZml4ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z2xvYmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0lnbm9yZXMgZmlsZXMgd2l0aCBhbiB1bmRlcnNjb3JlIHByZWZpeCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ0RvblxcJ3QgcHJvY2VzcyBmaWxlcyB0aGF0IGJlZ2luIHdpdGggYW4gdW5kZXJzY29yZSwgbGlrZSBfZXhhbXBsZS5tZCcpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWdub3JlVW5kZXJzY29yZUZpbGVzKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5pZ25vcmVVbmRlcnNjb3JlRmlsZXMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRnbG9iYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogXCJNRFhcIiBpcyBhIHByb3BlciBub3VuIChhY3JvbnltKSBhbmQgc2hvdWxkIGJlIGNhcGl0YWxpemVkXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXROYW1lKCdFbmFibGUgTURYIGZpbGUgc3VwcG9ydCcpXHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFwiTURYXCIgaXMgYSBwcm9wZXIgbm91biAoYWNyb255bSkgYW5kIHNob3VsZCBiZSBjYXBpdGFsaXplZFxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0RGVzYygnUHJvY2VzcyBNRFggZmlsZXMgaW4gYWRkaXRpb24gdG8gTWFya2Rvd24gZmlsZXMuIE1EWCBmaWxlcyB1c2UgdGhlIHNhbWUgZnJvbnRtYXR0ZXIgZm9ybWF0IGFzIE1hcmtkb3duLicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlTURYU3VwcG9ydClcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlTURYU3VwcG9ydCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGdsb2JhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdTaG93IHJpYmJvbiBpY29uJylcclxuXHRcdFx0XHQuc2V0RGVzYygnU2hvdyBvciBoaWRlIHRoZSB3aXphcmQgaWNvbiBpbiB0aGUgbGVmdCBzaWRlYmFyIHJpYmJvbicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1JpYmJvbkljb24pXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dSaWJib25JY29uID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50b2dnbGVSaWJib25JY29uKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBQcm9wZXJ0eSBuYW1lcyBncm91cFxyXG5cdFx0Y29uc3QgcHJvcGVydHlOYW1lc0dyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ1Byb3BlcnR5IG5hbWVzJywgJ3NlbycpO1xyXG5cclxuXHRcdHByb3BlcnR5TmFtZXNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnS2V5d29yZCBwcm9wZXJ0eScpXHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IENvbnRhaW5zIGV4YW1wbGUgcHJvcGVydHkgbmFtZXMgKHRhcmdldEtleXdvcmQsIHNlbywga2V5d29yZCkgd2hpY2ggYXJlIHRlY2huaWNhbCBub3RhdGlvblxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0RGVzYygnUHJvcGVydHkgbmFtZSBmb3IgdGFyZ2V0IGtleXdvcmQgKHRhcmdldEtleXdvcmQsIHNlbywga2V5d29yZCwgZXRjLiknKVxyXG5cdFx0XHRcdC5hZGRUZXh0KHRleHQgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFwidGFyZ2V0S2V5d29yZFwiIGlzIGEgcGxhY2Vob2xkZXIsIG5vdCBVSSB0ZXh0XHJcblx0XHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0XHR0ZXh0LnNldFBsYWNlaG9sZGVyKCd0YXJnZXRLZXl3b3JkJyk7XHJcblx0XHRcdFx0XHR0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmtleXdvcmRQcm9wZXJ0eSk7XHJcblx0XHRcdFx0XHR0ZXh0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5rZXl3b3JkUHJvcGVydHkgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHByb3BlcnR5TmFtZXNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRGVzY3JpcHRpb24gcHJvcGVydHknKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdQcm9wZXJ0eSBuYW1lIGZvciBtZXRhIGRlc2NyaXB0aW9uJylcclxuXHRcdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHtcclxuXHRcdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBcImRlc2NyaXB0aW9uXCIgaXMgYSBwbGFjZWhvbGRlciwgbm90IFVJIHRleHRcclxuXHRcdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHRcdHRleHQuc2V0UGxhY2Vob2xkZXIoJ2Rlc2NyaXB0aW9uJyk7XHJcblx0XHRcdFx0XHR0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlc2NyaXB0aW9uUHJvcGVydHkpO1xyXG5cdFx0XHRcdFx0dGV4dC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVzY3JpcHRpb25Qcm9wZXJ0eSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0cHJvcGVydHlOYW1lc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdUaXRsZSBwcm9wZXJ0eScpXHJcblx0XHRcdFx0LnNldERlc2MoJ1Byb3BlcnR5IG5hbWUgZm9yIHRpdGxlIChsZWF2ZSBibGFuayB0byBza2lwIHRpdGxlIGNoZWNrcyknKVxyXG5cdFx0XHRcdC5hZGRUZXh0KHRleHQgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFwidGl0bGVcIiBpcyBhIHBsYWNlaG9sZGVyLCBub3QgVUkgdGV4dFxyXG5cdFx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdFx0dGV4dC5zZXRQbGFjZWhvbGRlcigndGl0bGUnKTtcclxuXHRcdFx0XHRcdHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGl0bGVQcm9wZXJ0eSk7XHJcblx0XHRcdFx0XHR0ZXh0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50aXRsZVByb3BlcnR5ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRwcm9wZXJ0eU5hbWVzR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1VzZSBmaWxlIG5hbWUgYXMgdGl0bGUnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdVc2UgZmlsZSBuYW1lIGFzIHRpdGxlIGluc3RlYWQgb2YgYSBwcm9wZXJ0eScpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlRmlsZW5hbWVBc1RpdGxlKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VGaWxlbmFtZUFzVGl0bGUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRwcm9wZXJ0eU5hbWVzR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1NsdWcgcHJvcGVydHknKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdQcm9wZXJ0eSBuYW1lIGZvciBzbHVnIChsZWF2ZSBibGFuayB0byBza2lwIHNsdWcgY2hlY2tzKScpXHJcblx0XHRcdFx0LmFkZFRleHQodGV4dCA9PiB7XHJcblx0XHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogXCJzbHVnXCIgaXMgYSBwbGFjZWhvbGRlciwgbm90IFVJIHRleHRcclxuXHRcdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHRcdHRleHQuc2V0UGxhY2Vob2xkZXIoJ3NsdWcnKTtcclxuXHRcdFx0XHRcdHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2x1Z1Byb3BlcnR5KTtcclxuXHRcdFx0XHRcdHRleHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNsdWdQcm9wZXJ0eSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0cHJvcGVydHlOYW1lc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdVc2UgZmlsZS9mb2xkZXIgbmFtZSBhcyBzbHVnJylcclxuXHRcdFx0XHQuc2V0RGVzYygnVXNlIGZpbGUvZm9sZGVyIG5hbWUgYXMgc2x1ZyBpbnN0ZWFkIG9mIGEgcHJvcGVydHknKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZUZpbGVuYW1lQXNTbHVnKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VGaWxlbmFtZUFzU2x1ZyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIHRvIHNob3cvaGlkZSB0aGUgcGFyZW50IGZvbGRlciBvcHRpb25cclxuXHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBTaG93IHBhcmVudCBmb2xkZXIgb3B0aW9uIG9ubHkgd2hlbiB1c2VGaWxlbmFtZUFzU2x1ZyBpcyBlbmFibGVkXHJcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlRmlsZW5hbWVBc1NsdWcpIHtcclxuXHRcdFx0cHJvcGVydHlOYW1lc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHQuc2V0TmFtZSgnVXNlIHBhcmVudCBmb2xkZXIgbmFtZSBpbnN0ZWFkIHdoZW4gc3BlY2lmaWVkIGZpbGUgbmFtZSBpcyB1c2VkJylcclxuXHRcdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBUZXh0IGlzIGFscmVhZHkgaW4gc2VudGVuY2UgY2FzZVxyXG5cdFx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdFx0LnNldERlc2MoJ0lmIGEgbWFya2Rvd24gZmlsZSBtYXRjaGVzIHRoaXMgZmlsZSBuYW1lLCB1c2UgdGhlIHBhcmVudCBmb2xkZXIgbmFtZSBhcyB0aGUgc2x1ZyBpbnN0ZWFkJylcclxuXHRcdFx0XHRcdC5hZGRUZXh0KHRleHQgPT4ge1xyXG5cdFx0XHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogXCJpbmRleFwiIGlzIGEgcGxhY2Vob2xkZXIsIG5vdCBVSSB0ZXh0XHJcblx0XHRcdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHRcdFx0dGV4dC5zZXRQbGFjZWhvbGRlcignaW5kZXgnKTtcclxuXHRcdFx0XHRcdFx0dGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wYXJlbnRGb2xkZXJTbHVnRmlsZW5hbWUpO1xyXG5cdFx0XHRcdFx0XHR0ZXh0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnBhcmVudEZvbGRlclNsdWdGaWxlbmFtZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBBdWRpdCBvcHRpb25zIGdyb3VwXHJcblx0XHRjb25zdCBhdWRpdE9wdGlvbnNHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsICdBdWRpdCBvcHRpb25zJywgJ3NlbycpO1xyXG5cclxuXHRcdGF1ZGl0T3B0aW9uc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdDaGVjayBtZXRhIHRpdGxlIGxlbmd0aCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ0VuYWJsZSBtZXRhIHRpdGxlIGxlbmd0aCBjaGVja2luZycpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tUaXRsZUxlbmd0aClcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tUaXRsZUxlbmd0aCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGF1ZGl0T3B0aW9uc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdDaGVjayBoZWFkaW5nIG9yZGVyJylcclxuXHRcdFx0XHQuc2V0RGVzYygnRW5hYmxlIGhlYWRpbmcgaGllcmFyY2h5IGNoZWNraW5nJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja0hlYWRpbmdPcmRlcilcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tIZWFkaW5nT3JkZXIgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRhdWRpdE9wdGlvbnNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQ2hlY2sgY29udGVudCBsZW5ndGgnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdFbmFibGUgY29udGVudCBsZW5ndGggY2hlY2tpbmcnKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrQ29udGVudExlbmd0aClcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tDb250ZW50TGVuZ3RoID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gRHVwbGljYXRlIGNvbnRlbnQgY2hlY2sgd2l0aCBwZXJmb3JtYW5jZSB3YXJuaW5nXHJcblx0XHRhdWRpdE9wdGlvbnNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQ2hlY2sgZHVwbGljYXRlIGNvbnRlbnQnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdFbmFibGUgZHVwbGljYXRlIGNvbnRlbnQgZGV0ZWN0aW9uJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja0R1cGxpY2F0ZUNvbnRlbnQpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrRHVwbGljYXRlQ29udGVudCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pKTtcclxuXHRcdFx0Ly8gQWRkIHBlcmZvcm1hbmNlIHdhcm5pbmdcclxuXHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFwiV2FybmluZzpcIiBpcyBhIHN0YW5kYXJkIHdhcm5pbmcgcHJlZml4IGFuZCBzaG91bGQgYmUgY2FwaXRhbGl6ZWRcclxuXHRcdFx0c2V0dGluZy5kZXNjRWwuY3JlYXRlRWwoJ2RpdicsIHtcclxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0dGV4dDogJ1dhcm5pbmc6IFRoaXMgZmVhdHVyZSBjYW4gYmUgdmVyeSByZXNvdXJjZS1pbnRlbnNpdmUgd2l0aCBsYXJnZSB2YXVsdHMgYW5kIG1hbnkgbm90ZXMuIERpc2FibGUgZm9yIGZhc3RlciBhdWRpdHMuJyxcclxuXHRcdFx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24gc2VvLXdhcm5pbmctbWVzc2FnZSdcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRhdWRpdE9wdGlvbnNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQ2hlY2sgYWx0IHRleHQnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdFbmFibGUgYWx0IHRleHQgY2hlY2tpbmcgZm9yIG1lZGlhIGNvbnRlbnQgKGltYWdlcywgdmlkZW9zLCBlbWJlZHMsIGV0Yy4pJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja0FsdFRleHQpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrQWx0VGV4dCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGF1ZGl0T3B0aW9uc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdDaGVjayBpbWFnZSBmaWxlIG5hbWVzJylcclxuXHRcdFx0XHQuc2V0RGVzYygnRW5hYmxlIGltYWdlIGZpbGUgbmFtZSBjaGVja2luZycpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tJbWFnZU5hbWluZylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tJbWFnZU5hbWluZyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGF1ZGl0T3B0aW9uc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdDaGVjayBicm9rZW4gaW50ZXJuYWwgbGlua3MnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdFbmFibGUgYnJva2VuIGludGVybmFsIGxpbmsgZGV0ZWN0aW9uJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja0Jyb2tlbkxpbmtzKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja0Jyb2tlbkxpbmtzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0YXVkaXRPcHRpb25zR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0NoZWNrIGV4dGVybmFsIGxpbmtzJylcclxuXHRcdFx0XHQuc2V0RGVzYygnUmV0dXJuIGEgbGlzdCBvZiBleHRlcm5hbCBsaW5rcycpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tFeHRlcm5hbExpbmtzKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja0V4dGVybmFsTGlua3MgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRhdWRpdE9wdGlvbnNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRW5hYmxlIGJyb2tlbiBleHRlcm5hbCBsaW5rIGNoZWNrIGJ1dHRvbicpXHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IENvbnRhaW5zIHF1b3RlZCBidXR0b24gdGV4dCB3aGljaCBpcyBhbHJlYWR5IGluIHNlbnRlbmNlIGNhc2VcclxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0LnNldERlc2MoJ1Nob3cgXCJDaGVjayBleHRlcm5hbCBsaW5rcyBmb3IgNDA0c1wiIGJ1dHRvbiBpbiBjdXJyZW50IG5vdGUgcGFuZWwnKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUV4dGVybmFsTGlua0J1dHRvbilcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRXh0ZXJuYWxMaW5rQnV0dG9uID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHQvLyBSZWZyZXNoIHRoZSBzaWRlIHBhbmVsIGlmIGl0IGV4aXN0c1xyXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uc2lkZVBhbmVsKSB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2lkZVBhbmVsLnJlZnJlc2goKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0YXVkaXRPcHRpb25zR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0NoZWNrIG5ha2VkIGxpbmtzJylcclxuXHRcdFx0XHQuc2V0RGVzYygnRW5hYmxlIG5ha2VkIFVSTCBkZXRlY3Rpb24nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrTmFrZWRMaW5rcylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tOYWtlZExpbmtzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0YXVkaXRPcHRpb25zR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0NoZWNrIHJlYWRpbmcgbGV2ZWwnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdFbmFibGUgcmVhZGluZyBsZXZlbCBhbmFseXNpcycpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tSZWFkaW5nTGV2ZWwpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrUmVhZGluZ0xldmVsID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0YXVkaXRPcHRpb25zR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0NoZWNrIHBvdGVudGlhbGx5IGJyb2tlbiBsaW5rcycpXHJcblx0XHRcdFx0LnNldERlc2MoJ0NoZWNrIGZvciBwb3RlbnRpYWxseSBicm9rZW4gaW50ZXJuYWwgbGlua3MgdGhhdCBtYXkgbm90IHdvcmsgb24gd2ViIHB1Ymxpc2hpbmcnKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrUG90ZW50aWFsbHlCcm9rZW5MaW5rcylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tQb3RlbnRpYWxseUJyb2tlbkxpbmtzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0YXVkaXRPcHRpb25zR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0NoZWNrIHBvdGVudGlhbGx5IGJyb2tlbiBlbWJlZHMnKVxyXG5cdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBUZXh0IGlzIGFscmVhZHkgaW4gc2VudGVuY2UgY2FzZTsgXCJ3aWtpbGluay1iYXNlZFwiIGlzIHRlY2huaWNhbCB0ZXJtaW5vbG9neVxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0RGVzYygnQ2hlY2sgZm9yIHBvdGVudGlhbGx5IGJyb2tlbiBtYXJrZG93biBvciB3aWtpbGluay1iYXNlZCBlbWJlZGRlZCBtZWRpYSB0aGF0IG1heSBub3Qgd29yayBvbiB3ZWIgcHVibGlzaGluZycpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tQb3RlbnRpYWxseUJyb2tlbkVtYmVkcylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tQb3RlbnRpYWxseUJyb2tlbkVtYmVkcyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGF1ZGl0T3B0aW9uc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdGbGV4aWJsZSByZWxhdGl2ZSBsaW5rIGNoZWNrJylcclxuXHRcdFx0XHQuc2V0RGVzYygnVXNlcyBmbGV4aWJsZSB2YWxpZGF0aW9uIGZvciByZWxhdGl2ZSBwYXRocyBsaWtlIC9wYWdlIHRoYXQgY2FuIGJlIHJlc29sdmVkIGJ5IGEgc3RhdGljIHNpdGUgZ2VuZXJhdG9yLCBidXQgbWF5IGJlIGNvbnNpZGVyZWQgYnJva2VuIGJ5IHR5cGljYWwgT2JzaWRpYW4gdmFsaWRhdGlvbicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucHVibGlzaE1vZGUpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnB1Ymxpc2hNb2RlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0YXVkaXRPcHRpb25zR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFwiSDFcIiBpcyB0ZWNobmljYWwgbm90YXRpb24gKEhUTUwgaGVhZGluZyBsZXZlbCkgYW5kIHNob3VsZCBiZSBjYXBpdGFsaXplZFxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0TmFtZSgnVGl0bGUgcHJvcGVydHkgaXMgSDEnKVxyXG5cdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBcIkgxXCIgaXMgdGVjaG5pY2FsIG5vdGF0aW9uIChIVE1MIGhlYWRpbmcgbGV2ZWwpIGFuZCBzaG91bGQgYmUgY2FwaXRhbGl6ZWRcclxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0LnNldERlc2MoJ0VuYWJsZSB3aGVuIHlvdXIgc3RhdGljIHNpdGUgZ2VuZXJhdG9yIHVzZXMgdGhlIHRpdGxlIHByb3BlcnR5IHRvIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGUgdGhlIEgxIGhlYWRpbmcuIFRoaXMgcHJldmVudHMgSDEgdmFsaWRhdGlvbiBlcnJvcnMgd2hpbGUgc3RpbGwgZmxhZ2dpbmcgSDFzIHRoYXQgYXBwZWFyIGFmdGVyIG90aGVyIGhlYWRpbmcgbGV2ZWxzLicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2tpcEgxQ2hlY2spXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNraXBIMUNoZWNrID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0YXVkaXRPcHRpb25zR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0F1dG9tYXRpY2FsbHkgaW5jbHVkZSBicm9rZW4gZXh0ZXJuYWwgbGluayBjaGVja3MgaW4gYXVkaXRzIChub3QgcmVjb21tZW5kZWQpJylcclxuXHRcdFx0XHQuc2V0RGVzYygnSW5jbHVkZSBicm9rZW4gZXh0ZXJuYWwgbGluayBjaGVja2luZyBpbiB2YXVsdC13aWRlIGFuZCBjdXJyZW50IG5vdGUgYXVkaXRzJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVFeHRlcm5hbExpbmtWYXVsdENoZWNrKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVFeHRlcm5hbExpbmtWYXVsdENoZWNrID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHQvLyBSZWZyZXNoIHRoZSBzaWRlIHBhbmVsIGlmIGl0IGV4aXN0c1xyXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uc2lkZVBhbmVsKSB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2lkZVBhbmVsLnJlZnJlc2goKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0XHQvLyBBZGQgd2FybmluZyBmb3IgdmF1bHQtd2lkZSBleHRlcm5hbCBsaW5rIGNoZWNraW5nXHJcblx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBcIldhcm5pbmc6XCIgaXMgYSBzdGFuZGFyZCB3YXJuaW5nIHByZWZpeCBhbmQgc2hvdWxkIGJlIGNhcGl0YWxpemVkXHJcblx0XHRcdHNldHRpbmcuZGVzY0VsLmNyZWF0ZUVsKCdkaXYnLCB7XHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdHRleHQ6ICdXYXJuaW5nOiBUaGlzIHdpbGwgbWFrZSB2YXVsdCBhdWRpdHMgZXh0cmVtZWx5IHNsb3cuIFVzZSB0aGUgXCJDaGVjayBleHRlcm5hbCBsaW5rc1wiIGJ1dHRvbiBpbnN0ZWFkIGZvciBpbmRpdmlkdWFsIG5vdGVzLicsXHJcblx0XHRcdFx0Y2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uIHNlby13YXJuaW5nLW1lc3NhZ2UnXHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gVGhyZXNob2xkcyBncm91cFxyXG5cdFx0Y29uc3QgdGhyZXNob2xkc0dyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ1RocmVzaG9sZHMnLCAnc2VvJyk7XHJcblxyXG5cdFx0dGhyZXNob2xkc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdNaW5pbXVtIGNvbnRlbnQgbGVuZ3RoJylcclxuXHRcdFx0XHQuc2V0RGVzYygnTWluaW11bSB3b3JkIGNvdW50IGZvciBjb250ZW50IGxlbmd0aCBjaGVjaycpXHJcblx0XHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJzMwMCcpXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubWluQ29udGVudExlbmd0aC50b1N0cmluZygpKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSk7XHJcblx0XHRcdFx0XHRcdGlmICghaXNOYU4obnVtKSkge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1pbkNvbnRlbnRMZW5ndGggPSBudW07XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRocmVzaG9sZHNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnS2V5d29yZCBkZW5zaXR5IG1pbmltdW0nKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdNaW5pbXVtIGtleXdvcmQgZGVuc2l0eSBwZXJjZW50YWdlJylcclxuXHRcdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignMScpXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mua2V5d29yZERlbnNpdHlNaW4udG9TdHJpbmcoKSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbnVtID0gcGFyc2VGbG9hdCh2YWx1ZSk7XHJcblx0XHRcdFx0XHRcdGlmICghaXNOYU4obnVtKSkge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmtleXdvcmREZW5zaXR5TWluID0gbnVtO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aHJlc2hvbGRzR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0tleXdvcmQgZGVuc2l0eSBtYXhpbXVtJylcclxuXHRcdFx0XHQuc2V0RGVzYygnTWF4aW11bSBrZXl3b3JkIGRlbnNpdHkgcGVyY2VudGFnZScpXHJcblx0XHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJzInKVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmtleXdvcmREZW5zaXR5TWF4LnRvU3RyaW5nKCkpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IG51bSA9IHBhcnNlRmxvYXQodmFsdWUpO1xyXG5cdFx0XHRcdFx0XHRpZiAoIWlzTmFOKG51bSkpIHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5rZXl3b3JkRGVuc2l0eU1heCA9IG51bTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhyZXNob2xkc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdEdXBsaWNhdGUgY29udGVudCB0aHJlc2hvbGQnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdTaW1pbGFyaXR5IHBlcmNlbnRhZ2UgdGhyZXNob2xkIGZvciBkdXBsaWNhdGUgY29udGVudCBkZXRlY3Rpb24nKVxyXG5cdFx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCc4MCcpXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVwbGljYXRlVGhyZXNob2xkLnRvU3RyaW5nKCkpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlKTtcclxuXHRcdFx0XHRcdFx0aWYgKCFpc05hTihudW0pKSB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVwbGljYXRlVGhyZXNob2xkID0gbnVtO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHR9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBDb21wYXRpYmlsaXR5IHV0aWxpdGllcyBmb3Igc2V0dGluZ3NcclxuICogUHJvdmlkZXMgYmFja3dhcmQgY29tcGF0aWJpbGl0eSBmb3IgU2V0dGluZ0dyb3VwIChyZXF1aXJlcyBBUEkgMS4xMS4wKylcclxuICovXHJcblxyXG5pbXBvcnQgeyBTZXR0aW5nLCByZXF1aXJlQXBpVmVyc2lvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0ICogYXMgT2JzaWRpYW5Nb2R1bGUgZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuLyoqXHJcbiAqIEludGVyZmFjZSB0aGF0IHdvcmtzIHdpdGggYm90aCBTZXR0aW5nR3JvdXAgYW5kIGZhbGxiYWNrIGNvbnRhaW5lclxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTZXR0aW5nc0NvbnRhaW5lciB7XHJcblx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIHNldHRpbmdzIGNvbnRhaW5lciB0aGF0IHVzZXMgU2V0dGluZ0dyb3VwIGlmIGF2YWlsYWJsZSAoQVBJIDEuMTEuMCspLFxyXG4gKiBvdGhlcndpc2UgZmFsbHMgYmFjayB0byBjcmVhdGluZyBhIGhlYWRpbmcgYW5kIHVzaW5nIHRoZSBjb250YWluZXIgZGlyZWN0bHkuXHJcbiAqIFxyXG4gKiBVc2VzIHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjAnKSB0byBjaGVjayBpZiBTZXR0aW5nR3JvdXAgaXMgYXZhaWxhYmxlLlxyXG4gKiBUaGlzIGlzIHRoZSBvZmZpY2lhbCBPYnNpZGlhbiBBUEkgbWV0aG9kIGZvciB2ZXJzaW9uIGNoZWNraW5nLlxyXG4gKiBcclxuICogQHBhcmFtIGNvbnRhaW5lckVsIC0gVGhlIGNvbnRhaW5lciBlbGVtZW50IGZvciBzZXR0aW5nc1xyXG4gKiBAcGFyYW0gaGVhZGluZyAtIFRoZSBoZWFkaW5nIHRleHQgZm9yIHRoZSBzZXR0aW5ncyBncm91cCAob3B0aW9uYWwpXHJcbiAqIEBwYXJhbSBtYW5pZmVzdElkIC0gVGhlIHBsdWdpbidzIG1hbmlmZXN0IElEIGZvciBDU1Mgc2NvcGluZyAocmVxdWlyZWQgZm9yIGZhbGxiYWNrIG1vZGUpXHJcbiAqIEByZXR1cm5zIEEgY29udGFpbmVyIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIHNldHRpbmdzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2V0dGluZ3NHcm91cChcclxuXHRjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXHJcblx0aGVhZGluZz86IHN0cmluZyxcclxuXHRtYW5pZmVzdElkPzogc3RyaW5nXHJcbik6IFNldHRpbmdzQ29udGFpbmVyIHtcclxuXHQvLyBDaGVjayBpZiBTZXR0aW5nR3JvdXAgaXMgYXZhaWxhYmxlIChBUEkgMS4xMS4wKylcclxuXHQvLyByZXF1aXJlQXBpVmVyc2lvbiBpcyB0aGUgb2ZmaWNpYWwgT2JzaWRpYW4gQVBJIG1ldGhvZCBmb3IgdmVyc2lvbiBjaGVja2luZ1xyXG5cdGlmIChyZXF1aXJlQXBpVmVyc2lvbignMS4xMS4wJykpIHtcclxuXHRcdC8vIFVzZSBTZXR0aW5nR3JvdXAgLSBpdCdzIGd1YXJhbnRlZWQgdG8gZXhpc3QgaWYgcmVxdWlyZUFwaVZlcnNpb24gcmV0dXJucyB0cnVlXHJcblx0XHQvLyBBY2Nlc3MgU2V0dGluZ0dyb3VwIHZpYSB0eXBlIGFzc2VydGlvbiBzaW5jZSBpdCBtYXkgbm90IGJlIGluIHR5cGUgZGVmaW5pdGlvbnNcclxuXHRcdC8vIGZvciBvbGRlciBUeXBlU2NyaXB0IHZlcnNpb25zLCBidXQgZXhpc3RzIGF0IHJ1bnRpbWUgaW4gT2JzaWRpYW4gMS4xMS4wK1xyXG5cdFx0Ly8gVXNpbmcgdW5rbm93biBpbnN0ZWFkIG9mIGFueSB0byBzYXRpc2Z5IGVzbGludCB3aGlsZSBtYWludGFpbmluZyB0eXBlIHNhZmV0eVxyXG5cdFx0Y29uc3QgU2V0dGluZ0dyb3VwQ2xhc3MgPSAoT2JzaWRpYW5Nb2R1bGUgYXMgdW5rbm93biBhcyB7IFNldHRpbmdHcm91cD86IG5ldyAoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSA9PiB7XHJcblx0XHRcdHNldEhlYWRpbmcoaGVhZGluZzogc3RyaW5nKToge1xyXG5cdFx0XHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKTogdm9pZDtcclxuXHRcdFx0fTtcclxuXHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xyXG5cdFx0fSB9KS5TZXR0aW5nR3JvdXA7XHJcblx0XHRcclxuXHRcdGlmIChTZXR0aW5nR3JvdXBDbGFzcykge1xyXG5cdFx0XHRjb25zdCBncm91cCA9IGhlYWRpbmcgXHJcblx0XHRcdFx0PyBuZXcgU2V0dGluZ0dyb3VwQ2xhc3MoY29udGFpbmVyRWwpLnNldEhlYWRpbmcoaGVhZGluZylcclxuXHRcdFx0XHQ6IG5ldyBTZXR0aW5nR3JvdXBDbGFzcyhjb250YWluZXJFbCk7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpIHtcclxuXHRcdFx0XHRcdGdyb3VwLmFkZFNldHRpbmcoY2IpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Ly8gRmFsbGJhY2sgcGF0aCAoZWl0aGVyIEFQSSA8IDEuMTEuMCBvciBTZXR0aW5nR3JvdXAgbm90IGZvdW5kKVxyXG5cdC8vIEFkZCBzY29waW5nIGNsYXNzIHRvIGNvbnRhaW5lckVsIHRvIHNjb3BlIENTUyB0byBvbmx5IHRoaXMgcGx1Z2luJ3Mgc2V0dGluZ3NcclxuXHRpZiAobWFuaWZlc3RJZCkge1xyXG5cdFx0Y29udGFpbmVyRWwuYWRkQ2xhc3MoYCR7bWFuaWZlc3RJZH0tc2V0dGluZ3MtY29tcGF0YCk7XHJcblx0fVxyXG5cdFxyXG5cdHtcclxuXHRcdC8vIEZhbGxiYWNrOiBDcmVhdGUgYSBoZWFkaW5nIG1hbnVhbGx5IGZvciBvbGRlciBBUEkgdmVyc2lvbnNcclxuXHRcdC8vIE5vdGU6IFdoaWxlIGJlc3QgcHJhY3RpY2UgcHJlZmVycyBTZXR0aW5nLnNldEhlYWRpbmcoKSwgdGhlIGZhbGxiYWNrIHBhdGhcclxuXHRcdC8vIGlzIGZvciB2ZXJzaW9ucyB0aGF0IG1heSBub3Qgc3VwcG9ydCBpdCwgc28gbWFudWFsIGhlYWRpbmcgaXMgYXBwcm9wcmlhdGUgaGVyZVxyXG5cdFx0aWYgKGhlYWRpbmcpIHtcclxuXHRcdFx0Y29uc3QgaGVhZGluZ0VsID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCdzZXR0aW5nLWdyb3VwLWhlYWRpbmcnKTtcclxuXHRcdFx0aGVhZGluZ0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogaGVhZGluZyB9KTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpIHtcclxuXHRcdFx0XHRjb25zdCBzZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpO1xyXG5cdFx0XHRcdGNiKHNldHRpbmcpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH1cclxufVxyXG5cclxuIiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBURmlsZSwgc2V0SWNvbiB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgU0VPUGx1Z2luIGZyb20gXCIuLi9tYWluXCI7XHJcbmltcG9ydCB7IFNFT1Jlc3VsdHMgfSBmcm9tIFwiLi4vdHlwZXNcIjtcclxuaW1wb3J0IHsgU0VPQ3VycmVudFBhbmVsVmlld1R5cGUsIFNFT0dsb2JhbFBhbmVsVmlld1R5cGUgfSBmcm9tIFwiLi9wYW5lbC1jb25zdGFudHNcIjtcclxuaW1wb3J0IHsgZ2V0VmF1bHRGb2xkZXJzSW5mbyB9IGZyb20gXCIuL3BhbmVsLXV0aWxzXCI7XHJcbmltcG9ydCB7IFBhbmVsQWN0aW9ucyB9IGZyb20gXCIuL3BhbmVsLWFjdGlvbnNcIjtcclxuaW1wb3J0IHsgUmVzdWx0c0Rpc3BsYXkgfSBmcm9tIFwiLi9yZXN1bHRzLWRpc3BsYXlcIjtcclxuaW1wb3J0IHsgUGFuZWxSZW5kZXJlciB9IGZyb20gXCIuL3BhbmVsLXJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IGlzU3VwcG9ydGVkRmlsZSB9IGZyb20gXCIuLi91dGlscy9maWxlLXV0aWxzXCI7XHJcblxyXG50eXBlIFNvcnRUeXBlID0gJ2lzc3Vlcy1kZXNjJyB8ICdpc3N1ZXMtYXNjJyB8ICd3YXJuaW5ncy1kZXNjJyB8ICd3YXJuaW5ncy1hc2MnIHwgJ25vdGljZXMtZGVzYycgfCAnbm90aWNlcy1hc2MnIHwgJ2ZpbGVuYW1lLWFzYycgfCAnZmlsZW5hbWUtZGVzYyc7XHJcblxyXG5leHBvcnQgY2xhc3MgU0VPU2lkZVBhbmVsIGV4dGVuZHMgSXRlbVZpZXcge1xyXG5cdHBsdWdpbjogU0VPUGx1Z2luO1xyXG5cdGN1cnJlbnROb3RlUmVzdWx0czogU0VPUmVzdWx0cyB8IG51bGwgPSBudWxsO1xyXG5cdGdsb2JhbFJlc3VsdHM6IFNFT1Jlc3VsdHNbXSA9IFtdO1xyXG5cdHBhbmVsVHlwZTogJ2N1cnJlbnQnIHwgJ2dsb2JhbCcgPSAnY3VycmVudCc7XHJcblx0Y3VycmVudFNvcnQ6IFNvcnRUeXBlO1xyXG5cdGhhc1J1bkluaXRpYWxTY2FuOiBib29sZWFuID0gZmFsc2U7XHJcblx0cHJpdmF0ZSBpc1JlZnJlc2hpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHRwcml2YXRlIGN1cnJlbnRBdWRpdENvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlciB8IG51bGwgPSBudWxsO1xyXG5cdFxyXG5cdC8vIFN0YXRpYyBwcm9wZXJ0eSB0byB0cmFjayB0aGUgY3VycmVudCBhdWRpdCBjb250cm9sbGVyIGdsb2JhbGx5XHJcblx0cHVibGljIHN0YXRpYyBnbG9iYWxBdWRpdENvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlciB8IG51bGwgPSBudWxsO1xyXG5cdFxyXG5cdHByaXZhdGUgYWN0aW9uczogUGFuZWxBY3Rpb25zO1xyXG5cdHByaXZhdGUgcmVzdWx0c0Rpc3BsYXk6IFJlc3VsdHNEaXNwbGF5O1xyXG5cdHByaXZhdGUgcmVuZGVyZXI6IFBhbmVsUmVuZGVyZXI7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogU0VPUGx1Z2luLCBwYW5lbFR5cGU6ICdjdXJyZW50JyB8ICdnbG9iYWwnID0gJ2N1cnJlbnQnLCBsZWFmPzogV29ya3NwYWNlTGVhZikge1xyXG5cdFx0c3VwZXIobGVhZiB8fCBwbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkpO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0XHR0aGlzLnBhbmVsVHlwZSA9IHBhbmVsVHlwZTtcclxuXHRcdHRoaXMuY3VycmVudFNvcnQgPSBwbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFNvcnQ7XHJcblx0XHRcclxuXHRcdHRoaXMuYWN0aW9ucyA9IG5ldyBQYW5lbEFjdGlvbnModGhpcy5hcHAsIHRoaXMucGx1Z2luLCB0aGlzLnBhbmVsVHlwZSk7XHJcblx0XHR0aGlzLnJlc3VsdHNEaXNwbGF5ID0gbmV3IFJlc3VsdHNEaXNwbGF5KFxyXG5cdFx0XHR0aGlzLmNvbnRhaW5lckVsLFxyXG5cdFx0XHRhc3luYyAoZmlsZVBhdGg6IHN0cmluZykgPT4gYXdhaXQgdGhpcy5hY3Rpb25zLm9wZW5GaWxlKGZpbGVQYXRoKSxcclxuXHRcdFx0YXN5bmMgKGZpbGVQYXRoOiBzdHJpbmcpID0+IGF3YWl0IHRoaXMuYWN0aW9ucy5vcGVuRmlsZUFuZEF1ZGl0KGZpbGVQYXRoKVxyXG5cdFx0KTtcclxuXHRcdHRoaXMucmVuZGVyZXIgPSBuZXcgUGFuZWxSZW5kZXJlcih0aGlzLmFwcCwgdGhpcy5wbHVnaW4sIHRoaXMuYWN0aW9ucyk7XHJcblx0XHRcclxuXHRcdFxyXG5cdFx0Ly8gTm8gZ2xvYmFsIGV2ZW50IGRlbGVnYXRpb24gLSB3ZSdsbCBoYW5kbGUgdGhpcyBpbiByZW5kZXIoKVxyXG5cdFx0XHJcblx0XHQvLyBMaXN0ZW4gZm9yIGZpbGUgY2hhbmdlcyB0byB1cGRhdGUgY3VycmVudCBub3RlIHBhbmVsXHJcblx0XHRpZiAodGhpcy5wYW5lbFR5cGUgPT09ICdjdXJyZW50Jykge1xyXG5cdFx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKCdhY3RpdmUtbGVhZi1jaGFuZ2UnLCAoKSA9PiB7XHJcblx0XHRcdFx0Ly8gQ2FuY2VsIGFueSBvbmdvaW5nIGF1ZGl0IHdoZW4gc3dpdGNoaW5nIGZpbGVzXHJcblx0XHRcdFx0aWYgKFNFT1NpZGVQYW5lbC5nbG9iYWxBdWRpdENvbnRyb2xsZXIpIHtcclxuXHRcdFx0XHRcdFNFT1NpZGVQYW5lbC5nbG9iYWxBdWRpdENvbnRyb2xsZXIuYWJvcnQoKTtcclxuXHRcdFx0XHRcdFNFT1NpZGVQYW5lbC5nbG9iYWxBdWRpdENvbnRyb2xsZXIgPSBudWxsO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5kZWJ1ZygnQXVkaXQgY2FuY2VsbGVkIGR1ZSB0byBmaWxlIHN3aXRjaCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBEb24ndCByZS1yZW5kZXIgaWYgd2UncmUgY3VycmVudGx5IHJlZnJlc2hpbmdcclxuXHRcdFx0XHRpZiAodGhpcy5pc1JlZnJlc2hpbmcpIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQWx3YXlzIHVwZGF0ZSB3aGVuIHN3aXRjaGluZyBmaWxlcyAoc2hvd3MgY2FjaGVkIHJlc3VsdHMgaWYgYXZhaWxhYmxlKVxyXG5cdFx0XHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0XHRcdGlmICghYWN0aXZlRmlsZSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBVcGRhdGUgdGhlIHBhbmVsIHdpdGggY2FjaGVkIHJlc3VsdHMgZm9yIHRoZSBuZXcgZmlsZSAobm8gbmV3IGF1ZGl0KVxyXG5cdFx0XHRcdGlmIChhY3RpdmVGaWxlKSB7XHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUN1cnJlbnROb3RlUmVzdWx0cyhhY3RpdmVGaWxlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIE5vdGU6IFJlbW92ZWQgcmVhbC10aW1lIGF1ZGl0IG9uIGZpbGUgbW9kaWZpY2F0aW9uIHRvIGltcHJvdmUgcGVyZm9ybWFuY2VcclxuXHRcdFx0Ly8gQXVkaXRzIHNob3VsZCBvbmx5IGJlIHRyaWdnZXJlZCBieSBleHBsaWNpdCB1c2VyIGFjdGlvbnMgKGJ1dHRvbnMsIGNvbW1hbmRzKVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Z2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiB0aGlzLnBhbmVsVHlwZSA9PT0gJ2N1cnJlbnQnID8gU0VPQ3VycmVudFBhbmVsVmlld1R5cGUgOiBTRU9HbG9iYWxQYW5lbFZpZXdUeXBlO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhc3luYyBoYW5kbGVSZWZyZXNoQ2xpY2soYnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Ly8gUHJldmVudCBtdWx0aXBsZSBjbGlja3NcclxuXHRcdGlmIChidXR0b24uZGlzYWJsZWQpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBDYW5jZWwgYW55IGV4aXN0aW5nIGF1ZGl0XHJcblx0XHRpZiAoU0VPU2lkZVBhbmVsLmdsb2JhbEF1ZGl0Q29udHJvbGxlcikge1xyXG5cdFx0XHRTRU9TaWRlUGFuZWwuZ2xvYmFsQXVkaXRDb250cm9sbGVyLmFib3J0KCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIENyZWF0ZSBuZXcgYWJvcnQgY29udHJvbGxlciBmb3IgdGhpcyBhdWRpdFxyXG5cdFx0U0VPU2lkZVBhbmVsLmdsb2JhbEF1ZGl0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuXHRcdFxyXG5cdFx0dGhpcy5pc1JlZnJlc2hpbmcgPSB0cnVlO1xyXG5cdFx0YnV0dG9uLnRleHRDb250ZW50ID0gJ1JlZnJlc2hpbmcuLi4nO1xyXG5cdFx0YnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuXHRcdFxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5hY3Rpb25zLmNoZWNrQ3VycmVudE5vdGUoU0VPU2lkZVBhbmVsLmdsb2JhbEF1ZGl0Q29udHJvbGxlci5zaWduYWwpO1xyXG5cdFx0XHRpZiAocmVzdWx0KSB7XHJcblx0XHRcdFx0dGhpcy5jdXJyZW50Tm90ZVJlc3VsdHMgPSByZXN1bHQ7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQ2xlYXIgQUxMIGV4aXN0aW5nIHJlc3VsdHMgbW9yZSBhZ2dyZXNzaXZlbHlcclxuXHRcdFx0XHRjb25zdCBleGlzdGluZ1Jlc3VsdHMgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZW8tcmVzdWx0cy1jb250YWluZXIsIC5zZW8tZmlsZS1pc3N1ZSwgLnNlby1pc3N1ZSwgLnNlby13YXJuaW5nLCAuc2VvLW5vdGljZSwgLnNlby1pbmZvLW5vdGUsIC5zZW8tY2hlY2ssIC5zZW8tcmVzdWx0LCAuc2VvLXNjb3JlLWhlYWRlciwgLnNlby1zY29yZS10ZXh0LCAuc2VvLXNjb3JlLW51bWJlciwgLnNlby10b2dnbGUtaWNvbiwgLnNlby1jb2xsYXBzZS1pY29uJyk7XHJcblx0XHRcdFx0ZXhpc3RpbmdSZXN1bHRzLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIENyZWF0ZSBhIG5ldyByZXN1bHRzIGNvbnRhaW5lciBhbmQgcmVuZGVyIHJlc3VsdHNcclxuXHRcdFx0XHRjb25zdCBuZXdSZXN1bHRzQ29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tcmVzdWx0cy1jb250YWluZXInIH0pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFJldXNlIGV4aXN0aW5nIFJlc3VsdHNEaXNwbGF5IGluc3RhbmNlIHRvIHByZXNlcnZlIGNvbGxhcHNlIHN0YXRlc1xyXG5cdFx0XHRcdHRoaXMucmVzdWx0c0Rpc3BsYXkudXBkYXRlQ29udGFpbmVyKG5ld1Jlc3VsdHNDb250YWluZXIpO1xyXG5cdFx0XHRcdHRoaXMucmVzdWx0c0Rpc3BsYXkucmVuZGVyUmVzdWx0cyhyZXN1bHQpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFVwZGF0ZSBnbG9iYWwgcmVzdWx0cyBpZiB0aGV5IGV4aXN0IChidXQgZG9uJ3QgdHJpZ2dlciByZS1yZW5kZXIpXHJcblx0XHRcdFx0dGhpcy51cGRhdGVHbG9iYWxSZXN1bHRzSWZFeGlzdHMocmVzdWx0KTtcclxuXHRcdFx0fVxyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0aWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XHJcblx0XHRcdFx0Y29uc29sZS5kZWJ1ZygnQXVkaXQgd2FzIGNhbmNlbGxlZCcpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvciBpbiByZWZyZXNoIGJ1dHRvbjonLCBlcnJvcik7XHJcblx0XHR9IGZpbmFsbHkge1xyXG5cdFx0XHR0aGlzLmlzUmVmcmVzaGluZyA9IGZhbHNlO1xyXG5cdFx0XHRidXR0b24udGV4dENvbnRlbnQgPSAnUmVmcmVzaCc7XHJcblx0XHRcdGJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG5cdFx0XHRTRU9TaWRlUGFuZWwuZ2xvYmFsQXVkaXRDb250cm9sbGVyID0gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cclxuXHRnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIHRoaXMucGFuZWxUeXBlID09PSAnY3VycmVudCcgPyBcIlNFTyBhdWRpdDogY3VycmVudCBub3RlXCIgOiBcIlNFTyBhdWRpdDogdmF1bHRcIjtcclxuXHR9XHJcblxyXG5cdGdldEljb24oKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBcInNlYXJjaC1jaGVja1wiO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgb25PcGVuKCkge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Ly8gTG9hZCBjYWNoZWQgcmVzdWx0cyBmb3IgZ2xvYmFsIHBhbmVsXHJcblx0XHRcdGlmICh0aGlzLnBhbmVsVHlwZSA9PT0gJ2dsb2JhbCcgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FjaGVkR2xvYmFsUmVzdWx0cy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0dGhpcy5nbG9iYWxSZXN1bHRzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FjaGVkR2xvYmFsUmVzdWx0cztcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gRW5zdXJlIGljb24gaXMgY29ycmVjdCBiZWZvcmUgcmVuZGVyaW5nXHJcblx0XHRcdHRoaXMuZm9yY2VJY29uUmVmcmVzaCgpO1xyXG5cclxuXHRcdFx0Ly8gQXV0by1zY2FuIGZvciBnbG9iYWwgcGFuZWwgb24gZmlyc3Qgb3BlbiBpZiBubyBjYWNoZWQgcmVzdWx0c1xyXG5cdFx0XHRpZiAodGhpcy5wYW5lbFR5cGUgPT09ICdnbG9iYWwnICYmICF0aGlzLmhhc1J1bkluaXRpYWxTY2FuICYmIHRoaXMuZ2xvYmFsUmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0XHQvLyBTaG93IGxvYWRpbmcgc3RhdGUgZmlyc3RcclxuXHRcdFx0XHR0aGlzLnNob3dMb2FkaW5nU3RhdGUoKTtcclxuXHRcdFx0XHR0aGlzLmhhc1J1bkluaXRpYWxTY2FuID0gdHJ1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnJ1bkluaXRpYWxTY2FuKCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gUmVuZGVyIG5vcm1hbGx5IGlmIHdlIGhhdmUgY2FjaGVkIHJlc3VsdHMgb3IgaXQncyBub3QgYSBnbG9iYWwgcGFuZWxcclxuXHRcdFx0XHR0aGlzLnJlbmRlcigpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvciBvcGVuaW5nIFNFTyBwYW5lbDonLCBlcnJvcik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhc3luYyBvbkNsb3NlKCkge1xyXG5cdFx0Ly8gQ2xlYW51cCBpZiBuZWVkZWRcclxuXHR9XHJcblxyXG5cdGNsZWFudXAoKSB7XHJcblx0XHQvLyBDbGVhbnVwIHJlc291cmNlc1xyXG5cdH1cclxuXHJcblx0Ly8gUnVuIGluaXRpYWwgc2NhbiBmb3IgZ2xvYmFsIHBhbmVsXHJcblx0YXN5bmMgcnVuSW5pdGlhbFNjYW4oKSB7XHJcblx0XHRjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5hY3Rpb25zLnJ1bkluaXRpYWxTY2FuKCk7XHJcblx0XHRpZiAocmVzdWx0cy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdHRoaXMuZ2xvYmFsUmVzdWx0cyA9IHJlc3VsdHM7XHJcblx0XHRcdHRoaXMucmVuZGVyKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBGb3JjZSBpY29uIHJlZnJlc2ggdG8gaGFuZGxlIE9ic2lkaWFuJ3MgaWNvbiBjYWNoaW5nIGlzc3Vlc1xyXG5cdHB1YmxpYyBmb3JjZUljb25SZWZyZXNoKCkge1xyXG5cdFx0Ly8gSW1tZWRpYXRlIGFwcHJvYWNoIC0gdHJ5IHRvIHNldCBpY29uIGJlZm9yZSBET00gaXMgcmVuZGVyZWRcclxuXHRcdC8vIFRoaXMgc2hvdWxkIHByZXZlbnQgdGhlIGZsYXNoIG9mIHdyb25nIGljb25cclxuXHRcdFxyXG5cdFx0Ly8gRm9yY2UgcmUtcmVnaXN0cmF0aW9uIG9mIHRoZSB2aWV3IHdpdGggY29ycmVjdCBpY29uXHJcblx0XHRpZiAodGhpcy5sZWFmKSB7XHJcblx0XHRcdHZvaWQgdGhpcy5sZWFmLnNldFZpZXdTdGF0ZSh7XHJcblx0XHRcdFx0dHlwZTogdGhpcy5nZXRWaWV3VHlwZSgpLFxyXG5cdFx0XHRcdHN0YXRlOiB0aGlzLmxlYWYudmlldy5nZXRTdGF0ZSgpXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBBbHNvIGRvIHRoZSBET00gbWFuaXB1bGF0aW9uIGFzIGJhY2t1cFxyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdC8vIEFwcHJvYWNoIDE6IERpcmVjdCBET00gbWFuaXB1bGF0aW9uIG9mIGljb24gZWxlbWVudFxyXG5cdFx0XHRjb25zdCBpY29uRWwgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy52aWV3LWhlYWRlci1pY29uJykgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdGlmIChpY29uRWwpIHtcclxuXHRcdFx0XHQvLyBDbGVhciBhbmQgcmVzZXQgdGhlIGljb24gdXNpbmcgRE9NIEFQSVxyXG5cdFx0XHRcdHdoaWxlIChpY29uRWwuZmlyc3RDaGlsZCkge1xyXG5cdFx0XHRcdFx0aWNvbkVsLnJlbW92ZUNoaWxkKGljb25FbC5maXJzdENoaWxkKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWNvbkVsLnNldEF0dHJpYnV0ZSgnZGF0YS1pY29uJywgJ3NlYXJjaC1jaGVjaycpO1xyXG5cdFx0XHRcdC8vIEZvcmNlIGEgcmUtcmVuZGVyIGJ5IHRlbXBvcmFyaWx5IGNoYW5naW5nIHRoZSBhdHRyaWJ1dGVcclxuXHRcdFx0XHRpY29uRWwuc2V0QXR0cmlidXRlKCdkYXRhLWljb24nLCAnJyk7XHJcblx0XHRcdFx0dm9pZCBpY29uRWwub2Zmc2V0SGVpZ2h0OyAvLyBGb3JjZSByZWZsb3dcclxuXHRcdFx0XHRpY29uRWwuc2V0QXR0cmlidXRlKCdkYXRhLWljb24nLCAnc2VhcmNoLWNoZWNrJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIEFwcHJvYWNoIDI6IEZvcmNlIHJlLXJlbmRlciBvZiB0aGUgZW50aXJlIGhlYWRlclxyXG5cdFx0XHRjb25zdCBoZWFkZXJFbCA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLnZpZXctaGVhZGVyJykgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdGlmIChoZWFkZXJFbCkge1xyXG5cdFx0XHRcdGhlYWRlckVsLmFkZENsYXNzKCdzZW8taGVhZGVyLWhpZGRlbicpO1xyXG5cdFx0XHRcdHZvaWQgaGVhZGVyRWwub2Zmc2V0SGVpZ2h0OyAvLyBGb3JjZSByZWZsb3dcclxuXHRcdFx0XHRoZWFkZXJFbC5yZW1vdmVDbGFzcygnc2VvLWhlYWRlci1oaWRkZW4nKTtcclxuXHRcdFx0XHRoZWFkZXJFbC5hZGRDbGFzcygnc2VvLWhlYWRlci12aXNpYmxlJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIEFwcHJvYWNoIDM6IFRyaWdnZXIgYSB3b3Jrc3BhY2UgcmVmcmVzaFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UudHJpZ2dlcignbGF5b3V0LWNoYW5nZScpO1xyXG5cdFx0fSwgNTApOyAvLyBSZWR1Y2VkIHRpbWVvdXQgZm9yIGZhc3RlciBjb3JyZWN0aW9uXHJcblx0fVxyXG5cclxuXHR1cGRhdGVDdXJyZW50Tm90ZVJlc3VsdHMoZmlsZTogVEZpbGUpIHtcclxuXHRcdGlmICghZmlsZSB8fCAhZmlsZS5wYXRoLmVuZHNXaXRoKCcubWQnKSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Ly8gQ2hlY2sgaWYgd2UgaGF2ZSBjYWNoZWQgcmVzdWx0cyBmb3IgdGhpcyBmaWxlXHJcblx0XHRcdGxldCBjdXJyZW50RmlsZVJlc3VsdHM6IFNFT1Jlc3VsdHMgfCBudWxsID0gbnVsbDtcclxuXHRcdFx0XHJcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWNoZWRHbG9iYWxSZXN1bHRzKSB7XHJcblx0XHRcdFx0Ly8gRmluZCByZXN1bHRzIGZvciB0aGUgY3VycmVudCBmaWxlIGluIHRoZSBnbG9iYWwgcmVzdWx0c1xyXG5cdFx0XHRcdGN1cnJlbnRGaWxlUmVzdWx0cyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNhY2hlZEdsb2JhbFJlc3VsdHMuZmluZChcclxuXHRcdFx0XHRcdHJlc3VsdCA9PiByZXN1bHQuZmlsZSA9PT0gZmlsZS5wYXRoXHJcblx0XHRcdFx0KSB8fCBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBVcGRhdGUgY3VycmVudE5vdGVSZXN1bHRzIHdpdGggY2FjaGVkIHJlc3VsdHMgaWYgYXZhaWxhYmxlXHJcblx0XHRcdGlmIChjdXJyZW50RmlsZVJlc3VsdHMpIHtcclxuXHRcdFx0XHR0aGlzLmN1cnJlbnROb3RlUmVzdWx0cyA9IGN1cnJlbnRGaWxlUmVzdWx0cztcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBDbGVhciBjdXJyZW50IG5vdGUgcmVzdWx0cyB3aGVuIHN3aXRjaGluZyBmaWxlcyBpZiBubyBjYWNoZWQgcmVzdWx0c1xyXG5cdFx0XHRcdHRoaXMuY3VycmVudE5vdGVSZXN1bHRzID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gU2hvdyByZXN1bHRzIGlmIHdlIGhhdmUgdGhlbSAoZWl0aGVyIGZyb20gY3VycmVudCBub3RlIGF1ZGl0IG9yIGdsb2JhbCBhdWRpdClcclxuXHRcdFx0Y29uc3QgcmVzdWx0c1RvU2hvdyA9IHRoaXMuY3VycmVudE5vdGVSZXN1bHRzO1xyXG5cdFx0XHRcclxuXHRcdFx0XHJcblx0XHRcdC8vIENsZWFyIGV4aXN0aW5nIHJlc3VsdHNcclxuXHRcdFx0Y29uc3QgZXhpc3RpbmdSZXN1bHRzID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VvLXJlc3VsdHMtY29udGFpbmVyLCAuc2VvLWZpbGUtaXNzdWUsIC5zZW8taXNzdWUsIC5zZW8td2FybmluZywgLnNlby1ub3RpY2UsIC5zZW8taW5mby1ub3RlLCAuc2VvLWNoZWNrLCAuc2VvLXJlc3VsdCwgLnNlby1zY29yZS1oZWFkZXIsIC5zZW8tc2NvcmUtdGV4dCwgLnNlby1zY29yZS1udW1iZXIsIC5zZW8tdG9nZ2xlLWljb24sIC5zZW8tY29sbGFwc2UtaWNvbicpO1xyXG5cdFx0XHRleGlzdGluZ1Jlc3VsdHMuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSk7XHJcblx0XHRcdFxyXG5cdFx0aWYgKHJlc3VsdHNUb1Nob3cpIHtcclxuXHRcdFx0Ly8gQ3JlYXRlIGEgbmV3IHJlc3VsdHMgY29udGFpbmVyIGFuZCByZW5kZXIgcmVzdWx0c1xyXG5cdFx0XHRjb25zdCBuZXdSZXN1bHRzQ29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tcmVzdWx0cy1jb250YWluZXInIH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gUmV1c2UgdGhlIGV4aXN0aW5nIHJlc3VsdHMgZGlzcGxheSBpbnN0YW5jZSBvciBjcmVhdGUgYSBuZXcgb25lXHJcblx0XHRcdGlmICghdGhpcy5yZXN1bHRzRGlzcGxheSkge1xyXG5cdFx0XHRcdHRoaXMucmVzdWx0c0Rpc3BsYXkgPSBuZXcgUmVzdWx0c0Rpc3BsYXkoXHJcblx0XHRcdFx0XHRuZXdSZXN1bHRzQ29udGFpbmVyLFxyXG5cdFx0XHRcdFx0YXN5bmMgKGZpbGVQYXRoOiBzdHJpbmcpID0+IGF3YWl0IHRoaXMuYWN0aW9ucy5vcGVuRmlsZShmaWxlUGF0aCksXHJcblx0XHRcdFx0XHRhc3luYyAoZmlsZVBhdGg6IHN0cmluZykgPT4gYXdhaXQgdGhpcy5hY3Rpb25zLm9wZW5GaWxlQW5kQXVkaXQoZmlsZVBhdGgpXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBVcGRhdGUgdGhlIGNvbnRhaW5lciBmb3IgdGhlIGV4aXN0aW5nIGluc3RhbmNlXHJcblx0XHRcdFx0dGhpcy5yZXN1bHRzRGlzcGxheS51cGRhdGVDb250YWluZXIobmV3UmVzdWx0c0NvbnRhaW5lcik7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHRoaXMucmVzdWx0c0Rpc3BsYXkucmVuZGVyUmVzdWx0cyhyZXN1bHRzVG9TaG93KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFBhbmVsIGlzIHJlYWR5IGZvciBpbnRlcmFjdGlvbnMgd2l0aG91dCBzdGVhbGluZyBmb2N1c1xyXG5cdFx0XHRcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gTm8gcmVzdWx0cyBhdmFpbGFibGUsIHNob3cgbWVzc2FnZVxyXG5cdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogXCJTRU9cIiBpcyBhIHByb3BlciBub3VuIChhY3JvbnltKSBhbmQgc2hvdWxkIGJlIGNhcGl0YWxpemVkXHJcblx0XHRcdHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgXHJcblx0XHRcdFx0Y2xzOiAnc2VvLWluZm8tbm90ZSBzZW8tbm8tcmVzdWx0cy1tZXNzYWdlJyxcclxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0dGV4dDogJ05vIFNFTyByZXN1bHRzIGF2YWlsYWJsZSBmb3IgdGhpcyBmaWxlLiBDbGljayBcIlJlZnJlc2hcIiB0byBydW4gYW4gYXVkaXQuJ1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gVXBkYXRlIHRoZSBoZWFkZXIgd2l0aCB0aGUgbmV3IGZpbGUgbmFtZSAocHJlc2VydmVzIGJ1dHRvbiBldmVudCBsaXN0ZW5lcnMpXHJcblx0XHRcdHRoaXMudXBkYXRlSGVhZGVyQW5kUmVzdWx0cygpO1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgY3VycmVudCBub3RlIHJlc3VsdHM6JywgZXJyb3IpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlcyBvbmx5IHRoZSBoZWFkZXIgYW5kIHJlc3VsdHMgY29udGVudCB3aXRob3V0IHJlLXJlbmRlcmluZyB0aGUgZW50aXJlIHBhbmVsXHJcblx0ICogVGhpcyBwcmVzZXJ2ZXMgYnV0dG9uIGV2ZW50IGxpc3RlbmVycyBhbmQgb3RoZXIgVUkgc3RhdGVcclxuXHQgKi9cclxuXHRwcml2YXRlIHVwZGF0ZUhlYWRlckFuZFJlc3VsdHMoKSB7XHJcblx0XHQvLyBVcGRhdGUgdGhlIGhlYWRlciB3aXRoIHRoZSBjdXJyZW50IGZpbGUgbmFtZVxyXG5cdFx0Y29uc3QgaGVhZGVyID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcuc2VvLXBhbmVsLWhlYWRlcicpO1xyXG5cdFx0aWYgKGhlYWRlcikge1xyXG5cdFx0XHRjb25zdCBmaWxlbmFtZUVsID0gaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5zZW8tZmlsZW5hbWUnKTtcclxuXHRcdFx0aWYgKGZpbGVuYW1lRWwpIHtcclxuXHRcdFx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuXHRcdFx0XHRpZiAoYWN0aXZlRmlsZSAmJiBpc1N1cHBvcnRlZEZpbGUoYWN0aXZlRmlsZSwgdGhpcy5wbHVnaW4uc2V0dGluZ3MpKSB7XHJcblx0XHRcdFx0XHQvLyBHZXQgdGhlIGNvcnJlY3QgZGlzcGxheSBuYW1lIGJhc2VkIG9uIHRoZSBjdXJyZW50IGFjdGl2ZSBmaWxlXHJcblx0XHRcdFx0XHRsZXQgZGlzcGxheU5hbWUgPSBhY3RpdmVGaWxlLnBhdGg7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIElmIHdlIGhhdmUgY3VycmVudCBub3RlIHJlc3VsdHMgZm9yIHRoaXMgc3BlY2lmaWMgZmlsZSwgdXNlIGl0cyBkaXNwbGF5IG5hbWVcclxuXHRcdFx0XHRcdGlmICh0aGlzLmN1cnJlbnROb3RlUmVzdWx0cyAmJiB0aGlzLmN1cnJlbnROb3RlUmVzdWx0cy5maWxlID09PSBhY3RpdmVGaWxlLnBhdGgpIHtcclxuXHRcdFx0XHRcdFx0ZGlzcGxheU5hbWUgPSB0aGlzLmN1cnJlbnROb3RlUmVzdWx0cy5kaXNwbGF5TmFtZSB8fCBhY3RpdmVGaWxlLnBhdGg7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGdsb2JhbCByZXN1bHRzIGZvciB0aGlzIGZpbGUsIHVzZSBpdHMgZGlzcGxheSBuYW1lXHJcblx0XHRcdFx0XHRlbHNlIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWNoZWRHbG9iYWxSZXN1bHRzKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGdsb2JhbFJlc3VsdCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNhY2hlZEdsb2JhbFJlc3VsdHMuZmluZChcclxuXHRcdFx0XHRcdFx0XHRyZXN1bHQgPT4gcmVzdWx0LmZpbGUgPT09IGFjdGl2ZUZpbGUucGF0aFxyXG5cdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRpZiAoZ2xvYmFsUmVzdWx0KSB7XHJcblx0XHRcdFx0XHRcdFx0ZGlzcGxheU5hbWUgPSBnbG9iYWxSZXN1bHQuZGlzcGxheU5hbWUgfHwgYWN0aXZlRmlsZS5wYXRoO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGZpbGVuYW1lRWwudGV4dENvbnRlbnQgPSBgVGFyZ2V0IG5vdGU6ICR7ZGlzcGxheU5hbWV9YDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHVwZGF0ZVJlc3VsdHMocmVzdWx0czogU0VPUmVzdWx0c1tdKSB7XHJcblx0XHR0aGlzLmdsb2JhbFJlc3VsdHMgPSByZXN1bHRzO1xyXG5cdFx0dGhpcy5yZW5kZXIoKTtcclxuXHR9XHJcblxyXG5cdC8vIFNob3cgbG9hZGluZyBzdGF0ZSBmb3IgbGFyZ2Ugc2NhbnNcclxuXHRzaG93TG9hZGluZ1N0YXRlKCkge1xyXG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblx0XHRjb250YWluZXJFbC5hZGRDbGFzcygnc2VvLXBhbmVsJyk7XHJcblxyXG5cdFx0Ly8gSGVhZGVyXHJcblx0XHRjb25zdCBoZWFkZXIgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tcGFuZWwtaGVhZGVyJyB9KTtcclxuXHRcdGhlYWRlci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHRoaXMucGFuZWxUeXBlID09PSAnY3VycmVudCcgPyAnU0VPIGF1ZGl0OiBjdXJyZW50IG5vdGUnIDogJ1NFTyBhdWRpdDogdmF1bHQnIH0pO1xyXG5cclxuXHRcdC8vIFNob3cgdmF1bHQgZm9sZGVycyBpbmZvcm1hdGlvbiBmb3IgZ2xvYmFsIHBhbmVsXHJcblx0XHRpZiAodGhpcy5wYW5lbFR5cGUgPT09ICdnbG9iYWwnKSB7XHJcblx0XHRcdGNvbnN0IGZvbGRlcnNJbmZvID0gZ2V0VmF1bHRGb2xkZXJzSW5mbyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY2FuRGlyZWN0b3JpZXMpO1xyXG5cdFx0XHRjb25zdCBmb2xkZXJzRWwgPSBoZWFkZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLWZpbGVuYW1lJyB9KTtcclxuXHRcdFx0Zm9sZGVyc0VsLnRleHRDb250ZW50ID0gZm9sZGVyc0luZm87XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gTG9hZGluZyBzdGF0ZVxyXG5cdFx0Y29uc3QgbG9hZGluZ0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1sb2FkaW5nLWNvbnRhaW5lcicgfSk7XHJcblx0XHRjb25zdCBzcGlubmVyRWwgPSBsb2FkaW5nQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1sb2FkaW5nLXNwaW5uZXInIH0pO1xyXG5cdFx0c2V0SWNvbihzcGlubmVyRWwsICdsb2FkZXItY2lyY2xlJyk7XHJcblx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogXCJTRU9cIiBpcyBhIHByb3BlciBub3VuIChhY3JvbnltKSBhbmQgc2hvdWxkIGJlIGNhcGl0YWxpemVkXHJcblx0XHRsb2FkaW5nQ29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgXHJcblx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0dGV4dDogJ1J1bm5pbmcgU0VPIGF1ZGl0Li4uJyxcclxuXHRcdFx0Y2xzOiAnc2VvLWxvYWRpbmctdGl0bGUnXHJcblx0XHR9KTtcclxuXHRcdGxvYWRpbmdDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IFxyXG5cdFx0XHR0ZXh0OiAnVGhpcyBtYXkgdGFrZSBhIG1vbWVudCBmb3IgbGFyZ2UgdmF1bHRzLiBQbGVhc2Ugd2FpdC4uLicsXHJcblx0XHRcdGNsczogJ3Nlby1sb2FkaW5nLW1lc3NhZ2UnXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8vIE1ldGhvZCB0byByZWZyZXNoIHRoZSBwYW5lbCB3aGVuIHNldHRpbmdzIGNoYW5nZVxyXG5cdHJlZnJlc2goKSB7XHJcblx0XHR0aGlzLnJlbmRlcigpO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyKCkge1xyXG5cdFx0Ly8gVXNlIHRoZSBuZXcgcmVuZGVyZXIgZm9yIGNsZWFuZXIgY29kZSBvcmdhbml6YXRpb25cclxuXHRcdHRoaXMucmVuZGVyZXIucmVuZGVyKFxyXG5cdFx0XHR0aGlzLmNvbnRhaW5lckVsLFxyXG5cdFx0XHR0aGlzLnBhbmVsVHlwZSxcclxuXHRcdFx0dGhpcy5jdXJyZW50Tm90ZVJlc3VsdHMsXHJcblx0XHRcdHRoaXMuZ2xvYmFsUmVzdWx0cyxcclxuXHRcdFx0YXN5bmMgKGJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQpID0+IGF3YWl0IHRoaXMuaGFuZGxlUmVmcmVzaENsaWNrKGJ0biksXHJcblx0XHRcdGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmFjdGlvbnMuY2hlY2tFeHRlcm5hbExpbmtzKCk7XHJcblx0XHRcdFx0aWYgKHJlc3VsdCkge1xyXG5cdFx0XHRcdFx0dGhpcy5jdXJyZW50Tm90ZVJlc3VsdHMgPSByZXN1bHQ7XHJcblx0XHRcdFx0XHQvLyBVcGRhdGUgZ2xvYmFsIHJlc3VsdHMgaWYgdGhleSBleGlzdFxyXG5cdFx0XHRcdFx0dGhpcy51cGRhdGVHbG9iYWxSZXN1bHRzSWZFeGlzdHMocmVzdWx0KTtcclxuXHRcdFx0XHRcdHRoaXMucmVuZGVyKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHQpO1xyXG5cclxuXHRcdC8vIEhhbmRsZSBjdXN0b20gZXZlbnRzIGZyb20gdGhlIHJlbmRlcmVyXHJcblx0XHR0aGlzLmNvbnRhaW5lckVsLmFkZEV2ZW50TGlzdGVuZXIoJ3Nlby1yZWZyZXNoLWNvbXBsZXRlJywgKGV2ZW50OiBFdmVudCkgPT4ge1xyXG5cdFx0XHRjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50PHsgcmVzdWx0czogU0VPUmVzdWx0c1tdIH0+O1xyXG5cdFx0XHR0aGlzLmdsb2JhbFJlc3VsdHMgPSBjdXN0b21FdmVudC5kZXRhaWwucmVzdWx0cztcclxuXHRcdFx0dGhpcy5yZW5kZXIoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuY29udGFpbmVyRWwuYWRkRXZlbnRMaXN0ZW5lcignc2VvLXNvcnQtY2hhbmdlJywgKGV2ZW50OiBFdmVudCkgPT4ge1xyXG5cdFx0XHRjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50PHsgc29ydFR5cGU6IFNvcnRUeXBlIH0+O1xyXG5cdFx0XHR0aGlzLmN1cnJlbnRTb3J0ID0gY3VzdG9tRXZlbnQuZGV0YWlsLnNvcnRUeXBlO1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0U29ydCA9IGN1c3RvbUV2ZW50LmRldGFpbC5zb3J0VHlwZTtcclxuXHRcdFx0dm9pZCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0dGhpcy5yZW5kZXIoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogTGVnYWN5IHJlbmRlciBtZXRob2QgLSBrZXB0IGFzIGZhbGxiYWNrIGR1cmluZyBtaWdyYXRpb25cclxuXHQgKiBUT0RPOiBSZW1vdmUgb25jZSBQYW5lbFJlbmRlcmVyIGlzIGZ1bGx5IHRlc3RlZFxyXG5cdCAqL1xyXG5cdHByaXZhdGUgcmVuZGVyTGVnYWN5KCkge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHRcdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHRcdFx0Y29udGFpbmVyRWwuYWRkQ2xhc3MoJ3Nlby1wYW5lbCcpO1xyXG5cclxuXHRcdFx0Ly8gSGVhZGVyIHdpdGggcHJvcGVyIHNwYWNpbmdcclxuXHRcdFx0Y29uc3QgaGVhZGVyID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLXBhbmVsLWhlYWRlcicgfSk7XHJcblx0XHRcdGhlYWRlci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHRoaXMucGFuZWxUeXBlID09PSAnY3VycmVudCcgPyAnU0VPIGF1ZGl0OiBjdXJyZW50IG5vdGUnIDogJ1NFTyBhdWRpdDogdmF1bHQnIH0pO1xyXG5cclxuXHRcdFx0Ly8gU2hvdyBjdXJyZW50IG5vdGUgZmlsZSBwYXRoIGlmIGF2YWlsYWJsZVxyXG5cdFx0XHRpZiAodGhpcy5wYW5lbFR5cGUgPT09ICdjdXJyZW50Jykge1xyXG5cdFx0XHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0XHRcdGlmIChhY3RpdmVGaWxlICYmIGlzU3VwcG9ydGVkRmlsZShhY3RpdmVGaWxlLCB0aGlzLnBsdWdpbi5zZXR0aW5ncykpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGZpbGVuYW1lRWwgPSBoZWFkZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLWZpbGVuYW1lJyB9KTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gR2V0IHRoZSBjb3JyZWN0IGRpc3BsYXkgbmFtZSBiYXNlZCBvbiB0aGUgY3VycmVudCBhY3RpdmUgZmlsZVxyXG5cdFx0XHRcdFx0bGV0IGRpc3BsYXlOYW1lID0gYWN0aXZlRmlsZS5wYXRoO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGN1cnJlbnQgbm90ZSByZXN1bHRzIGZvciB0aGlzIHNwZWNpZmljIGZpbGUsIHVzZSBpdHMgZGlzcGxheSBuYW1lXHJcblx0XHRcdFx0XHRpZiAodGhpcy5jdXJyZW50Tm90ZVJlc3VsdHMgJiYgdGhpcy5jdXJyZW50Tm90ZVJlc3VsdHMuZmlsZSA9PT0gYWN0aXZlRmlsZS5wYXRoKSB7XHJcblx0XHRcdFx0XHRcdGRpc3BsYXlOYW1lID0gdGhpcy5jdXJyZW50Tm90ZVJlc3VsdHMuZGlzcGxheU5hbWUgfHwgYWN0aXZlRmlsZS5wYXRoO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBnbG9iYWwgcmVzdWx0cyBmb3IgdGhpcyBmaWxlLCB1c2UgaXRzIGRpc3BsYXkgbmFtZVxyXG5cdFx0XHRcdFx0ZWxzZSBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FjaGVkR2xvYmFsUmVzdWx0cykge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBnbG9iYWxSZXN1bHQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWNoZWRHbG9iYWxSZXN1bHRzLmZpbmQoXHJcblx0XHRcdFx0XHRcdFx0cmVzdWx0ID0+IHJlc3VsdC5maWxlID09PSBhY3RpdmVGaWxlLnBhdGhcclxuXHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0aWYgKGdsb2JhbFJlc3VsdCkge1xyXG5cdFx0XHRcdFx0XHRcdGRpc3BsYXlOYW1lID0gZ2xvYmFsUmVzdWx0LmRpc3BsYXlOYW1lIHx8IGFjdGl2ZUZpbGUucGF0aDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRmaWxlbmFtZUVsLnRleHRDb250ZW50ID0gYFRhcmdldCBub3RlOiAke2Rpc3BsYXlOYW1lfWA7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIFNob3cgdmF1bHQgZm9sZGVycyBpbmZvcm1hdGlvbiBmb3IgZ2xvYmFsIHBhbmVsXHJcblx0XHRcdFx0Y29uc3QgZmlsZUNvdW50ID0gdGhpcy5nbG9iYWxSZXN1bHRzLmxlbmd0aDtcclxuXHRcdFx0XHRjb25zdCBmb2xkZXJzSW5mbyA9IGdldFZhdWx0Rm9sZGVyc0luZm8odGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NhbkRpcmVjdG9yaWVzLCBmaWxlQ291bnQpO1xyXG5cdFx0XHRcdGNvbnN0IGZvbGRlcnNFbCA9IGhlYWRlci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tZmlsZW5hbWUnIH0pO1xyXG5cdFx0XHRcdGZvbGRlcnNFbC50ZXh0Q29udGVudCA9IGZvbGRlcnNJbmZvO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBBY3Rpb24gYnV0dG9uIGF0IHRoZSB0b3BcclxuXHRcdFx0aWYgKHRoaXMucGFuZWxUeXBlID09PSAnY3VycmVudCcpIHtcclxuXHRcdFx0XHRjb25zdCBhdWRpdEN1cnJlbnRCdG4gPSBjb250YWluZXJFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuXHRcdFx0XHRcdHRleHQ6ICdSZWZyZXNoJyxcclxuXHRcdFx0XHRcdGNsczogJ21vZC1jdGEgc2VvLWJ0biBzZW8tdG9wLWJ0bidcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBVc2Ugb25seSBjbGljayBldmVudCB0byBhdm9pZCBkb3VibGUgZXhlY3V0aW9uXHJcblx0XHRcdFx0YXVkaXRDdXJyZW50QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XHJcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuaGFuZGxlUmVmcmVzaENsaWNrKGF1ZGl0Q3VycmVudEJ0bik7XHJcblx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHQvLyBFeHRlcm5hbCBsaW5rcyBidXR0b24gKG9ubHkgc2hvdyBpZiBlbmFibGVkIGluIHNldHRpbmdzIGFuZCB2YXVsdC13aWRlIGlzIGRpc2FibGVkKVxyXG5cdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVFeHRlcm5hbExpbmtCdXR0b24gJiYgIXRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUV4dGVybmFsTGlua1ZhdWx0Q2hlY2spIHtcclxuXHRcdFx0XHRcdGNvbnN0IGV4dGVybmFsTGlua3NCdG4gPSBjb250YWluZXJFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuXHRcdFx0XHRcdFx0dGV4dDogJ0NoZWNrIGV4dGVybmFsIGxpbmtzIGZvciA0MDRzJyxcclxuXHRcdFx0XHRcdFx0Y2xzOiAnc2VvLWJ0bidcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0ZXh0ZXJuYWxMaW5rc0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGV4dGVybmFsTGlua3NCdG4uZGlzYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdGV4dGVybmFsTGlua3NCdG4udGV4dENvbnRlbnQgPSAnVGhpcyBtYXkgdGFrZSBzb21lIHRpbWUuLi4nO1xyXG5cdFx0XHRcdFx0XHRcdGV4dGVybmFsTGlua3NCdG4uYWRkQ2xhc3MoJ3Nlby1idG4tZGlzYWJsZWQnKTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5hY3Rpb25zLmNoZWNrRXh0ZXJuYWxMaW5rcygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHJlc3VsdCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmN1cnJlbnROb3RlUmVzdWx0cyA9IHJlc3VsdDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIGdsb2JhbCByZXN1bHRzIGlmIHRoZXkgZXhpc3RcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy51cGRhdGVHbG9iYWxSZXN1bHRzSWZFeGlzdHMocmVzdWx0KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9IGZpbmFsbHkge1xyXG5cdFx0XHRcdFx0XHRcdFx0ZXh0ZXJuYWxMaW5rc0J0bi5kaXNhYmxlZCA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdFx0ZXh0ZXJuYWxMaW5rc0J0bi50ZXh0Q29udGVudCA9ICdDaGVjayBleHRlcm5hbCBsaW5rcyBmb3IgNDA0cyc7XHJcblx0XHRcdFx0XHRcdFx0XHRleHRlcm5hbExpbmtzQnRuLnJlbW92ZUNsYXNzKCdzZW8tYnRuLWRpc2FibGVkJyk7XHJcblx0XHRcdFx0XHRcdFx0XHRleHRlcm5hbExpbmtzQnRuLmFkZENsYXNzKCdzZW8tYnRuLWVuYWJsZWQnKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIENvbnRlbnQgYmFzZWQgb24gcGFuZWwgdHlwZVxyXG5cdFx0XHRpZiAodGhpcy5wYW5lbFR5cGUgPT09ICdjdXJyZW50Jykge1xyXG5cdFx0XHRcdC8vIENoZWNrIGlmIHdlIGhhdmUgcmVzdWx0cyBmb3IgdGhlIGN1cnJlbnQgZmlsZSBmcm9tIGdsb2JhbCBhdWRpdFxyXG5cdFx0XHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0XHRcdGxldCBjdXJyZW50RmlsZVJlc3VsdHM6IFNFT1Jlc3VsdHMgfCBudWxsID0gbnVsbDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoYWN0aXZlRmlsZSAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWNoZWRHbG9iYWxSZXN1bHRzKSB7XHJcblx0XHRcdFx0XHQvLyBGaW5kIHJlc3VsdHMgZm9yIHRoZSBjdXJyZW50IGZpbGUgaW4gdGhlIGdsb2JhbCByZXN1bHRzXHJcblx0XHRcdFx0XHRjdXJyZW50RmlsZVJlc3VsdHMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWNoZWRHbG9iYWxSZXN1bHRzLmZpbmQoXHJcblx0XHRcdFx0XHRcdHJlc3VsdCA9PiByZXN1bHQuZmlsZSA9PT0gYWN0aXZlRmlsZS5wYXRoXHJcblx0XHRcdFx0XHQpIHx8IG51bGw7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFNob3cgcmVzdWx0cyBpZiB3ZSBoYXZlIHRoZW0gKGVpdGhlciBmcm9tIGN1cnJlbnQgbm90ZSBhdWRpdCBvciBnbG9iYWwgYXVkaXQpXHJcblx0XHRcdFx0Y29uc3QgcmVzdWx0c1RvU2hvdyA9IHRoaXMuY3VycmVudE5vdGVSZXN1bHRzIHx8IGN1cnJlbnRGaWxlUmVzdWx0cztcclxuXHRcdFx0XHRpZiAocmVzdWx0c1RvU2hvdykge1xyXG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIGEgbmV3IHJlc3VsdHMgY29udGFpbmVyIGFuZCByZW5kZXIgcmVzdWx0c1xyXG5cdFx0XHRcdFx0Y29uc3QgbmV3UmVzdWx0c0NvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLXJlc3VsdHMtY29udGFpbmVyJyB9KTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIGEgbmV3IHJlc3VsdHMgZGlzcGxheSBpbnN0YW5jZSBmb3IgdGhpcyBjb250YWluZXJcclxuXHRcdFx0XHRcdGNvbnN0IHRlbXBSZXN1bHRzRGlzcGxheSA9IG5ldyBSZXN1bHRzRGlzcGxheShcclxuXHRcdFx0XHRcdFx0bmV3UmVzdWx0c0NvbnRhaW5lcixcclxuXHRcdFx0XHRcdFx0YXN5bmMgKGZpbGVQYXRoOiBzdHJpbmcpID0+IGF3YWl0IHRoaXMuYWN0aW9ucy5vcGVuRmlsZShmaWxlUGF0aCksXHJcblx0XHRcdFx0XHRcdGFzeW5jIChmaWxlUGF0aDogc3RyaW5nKSA9PiBhd2FpdCB0aGlzLmFjdGlvbnMub3BlbkZpbGVBbmRBdWRpdChmaWxlUGF0aClcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHR0ZW1wUmVzdWx0c0Rpc3BsYXkucmVuZGVyUmVzdWx0cyhyZXN1bHRzVG9TaG93KTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRjb25zdCBub1Jlc3VsdHMgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tbm8tcmVzdWx0cycgfSk7XHJcblx0XHRcdFx0XHRjb25zdCBmaWxlVHlwZVRleHQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVNRFhTdXBwb3J0ID8gJ21hcmtkb3duIG9yIE1EWCBmaWxlJyA6ICdtYXJrZG93biBmaWxlJztcclxuXHRcdFx0XHRcdG5vUmVzdWx0cy5jcmVhdGVFbCgncCcsIHsgdGV4dDogYE9wZW4gYSAke2ZpbGVUeXBlVGV4dH0gYW5kIGNsaWNrIFwiUmVmcmVzaFwiIHRvIGF1ZGl0IGl0LmAgfSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGlmICh0aGlzLmdsb2JhbFJlc3VsdHMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJHbG9iYWxSZXN1bHRzKGNvbnRhaW5lckVsKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Y29uc3Qgbm9HbG9iYWwgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tbm8tcmVzdWx0cycgfSk7XHJcblx0XHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogQ29udGFpbnMgcXVvdGVkIHRleHQgd2hpY2ggaXMgYWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlXHJcblx0XHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0XHRub0dsb2JhbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0NsaWNrIFwiQXVkaXQgYWxsIG5vdGVzXCIgdG8gYXVkaXQgeW91ciBmaWxlcyBpbiB5b3VyIGNvbmZpZ3VyZWQgZGlyZWN0b3JpZXMuJyB9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvciByZW5kZXJpbmcgU0VPIHBhbmVsOicsIGVycm9yKTtcclxuXHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFwiU0VPXCIgaXMgYSBwcm9wZXIgbm91biAoYWNyb255bSkgYW5kIHNob3VsZCBiZSBjYXBpdGFsaXplZFxyXG5cdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ0Vycm9yIGxvYWRpbmcgU0VPIHBhbmVsLiBQbGVhc2UgdHJ5IGFnYWluLicgfSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHNob3VsZEluY2x1ZGVGaWxlSW5HbG9iYWxSZXN1bHRzKGZpbGVQYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcclxuXHRcdC8vIENoZWNrIGlmIGZpbGUgc2hvdWxkIGJlIGV4Y2x1ZGVkIGJhc2VkIG9uIHVuZGVyc2NvcmUgcHJlZml4IHNldHRpbmdcclxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pZ25vcmVVbmRlcnNjb3JlRmlsZXMpIHtcclxuXHRcdFx0Y29uc3QgZmlsZU5hbWUgPSBmaWxlUGF0aC5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRjb25zdCBiYXNlbmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLlteLy5dKyQvLCAnJyk7IC8vIFJlbW92ZSBleHRlbnNpb25cclxuXHRcdFx0aWYgKGJhc2VuYW1lLnN0YXJ0c1dpdGgoJ18nKSkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTsgLy8gRXhjbHVkZSBmaWxlcyB3aXRoIHVuZGVyc2NvcmUgcHJlZml4XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gQ2hlY2sgaWYgZmlsZSBzaG91bGQgYmUgZXhjbHVkZWQgYmFzZWQgb24gZGlyZWN0b3J5IHNldHRpbmdzXHJcblx0XHRjb25zdCB7IHNjYW5EaXJlY3RvcmllcyB9ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XHJcblx0XHRpZiAoc2NhbkRpcmVjdG9yaWVzLnRyaW0oKSkge1xyXG5cdFx0XHRjb25zdCBkaXJlY3RvcmllcyA9IHNjYW5EaXJlY3Rvcmllcy5zcGxpdCgnLCcpLm1hcChkaXIgPT4gZGlyLnRyaW0oKSk7XHJcblx0XHRcdGNvbnN0IGlzSW5Db25maWd1cmVkRGlyZWN0b3J5ID0gZGlyZWN0b3JpZXMuc29tZShkaXIgPT4gXHJcblx0XHRcdFx0ZmlsZVBhdGguc3RhcnRzV2l0aChkaXIgKyAnLycpIHx8IGZpbGVQYXRoID09PSBkaXJcclxuXHRcdFx0KTtcclxuXHRcdFx0cmV0dXJuIGlzSW5Db25maWd1cmVkRGlyZWN0b3J5O1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gdHJ1ZTsgLy8gSW5jbHVkZSBmaWxlIGlmIG5vIHJlc3RyaWN0aW9ucyBhcHBseVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSB1cGRhdGVHbG9iYWxSZXN1bHRzSWZFeGlzdHMoY3VycmVudFJlc3VsdDogU0VPUmVzdWx0cyk6IHZvaWQge1xyXG5cdFx0Ly8gT25seSB1cGRhdGUgaWYgZ2xvYmFsIHJlc3VsdHMgZXhpc3RcclxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWNoZWRHbG9iYWxSZXN1bHRzICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmNhY2hlZEdsb2JhbFJlc3VsdHMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHQvLyBDaGVjayBpZiB0aGlzIGZpbGUgc2hvdWxkIGJlIGluY2x1ZGVkIGluIGdsb2JhbCByZXN1bHRzXHJcblx0XHRcdGlmICghdGhpcy5zaG91bGRJbmNsdWRlRmlsZUluR2xvYmFsUmVzdWx0cyhjdXJyZW50UmVzdWx0LmZpbGUpKSB7XHJcblx0XHRcdFx0cmV0dXJuOyAvLyBEb24ndCB1cGRhdGUgZ2xvYmFsIHJlc3VsdHMgZm9yIGZpbGVzIHRoYXQgc2hvdWxkIGJlIGV4Y2x1ZGVkXHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIEZpbmQgdGhlIGZpbGUgaW4gZ2xvYmFsIHJlc3VsdHMgYW5kIHVwZGF0ZSBpdFxyXG5cdFx0XHRjb25zdCBnbG9iYWxSZXN1bHRzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FjaGVkR2xvYmFsUmVzdWx0cztcclxuXHRcdFx0Y29uc3QgZXhpc3RpbmdJbmRleCA9IGdsb2JhbFJlc3VsdHMuZmluZEluZGV4KHIgPT4gci5maWxlID09PSBjdXJyZW50UmVzdWx0LmZpbGUpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGV4aXN0aW5nSW5kZXggIT09IC0xKSB7XHJcblx0XHRcdFx0Ly8gVXBkYXRlIGV4aXN0aW5nIHJlc3VsdFxyXG5cdFx0XHRcdGdsb2JhbFJlc3VsdHNbZXhpc3RpbmdJbmRleF0gPSBjdXJyZW50UmVzdWx0O1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIEFkZCBuZXcgcmVzdWx0IGlmIG5vdCBmb3VuZCAoc2hvdWxkbid0IGhhcHBlbiBub3JtYWxseSlcclxuXHRcdFx0XHRnbG9iYWxSZXN1bHRzLnB1c2goY3VycmVudFJlc3VsdCk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFNhdmUgdXBkYXRlZCByZXN1bHRzXHJcblx0XHRcdHZvaWQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBVcGRhdGUgZ2xvYmFsIHBhbmVsIGlmIGl0J3Mgb3BlblxyXG5cdFx0XHR0aGlzLnVwZGF0ZUdsb2JhbFBhbmVsSWZPcGVuKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHVwZGF0ZURpc3BsYXlOYW1lKCk6IHZvaWQge1xyXG5cdFx0Ly8gVXBkYXRlIGRpc3BsYXkgbmFtZSBhbmQgcmVzdWx0cyBmb3IgdGhlIG5ldyBmaWxlXHJcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuXHRcdGlmIChhY3RpdmVGaWxlICYmIGlzU3VwcG9ydGVkRmlsZShhY3RpdmVGaWxlLCB0aGlzLnBsdWdpbi5zZXR0aW5ncykpIHtcclxuXHRcdFx0Ly8gVXBkYXRlIHRoZSBkaXNwbGF5IG5hbWVcclxuXHRcdFx0Y29uc3QgZmlsZW5hbWVFbCA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLnNlby1maWxlbmFtZScpO1xyXG5cdFx0XHRpZiAoZmlsZW5hbWVFbCkge1xyXG5cdFx0XHRcdC8vIEdldCB0aGUgY29ycmVjdCBkaXNwbGF5IG5hbWUgYmFzZWQgb24gdGhlIGN1cnJlbnQgYWN0aXZlIGZpbGVcclxuXHRcdFx0XHRsZXQgZGlzcGxheU5hbWUgPSBhY3RpdmVGaWxlLnBhdGg7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBjdXJyZW50IG5vdGUgcmVzdWx0cyBmb3IgdGhpcyBzcGVjaWZpYyBmaWxlLCB1c2UgaXRzIGRpc3BsYXkgbmFtZVxyXG5cdFx0XHRcdGlmICh0aGlzLmN1cnJlbnROb3RlUmVzdWx0cyAmJiB0aGlzLmN1cnJlbnROb3RlUmVzdWx0cy5maWxlID09PSBhY3RpdmVGaWxlLnBhdGgpIHtcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lID0gdGhpcy5jdXJyZW50Tm90ZVJlc3VsdHMuZGlzcGxheU5hbWUgfHwgYWN0aXZlRmlsZS5wYXRoO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGdsb2JhbCByZXN1bHRzIGZvciB0aGlzIGZpbGUsIHVzZSBpdHMgZGlzcGxheSBuYW1lXHJcblx0XHRcdFx0ZWxzZSBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FjaGVkR2xvYmFsUmVzdWx0cykge1xyXG5cdFx0XHRcdFx0Y29uc3QgZ2xvYmFsUmVzdWx0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FjaGVkR2xvYmFsUmVzdWx0cy5maW5kKFxyXG5cdFx0XHRcdFx0XHRyZXN1bHQgPT4gcmVzdWx0LmZpbGUgPT09IGFjdGl2ZUZpbGUucGF0aFxyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdGlmIChnbG9iYWxSZXN1bHQpIHtcclxuXHRcdFx0XHRcdFx0ZGlzcGxheU5hbWUgPSBnbG9iYWxSZXN1bHQuZGlzcGxheU5hbWUgfHwgYWN0aXZlRmlsZS5wYXRoO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRmaWxlbmFtZUVsLnRleHRDb250ZW50ID0gYFRhcmdldCBub3RlOiAke2Rpc3BsYXlOYW1lfWA7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFVwZGF0ZSB0aGUgcmVzdWx0cyBkaXNwbGF5XHJcblx0XHRcdHRoaXMudXBkYXRlUmVzdWx0c0ZvckN1cnJlbnRGaWxlKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHVwZGF0ZVJlc3VsdHNGb3JDdXJyZW50RmlsZSgpOiB2b2lkIHtcclxuXHRcdC8vIENoZWNrIGlmIHdlIGhhdmUgcmVzdWx0cyBmb3IgdGhlIGN1cnJlbnQgZmlsZSBmcm9tIGdsb2JhbCBhdWRpdFxyXG5cdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRsZXQgY3VycmVudEZpbGVSZXN1bHRzOiBTRU9SZXN1bHRzIHwgbnVsbCA9IG51bGw7XHJcblx0XHRcclxuXHRcdGlmIChhY3RpdmVGaWxlICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmNhY2hlZEdsb2JhbFJlc3VsdHMpIHtcclxuXHRcdFx0Ly8gRmluZCByZXN1bHRzIGZvciB0aGUgY3VycmVudCBmaWxlIGluIHRoZSBnbG9iYWwgcmVzdWx0c1xyXG5cdFx0XHRjdXJyZW50RmlsZVJlc3VsdHMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWNoZWRHbG9iYWxSZXN1bHRzLmZpbmQoXHJcblx0XHRcdFx0cmVzdWx0ID0+IHJlc3VsdC5maWxlID09PSBhY3RpdmVGaWxlLnBhdGhcclxuXHRcdFx0KSB8fCBudWxsO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBTaG93IHJlc3VsdHMgaWYgd2UgaGF2ZSB0aGVtIChlaXRoZXIgZnJvbSBjdXJyZW50IG5vdGUgYXVkaXQgb3IgZ2xvYmFsIGF1ZGl0KVxyXG5cdFx0Y29uc3QgcmVzdWx0c1RvU2hvdyA9IHRoaXMuY3VycmVudE5vdGVSZXN1bHRzIHx8IGN1cnJlbnRGaWxlUmVzdWx0cztcclxuXHRcdFxyXG5cdFx0Ly8gQ2xlYXIgZXhpc3RpbmcgcmVzdWx0c1xyXG5cdFx0Y29uc3QgZXhpc3RpbmdSZXN1bHRzID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VvLXJlc3VsdHMtY29udGFpbmVyLCAuc2VvLWZpbGUtaXNzdWUsIC5zZW8taXNzdWUsIC5zZW8td2FybmluZywgLnNlby1ub3RpY2UsIC5zZW8taW5mby1ub3RlLCAuc2VvLWNoZWNrLCAuc2VvLXJlc3VsdCwgLnNlby1zY29yZS1oZWFkZXIsIC5zZW8tc2NvcmUtdGV4dCwgLnNlby1zY29yZS1udW1iZXIsIC5zZW8tdG9nZ2xlLWljb24sIC5zZW8tY29sbGFwc2UtaWNvbicpO1xyXG5cdFx0ZXhpc3RpbmdSZXN1bHRzLmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpO1xyXG5cdFx0XHJcblx0XHRpZiAocmVzdWx0c1RvU2hvdykge1xyXG5cdFx0XHQvLyBDcmVhdGUgYSBuZXcgcmVzdWx0cyBjb250YWluZXIgYW5kIHJlbmRlciByZXN1bHRzXHJcblx0XHRcdGNvbnN0IG5ld1Jlc3VsdHNDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1yZXN1bHRzLWNvbnRhaW5lcicgfSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDcmVhdGUgYSBuZXcgcmVzdWx0cyBkaXNwbGF5IGluc3RhbmNlIGZvciB0aGlzIGNvbnRhaW5lclxyXG5cdFx0XHRjb25zdCB0ZW1wUmVzdWx0c0Rpc3BsYXkgPSBuZXcgUmVzdWx0c0Rpc3BsYXkoXHJcblx0XHRcdFx0bmV3UmVzdWx0c0NvbnRhaW5lcixcclxuXHRcdFx0XHRhc3luYyAoZmlsZVBhdGg6IHN0cmluZykgPT4gYXdhaXQgdGhpcy5hY3Rpb25zLm9wZW5GaWxlKGZpbGVQYXRoKSxcclxuXHRcdFx0XHRhc3luYyAoZmlsZVBhdGg6IHN0cmluZykgPT4gYXdhaXQgdGhpcy5hY3Rpb25zLm9wZW5GaWxlQW5kQXVkaXQoZmlsZVBhdGgpXHJcblx0XHRcdCk7XHJcblx0XHRcdHRlbXBSZXN1bHRzRGlzcGxheS5yZW5kZXJSZXN1bHRzKHJlc3VsdHNUb1Nob3cpO1xyXG5cdFx0XHRcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIE5vIHJlc3VsdHMgYXZhaWxhYmxlLCBzaG93IHByb21wdFxyXG5cdFx0XHRjb25zdCBub1Jlc3VsdHMgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1uby1yZXN1bHRzJyB9KTtcclxuXHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IENvbnRhaW5zIHF1b3RlZCB0ZXh0IHdoaWNoIGlzIGFscmVhZHkgaW4gc2VudGVuY2UgY2FzZVxyXG5cdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdG5vUmVzdWx0cy5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ09wZW4gYSBtYXJrZG93biBmaWxlIGFuZCBjbGljayBcIlJlZnJlc2hcIiB0byBhdWRpdCBpdC4nIH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSB1cGRhdGVHbG9iYWxQYW5lbElmT3BlbigpOiB2b2lkIHtcclxuXHRcdC8vIEZpbmQgYW5kIHVwZGF0ZSB0aGUgZ2xvYmFsIHBhbmVsIGlmIGl0J3Mgb3BlblxyXG5cdFx0Y29uc3QgZ2xvYmFsUGFuZWxzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnc2VvLWdsb2JhbC1wYW5lbCcpO1xyXG5cdFx0XHJcblx0XHRpZiAoZ2xvYmFsUGFuZWxzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0Y29uc3QgZ2xvYmFsUGFuZWwgPSBnbG9iYWxQYW5lbHNbMF07XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoZ2xvYmFsUGFuZWw/LnZpZXcgJiYgZ2xvYmFsUGFuZWwudmlldyBpbnN0YW5jZW9mIFNFT1NpZGVQYW5lbCkge1xyXG5cdFx0XHRcdGNvbnN0IHNlb1BhbmVsID0gZ2xvYmFsUGFuZWwudmlldztcclxuXHRcdFx0XHQvLyBVcGRhdGUgdGhlIGdsb2JhbCByZXN1bHRzIGluIHRoZSBwYW5lbFxyXG5cdFx0XHRcdHNlb1BhbmVsLmdsb2JhbFJlc3VsdHMgPSBbLi4udGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FjaGVkR2xvYmFsUmVzdWx0c107XHJcblx0XHRcdFx0Ly8gUmUtcmVuZGVyIHRoZSBwYW5lbFxyXG5cdFx0XHRcdHNlb1BhbmVsLnJlbmRlcigpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbmRlckdsb2JhbFJlc3VsdHMoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG5cdFx0Ly8gUmVuZGVyIHN1bW1hcnkgc3RhdHNcclxuXHRcdHRoaXMucmVzdWx0c0Rpc3BsYXkucmVuZGVyR2xvYmFsUmVzdWx0cyh0aGlzLmdsb2JhbFJlc3VsdHMsIHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHJcblx0XHQvLyBBZGQgcmVmcmVzaCBidXR0b24gYmVsb3cgc3RhdHNcclxuXHRcdGNvbnN0IHJlZnJlc2hCdG4gPSBjb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXHJcblx0XHRcdHRleHQ6ICdSZWZyZXNoJyxcclxuXHRcdFx0Y2xzOiAnbW9kLWN0YSBzZW8tYnRuIHNlby1yZWZyZXNoLWJ0bicsXHJcblx0XHRcdGF0dHI6IHsgJ2RhdGEtcmVmcmVzaC1idG4nOiAndHJ1ZScgfVxyXG5cdFx0fSk7XHJcblx0XHRyZWZyZXNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0cmVmcmVzaEJ0bi50ZXh0Q29udGVudCA9ICdSZWZyZXNoaW5nLi4uJztcclxuXHRcdFx0XHRyZWZyZXNoQnRuLmRpc2FibGVkID0gdHJ1ZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0Y29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMuYWN0aW9ucy5yZWZyZXNoR2xvYmFsUmVzdWx0cygpO1xyXG5cdFx0XHRcdFx0aWYgKHJlc3VsdHMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmdsb2JhbFJlc3VsdHMgPSByZXN1bHRzO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlcigpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZmluYWxseSB7XHJcblx0XHRcdFx0XHRyZWZyZXNoQnRuLnRleHRDb250ZW50ID0gJ1JlZnJlc2gnO1xyXG5cdFx0XHRcdFx0cmVmcmVzaEJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSkoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFJlbmRlciBpc3N1ZXMgbGlzdCB3aXRoIHNvcnRpbmdcclxuXHRcdHRoaXMucmVzdWx0c0Rpc3BsYXkucmVuZGVySXNzdWVzTGlzdChcclxuXHRcdFx0dGhpcy5nbG9iYWxSZXN1bHRzLFxyXG5cdFx0XHR0aGlzLmN1cnJlbnRTb3J0LFxyXG5cdFx0XHQoc29ydFR5cGU6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRcdHRoaXMuY3VycmVudFNvcnQgPSBzb3J0VHlwZSBhcyBTb3J0VHlwZTtcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0U29ydCA9IHNvcnRUeXBlIGFzIFNvcnRUeXBlO1xyXG5cdFx0XHRcdHZvaWQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0sXHJcblx0XHRcdChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG5cdFx0XHRcdC8vIENoZWNrIGlmIG5vdGljZXMgc2hvdWxkIGJlIHNob3duXHJcblx0XHRcdFx0Y29uc3Qgc2hvd05vdGljZXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja1BvdGVudGlhbGx5QnJva2VuTGlua3MgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tQb3RlbnRpYWxseUJyb2tlbkVtYmVkcztcclxuXHRcdFx0XHRjb25zdCBpc3N1ZXNGaWxlcyA9IHRoaXMuZ2xvYmFsUmVzdWx0cy5maWx0ZXIociA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBoYXNJc3N1ZXMgPSByLmlzc3Vlc0NvdW50ID4gMDtcclxuXHRcdFx0XHRcdGNvbnN0IGhhc1dhcm5pbmdzID0gci53YXJuaW5nc0NvdW50ID4gMDtcclxuXHRcdFx0XHRcdGNvbnN0IGhhc05vdGljZXMgPSBzaG93Tm90aWNlcyAmJiByLm5vdGljZXNDb3VudCA+IDA7XHJcblx0XHRcdFx0XHRyZXR1cm4gaGFzSXNzdWVzIHx8IGhhc1dhcm5pbmdzIHx8IGhhc05vdGljZXM7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0dGhpcy5hY3Rpb25zLnNob3dTb3J0TWVudShldmVudCwgaXNzdWVzRmlsZXMsIGNvbnRhaW5lciwgdGhpcy5jdXJyZW50U29ydCwgKHNvcnRUeXBlOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMuY3VycmVudFNvcnQgPSBzb3J0VHlwZSBhcyBTb3J0VHlwZTtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRTb3J0ID0gc29ydFR5cGUgYXMgU29ydFR5cGU7XHJcblx0XHRcdFx0XHR2b2lkIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0sIHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3NcclxuXHRcdCk7XHJcblx0fVxyXG59XHJcbiIsICJleHBvcnQgY29uc3QgU0VPUGFuZWxWaWV3VHlwZSA9IFwic2VvLXBhbmVsXCI7XHJcbmV4cG9ydCBjb25zdCBTRU9DdXJyZW50UGFuZWxWaWV3VHlwZSA9IFwic2VvLWN1cnJlbnQtcGFuZWxcIjtcclxuZXhwb3J0IGNvbnN0IFNFT0dsb2JhbFBhbmVsVmlld1R5cGUgPSBcInNlby1nbG9iYWwtcGFuZWxcIjtcclxuIiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBzZXRJY29uLCBNZW51LCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgU0VPUmVzdWx0cyB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgU0VPU2V0dGluZ3MgfSBmcm9tIFwiLi4vc2V0dGluZ3NcIjtcbmltcG9ydCB7IHNvcnRGaWxlcyB9IGZyb20gXCIuL3BhbmVsLXV0aWxzXCI7XG5pbXBvcnQgeyBTRU9TaWRlUGFuZWwgfSBmcm9tIFwiLi9zaWRlLXBhbmVsXCI7XG5pbXBvcnQgeyBpc1N1cHBvcnRlZEZpbGUgfSBmcm9tIFwiLi4vdXRpbHMvZmlsZS11dGlsc1wiO1xuXG5pbXBvcnQgU0VPUGx1Z2luIGZyb20gXCIuLi9tYWluXCI7XG5cbmV4cG9ydCBjbGFzcyBQYW5lbEFjdGlvbnMge1xuXHRjb25zdHJ1Y3Rvcihcblx0XHRwcml2YXRlIGFwcDogQXBwLFxuXHRcdHByaXZhdGUgcGx1Z2luOiBTRU9QbHVnaW4sXG5cdFx0cHJpdmF0ZSBwYW5lbFR5cGU6ICdjdXJyZW50JyB8ICdnbG9iYWwnXG5cdCkge31cblxuXHRhc3luYyBydW5Jbml0aWFsU2NhbigpOiBQcm9taXNlPFNFT1Jlc3VsdHNbXT4ge1xuXHRcdHRyeSB7XG5cdFx0XHQvLyBHZXQgZmlsZXMgdG8gY2hlY2tcblx0XHRcdGNvbnN0IGZpbGVzID0gYXdhaXQgdGhpcy5wbHVnaW4uZ2V0RmlsZXNUb0NoZWNrKCk7XG5cdFx0XHRpZiAoZmlsZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdHJldHVybiBbXTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gU2hvdyBub3RpZmljYXRpb24gZm9yIGxhcmdlIHNjYW5zXG5cdFx0XHRpZiAoZmlsZXMubGVuZ3RoID4gMjApIHtcblx0XHRcdFx0bmV3IE5vdGljZShgUnVubmluZyBTRU8gYXVkaXQgb24gJHtmaWxlcy5sZW5ndGh9IGZpbGVzLi4uIFRoaXMgbWF5IHRha2UgYSBtb21lbnQuYCk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIEltcG9ydCBhbmQgcnVuIFNFTyBjaGVjayBkaXJlY3RseVxuXHRcdFx0Y29uc3QgeyBydW5TRU9DaGVjayB9ID0gYXdhaXQgaW1wb3J0KFwiLi4vc2VvLWNoZWNrZXJcIik7XG5cdFx0XHRjb25zdCByZXN1bHRzID0gYXdhaXQgcnVuU0VPQ2hlY2sodGhpcy5wbHVnaW4sIGZpbGVzKTtcblx0XHRcdFxuXHRcdFx0Ly8gU2F2ZSByZXN1bHRzIHRvIHNldHRpbmdzIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWNoZWRHbG9iYWxSZXN1bHRzID0gcmVzdWx0cztcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc3RTY2FuVGltZXN0YW1wID0gRGF0ZS5ub3coKTtcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XG5cdFx0XHRuZXcgTm90aWNlKGBTRU8gYXVkaXQgY29tcGxldGUgd2l0aCAke3Jlc3VsdHMubGVuZ3RofSBmaWxlcy5gKTtcblx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvciBydW5uaW5nIGluaXRpYWwgc2NhbjonLCBlcnJvcik7XG5cdFx0XHRuZXcgTm90aWNlKCdFcnJvciBhbmFseXppbmcgZmlsZXMuIENoZWNrIGNvbnNvbGUgZm9yIGRldGFpbHMuJyk7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgY2hlY2tDdXJyZW50Tm90ZShhYm9ydFNpZ25hbD86IEFib3J0U2lnbmFsKTogUHJvbWlzZTxTRU9SZXN1bHRzIHwgbnVsbD4ge1xuXHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdGlmICghYWN0aXZlRmlsZSB8fCAhaXNTdXBwb3J0ZWRGaWxlKGFjdGl2ZUZpbGUsIHRoaXMucGx1Z2luLnNldHRpbmdzKSkge1xuXHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFRleHQgaXMgYWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlXG5cdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXG5cdFx0XHRuZXcgTm90aWNlKCdQbGVhc2Ugb3BlbiBhIG1hcmtkb3duIG9yIE1EWCBmaWxlIGZpcnN0LicpO1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdC8vIENsZWFyIGNhY2hlIGZpcnN0IHRvIGVuc3VyZSBmcmVzaCByZXN1bHRzXG5cdFx0XHRjb25zdCB7IGNsZWFyQ2FjaGVGb3JGaWxlIH0gPSBhd2FpdCBpbXBvcnQoXCIuLi9zZW8tY2hlY2tlclwiKTtcblx0XHRcdGNsZWFyQ2FjaGVGb3JGaWxlKGFjdGl2ZUZpbGUucGF0aCk7XG5cdFx0XHRcblx0XHRcdC8vIEltcG9ydCBhbmQgcnVuIFNFTyBjaGVjayBkaXJlY3RseVxuXHRcdFx0Y29uc3QgeyBydW5TRU9DaGVjayB9ID0gYXdhaXQgaW1wb3J0KFwiLi4vc2VvLWNoZWNrZXJcIik7XG5cdFx0XHRjb25zdCByZXN1bHRzID0gYXdhaXQgcnVuU0VPQ2hlY2sodGhpcy5wbHVnaW4sIFthY3RpdmVGaWxlXSwgYWJvcnRTaWduYWwgPyB7IHNpZ25hbDogYWJvcnRTaWduYWwgfSBhcyBBYm9ydENvbnRyb2xsZXIgOiB1bmRlZmluZWQpO1xuXHRcdFx0XG5cdFx0aWYgKHJlc3VsdHMubGVuZ3RoID4gMCkge1xuXHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFwiU0VPXCIgaXMgYSBwcm9wZXIgbm91biAoYWNyb255bSkgYW5kIHNob3VsZCBiZSBjYXBpdGFsaXplZFxuXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxuXHRcdFx0bmV3IE5vdGljZSgnU0VPIGF1ZGl0IGNvbXBsZXRlLicpO1xuXHRcdFx0cmV0dXJuIHJlc3VsdHNbMF0gfHwgbnVsbDtcblx0XHR9XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuXHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFwiU0VPXCIgaXMgYSBwcm9wZXIgbm91biAoYWNyb255bSkgYW5kIHNob3VsZCBiZSBjYXBpdGFsaXplZFxuXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxuXHRcdFx0bmV3IE5vdGljZSgnU0VPIGF1ZGl0IGNhbmNlbGxlZC4nKTtcblx0XHRcdHRocm93IGVycm9yOyAvLyBSZS10aHJvdyBhYm9ydCBlcnJvcnNcblx0XHR9XG5cdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBjdXJyZW50IG5vdGU6JywgZXJyb3IpO1xuXHRcdFx0bmV3IE5vdGljZSgnRXJyb3IgYW5hbHl6aW5nIGN1cnJlbnQgbm90ZS4gQ2hlY2sgY29uc29sZSBmb3IgZGV0YWlscy4nKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGNoZWNrRXh0ZXJuYWxMaW5rcygpOiBQcm9taXNlPFNFT1Jlc3VsdHMgfCBudWxsPiB7XG5cdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cdFx0aWYgKCFhY3RpdmVGaWxlIHx8ICFpc1N1cHBvcnRlZEZpbGUoYWN0aXZlRmlsZSwgdGhpcy5wbHVnaW4uc2V0dGluZ3MpKSB7XG5cdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogVGV4dCBpcyBhbHJlYWR5IGluIHNlbnRlbmNlIGNhc2Vcblx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2Vcblx0XHRcdG5ldyBOb3RpY2UoJ1BsZWFzZSBvcGVuIGEgbWFya2Rvd24gb3IgTURYIGZpbGUgZmlyc3QuJyk7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0Ly8gVGVtcG9yYXJpbHkgZW5hYmxlIGV4dGVybmFsIGJyb2tlbiBsaW5rcyBjaGVja2luZyBhbmQgZGlzYWJsZSBleHRlcm5hbCBsaW5rc1xuXHRcdFx0Y29uc3Qgb3JpZ2luYWxWYXVsdFNldHRpbmcgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVFeHRlcm5hbExpbmtWYXVsdENoZWNrO1xuXHRcdFx0Y29uc3Qgb3JpZ2luYWxFeHRlcm5hbFNldHRpbmcgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja0V4dGVybmFsTGlua3M7XG5cdFx0XHRcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUV4dGVybmFsTGlua1ZhdWx0Q2hlY2sgPSB0cnVlO1xuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tFeHRlcm5hbExpbmtzID0gZmFsc2U7IC8vIERpc2FibGUgdGhlIG5vdGljZS1iYXNlZCBjaGVja1xuXHRcdFx0XG5cdFx0XHQvLyBDbGVhciBjYWNoZSBmaXJzdCB0byBlbnN1cmUgZnJlc2ggcmVzdWx0c1xuXHRcdFx0Y29uc3QgeyBjbGVhckNhY2hlRm9yRmlsZSB9ID0gYXdhaXQgaW1wb3J0KFwiLi4vc2VvLWNoZWNrZXJcIik7XG5cdFx0XHRjbGVhckNhY2hlRm9yRmlsZShhY3RpdmVGaWxlLnBhdGgpO1xuXHRcdFx0XG5cdFx0XHQvLyBJbXBvcnQgYW5kIHJ1biBTRU8gY2hlY2sgZGlyZWN0bHkgd2l0aCBleHRlcm5hbCBicm9rZW4gbGlua3MgZW5hYmxlZFxuXHRcdFx0Y29uc3QgeyBydW5TRU9DaGVjayB9ID0gYXdhaXQgaW1wb3J0KFwiLi4vc2VvLWNoZWNrZXJcIik7XG5cdFx0XHRjb25zdCByZXN1bHRzID0gYXdhaXQgcnVuU0VPQ2hlY2sodGhpcy5wbHVnaW4sIFthY3RpdmVGaWxlXSk7XG5cdFx0XHRcblx0XHRcdC8vIFJlc3RvcmUgb3JpZ2luYWwgc2V0dGluZ3Ncblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUV4dGVybmFsTGlua1ZhdWx0Q2hlY2sgPSBvcmlnaW5hbFZhdWx0U2V0dGluZztcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrRXh0ZXJuYWxMaW5rcyA9IG9yaWdpbmFsRXh0ZXJuYWxTZXR0aW5nO1xuXHRcdFx0XG5cdFx0XHRpZiAocmVzdWx0cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoJ0V4dGVybmFsIGxpbmtzIGNoZWNrIGNvbXBsZXRlLicpO1xuXHRcdFx0XHRyZXR1cm4gcmVzdWx0c1swXSB8fCBudWxsO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIGV4dGVybmFsIGxpbmtzOicsIGVycm9yKTtcblx0XHRcdG5ldyBOb3RpY2UoJ0Vycm9yIGNoZWNraW5nIGV4dGVybmFsIGxpbmtzLiBDaGVjayBjb25zb2xlIGZvciBkZXRhaWxzLicpO1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgcmVmcmVzaEdsb2JhbFJlc3VsdHMoYWJvcnRTaWduYWw/OiBBYm9ydFNpZ25hbCk6IFByb21pc2U8U0VPUmVzdWx0c1tdPiB7XG5cdFx0bGV0IGF1ZGl0Tm90aWNlOiBOb3RpY2UgfCBudWxsID0gbnVsbDtcblx0XHRcblx0XHR0cnkge1xuXHRcdFx0Ly8gQ2xlYXIgY2FjaGUgZmlyc3QgdG8gZW5zdXJlIGZyZXNoIHJlc3VsdHNcblx0XHRcdGNvbnN0IHsgY2xlYXJBbGxDYWNoZSB9ID0gYXdhaXQgaW1wb3J0KFwiLi4vc2VvLWNoZWNrZXJcIik7XG5cdFx0XHRjbGVhckFsbENhY2hlKCk7XG5cdFx0XHRcblx0XHRcdC8vIEdldCBmaWxlcyB0byBjaGVja1xuXHRcdGNvbnN0IGZpbGVzID0gYXdhaXQgdGhpcy5wbHVnaW4uZ2V0RmlsZXNUb0NoZWNrKCk7XG5cdFx0aWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Y29uc3QgZmlsZVR5cGVUZXh0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlTURYU3VwcG9ydCA/ICdtYXJrZG93biBvciBNRFggZmlsZXMnIDogJ21hcmtkb3duIGZpbGVzJztcblx0XHRcdG5ldyBOb3RpY2UoYE5vICR7ZmlsZVR5cGVUZXh0fSBmb3VuZCBpbiBjb25maWd1cmVkIGRpcmVjdG9yaWVzLmApO1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gU2hvdyBwZXJzaXN0ZW50IG5vdGlmaWNhdGlvbiBmb3IgbGFyZ2Ugc2NhbnNcblx0XHRcdGlmIChmaWxlcy5sZW5ndGggPiAyMCkge1xuXHRcdFx0XHRhdWRpdE5vdGljZSA9IG5ldyBOb3RpY2UoYFJlZnJlc2hpbmcgU0VPIGF1ZGl0IG9uICR7ZmlsZXMubGVuZ3RofSBmaWxlcy4uLiBUaGlzIG1heSB0YWtlIGEgbW9tZW50LmAsIDApO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBJbXBvcnQgYW5kIHJ1biBTRU8gY2hlY2sgZGlyZWN0bHlcblx0XHRcdGNvbnN0IHsgcnVuU0VPQ2hlY2sgfSA9IGF3YWl0IGltcG9ydChcIi4uL3Nlby1jaGVja2VyXCIpO1xuXHRcdFx0Y29uc3QgcmVzdWx0cyA9IGF3YWl0IHJ1blNFT0NoZWNrKHRoaXMucGx1Z2luLCBmaWxlcywgYWJvcnRTaWduYWwgPyB7IHNpZ25hbDogYWJvcnRTaWduYWwgfSBhcyBBYm9ydENvbnRyb2xsZXIgOiB1bmRlZmluZWQpO1xuXHRcdFx0XG5cdFx0XHQvLyBTYXZlIHJlc3VsdHMgdG8gc2V0dGluZ3MgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNhY2hlZEdsb2JhbFJlc3VsdHMgPSByZXN1bHRzO1xuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdFNjYW5UaW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcblx0XHRcdC8vIERpc21pc3MgdGhlIGF1ZGl0IG5vdGljZSBhbmQgc2hvdyBjb21wbGV0aW9uIG5vdGljZVxuXHRcdFx0aWYgKGF1ZGl0Tm90aWNlKSB7XG5cdFx0XHRcdGF1ZGl0Tm90aWNlLmhpZGUoKTtcblx0XHRcdH1cblx0XHRcdG5ldyBOb3RpY2UoYFNFTyBhdWRpdCBjb21wbGV0ZSB3aXRoICR7cmVzdWx0cy5sZW5ndGh9IGZpbGVzLmApO1xuXHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdC8vIERpc21pc3MgdGhlIGF1ZGl0IG5vdGljZSBpZiBpdCBleGlzdHNcblx0XHRcdGlmIChhdWRpdE5vdGljZSkge1xuXHRcdFx0XHRhdWRpdE5vdGljZS5oaWRlKCk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuXHRcdFx0XHRjb25zb2xlLmRlYnVnKCdWYXVsdCBhdWRpdCBjYW5jZWxsZWQgYnkgdXNlcicpO1xuXHRcdFx0XHRuZXcgTm90aWNlKCdWYXVsdCBhdWRpdCBjYW5jZWxsZWQuJyk7XG5cdFx0XHRcdHJldHVybiBbXTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgYWxsIG5vdGVzOicsIGVycm9yKTtcblx0XHRcdG5ldyBOb3RpY2UoJ0Vycm9yIGFuYWx5emluZyBmaWxlcy4gQ2hlY2sgY29uc29sZSBmb3IgZGV0YWlscy4nKTtcblx0XHRcdHJldHVybiBbXTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBvcGVuRmlsZShmaWxlUGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXHRcdFx0aWYgKGZpbGUgJiYgZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRcdC8vIFRyeSBkaWZmZXJlbnQgbWV0aG9kcyB0byB3b3JrIGFyb3VuZCBwbHVnaW4gY29uZmxpY3RzXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Ly8gTWV0aG9kIDE6IFVzZSBnZXRMZWFmIGFuZCBvcGVuXG5cdFx0XHRcdFx0Y29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCk7XG5cdFx0XHRcdFx0YXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcblx0XHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdFx0Ly8gTWV0aG9kIDI6IEZhbGxiYWNrIHRvIG9wZW5MaW5rVGV4dFxuXHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQoZmlsZVBhdGgsICcnLCB0cnVlKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gRmlsZSBub3QgZm91bmQgLSBzaG93IG5vdGlmaWNhdGlvblxuXHRcdFx0XHRuZXcgTm90aWNlKGBGaWxlIG5vdCBmb3VuZDogJHtmaWxlUGF0aH1cXG5UaGlzIGZpbGUgbWF5IGhhdmUgYmVlbiByZW5hbWVkIG9yIGRlbGV0ZWQuYCk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoYEVycm9yIG9wZW5pbmcgZmlsZSAke2ZpbGVQYXRofTpgLCBlcnJvcik7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvciBvcGVuaW5nIGZpbGU6ICR7ZmlsZVBhdGh9YCk7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgb3BlbkZpbGVBbmRBdWRpdChmaWxlUGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Ly8gR2V0IHRoZSBmaWxlIG9iamVjdFxuXHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXHRcdGlmICghZmlsZSB8fCAhKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdC8vIEZpbGUgbm90IGZvdW5kIC0gc2hvdyBub3RpZmljYXRpb25cblx0XHRcdG5ldyBOb3RpY2UoYEZpbGUgbm90IGZvdW5kOiAke2ZpbGVQYXRofVxcblRoaXMgZmlsZSBtYXkgaGF2ZSBiZWVuIHJlbmFtZWQgb3IgZGVsZXRlZC5gKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gT3BlbiB0aGUgZmlsZSBkaXJlY3RseSB1c2luZyB3b3Jrc3BhY2Vcblx0XHRhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKGZpbGUpO1xuXHRcdFxuXHRcdC8vIE9wZW4gY3VycmVudCBub3RlIHBhbmVsIGFuZCB3YWl0IGZvciBpdCB0byBiZSBmdWxseSByZWFkeVxuXHRcdHRoaXMucGx1Z2luLm9wZW5DdXJyZW50UGFuZWwoKTtcblx0XHRcblx0XHQvLyBXYWl0IGZvciB0aGUgcGFuZWwgdG8gYmUgZnVsbHkgaW5pdGlhbGl6ZWQgYW5kIGZvY3VzZWRcblx0XHRhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xuXHRcdFx0Y29uc3QgY2hlY2tQYW5lbCA9ICgpID0+IHtcblx0XHRcdFx0Y29uc3QgY3VycmVudFBhbmVscyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ3Nlby1jdXJyZW50LXBhbmVsJyk7XG5cdFx0XHRcdGlmIChjdXJyZW50UGFuZWxzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50UGFuZWwgPSBjdXJyZW50UGFuZWxzWzBdO1xuXHRcdFx0XHRcdGlmIChjdXJyZW50UGFuZWwgJiYgY3VycmVudFBhbmVsLnZpZXcpIHtcblx0XHRcdFx0XHRcdC8vIEZvY3VzIHRoZSBwYW5lbCB0byBlbnN1cmUgaXQncyBwcm9wZXJseSBhY3RpdmVcblx0XHRcdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGN1cnJlbnRQYW5lbCk7XG5cdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIgdG8gZW5zdXJlIGl0J3MgaW4gdGhlIGNvcnJlY3Qgc3RhdGVcblx0XHRcdFx0XHRcdGlmIChjdXJyZW50UGFuZWwudmlldyBpbnN0YW5jZW9mIFNFT1NpZGVQYW5lbCkge1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50UGFuZWwudmlldy5yZW5kZXIoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJlc29sdmUoKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gUGFuZWwgbm90IHJlYWR5IHlldCwgY2hlY2sgYWdhaW5cblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoY2hlY2tQYW5lbCwgNTApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBQYW5lbCBub3QgZm91bmQsIGNoZWNrIGFnYWluXG5cdFx0XHRcdFx0c2V0VGltZW91dChjaGVja1BhbmVsLCA1MCk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRjaGVja1BhbmVsKCk7XG5cdFx0fSk7XG5cblx0XHQvLyBOb3cgcnVuIHRoZSBhdWRpdCBvbiB0aGUgY3VycmVudCBub3RlXG5cdFx0dHJ5IHtcblx0XHRcdC8vIENyZWF0ZSBhYm9ydCBjb250cm9sbGVyIGZvciB0aGlzIGF1ZGl0IGlmIG9uZSBkb2Vzbid0IGV4aXN0XG5cdFx0XHRpZiAoIVNFT1NpZGVQYW5lbC5nbG9iYWxBdWRpdENvbnRyb2xsZXIpIHtcblx0XHRcdFx0U0VPU2lkZVBhbmVsLmdsb2JhbEF1ZGl0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gRGlzYWJsZSByZWZyZXNoIGJ1dHRvbiBpbiBjdXJyZW50IG5vdGUgcGFuZWwgaWYgaXQgZXhpc3RzXG5cdFx0XHQvLyBXYWl0IGEgYml0IGZvciB0aGUgcGFuZWwgdG8gYmUgZnVsbHkgcmVuZGVyZWRcblx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKTtcblx0XHRcdFxuXHRcdFx0Y29uc3QgY3VycmVudFBhbmVscyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ3Nlby1jdXJyZW50LXBhbmVsJyk7XG5cdFx0XHRpZiAoY3VycmVudFBhbmVscy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRQYW5lbCA9IGN1cnJlbnRQYW5lbHNbMF07XG5cdFx0XHRcdGlmIChjdXJyZW50UGFuZWwgJiYgY3VycmVudFBhbmVsLnZpZXcpIHtcblx0XHRcdFx0XHRjb25zdCByZWZyZXNoQnRuID0gY3VycmVudFBhbmVsLnZpZXcuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignYnV0dG9uW2RhdGEtcmVmcmVzaC1idG5dJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5cdFx0XHRcdFx0aWYgKHJlZnJlc2hCdG4pIHtcblx0XHRcdFx0XHRcdHJlZnJlc2hCdG4uZGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0cmVmcmVzaEJ0bi50ZXh0Q29udGVudCA9ICdBdWRpdGluZy4uLic7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLmNoZWNrQ3VycmVudE5vdGUoU0VPU2lkZVBhbmVsLmdsb2JhbEF1ZGl0Q29udHJvbGxlcj8uc2lnbmFsKTtcblx0XHRcdGlmIChyZXN1bHRzKSB7XG5cdFx0XHRcdC8vIFVwZGF0ZSB0aGUgY3VycmVudCBub3RlIHJlc3VsdHMgaW4gdGhlIHBhbmVsXG5cdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zaWRlUGFuZWwgJiYgdGhpcy5wbHVnaW4uc2lkZVBhbmVsLnBhbmVsVHlwZSA9PT0gJ2N1cnJlbnQnKSB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2lkZVBhbmVsLmN1cnJlbnROb3RlUmVzdWx0cyA9IHJlc3VsdHM7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2lkZVBhbmVsLnJlbmRlcigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJ1bm5pbmcgYXVkaXQgYWZ0ZXIgb3BlbmluZyBmaWxlOicsIGVycm9yKTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0Ly8gUmUtZW5hYmxlIHJlZnJlc2ggYnV0dG9uIGluIGN1cnJlbnQgbm90ZSBwYW5lbFxuXHRcdFx0Y29uc3QgY3VycmVudFBhbmVscyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ3Nlby1jdXJyZW50LXBhbmVsJyk7XG5cdFx0XHRpZiAoY3VycmVudFBhbmVscy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRQYW5lbCA9IGN1cnJlbnRQYW5lbHNbMF07XG5cdFx0XHRcdGlmIChjdXJyZW50UGFuZWwgJiYgY3VycmVudFBhbmVsLnZpZXcpIHtcblx0XHRcdFx0XHRjb25zdCByZWZyZXNoQnRuID0gY3VycmVudFBhbmVsLnZpZXcuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignYnV0dG9uW2RhdGEtcmVmcmVzaC1idG5dJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5cdFx0XHRcdFx0aWYgKHJlZnJlc2hCdG4pIHtcblx0XHRcdFx0XHRcdHJlZnJlc2hCdG4uZGlzYWJsZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdHJlZnJlc2hCdG4udGV4dENvbnRlbnQgPSAnUmVmcmVzaCc7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0c2hvd1NvcnRNZW51KGV2ZW50OiBNb3VzZUV2ZW50LCBpc3N1ZXNGaWxlczogU0VPUmVzdWx0c1tdLCBpc3N1ZXNMaXN0OiBIVE1MRWxlbWVudCwgY3VycmVudFNvcnQ6IHN0cmluZywgb25Tb3J0Q2hhbmdlOiAoc29ydFR5cGU6IHN0cmluZykgPT4gdm9pZCwgc2V0dGluZ3M/OiBTRU9TZXR0aW5ncyk6IHZvaWQge1xuXHRcdGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xuXHRcdFxuXHRcdC8vIENoZWNrIGlmIG5vdGljZXMgc2hvdWxkIGJlIHNob3duIChib3RoIHBvdGVudGlhbGx5IGJyb2tlbiBjaGVja3MgbXVzdCBiZSBlbmFibGVkKVxuXHRcdGNvbnN0IHNob3dOb3RpY2VzID0gc2V0dGluZ3MgPyBcblx0XHRcdChzZXR0aW5ncy5jaGVja1BvdGVudGlhbGx5QnJva2VuTGlua3MgJiYgc2V0dGluZ3MuY2hlY2tQb3RlbnRpYWxseUJyb2tlbkVtYmVkcykgOiBcblx0XHRcdHRydWU7XG5cdFx0XG5cdFx0Ly8gSWYgY3VycmVudCBzb3J0IGlzIG5vdGljZXMtcmVsYXRlZCBidXQgbm90aWNlcyBhcmUgZGlzYWJsZWQsIGZhbGwgYmFjayB0byBpc3N1ZXMtZGVzY1xuXHRcdC8vIEJ1dCBvbmx5IGZvciBkaXNwbGF5IHB1cnBvc2VzIC0gZG9uJ3Qgb3ZlcnJpZGUgdGhlIGFjdHVhbCBjdXJyZW50U29ydFxuXHRcdGNvbnN0IGRpc3BsYXlTb3J0ID0gKCFzaG93Tm90aWNlcyAmJiAoY3VycmVudFNvcnQgPT09ICdub3RpY2VzLWRlc2MnIHx8IGN1cnJlbnRTb3J0ID09PSAnbm90aWNlcy1hc2MnKSkgXG5cdFx0XHQ/ICdpc3N1ZXMtZGVzYycgXG5cdFx0XHQ6IGN1cnJlbnRTb3J0O1xuXHRcdFxuXHRcdC8vIElzc3VlcyAoaGlnaCB0byBsb3cpIC0gREVGQVVMVFxuXHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuXHRcdFx0aXRlbS5zZXRUaXRsZSgnSXNzdWVzIChoaWdoIHRvIGxvdyknKVxuXHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0b25Tb3J0Q2hhbmdlKCdpc3N1ZXMtZGVzYycpO1xuXHRcdFx0XHRcdHRoaXMuc29ydEFuZFJlbmRlckZpbGVzKGlzc3Vlc0ZpbGVzLCBpc3N1ZXNMaXN0LCAnaXNzdWVzLWRlc2MnLCBzZXR0aW5ncyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0aWYgKGRpc3BsYXlTb3J0ID09PSAnaXNzdWVzLWRlc2MnKSB7XG5cdFx0XHRcdGl0ZW0uc2V0SWNvbignY2hlY2snKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRcblx0XHQvLyBJc3N1ZXMgKGxvdyB0byBoaWdoKVxuXHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuXHRcdFx0aXRlbS5zZXRUaXRsZSgnSXNzdWVzIChsb3cgdG8gaGlnaCknKVxuXHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0b25Tb3J0Q2hhbmdlKCdpc3N1ZXMtYXNjJyk7XG5cdFx0XHRcdFx0dGhpcy5zb3J0QW5kUmVuZGVyRmlsZXMoaXNzdWVzRmlsZXMsIGlzc3Vlc0xpc3QsICdpc3N1ZXMtYXNjJywgc2V0dGluZ3MpO1xuXHRcdFx0XHR9KTtcblx0XHRcdGlmIChkaXNwbGF5U29ydCA9PT0gJ2lzc3Vlcy1hc2MnKSB7XG5cdFx0XHRcdGl0ZW0uc2V0SWNvbignY2hlY2snKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRcblx0XHQvLyBEaXZpZGVyXG5cdFx0bWVudS5hZGRTZXBhcmF0b3IoKTtcblx0XHRcblx0XHQvLyBXYXJuaW5ncyAoaGlnaCB0byBsb3cpXG5cdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG5cdFx0XHRpdGVtLnNldFRpdGxlKCdXYXJuaW5ncyAoaGlnaCB0byBsb3cpJylcblx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdG9uU29ydENoYW5nZSgnd2FybmluZ3MtZGVzYycpO1xuXHRcdFx0XHRcdHRoaXMuc29ydEFuZFJlbmRlckZpbGVzKGlzc3Vlc0ZpbGVzLCBpc3N1ZXNMaXN0LCAnd2FybmluZ3MtZGVzYycsIHNldHRpbmdzKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRpZiAoZGlzcGxheVNvcnQgPT09ICd3YXJuaW5ncy1kZXNjJykge1xuXHRcdFx0XHRpdGVtLnNldEljb24oJ2NoZWNrJyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0XG5cdFx0Ly8gV2FybmluZ3MgKGxvdyB0byBoaWdoKVxuXHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuXHRcdFx0aXRlbS5zZXRUaXRsZSgnV2FybmluZ3MgKGxvdyB0byBoaWdoKScpXG5cdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRvblNvcnRDaGFuZ2UoJ3dhcm5pbmdzLWFzYycpO1xuXHRcdFx0XHRcdHRoaXMuc29ydEFuZFJlbmRlckZpbGVzKGlzc3Vlc0ZpbGVzLCBpc3N1ZXNMaXN0LCAnd2FybmluZ3MtYXNjJywgc2V0dGluZ3MpO1xuXHRcdFx0XHR9KTtcblx0XHRcdGlmIChkaXNwbGF5U29ydCA9PT0gJ3dhcm5pbmdzLWFzYycpIHtcblx0XHRcdFx0aXRlbS5zZXRJY29uKCdjaGVjaycpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdFxuXHRcdC8vIERpdmlkZXJcblx0XHRtZW51LmFkZFNlcGFyYXRvcigpO1xuXHRcdFxuXHRcdC8vIE5vdGljZXMgc29ydGluZyBvcHRpb25zIChvbmx5IHNob3cgaWYgbm90aWNlcyBhcmUgZW5hYmxlZClcblx0XHRpZiAoc2hvd05vdGljZXMpIHtcblx0XHRcdC8vIE5vdGljZXMgKGhpZ2ggdG8gbG93KVxuXHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG5cdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ05vdGljZXMgKGhpZ2ggdG8gbG93KScpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0b25Tb3J0Q2hhbmdlKCdub3RpY2VzLWRlc2MnKTtcblx0XHRcdFx0XHRcdHRoaXMuc29ydEFuZFJlbmRlckZpbGVzKGlzc3Vlc0ZpbGVzLCBpc3N1ZXNMaXN0LCAnbm90aWNlcy1kZXNjJywgc2V0dGluZ3MpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoZGlzcGxheVNvcnQgPT09ICdub3RpY2VzLWRlc2MnKSB7XG5cdFx0XHRcdFx0aXRlbS5zZXRJY29uKCdjaGVjaycpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0Ly8gTm90aWNlcyAobG93IHRvIGhpZ2gpXG5cdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdFx0aXRlbS5zZXRUaXRsZSgnTm90aWNlcyAobG93IHRvIGhpZ2gpJylcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRvblNvcnRDaGFuZ2UoJ25vdGljZXMtYXNjJyk7XG5cdFx0XHRcdFx0XHR0aGlzLnNvcnRBbmRSZW5kZXJGaWxlcyhpc3N1ZXNGaWxlcywgaXNzdWVzTGlzdCwgJ25vdGljZXMtYXNjJywgc2V0dGluZ3MpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoZGlzcGxheVNvcnQgPT09ICdub3RpY2VzLWFzYycpIHtcblx0XHRcdFx0XHRpdGVtLnNldEljb24oJ2NoZWNrJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBEaXZpZGVyXG5cdFx0XHRtZW51LmFkZFNlcGFyYXRvcigpO1xuXHRcdH1cblx0XHRcblx0XHQvLyBGaWxlIG5hbWUgKEEgdG8gWilcblx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBcIihBIHRvIFopXCIgaXMgYSBzb3J0aW5nIGluZGljYXRvciwgbm90IFVJIHRleHRcblx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2Vcblx0XHRcdGl0ZW0uc2V0VGl0bGUoJ0ZpbGUgbmFtZSAoQSB0byBaKScpXG5cdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRvblNvcnRDaGFuZ2UoJ2ZpbGVuYW1lLWFzYycpO1xuXHRcdFx0XHRcdHRoaXMuc29ydEFuZFJlbmRlckZpbGVzKGlzc3Vlc0ZpbGVzLCBpc3N1ZXNMaXN0LCAnZmlsZW5hbWUtYXNjJywgc2V0dGluZ3MpO1xuXHRcdFx0XHR9KTtcblx0XHRcdGlmIChkaXNwbGF5U29ydCA9PT0gJ2ZpbGVuYW1lLWFzYycpIHtcblx0XHRcdFx0aXRlbS5zZXRJY29uKCdjaGVjaycpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdFxuXHRcdC8vIEZpbGUgbmFtZSAoWiB0byBBKVxuXHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuXHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFwiKFogdG8gQSlcIiBpcyBhIHNvcnRpbmcgaW5kaWNhdG9yLCBub3QgVUkgdGV4dFxuXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxuXHRcdFx0aXRlbS5zZXRUaXRsZSgnRmlsZSBuYW1lIChaIHRvIEEpJylcblx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdG9uU29ydENoYW5nZSgnZmlsZW5hbWUtZGVzYycpO1xuXHRcdFx0XHRcdHRoaXMuc29ydEFuZFJlbmRlckZpbGVzKGlzc3Vlc0ZpbGVzLCBpc3N1ZXNMaXN0LCAnZmlsZW5hbWUtZGVzYycsIHNldHRpbmdzKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRpZiAoZGlzcGxheVNvcnQgPT09ICdmaWxlbmFtZS1kZXNjJykge1xuXHRcdFx0XHRpdGVtLnNldEljb24oJ2NoZWNrJyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0XG5cdFx0bWVudS5zaG93QXRQb3NpdGlvbih7IHg6IGV2ZW50LmNsaWVudFgsIHk6IGV2ZW50LmNsaWVudFkgfSk7XG5cdH1cblxuXHRwcml2YXRlIHNvcnRBbmRSZW5kZXJGaWxlcyhpc3N1ZXNGaWxlczogU0VPUmVzdWx0c1tdLCBpc3N1ZXNMaXN0OiBIVE1MRWxlbWVudCwgc29ydFR5cGU6IHN0cmluZywgc2V0dGluZ3M/OiBTRU9TZXR0aW5ncyk6IHZvaWQge1xuXHRcdC8vIFNvcnQgdGhlIGFycmF5IHVzaW5nIHRoZSBwcm9wZXIgc29ydGluZyBmdW5jdGlvblxuXHRcdGNvbnN0IHNvcnRlZEZpbGVzID0gc29ydEZpbGVzKFsuLi5pc3N1ZXNGaWxlc10sIHNvcnRUeXBlKTtcblx0XHRcblx0XHQvLyBGaW5kIHRoZSBmaWxlcyBsaXN0IGNvbnRhaW5lclxuXHRcdGNvbnN0IGZpbGVzTGlzdENvbnRhaW5lciA9IGlzc3Vlc0xpc3QucXVlcnlTZWxlY3RvcignLnNlby1maWxlcy1saXN0LWNvbnRhaW5lcicpO1xuXHRcdGlmICghZmlsZXNMaXN0Q29udGFpbmVyKSByZXR1cm47XG5cdFx0XG5cdFx0Ly8gQ2xlYXIgZXhpc3RpbmcgZmlsZSBpdGVtc1xuXHRcdGZpbGVzTGlzdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc2VvLWZpbGUtaXNzdWUnKS5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZSgpKTtcblx0XHRcblx0XHQvLyBSZS1yZW5kZXIgc29ydGVkIGZpbGVzXG5cdFx0dGhpcy5yZW5kZXJGaWxlc0xpc3Qoc29ydGVkRmlsZXMsIGZpbGVzTGlzdENvbnRhaW5lciBhcyBIVE1MRWxlbWVudCwgc2V0dGluZ3MpO1xuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJGaWxlc0xpc3QoZmlsZXM6IFNFT1Jlc3VsdHNbXSwgY29udGFpbmVyOiBIVE1MRWxlbWVudCwgc2V0dGluZ3M/OiBTRU9TZXR0aW5ncyk6IHZvaWQge1xuXHRcdGZpbGVzLmZvckVhY2gocmVzdWx0ID0+IHtcblx0XHRcdGNvbnN0IGZpbGVFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tZmlsZS1pc3N1ZScgfSk7XG5cdFx0XHRmaWxlRWwuc2V0QXR0cmlidXRlKCdkYXRhLWZpbGUtcGF0aCcsIHJlc3VsdC5maWxlKTtcblx0XHRcdFxuXHRcdFx0Ly8gTWFrZSBmaWxlIHBhdGggY2xpY2thYmxlXG5cdFx0XHRjb25zdCBmaWxlTGluayA9IGZpbGVFbC5jcmVhdGVFbCgnYScsIHsgXG5cdFx0XHRcdHRleHQ6IHJlc3VsdC5kaXNwbGF5TmFtZSB8fCB0aGlzLmdldERpc3BsYXlQYXRoKHJlc3VsdC5maWxlKSxcblx0XHRcdFx0Y2xzOiAnc2VvLWZpbGUtbGluaycsXG5cdFx0XHRcdGhyZWY6ICcjJ1xuXHRcdFx0fSk7XG5cdFx0XHRmaWxlTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0dm9pZCB0aGlzLm9wZW5GaWxlKHJlc3VsdC5maWxlKTtcblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBTdGF0cyBhbmQgYXVkaXQgYnV0dG9uIGNvbnRhaW5lclxuXHRcdFx0Y29uc3Qgc3RhdHNDb250YWluZXIgPSBmaWxlRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLXN0YXRzLWNvbnRhaW5lcicgfSk7XG5cdFx0XHRcblx0XHRcdC8vIENoZWNrIGlmIG5vdGljZXMgc2hvdWxkIGJlIHNob3duXG5cdFx0XHRjb25zdCBzaG93Tm90aWNlcyA9IHNldHRpbmdzID8gXG5cdFx0XHRcdChzZXR0aW5ncy5jaGVja1BvdGVudGlhbGx5QnJva2VuTGlua3MgJiYgc2V0dGluZ3MuY2hlY2tQb3RlbnRpYWxseUJyb2tlbkVtYmVkcykgOiBcblx0XHRcdFx0dHJ1ZTtcblx0XHRcdFxuXHRcdFx0Ly8gSXNzdWVzLCB3YXJuaW5ncywgYW5kIG5vdGljZXMgdGV4dFxuXHRcdFx0Y29uc3Qgc3RhdHNUZXh0ID0gW107XG5cdFx0XHRpZiAocmVzdWx0Lmlzc3Vlc0NvdW50ID4gMCkgc3RhdHNUZXh0LnB1c2goYCR7cmVzdWx0Lmlzc3Vlc0NvdW50fSBpc3N1ZXNgKTtcblx0XHRcdGlmIChyZXN1bHQud2FybmluZ3NDb3VudCA+IDApIHN0YXRzVGV4dC5wdXNoKGAke3Jlc3VsdC53YXJuaW5nc0NvdW50fSB3YXJuaW5nc2ApO1xuXHRcdFx0aWYgKHNob3dOb3RpY2VzICYmIHJlc3VsdC5ub3RpY2VzQ291bnQgPiAwKSBzdGF0c1RleHQucHVzaChgJHtyZXN1bHQubm90aWNlc0NvdW50fSBub3RpY2VzYCk7XG5cdFx0XHRcblx0XHRcdHN0YXRzQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyBcblx0XHRcdFx0dGV4dDogc3RhdHNUZXh0LmpvaW4oJywgJyksXG5cdFx0XHRcdGNsczogJ3Nlby1maWxlLXN0YXRzJ1xuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdC8vIEF1ZGl0IGJ1dHRvblxuXHRcdFx0Y29uc3QgYXVkaXRCdG4gPSBzdGF0c0NvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0XHRjbHM6ICdjbGlja2FibGUtaWNvbiBzZW8tYXVkaXQtYnRuJyxcblx0XHRcdFx0YXR0cjogeyAnYXJpYS1sYWJlbCc6ICdBdWRpdCB0aGlzIG5vdGUnIH1cblx0XHRcdH0pO1xuXHRcdFx0c2V0SWNvbihhdWRpdEJ0biwgJ3NlYXJjaC1jaGVjaycpO1xuXHRcdFx0YXVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLm9wZW5GaWxlQW5kQXVkaXQocmVzdWx0LmZpbGUpO1xuXHRcdFx0XHR9KSgpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIGdldERpc3BsYXlQYXRoKGZ1bGxQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdC8vIFJlbW92ZSBsZWFkaW5nIHNsYXNoIGlmIHByZXNlbnQgYW5kIHNwbGl0XG5cdFx0Y29uc3QgY2xlYW5QYXRoID0gZnVsbFBhdGguc3RhcnRzV2l0aCgnLycpID8gZnVsbFBhdGguc2xpY2UoMSkgOiBmdWxsUGF0aDtcblx0XHRjb25zdCBwYXJ0cyA9IGNsZWFuUGF0aC5zcGxpdCgnLycpO1xuXHRcdGlmIChwYXJ0cy5sZW5ndGggPD0gMSkge1xuXHRcdFx0cmV0dXJuIGNsZWFuUGF0aDsgLy8gUmV0dXJuIGFzLWlzIGlmIG5vIHBhcmVudCBmb2xkZXIgKGp1c3QgZmlsZW5hbWUpXG5cdFx0fVxuXHRcdHJldHVybiBwYXJ0cy5zbGljZSgtMikuam9pbignLycpOyAvLyBSZXR1cm4gbGFzdCB0d28gcGFydHMgKHBhcmVudCBmb2xkZXIgKyBmaWxlIG5hbWUpXG5cdH1cbn1cbiIsICIvKipcclxuICogRmlsZSB1dGlsaXR5IGZ1bmN0aW9ucyBmb3IgU0VPIHBsdWdpblxyXG4gKiBQcm92aWRlcyBmdW5jdGlvbnMgdG8gY2hlY2sgZmlsZSBleHRlbnNpb25zIGFuZCBmaWx0ZXIgZmlsZXNcclxuICovXHJcblxyXG5pbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBTRU9TZXR0aW5ncyB9IGZyb20gXCIuLi9zZXR0aW5nc1wiO1xyXG5cclxuLyoqXHJcbiAqIENoZWNrcyBpZiBhIGZpbGUgaGFzIGEgc3VwcG9ydGVkIGV4dGVuc2lvbiAoTUQgb3IgTURYIGJhc2VkIG9uIHNldHRpbmdzKVxyXG4gKiBAcGFyYW0gZmlsZSAtIFRoZSBmaWxlIHRvIGNoZWNrXHJcbiAqIEBwYXJhbSBzZXR0aW5ncyAtIFBsdWdpbiBzZXR0aW5nc1xyXG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoZSBmaWxlIGV4dGVuc2lvbiBpcyBzdXBwb3J0ZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1N1cHBvcnRlZEZpbGUoZmlsZTogVEZpbGUsIHNldHRpbmdzOiBTRU9TZXR0aW5ncyk6IGJvb2xlYW4ge1xyXG5cdGNvbnN0IGV4dGVuc2lvbiA9IGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCk7XHJcblx0aWYgKGV4dGVuc2lvbiA9PT0gJ21kJykge1xyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cdGlmIChleHRlbnNpb24gPT09ICdtZHgnICYmIHNldHRpbmdzLmVuYWJsZU1EWFN1cHBvcnQpIHtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHRyZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBmaWxlIGV4dGVuc2lvbiBjaGVjayBwYXR0ZXJuIGZvciBmaWx0ZXJpbmcgZmlsZXNcclxuICogQHBhcmFtIHNldHRpbmdzIC0gUGx1Z2luIHNldHRpbmdzXHJcbiAqIEByZXR1cm5zIEFycmF5IG9mIHN1cHBvcnRlZCBleHRlbnNpb25zXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3VwcG9ydGVkRXh0ZW5zaW9ucyhzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBzdHJpbmdbXSB7XHJcblx0Y29uc3QgZXh0ZW5zaW9ucyA9IFsnbWQnXTtcclxuXHRpZiAoc2V0dGluZ3MuZW5hYmxlTURYU3VwcG9ydCkge1xyXG5cdFx0ZXh0ZW5zaW9ucy5wdXNoKCdtZHgnKTtcclxuXHR9XHJcblx0cmV0dXJuIGV4dGVuc2lvbnM7XHJcbn1cclxuIiwgImltcG9ydCB7IHNldEljb24sIEFwcCB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBTRU9SZXN1bHRzIH0gZnJvbSBcIi4uL3R5cGVzXCI7XHJcbmltcG9ydCB7IFNFT1NldHRpbmdzIH0gZnJvbSBcIi4uL3NldHRpbmdzXCI7XHJcbmltcG9ydCB7IGdldERpc3BsYXlQYXRoIH0gZnJvbSBcIi4vcGFuZWwtdXRpbHNcIjtcclxuXHJcbmludGVyZmFjZSBPYnNpZGlhbldpbmRvdyBleHRlbmRzIFdpbmRvdyB7XHJcblx0YXBwOiBBcHA7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIGNvbGxhcHNlIGljb25cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZUNvbGxhcHNlSWNvbigpOiBIVE1MRWxlbWVudCB7XHJcblx0Y29uc3QgaWNvbkVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG5cdHNldEljb24oaWNvbkVsLCAnY2hldnJvbi1kb3duJyk7XHJcblx0cmV0dXJuIGljb25FbDtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBSZXN1bHRzRGlzcGxheSB7XHJcblx0cHJpdmF0ZSBpc0NvbGxhcHNlZDogYm9vbGVhbiA9IGZhbHNlOyAvLyBUcmFjayBjb2xsYXBzZSBzdGF0ZSAoZmFsc2UgPSBleHBhbmRlZCwgdHJ1ZSA9IGNvbGxhcHNlZClcclxuXHRwcml2YXRlIGluZGl2aWR1YWxDb2xsYXBzZVN0YXRlczogTWFwPHN0cmluZywgYm9vbGVhbj4gPSBuZXcgTWFwKCk7IC8vIFRyYWNrIGluZGl2aWR1YWwgaXRlbSBjb2xsYXBzZSBzdGF0ZXNcclxuXHRcclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdHByaXZhdGUgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcclxuXHRcdHByaXZhdGUgb25GaWxlQ2xpY2s6IChmaWxlUGF0aDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+LFxyXG5cdFx0cHJpdmF0ZSBvbkZpbGVBdWRpdDogKGZpbGVQYXRoOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD5cclxuXHQpIHt9XHJcblxyXG5cdC8vIE1ldGhvZCB0byB1cGRhdGUgdGhlIGNvbnRhaW5lciAobmVlZGVkIGZvciByZXVzaW5nIGluc3RhbmNlcylcclxuXHR1cGRhdGVDb250YWluZXIobmV3Q29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG5cdFx0dGhpcy5jb250YWluZXIgPSBuZXdDb250YWluZXI7XHJcblx0fVxyXG5cclxuXHQvLyBOYXZpZ2F0aW9uIG1ldGhvZCB0byBqdW1wIHRvIHNwZWNpZmljIHBvc2l0aW9ucyBpbiB0aGUgbm90ZVxyXG5cdHByaXZhdGUgYXN5bmMgbmF2aWdhdGVUb1Bvc2l0aW9uKHBvc2l0aW9uOiB7IGxpbmU6IG51bWJlcjsgc2VhcmNoVGV4dD86IHN0cmluZzsgY29udGV4dD86IHN0cmluZyB9KTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyBHZXQgdGhlIGFwcCBpbnN0YW5jZVxyXG5cdFx0XHRjb25zdCBhcHAgPSAod2luZG93IGFzIHVua25vd24gYXMgT2JzaWRpYW5XaW5kb3cpLmFwcDtcclxuXHRcdFx0aWYgKCFhcHApIHtcclxuXHRcdFx0XHRjb25zb2xlLndhcm4oJ09ic2lkaWFuIGFwcCBub3QgZm91bmQnKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEdldCB0aGUgY3VycmVudCBhY3RpdmUgZmlsZVxyXG5cdFx0Y29uc3QgYWN0aXZlRmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0aWYgKCFhY3RpdmVGaWxlKSB7XHJcblx0XHRcdGNvbnNvbGUud2FybignTm8gYWN0aXZlIGZpbGUgZm91bmQgZm9yIG5hdmlnYXRpb24nKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIE9wZW4gdGhlIGZpbGUgaWYgaXQncyBub3QgYWxyZWFkeSBvcGVuXHJcblx0XHRhd2FpdCB0aGlzLm9uRmlsZUNsaWNrKGFjdGl2ZUZpbGUucGF0aCk7XHJcblx0XHRcclxuXHRcdC8vIEdldCB0aGUgbWFya2Rvd24gdmlldyAtIHRyeSBkaWZmZXJlbnQgYXBwcm9hY2hlc1xyXG5cdFx0Ly8gTm90ZTogVXNpbmcgdW5rbm93biBmb3IgT2JzaWRpYW4ncyBpbnRlcm5hbCB2aWV3IHR5cGVzIHRoYXQgZG9uJ3QgaGF2ZSBwdWJsaWMgdHlwZSBkZWZpbml0aW9uc1xyXG5cdFx0bGV0IG1hcmtkb3duVmlldzogdW5rbm93biA9IG51bGw7XHJcblx0XHRsZXQgZWRpdG9yOiB1bmtub3duID0gbnVsbDtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFRyeSBnZXR0aW5nIGxlYXZlcyBvZiB0eXBlIG1hcmtkb3duIChyZXBsYWNlbWVudCBmb3IgZGVwcmVjYXRlZCBhY3RpdmVMZWFmKVxyXG5cdFx0XHRpZiAoYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUpIHtcclxuXHRcdFx0XHRjb25zdCBsZWF2ZXMgPSBhcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnbWFya2Rvd24nKTtcclxuXHRcdFx0XHRpZiAobGVhdmVzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRcdG1hcmtkb3duVmlldyA9IGxlYXZlc1swXT8udmlldztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFRyeSBnZXR0aW5nIGFsbCBsZWF2ZXMgdXNpbmcgd29ya3NwYWNlIGl0ZXJhdGlvblxyXG5cdFx0XHRpZiAoIW1hcmtkb3duVmlldykge1xyXG5cdFx0XHRcdC8vIFVzZSB3b3Jrc3BhY2UgaXRlcmF0aW9uIHRvIGZpbmQgbWFya2Rvd24gdmlld3NcclxuXHRcdFx0XHRhcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0XHRcdGlmIChsZWFmLnZpZXcgJiYgJ2VkaXRvcicgaW4gbGVhZi52aWV3ICYmICFtYXJrZG93blZpZXcpIHtcclxuXHRcdFx0XHRcdFx0bWFya2Rvd25WaWV3ID0gbGVhZi52aWV3O1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoIW1hcmtkb3duVmlldykge1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybignTm8gbWFya2Rvd24gdmlldyBmb3VuZCcpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gVHlwZSBndWFyZCBmb3IgbWFya2Rvd24gdmlldyB3aXRoIGVkaXRvciBwcm9wZXJ0eVxyXG5cdFx0XHRpZiAodHlwZW9mIG1hcmtkb3duVmlldyA9PT0gJ29iamVjdCcgJiYgbWFya2Rvd25WaWV3ICE9PSBudWxsICYmICdlZGl0b3InIGluIG1hcmtkb3duVmlldykge1xyXG5cdFx0XHRcdGVkaXRvciA9IChtYXJrZG93blZpZXcgYXMgeyBlZGl0b3I6IHVua25vd24gfSkuZWRpdG9yO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoIWVkaXRvcikge1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybignTm8gZWRpdG9yIGZvdW5kIGluIG1hcmtkb3duIHZpZXcnKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFR5cGUgZ3VhcmQgZm9yIGVkaXRvciB3aXRoIHJlcXVpcmVkIG1ldGhvZHNcclxuXHRcdFx0aWYgKHR5cGVvZiBlZGl0b3IgIT09ICdvYmplY3QnIHx8IGVkaXRvciA9PT0gbnVsbCkge1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybignRWRpdG9yIGlzIG5vdCBhbiBvYmplY3QnKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IGVkaXRvck9iaiA9IGVkaXRvciBhcyB7XHJcblx0XHRcdFx0c2V0Q3Vyc29yPzogKHBvczogeyBsaW5lOiBudW1iZXI7IGNoOiBudW1iZXIgfSkgPT4gdm9pZDtcclxuXHRcdFx0XHRzY3JvbGxJbnRvVmlldz86IChwb3M6IHsgbGluZTogbnVtYmVyOyBjaDogbnVtYmVyIH0gfCBudW1iZXIpID0+IHZvaWQ7XHJcblx0XHRcdFx0Z2V0TGluZT86IChsaW5lOiBudW1iZXIpID0+IHsgbGVuZ3RoOiBudW1iZXIgfTtcclxuXHRcdFx0XHRhZGRIaWdobGlnaHRzPzogKGhpZ2hsaWdodHM6IEFycmF5PHsgZnJvbTogeyBsaW5lOiBudW1iZXI7IGNoOiBudW1iZXIgfTsgdG86IHsgbGluZTogbnVtYmVyOyBjaDogbnVtYmVyIH0gfT4pID0+IHZvaWQ7XHJcblx0XHRcdFx0cmVtb3ZlSGlnaGxpZ2h0cz86ICgpID0+IHZvaWQ7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHQvLyBOYXZpZ2F0ZSB0byB0aGUgc3BlY2lmaWMgbGluZVxyXG5cdFx0XHRpZiAocG9zaXRpb24ubGluZSAmJiBlZGl0b3JPYmouc2V0Q3Vyc29yKSB7XHJcblx0XHRcdFx0Y29uc3QgbGluZUluZGV4ID0gTWF0aC5tYXgoMCwgcG9zaXRpb24ubGluZSAtIDEpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFNldCBjdXJzb3IgcG9zaXRpb25cclxuXHRcdFx0XHRlZGl0b3JPYmouc2V0Q3Vyc29yKHsgbGluZTogbGluZUluZGV4LCBjaDogMCB9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBTaW1wbGUgc2Nyb2xsIHRvIGxpbmUgLSBubyBmYW5jeSBzdHVmZlxyXG5cdFx0XHRcdGlmIChlZGl0b3JPYmouc2Nyb2xsSW50b1ZpZXcpIHtcclxuXHRcdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRcdGVkaXRvck9iai5zY3JvbGxJbnRvVmlldyh7IGxpbmU6IGxpbmVJbmRleCwgY2g6IDAgfSk7XHJcblx0XHRcdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHRcdFx0Ly8gSWYgdGhhdCBmYWlscywgdHJ5IHdpdGgganVzdCB0aGUgbGluZSBudW1iZXJcclxuXHRcdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0XHRlZGl0b3JPYmouc2Nyb2xsSW50b1ZpZXcobGluZUluZGV4KTtcclxuXHRcdFx0XHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gSWYgYWxsIGVsc2UgZmFpbHMsIGp1c3Qgc2V0IHRoZSBjdXJzb3IgKGFscmVhZHkgZG9uZSBhYm92ZSlcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBIaWdobGlnaHQgdGhlIGxpbmUgYnJpZWZseVxyXG5cdFx0XHRcdGlmIChlZGl0b3JPYmouZ2V0TGluZSAmJiBlZGl0b3JPYmouYWRkSGlnaGxpZ2h0cyAmJiBlZGl0b3JPYmoucmVtb3ZlSGlnaGxpZ2h0cykge1xyXG5cdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbGluZUxlbmd0aCA9IGVkaXRvck9iai5nZXRMaW5lKGxpbmVJbmRleCkubGVuZ3RoO1xyXG5cdFx0XHRcdFx0XHRlZGl0b3JPYmouYWRkSGlnaGxpZ2h0cyhbe1xyXG5cdFx0XHRcdFx0XHRcdGZyb206IHsgbGluZTogbGluZUluZGV4LCBjaDogMCB9LFxyXG5cdFx0XHRcdFx0XHRcdHRvOiB7IGxpbmU6IGxpbmVJbmRleCwgY2g6IGxpbmVMZW5ndGggfVxyXG5cdFx0XHRcdFx0XHR9XSk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBSZW1vdmUgaGlnaGxpZ2h0IGFmdGVyIDIgc2Vjb25kc1xyXG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGVkaXRvck9iai5yZW1vdmVIaWdobGlnaHRzKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGVkaXRvck9iai5yZW1vdmVIaWdobGlnaHRzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBJZ25vcmUgaGlnaGxpZ2h0IHJlbW92YWwgZXJyb3JzXHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9LCAyMDAwKTtcclxuXHRcdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0XHQvLyBJZ25vcmUgaGlnaGxpZ2h0IGVycm9yc1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3IgbmF2aWdhdGluZyB0byBwb3NpdGlvbjonLCBlcnJvcik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZW5kZXJSZXN1bHRzKHJlc3VsdHM6IFNFT1Jlc3VsdHMpOiB2b2lkIHtcclxuXHRcdC8vIFVzZSByYXcgbm90aWNlcyBjb3VudCBzbyBub3RpY2VzIGZyb20gUG90ZW50aWFsbHkgQnJva2VuIExpbmtzIGFyZSB2aXNpYmxlIGFuZCBjb3VudGVkXHJcblx0XHRsZXQgZmlsdGVyZWROb3RpY2VzQ291bnQgPSByZXN1bHRzLm5vdGljZXNDb3VudDtcclxuXHRcdFxyXG5cdFx0Ly8gT3ZlcmFsbCBzY29yZSB3aXRoIGNvbGxhcHNpYmxlIHRvZ2dsZVxyXG5cdFx0Y29uc3Qgc2NvcmVFbCA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1zY29yZS1oZWFkZXInIH0pO1xyXG5cdFx0XHJcblx0XHQvLyBMZWZ0IHNpZGU6IFNjb3JlIHRleHQgKG5vdCBib2xkLCBub3QgbGFyZ2UpXHJcblx0XHRjb25zdCBzY29yZVRleHQgPSBzY29yZUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1zY29yZS10ZXh0JyB9KTtcclxuXHRcdHNjb3JlVGV4dC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1Njb3JlOiAnIH0pO1xyXG5cdFx0Y29uc3Qgc2NvcmVOdW1iZXIgPSBzY29yZVRleHQuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGAke01hdGgucm91bmQocmVzdWx0cy5vdmVyYWxsU2NvcmUpfSVgIH0pO1xyXG5cdFx0XHJcblx0XHQvLyBBcHBseSBjb2xvciBjb2RpbmcgdG8gdGhlIHNjb3JlXHJcblx0XHRpZiAocmVzdWx0cy5vdmVyYWxsU2NvcmUgPj0gODApIHtcclxuXHRcdFx0c2NvcmVOdW1iZXIuYWRkQ2xhc3MoJ3Nlby1zY29yZS1leGNlbGxlbnQnKTtcclxuXHRcdH0gZWxzZSBpZiAocmVzdWx0cy5vdmVyYWxsU2NvcmUgPj0gNjApIHtcclxuXHRcdFx0c2NvcmVOdW1iZXIuYWRkQ2xhc3MoJ3Nlby1zY29yZS1nb29kJyk7XHJcblx0XHR9IGVsc2UgaWYgKHJlc3VsdHMub3ZlcmFsbFNjb3JlID49IDQwKSB7XHJcblx0XHRcdHNjb3JlTnVtYmVyLmFkZENsYXNzKCdzZW8tc2NvcmUtZmFpcicpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c2NvcmVOdW1iZXIuYWRkQ2xhc3MoJ3Nlby1zY29yZS1wb29yJyk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmIChyZXN1bHRzLmlzc3Vlc0NvdW50ID4gMCB8fCByZXN1bHRzLndhcm5pbmdzQ291bnQgPiAwIHx8IGZpbHRlcmVkTm90aWNlc0NvdW50ID4gMCkge1xyXG5cdFx0XHRzY29yZVRleHQuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGAgKGAgfSk7XHJcblx0XHRcdHNjb3JlVGV4dC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcblx0XHRcdFx0dGV4dDogYCR7cmVzdWx0cy5pc3N1ZXNDb3VudH0gaXNzdWVzYCxcclxuXHRcdFx0XHRjbHM6ICdzZW8taXNzdWVzLWNvdW50LXRleHQnXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRzY29yZVRleHQuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICcsICcgfSk7XHJcblx0XHRcdHNjb3JlVGV4dC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcblx0XHRcdFx0dGV4dDogYCR7cmVzdWx0cy53YXJuaW5nc0NvdW50fSB3YXJuaW5nc2AsXHJcblx0XHRcdFx0Y2xzOiAnc2VvLXdhcm5pbmdzLWNvdW50LXRleHQnXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRpZiAoZmlsdGVyZWROb3RpY2VzQ291bnQgPiAwKSB7XHJcblx0XHRcdFx0c2NvcmVUZXh0LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnLCAnIH0pO1xyXG5cdFx0XHRcdHNjb3JlVGV4dC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcblx0XHRcdFx0XHR0ZXh0OiBgJHtmaWx0ZXJlZE5vdGljZXNDb3VudH0gbm90aWNlc2AsXHJcblx0XHRcdFx0XHRjbHM6ICdzZW8tbm90aWNlcy1jb3VudC10ZXh0J1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdHNjb3JlVGV4dC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJyknIH0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFRleHQgaXMgYWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlOyBleGNsYW1hdGlvbiBtYXJrIGlzIGFwcHJvcHJpYXRlIGZvciBzdWNjZXNzIG1lc3NhZ2VcclxuXHRcdFx0c2NvcmVUZXh0LmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0dGV4dDogJyAoQWxsIGNoZWNrcyBwYXNzZWQhKScsXHJcblx0XHRcdFx0Y2xzOiAnc2VvLXN1Y2Nlc3MnXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBSaWdodCBzaWRlOiBUb2dnbGUgYnV0dG9uIChzdHlsZWQgbGlrZSBnbG9iYWwgc29ydCBpY29uKVxyXG5cdFx0Y29uc3QgdG9nZ2xlQnRuID0gc2NvcmVFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tdG9nZ2xlLWljb24nIH0pO1xyXG5cdFx0Ly8gQXBwbHkgdGhlIGN1cnJlbnQgY29sbGFwc2Ugc3RhdGUgdG8gdGhlIGljb25cclxuXHRcdHNldEljb24odG9nZ2xlQnRuLCB0aGlzLmlzQ29sbGFwc2VkID8gJ2NoZXZyb25zLXVwLWRvd24nIDogJ2NoZXZyb25zLWRvd24tdXAnKTtcclxuXHRcdFxyXG5cdFx0dG9nZ2xlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0Ly8gVG9nZ2xlIHRoZSBzdGF0ZVxyXG5cdFx0XHR0aGlzLmlzQ29sbGFwc2VkID0gIXRoaXMuaXNDb2xsYXBzZWQ7XHJcblx0XHRcdC8vIGNoZXZyb25zLWRvd24tdXAgPSBcImNvbGxhcHNlIGFsbFwiLCBjaGV2cm9ucy11cC1kb3duID0gXCJleHBhbmQgYWxsXCJcclxuXHRcdFx0c2V0SWNvbih0b2dnbGVCdG4sIHRoaXMuaXNDb2xsYXBzZWQgPyAnY2hldnJvbnMtdXAtZG93bicgOiAnY2hldnJvbnMtZG93bi11cCcpO1xyXG5cdFx0XHR0aGlzLnRvZ2dsZUNoZWNrc1Zpc2liaWxpdHkoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEluZGl2aWR1YWwgY2hlY2tzIGNvbnRhaW5lclxyXG5cdFx0Y29uc3QgY2hlY2tzQ29udGFpbmVyID0gdGhpcy5jb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLWNoZWNrcycgfSk7XHJcblx0XHRcclxuXHRcdE9iamVjdC5lbnRyaWVzKHJlc3VsdHMuY2hlY2tzKS5mb3JFYWNoKChbY2hlY2tOYW1lLCBjaGVja1Jlc3VsdHNdKSA9PiB7XHJcblx0XHRcdGlmIChjaGVja1Jlc3VsdHMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBbHdheXMgc2hvdyBQb3RlbnRpYWxseSBCcm9rZW4gTGlua3Mgc28gbm90aWNlLW9ubHkgY2FzZXMgYXJlIHZpc2libGVcclxuXHRcdFx0XHJcblx0XHRcdC8vIERldGVybWluZSB0aGUgY2hlY2sgc3RhdHVzIGZvciBjb2xvciBjb2RpbmdcclxuXHRcdFx0Y29uc3QgY2hlY2tIYXNFcnJvcnMgPSBjaGVja1Jlc3VsdHMuc29tZShyID0+IHIuc2V2ZXJpdHkgPT09ICdlcnJvcicpO1xyXG5cdFx0XHRjb25zdCBjaGVja0hhc1dhcm5pbmdzID0gY2hlY2tSZXN1bHRzLnNvbWUociA9PiByLnNldmVyaXR5ID09PSAnd2FybmluZycpO1xyXG5cdFx0XHRjb25zdCBjaGVja0hhc05vdGljZXMgPSBjaGVja1Jlc3VsdHMuc29tZShyID0+IHIuc2V2ZXJpdHkgPT09ICdub3RpY2UnKTtcclxuXHRcdFx0Y29uc3QgY2hlY2tIYXNPbmx5SW5mbyA9IGNoZWNrUmVzdWx0cy5ldmVyeShyID0+IHIuc2V2ZXJpdHkgPT09ICdpbmZvJyk7XHJcblx0XHRcdFxyXG5cdFx0XHRsZXQgc3RhdHVzQ2xhc3MgPSAnc2VvLXBhc3NlZCc7IC8vIERlZmF1bHQgdG8gZ3JlZW4gZm9yIHBhc3NlZCBjaGVja3NcclxuXHRcdFx0aWYgKGNoZWNrSGFzRXJyb3JzKSB7XHJcblx0XHRcdFx0c3RhdHVzQ2xhc3MgPSAnc2VvLWVycm9yJztcclxuXHRcdFx0fSBlbHNlIGlmIChjaGVja0hhc1dhcm5pbmdzKSB7XHJcblx0XHRcdFx0c3RhdHVzQ2xhc3MgPSAnc2VvLXdhcm5pbmcnO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGNoZWNrSGFzTm90aWNlcykge1xyXG5cdFx0XHRcdHN0YXR1c0NsYXNzID0gJ3Nlby1ub3RpY2UnO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGNoZWNrSGFzT25seUluZm8pIHtcclxuXHRcdFx0XHRzdGF0dXNDbGFzcyA9ICdzZW8tcGFzc2VkJztcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3QgY2hlY2tFbCA9IGNoZWNrc0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6IGBzZW8tY2hlY2sgJHtzdGF0dXNDbGFzc31gIH0pO1xyXG5cdFx0XHRjb25zdCBoZWFkZXIgPSBjaGVja0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1jaGVjay1oZWFkZXIgc2VvLWNvbGxhcHNpYmxlLWhlYWRlcicgfSk7XHJcblx0XHRcdGhlYWRlci5zZXRBdHRyaWJ1dGUoJ2RhdGEtY2hlY2stbmFtZScsIGNoZWNrTmFtZSk7IC8vIFN0b3JlIGNoZWNrIG5hbWUgZm9yIHN0YXRlIHRyYWNraW5nXHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDb252ZXJ0IGNhbWVsQ2FzZSB0byBzZW50ZW5jZSBjYXNlIHdpdGggc3BlY2lhbCBoYW5kbGluZ1xyXG5cdFx0XHRsZXQgZGlzcGxheU5hbWUgPSBjaGVja05hbWUucmVwbGFjZSgvKFtBLVpdKS9nLCAnICQxJykudHJpbSgpXHJcblx0XHRcdFx0LnJlcGxhY2UoL14uLywgc3RyID0+IHN0ci50b1VwcGVyQ2FzZSgpKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIHNwZWNpZmljIGNoZWNrIG5hbWVzXHJcblx0XHRcdGlmIChjaGVja05hbWUgPT09ICdicm9rZW5MaW5rcycpIHtcclxuXHRcdFx0XHRkaXNwbGF5TmFtZSA9ICdCcm9rZW4gSW50ZXJuYWwgTGlua3MnO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGNoZWNrTmFtZSA9PT0gJ2V4dGVybmFsQnJva2VuTGlua3MnKSB7XHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBpcyBub3RpY2UtYmFzZWQgKGV4dGVybmFsIGxpbmtzIGxpc3RpbmcpIG9yIGVycm9yLWJhc2VkIChicm9rZW4gbGlua3MpXHJcblx0XHRcdFx0Y29uc3QgaGFzTm90aWNlcyA9IGNoZWNrUmVzdWx0cy5zb21lKHIgPT4gci5zZXZlcml0eSA9PT0gJ25vdGljZScpO1xyXG5cdFx0XHRcdGNvbnN0IGhhc0Vycm9ycyA9IGNoZWNrUmVzdWx0cy5zb21lKHIgPT4gci5zZXZlcml0eSA9PT0gJ2Vycm9yJyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKGhhc05vdGljZXMgJiYgIWhhc0Vycm9ycykge1xyXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWUgPSAnRXh0ZXJuYWwgTGlua3MnO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRkaXNwbGF5TmFtZSA9ICdFeHRlcm5hbCBCcm9rZW4gTGlua3MnO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIGlmIChjaGVja05hbWUgPT09ICdkdXBsaWNhdGVUaXRsZXMnKSB7XHJcblx0XHRcdFx0ZGlzcGxheU5hbWUgPSAnRHVwbGljYXRlIFRpdGxlcyc7XHJcblx0XHRcdH0gZWxzZSBpZiAoY2hlY2tOYW1lID09PSAnZHVwbGljYXRlRGVzY3JpcHRpb25zJykge1xyXG5cdFx0XHRcdGRpc3BsYXlOYW1lID0gJ0R1cGxpY2F0ZSBEZXNjcmlwdGlvbnMnO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGNoZWNrTmFtZSA9PT0gJ2R1cGxpY2F0ZUNvbnRlbnQnKSB7XHJcblx0XHRcdFx0ZGlzcGxheU5hbWUgPSAnRHVwbGljYXRlIENvbnRlbnQnO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBZGQgY29sbGFwc2UgaWNvblxyXG5cdFx0XHRjb25zdCBjb2xsYXBzZUljb24gPSBoZWFkZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ3Nlby1jb2xsYXBzZS1pY29uJyB9KTtcclxuXHRcdFx0Y29sbGFwc2VJY29uLmFwcGVuZENoaWxkKGNyZWF0ZUNvbGxhcHNlSWNvbigpKTtcclxuXHRcdFx0XHJcblx0XHRcdGhlYWRlci5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogZGlzcGxheU5hbWUgfSk7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBzdGF0dXNJY29uID0gaGVhZGVyLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICdzZW8tc3RhdHVzJyB9KTtcclxuXHRcdFx0Y29uc3QgaGFzRXJyb3JzID0gY2hlY2tSZXN1bHRzLnNvbWUociA9PiByLnNldmVyaXR5ID09PSAnZXJyb3InKTtcclxuXHRcdFx0Y29uc3QgaGFzV2FybmluZ3MgPSBjaGVja1Jlc3VsdHMuc29tZShyID0+IHIuc2V2ZXJpdHkgPT09ICd3YXJuaW5nJyk7XHJcblx0XHRcdGNvbnN0IGhhc05vdGljZXMgPSBjaGVja1Jlc3VsdHMuc29tZShyID0+IHIuc2V2ZXJpdHkgPT09ICdub3RpY2UnKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFVzZSBMdWNpZGUgaWNvbnMgZm9yIHN0YXR1c1xyXG5cdFx0XHRpZiAoaGFzRXJyb3JzKSB7XHJcblx0XHRcdFx0c2V0SWNvbihzdGF0dXNJY29uLCAneC1jaXJjbGUnKTtcclxuXHRcdFx0fSBlbHNlIGlmIChoYXNXYXJuaW5ncykge1xyXG5cdFx0XHRcdHNldEljb24oc3RhdHVzSWNvbiwgJ3RyaWFuZ2xlLWFsZXJ0Jyk7XHJcblx0XHRcdH0gZWxzZSBpZiAoaGFzTm90aWNlcykge1xyXG5cdFx0XHRcdHNldEljb24oc3RhdHVzSWNvbiwgJ2luZm8nKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRzZXRJY29uKHN0YXR1c0ljb24sICdjaXJjbGUtY2hlY2snKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUmVzdWx0c1xyXG5cdFx0XHRjb25zdCByZXN1bHRzTGlzdCA9IGNoZWNrRWwuY3JlYXRlRWwoJ3VsJywgeyBjbHM6ICdzZW8tcmVzdWx0cyBzZW8tcmVzdWx0cy1saXN0LWV4cGFuZGVkJyB9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIEFwcGx5IHNhdmVkIGNvbGxhcHNlIHN0YXRlXHJcblx0XHRcdGNvbnN0IHNhdmVkQ29sbGFwc2VTdGF0ZSA9IHRoaXMuaW5kaXZpZHVhbENvbGxhcHNlU3RhdGVzLmdldChjaGVja05hbWUpO1xyXG5cdFx0XHRpZiAoc2F2ZWRDb2xsYXBzZVN0YXRlICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRpZiAoc2F2ZWRDb2xsYXBzZVN0YXRlKSB7XHJcblx0XHRcdFx0XHRyZXN1bHRzTGlzdC5jbGFzc0xpc3QuYWRkKCdzZW8tcmVzdWx0cy1saXN0LWNvbGxhcHNlZCcpO1xyXG5cdFx0XHRcdFx0cmVzdWx0c0xpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2VvLXJlc3VsdHMtbGlzdC1leHBhbmRlZCcpO1xyXG5cdFx0XHRcdFx0Y29uc3QgaWNvbiA9IGNvbGxhcHNlSWNvbi5xdWVyeVNlbGVjdG9yKCdzdmcnKTtcclxuXHRcdFx0XHRcdGlmIChpY29uKSB7XHJcblx0XHRcdFx0XHRcdGljb24uY2xhc3NMaXN0LmFkZCgnc2VvLWNvbGxhcHNlLWljb24tcm90YXRlZCcpO1xyXG5cdFx0XHRcdFx0XHRpY29uLmNsYXNzTGlzdC5yZW1vdmUoJ3Nlby1jb2xsYXBzZS1pY29uLW5vcm1hbCcpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRyZXN1bHRzTGlzdC5jbGFzc0xpc3QuYWRkKCdzZW8tcmVzdWx0cy1saXN0LWV4cGFuZGVkJyk7XHJcblx0XHRcdFx0XHRyZXN1bHRzTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzZW8tcmVzdWx0cy1saXN0LWNvbGxhcHNlZCcpO1xyXG5cdFx0XHRcdFx0Y29uc3QgaWNvbiA9IGNvbGxhcHNlSWNvbi5xdWVyeVNlbGVjdG9yKCdzdmcnKTtcclxuXHRcdFx0XHRcdGlmIChpY29uKSB7XHJcblx0XHRcdFx0XHRcdGljb24uY2xhc3NMaXN0LmFkZCgnc2VvLWNvbGxhcHNlLWljb24tbm9ybWFsJyk7XHJcblx0XHRcdFx0XHRcdGljb24uY2xhc3NMaXN0LnJlbW92ZSgnc2VvLWNvbGxhcHNlLWljb24tcm90YXRlZCcpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Y2hlY2tSZXN1bHRzLmZvckVhY2gocmVzdWx0ID0+IHtcclxuXHRcdFx0XHRjb25zdCBsaSA9IHJlc3VsdHNMaXN0LmNyZWF0ZUVsKCdsaScsIHsgXHJcblx0XHRcdFx0XHRjbHM6IGBzZW8tcmVzdWx0IHNlby0ke3Jlc3VsdC5zZXZlcml0eX1gXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQ3JlYXRlIGNsaWNrYWJsZSBtZXNzYWdlIGlmIHBvc2l0aW9uIGluZm8gaXMgYXZhaWxhYmxlXHJcblx0XHRcdFx0aWYgKHJlc3VsdC5wb3NpdGlvbikge1xyXG5cdFx0XHRcdFx0Y29uc3QgbWVzc2FnZUVsID0gbGkuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG5cdFx0XHRcdFx0XHR0ZXh0OiByZXN1bHQubWVzc2FnZSxcclxuXHRcdFx0XHRcdFx0Y2xzOiAnc2VvLXJlc3VsdC1tZXNzYWdlIHNlby1jbGlja2FibGUnXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gQWRkIGNsaWNrIGhhbmRsZXIgZm9yIG5hdmlnYXRpb25cclxuXHRcdFx0XHRcdG1lc3NhZ2VFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubmF2aWdhdGVUb1Bvc2l0aW9uKHJlc3VsdC5wb3NpdGlvbiEpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIEFkZCB2aXN1YWwgaW5kaWNhdG9yIHRoYXQgaXQncyBjbGlja2FibGVcclxuXHRcdFx0XHRcdG1lc3NhZ2VFbC5hZGRDbGFzcygnc2VvLWNsaWNrYWJsZS1tZXNzYWdlJyk7XHJcblx0XHRcdFx0XHRtZXNzYWdlRWwudGl0bGUgPSAnQ2xpY2sgdG8ganVtcCB0byB0aGlzIGlzc3VlIGluIHRoZSBub3RlJztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gTm9uLWNsaWNrYWJsZSBtZXNzYWdlIGZvciByZXN1bHRzIHdpdGhvdXQgcG9zaXRpb24gaW5mb1xyXG5cdFx0XHRcdFx0bGkuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG5cdFx0XHRcdFx0XHR0ZXh0OiByZXN1bHQubWVzc2FnZSxcclxuXHRcdFx0XHRcdFx0Y2xzOiAnc2VvLXJlc3VsdC1tZXNzYWdlJ1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChyZXN1bHQuc3VnZ2VzdGlvbikge1xyXG5cdFx0XHRcdFx0Y29uc3Qgc3VnZ2VzdGlvbkVsID0gbGkuY3JlYXRlRWwoJ2RpdicsIHsgXHJcblx0XHRcdFx0XHRcdGNsczogJ3Nlby1zdWdnZXN0aW9uJ1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIENoZWNrIGlmIHN1Z2dlc3Rpb24gY29udGFpbnMgSFRNTCAoZmlsZSBsaW5rcylcclxuXHRcdFx0XHRcdGlmIChyZXN1bHQuc3VnZ2VzdGlvbi5pbmNsdWRlcygnPGEgaHJlZj1cIiNcIiBkYXRhLWZpbGUtcGF0aD0nKSkge1xyXG5cdFx0XHRcdFx0XHQvLyBQYXJzZSBIVE1MIHNhZmVseSB1c2luZyBET01QYXJzZXJcclxuXHRcdFx0XHRcdFx0Y29uc3QgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xyXG5cdFx0XHRcdFx0XHRjb25zdCBkb2MgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKHJlc3VsdC5zdWdnZXN0aW9uLCAndGV4dC9odG1sJyk7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGJvZHkgPSBkb2MuYm9keTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIE1vdmUgYWxsIG5vZGVzIGZyb20gcGFyc2VkIGJvZHkgdG8gc3VnZ2VzdGlvbiBlbGVtZW50XHJcblx0XHRcdFx0XHRcdHdoaWxlIChib2R5LmZpcnN0Q2hpbGQpIHtcclxuXHRcdFx0XHRcdFx0XHRzdWdnZXN0aW9uRWwuYXBwZW5kQ2hpbGQoYm9keS5maXJzdENoaWxkKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gVXNlIGV2ZW50IGRlbGVnYXRpb24gb24gdGhlIHN1Z2dlc3Rpb24gZWxlbWVudFxyXG5cdFx0XHRcdFx0XHRzdWdnZXN0aW9uRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHRhcmdldCAmJiB0YXJnZXQudGFnTmFtZSA9PT0gJ0EnICYmIHRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEtZmlsZS1wYXRoJykpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZmlsZS1wYXRoJyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChmaWxlUGF0aCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMub25GaWxlQ2xpY2soZmlsZVBhdGgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRzdWdnZXN0aW9uRWwudGV4dENvbnRlbnQgPSByZXN1bHQuc3VnZ2VzdGlvbjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQWRkIG1vdXNlZG93biBoYW5kbGVyIGZvciBjb2xsYXBzZSBmdW5jdGlvbmFsaXR5ICh3b3JrcyBiZXR0ZXIgd2l0aG91dCBmb2N1cylcclxuXHRcdFx0aGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gR2V0IG9yIGluaXRpYWxpemUgdGhlIGNvbGxhcHNlIHN0YXRlIGZvciB0aGlzIGNoZWNrXHJcblx0XHRcdFx0Y29uc3QgY3VycmVudFN0YXRlID0gdGhpcy5pbmRpdmlkdWFsQ29sbGFwc2VTdGF0ZXMuZ2V0KGNoZWNrTmFtZSkgPz8gZmFsc2U7XHJcblx0XHRcdFx0Y29uc3QgbmV3U3RhdGUgPSAhY3VycmVudFN0YXRlO1xyXG5cdFx0XHRcdHRoaXMuaW5kaXZpZHVhbENvbGxhcHNlU3RhdGVzLnNldChjaGVja05hbWUsIG5ld1N0YXRlKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBBcHBseSB0aGUgbmV3IHN0YXRlXHJcblx0XHRcdFx0aWYgKG5ld1N0YXRlKSB7XHJcblx0XHRcdFx0XHRyZXN1bHRzTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzZW8tcmVzdWx0cy1saXN0LWV4cGFuZGVkJyk7XHJcblx0XHRcdFx0XHRyZXN1bHRzTGlzdC5jbGFzc0xpc3QuYWRkKCdzZW8tcmVzdWx0cy1saXN0LWNvbGxhcHNlZCcpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRyZXN1bHRzTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzZW8tcmVzdWx0cy1saXN0LWNvbGxhcHNlZCcpO1xyXG5cdFx0XHRcdFx0cmVzdWx0c0xpc3QuY2xhc3NMaXN0LmFkZCgnc2VvLXJlc3VsdHMtbGlzdC1leHBhbmRlZCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBSb3RhdGUgdGhlIGNvbGxhcHNlIGljb25cclxuXHRcdFx0XHRjb25zdCBpY29uID0gY29sbGFwc2VJY29uLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpO1xyXG5cdFx0XHRcdGlmIChpY29uKSB7XHJcblx0XHRcdFx0XHRpZiAobmV3U3RhdGUpIHtcclxuXHRcdFx0XHRcdFx0aWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdzZW8tY29sbGFwc2UtaWNvbi1ub3JtYWwnKTtcclxuXHRcdFx0XHRcdFx0aWNvbi5jbGFzc0xpc3QuYWRkKCdzZW8tY29sbGFwc2UtaWNvbi1yb3RhdGVkJyk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRpY29uLmNsYXNzTGlzdC5yZW1vdmUoJ3Nlby1jb2xsYXBzZS1pY29uLXJvdGF0ZWQnKTtcclxuXHRcdFx0XHRcdFx0aWNvbi5jbGFzc0xpc3QuYWRkKCdzZW8tY29sbGFwc2UtaWNvbi1ub3JtYWwnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gSWYgYW55IGluZGl2aWR1YWwgaXRlbSBpcyBleHBhbmRlZCwgcmVzZXQgbWFpbiB0b2dnbGUgdG8gXCJjb2xsYXBzZSBhbGxcIiBzdGF0ZVxyXG5cdFx0XHRcdGlmICghbmV3U3RhdGUpIHtcclxuXHRcdFx0XHRcdC8vIEl0ZW0gd2FzIGp1c3QgZXhwYW5kZWQsIHJlc2V0IG1haW4gdG9nZ2xlIHRvIFwiY29sbGFwc2UgYWxsXCIgc3RhdGVcclxuXHRcdFx0XHRcdHRoaXMuaXNDb2xsYXBzZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRcdGNvbnN0IHRvZ2dsZUJ0biA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zZW8tdG9nZ2xlLWljb24nKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRcdGlmICh0b2dnbGVCdG4pIHtcclxuXHRcdFx0XHRcdFx0c2V0SWNvbih0b2dnbGVCdG4sICdjaGV2cm9ucy1kb3duLXVwJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyR2xvYmFsUmVzdWx0cyhyZXN1bHRzOiBTRU9SZXN1bHRzW10sIHNldHRpbmdzPzogU0VPU2V0dGluZ3MpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHN1bW1hcnkgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tdmF1bHQtc3VtbWFyeScgfSk7XHJcblx0XHRcclxuXHRcdGNvbnN0IHRvdGFsRmlsZXMgPSByZXN1bHRzLmxlbmd0aDtcclxuXHRcdGNvbnN0IHRvdGFsSXNzdWVzID0gcmVzdWx0cy5yZWR1Y2UoKHN1bSwgcikgPT4gc3VtICsgci5pc3N1ZXNDb3VudCwgMCk7XHJcblx0XHRjb25zdCB0b3RhbFdhcm5pbmdzID0gcmVzdWx0cy5yZWR1Y2UoKHN1bSwgcikgPT4gc3VtICsgci53YXJuaW5nc0NvdW50LCAwKTtcclxuXHRcdFxyXG5cdFx0Ly8gVXNlIHJhdyBzdW0gb2Ygbm90aWNlcyBzbyBQQkwgbm90aWNlcyBhcmUgaW5jbHVkZWRcclxuXHRcdGNvbnN0IHRvdGFsTm90aWNlcyA9IHJlc3VsdHMucmVkdWNlKChzdW0sIHIpID0+IHN1bSArIHIubm90aWNlc0NvdW50LCAwKTtcclxuXHRcdFxyXG5cdFx0Y29uc3QgYXZnU2NvcmUgPSBNYXRoLnJvdW5kKFxyXG5cdFx0XHRyZXN1bHRzLnJlZHVjZSgoc3VtLCByKSA9PiBzdW0gKyByLm92ZXJhbGxTY29yZSwgMCkgLyB0b3RhbEZpbGVzXHJcblx0XHQpO1xyXG5cdFx0XHJcblx0XHQvLyBDaGVjayBpZiBub3RpY2VzIHNob3VsZCBiZSBzaG93biAoYm90aCBwb3RlbnRpYWxseSBicm9rZW4gY2hlY2tzIG11c3QgYmUgZW5hYmxlZClcclxuXHRcdGNvbnN0IHNob3dOb3RpY2VzID0gc2V0dGluZ3MgPyBcclxuXHRcdFx0KHNldHRpbmdzLmNoZWNrUG90ZW50aWFsbHlCcm9rZW5MaW5rcyAmJiBzZXR0aW5ncy5jaGVja1BvdGVudGlhbGx5QnJva2VuRW1iZWRzKSA6IFxyXG5cdFx0XHR0cnVlO1xyXG5cclxuXHRcdC8vIENyZWF0ZSBzdGF0cyBncmlkXHJcblx0XHRjb25zdCBzdGF0c0dyaWQgPSBzdW1tYXJ5LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1zdGF0cy1ncmlkJyB9KTtcclxuXHRcdFxyXG5cdFx0Ly8gT3ZlcmFsbCBzY29yZSBmaXJzdCB3aXRoIGNvbG9yIGNvZGluZ1xyXG5cdFx0Y29uc3Qgc2NvcmVTdGF0ID0gc3RhdHNHcmlkLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1zdGF0LWl0ZW0nIH0pO1xyXG5cdFx0Y29uc3Qgc2NvcmVOdW1iZXIgPSBzY29yZVN0YXQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLXN0YXQtbnVtYmVyJywgdGV4dDogYCR7YXZnU2NvcmV9JWAgfSk7XHJcblx0XHRpZiAoYXZnU2NvcmUgPj0gODApIHtcclxuXHRcdFx0c2NvcmVOdW1iZXIuYWRkQ2xhc3MoJ3Nlby1zY29yZS1leGNlbGxlbnQnKTtcclxuXHRcdH0gZWxzZSBpZiAoYXZnU2NvcmUgPj0gNjApIHtcclxuXHRcdFx0c2NvcmVOdW1iZXIuYWRkQ2xhc3MoJ3Nlby1zY29yZS1nb29kJyk7XHJcblx0XHR9IGVsc2UgaWYgKGF2Z1Njb3JlID49IDQwKSB7XHJcblx0XHRcdHNjb3JlTnVtYmVyLmFkZENsYXNzKCdzZW8tc2NvcmUtZmFpcicpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c2NvcmVOdW1iZXIuYWRkQ2xhc3MoJ3Nlby1zY29yZS1wb29yJyk7XHJcblx0XHR9XHJcblx0XHRzY29yZVN0YXQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLXN0YXQtbGFiZWwnLCB0ZXh0OiAnQXZlcmFnZSBzY29yZScgfSk7XHJcblx0XHRcclxuXHRcdC8vIElzc3VlcyBjb3VudCB3aXRoIGNvbG9yIGNvZGluZ1xyXG5cdFx0Y29uc3QgaXNzdWVzU3RhdCA9IHN0YXRzR3JpZC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tc3RhdC1pdGVtJyB9KTtcclxuXHRcdGNvbnN0IGlzc3Vlc051bWJlciA9IGlzc3Vlc1N0YXQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLXN0YXQtbnVtYmVyJywgdGV4dDogdG90YWxJc3N1ZXMudG9TdHJpbmcoKSB9KTtcclxuXHRcdGlmICh0b3RhbElzc3VlcyA+IDApIHtcclxuXHRcdFx0aXNzdWVzTnVtYmVyLmFkZENsYXNzKCdzZW8taXNzdWVzLWNvdW50Jyk7XHJcblx0XHR9XHJcblx0XHRpc3N1ZXNTdGF0LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1zdGF0LWxhYmVsJywgdGV4dDogJ0lzc3VlcycgfSk7XHJcblx0XHRcclxuXHRcdC8vIFdhcm5pbmdzIGNvdW50IHdpdGggY29sb3IgY29kaW5nXHJcblx0XHRjb25zdCB3YXJuaW5nc1N0YXQgPSBzdGF0c0dyaWQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLXN0YXQtaXRlbScgfSk7XHJcblx0XHRjb25zdCB3YXJuaW5nc051bWJlciA9IHdhcm5pbmdzU3RhdC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tc3RhdC1udW1iZXInLCB0ZXh0OiB0b3RhbFdhcm5pbmdzLnRvU3RyaW5nKCkgfSk7XHJcblx0XHRpZiAodG90YWxXYXJuaW5ncyA+IDApIHtcclxuXHRcdFx0d2FybmluZ3NOdW1iZXIuYWRkQ2xhc3MoJ3Nlby13YXJuaW5ncy1jb3VudCcpO1xyXG5cdFx0fVxyXG5cdFx0d2FybmluZ3NTdGF0LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1zdGF0LWxhYmVsJywgdGV4dDogJ1dhcm5pbmdzJyB9KTtcclxuXHRcdFxyXG5cdFx0Ly8gTm90aWNlcyBjb3VudCB3aXRoIGNvbG9yIGNvZGluZyAob25seSBzaG93IGlmIG5vdGljZXMgYXJlIGVuYWJsZWQpXHJcblx0XHRpZiAoc2hvd05vdGljZXMpIHtcclxuXHRcdFx0Y29uc3Qgbm90aWNlc1N0YXQgPSBzdGF0c0dyaWQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLXN0YXQtaXRlbScgfSk7XHJcblx0XHRcdGNvbnN0IG5vdGljZXNOdW1iZXIgPSBub3RpY2VzU3RhdC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tc3RhdC1udW1iZXInLCB0ZXh0OiB0b3RhbE5vdGljZXMudG9TdHJpbmcoKSB9KTtcclxuXHRcdFx0aWYgKHRvdGFsTm90aWNlcyA+IDApIHtcclxuXHRcdFx0XHRub3RpY2VzTnVtYmVyLmFkZENsYXNzKCdzZW8tbm90aWNlcy1jb3VudCcpO1xyXG5cdFx0XHR9XHJcblx0XHRcdG5vdGljZXNTdGF0LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1zdGF0LWxhYmVsJywgdGV4dDogJ05vdGljZXMnIH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmVuZGVySXNzdWVzTGlzdChyZXN1bHRzOiBTRU9SZXN1bHRzW10sIGN1cnJlbnRTb3J0OiBzdHJpbmcsIG9uU29ydENoYW5nZTogKHNvcnRUeXBlOiBzdHJpbmcpID0+IHZvaWQsIG9uU2hvd1NvcnRNZW51OiAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHZvaWQsIHNldHRpbmdzPzogU0VPU2V0dGluZ3MpOiB2b2lkIHtcclxuXHRcdC8vIENoZWNrIGlmIG5vdGljZXMgc2hvdWxkIGJlIHNob3duIChib3RoIHBvdGVudGlhbGx5IGJyb2tlbiBjaGVja3MgbXVzdCBiZSBlbmFibGVkKVxyXG5cdFx0Y29uc3Qgc2hvd05vdGljZXMgPSBzZXR0aW5ncyA/IFxyXG5cdFx0XHQoc2V0dGluZ3MuY2hlY2tQb3RlbnRpYWxseUJyb2tlbkxpbmtzICYmIHNldHRpbmdzLmNoZWNrUG90ZW50aWFsbHlCcm9rZW5FbWJlZHMpIDogXHJcblx0XHRcdHRydWU7XHJcblx0XHRcclxuXHRcdGNvbnN0IGlzc3Vlc0ZpbGVzID0gcmVzdWx0cy5maWx0ZXIociA9PiB7XHJcblx0XHRcdGNvbnN0IGhhc0lzc3VlcyA9IHIuaXNzdWVzQ291bnQgPiAwO1xyXG5cdFx0XHRjb25zdCBoYXNXYXJuaW5ncyA9IHIud2FybmluZ3NDb3VudCA+IDA7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBVc2UgcmF3IG5vdGljZXMgY291bnQgc28gaXQgbWF0Y2hlcyB2aXNpYmxlIGVudHJpZXNcclxuXHRcdFx0Y29uc3QgaGFzTm90aWNlcyA9IHNob3dOb3RpY2VzICYmIHIubm90aWNlc0NvdW50ID4gMDtcclxuXHRcdFx0cmV0dXJuIGhhc0lzc3VlcyB8fCBoYXNXYXJuaW5ncyB8fCBoYXNOb3RpY2VzO1xyXG5cdFx0fSk7XHJcblx0XHRpZiAoaXNzdWVzRmlsZXMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG5cdFx0Y29uc3QgaXNzdWVzTGlzdCA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1pc3N1ZXMtbGlzdCcgfSk7XHJcblx0XHRcclxuXHRcdC8vIEhlYWRlciB3aXRoIHNvcnRpbmcgYnV0dG9ucyBhbmQgY29sbGFwc2UgZnVuY3Rpb25hbGl0eVxyXG5cdFx0Y29uc3QgaXNzdWVzSGVhZGVyID0gaXNzdWVzTGlzdC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8taXNzdWVzLWhlYWRlci1jb250YWluZXInIH0pO1xyXG5cdFx0XHJcblx0XHQvLyBDb2xsYXBzZSBpY29uIChvbmx5IHRoaXMgc2hvdWxkIGJlIGNsaWNrYWJsZSlcclxuXHRcdGNvbnN0IGNvbGxhcHNlSWNvbiA9IGlzc3Vlc0hlYWRlci5jcmVhdGVFbCgnc3BhbicsIHsgY2xzOiAnc2VvLWNvbGxhcHNlLWljb24gc2VvLWNvbGxhcHNpYmxlLWhlYWRlcicgfSk7XHJcblx0XHRjb2xsYXBzZUljb24uYXBwZW5kQ2hpbGQoY3JlYXRlQ29sbGFwc2VJY29uKCkpO1xyXG5cdFx0XHJcblx0XHRpc3N1ZXNIZWFkZXIuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnRmlsZXMgd2l0aCByZXN1bHRzJywgY2xzOiAnc2VvLWlzc3Vlcy1oZWFkZXInIH0pO1xyXG5cdFx0XHJcblx0XHQvLyBTb3J0IGJ1dHRvblxyXG5cdFx0Y29uc3Qgc29ydEJ0biA9IGlzc3Vlc0hlYWRlci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRjbHM6ICdzZW8tc29ydC1idG4nLFxyXG5cdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1NvcnQgZmlsZXMnIH1cclxuXHRcdH0pO1xyXG5cdFx0c2V0SWNvbihzb3J0QnRuLCAnYXJyb3ctdXAtbmFycm93LXdpZGUnKTtcclxuXHRcdHNvcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblNob3dTb3J0TWVudSk7XHJcblx0XHRcclxuXHRcdC8vIEZpbGVzIGxpc3QgY29udGFpbmVyXHJcblx0XHRjb25zdCBmaWxlc0xpc3RDb250YWluZXIgPSBpc3N1ZXNMaXN0LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1maWxlcy1saXN0LWNvbnRhaW5lcicgfSk7XHJcblx0XHRcclxuXHRcdC8vIEFwcGx5IHNhdmVkIHNvcnQgcHJlZmVyZW5jZVxyXG5cdFx0Y29uc3Qgc29ydGVkRmlsZXMgPSB0aGlzLnNvcnRGaWxlcyhpc3N1ZXNGaWxlcywgY3VycmVudFNvcnQpO1xyXG5cdFx0XHJcblx0XHRzb3J0ZWRGaWxlcy5mb3JFYWNoKHJlc3VsdCA9PiB7XHJcblx0XHRcdGNvbnN0IGZpbGVFbCA9IGZpbGVzTGlzdENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tZmlsZS1pc3N1ZScgfSk7XHJcblx0XHRcdGZpbGVFbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZmlsZS1wYXRoJywgcmVzdWx0LmZpbGUpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gTWFrZSBmaWxlIHBhdGggY2xpY2thYmxlXHJcblx0XHRcdGNvbnN0IGZpbGVMaW5rID0gZmlsZUVsLmNyZWF0ZUVsKCdhJywgeyBcclxuXHRcdFx0XHR0ZXh0OiByZXN1bHQuZGlzcGxheU5hbWUgfHwgZ2V0RGlzcGxheVBhdGgocmVzdWx0LmZpbGUpLFxyXG5cdFx0XHRcdGNsczogJ3Nlby1maWxlLWxpbmsnLFxyXG5cdFx0XHRcdGhyZWY6ICcjJ1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0ZmlsZUxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLm9uRmlsZUNsaWNrKHJlc3VsdC5maWxlKTtcclxuXHRcdFx0XHR9KSgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFN0YXRzIGFuZCBhdWRpdCBidXR0b24gY29udGFpbmVyXHJcblx0XHRcdGNvbnN0IHN0YXRzQ29udGFpbmVyID0gZmlsZUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1zdGF0cy1jb250YWluZXInIH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gSXNzdWVzLCB3YXJuaW5ncywgYW5kIG5vdGljZXMgdGV4dFxyXG5cdFx0XHRjb25zdCBzdGF0c1RleHQgPSBbXTtcclxuXHRcdFx0aWYgKHJlc3VsdC5pc3N1ZXNDb3VudCA+IDApIHN0YXRzVGV4dC5wdXNoKGAke3Jlc3VsdC5pc3N1ZXNDb3VudH0gaXNzdWVzYCk7XHJcblx0XHRcdGlmIChyZXN1bHQud2FybmluZ3NDb3VudCA+IDApIHN0YXRzVGV4dC5wdXNoKGAke3Jlc3VsdC53YXJuaW5nc0NvdW50fSB3YXJuaW5nc2ApO1xyXG5cdFx0XHRpZiAoc2hvd05vdGljZXMgJiYgcmVzdWx0Lm5vdGljZXNDb3VudCA+IDApIHN0YXRzVGV4dC5wdXNoKGAke3Jlc3VsdC5ub3RpY2VzQ291bnR9IG5vdGljZXNgKTtcclxuXHRcdFx0XHJcblx0XHRcdHN0YXRzQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuXHRcdFx0XHR0ZXh0OiBzdGF0c1RleHQuam9pbignLCAnKSxcclxuXHRcdFx0XHRjbHM6ICdzZW8tZmlsZS1zdGF0cydcclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBdWRpdCBidXR0b25cclxuXHRcdFx0Y29uc3QgYXVkaXRCdG4gPSBzdGF0c0NvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdGNsczogJ2NsaWNrYWJsZS1pY29uIHNlby1hdWRpdC1idG4nLFxyXG5cdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnQXVkaXQgdGhpcyBub3RlJyB9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRzZXRJY29uKGF1ZGl0QnRuLCAnc2VhcmNoLWNoZWNrJyk7XHJcblx0XHRcdGF1ZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLm9uRmlsZUF1ZGl0KHJlc3VsdC5maWxlKTtcclxuXHRcdFx0XHR9KSgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEFkZCBjb2xsYXBzZSBmdW5jdGlvbmFsaXR5IHRvIG9ubHkgdGhlIGFycm93IGljb25cclxuXHRcdGNvbGxhcHNlSWNvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSkgPT4ge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdGNvbnN0IGlzQ29sbGFwc2VkID0gZmlsZXNMaXN0Q29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnc2VvLXJlc3VsdHMtbGlzdC1jb2xsYXBzZWQnKTtcclxuXHRcdFx0aWYgKGlzQ29sbGFwc2VkKSB7XHJcblx0XHRcdFx0ZmlsZXNMaXN0Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ3Nlby1yZXN1bHRzLWxpc3QtY29sbGFwc2VkJyk7XHJcblx0XHRcdFx0ZmlsZXNMaXN0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3Nlby1yZXN1bHRzLWxpc3QtZXhwYW5kZWQnKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRmaWxlc0xpc3RDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnc2VvLXJlc3VsdHMtbGlzdC1leHBhbmRlZCcpO1xyXG5cdFx0XHRcdGZpbGVzTGlzdENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdzZW8tcmVzdWx0cy1saXN0LWNvbGxhcHNlZCcpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBSb3RhdGUgdGhlIGNvbGxhcHNlIGljb25cclxuXHRcdFx0Y29uc3QgaWNvbiA9IGNvbGxhcHNlSWNvbi5xdWVyeVNlbGVjdG9yKCdzdmcnKTtcclxuXHRcdFx0aWYgKGljb24pIHtcclxuXHRcdFx0XHRpZiAoaXNDb2xsYXBzZWQpIHtcclxuXHRcdFx0XHRcdGljb24uY2xhc3NMaXN0LnJlbW92ZSgnc2VvLWNvbGxhcHNlLWljb24tcm90YXRlZCcpO1xyXG5cdFx0XHRcdFx0aWNvbi5jbGFzc0xpc3QuYWRkKCdzZW8tY29sbGFwc2UtaWNvbi1ub3JtYWwnKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0aWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdzZW8tY29sbGFwc2UtaWNvbi1ub3JtYWwnKTtcclxuXHRcdFx0XHRcdGljb24uY2xhc3NMaXN0LmFkZCgnc2VvLWNvbGxhcHNlLWljb24tcm90YXRlZCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQWRkIFwiRmlsZXMgdGhhdCBwYXNzXCIgc2VjdGlvblxyXG5cdFx0dGhpcy5yZW5kZXJQYXNzaW5nRmlsZXNMaXN0KHJlc3VsdHMsIGN1cnJlbnRTb3J0LCBzaG93Tm90aWNlcyk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbmRlclBhc3NpbmdGaWxlc0xpc3QocmVzdWx0czogU0VPUmVzdWx0c1tdLCBjdXJyZW50U29ydDogc3RyaW5nLCBzaG93Tm90aWNlczogYm9vbGVhbik6IHZvaWQge1xyXG5cdFx0Ly8gRmlsdGVyIGZvciBmaWxlcyB0aGF0IGhhdmUgbm8gaXNzdWVzIG9yIHdhcm5pbmdzIChvbmx5IG5vdGljZXMgb3Igbm90aGluZylcclxuXHRcdGNvbnN0IHBhc3NpbmdGaWxlcyA9IHJlc3VsdHMuZmlsdGVyKHIgPT4ge1xyXG5cdFx0XHRjb25zdCBoYXNJc3N1ZXMgPSByLmlzc3Vlc0NvdW50ID4gMDtcclxuXHRcdFx0Y29uc3QgaGFzV2FybmluZ3MgPSByLndhcm5pbmdzQ291bnQgPiAwO1xyXG5cdFx0XHRyZXR1cm4gIWhhc0lzc3VlcyAmJiAhaGFzV2FybmluZ3M7XHJcblx0XHR9KTtcclxuXHJcblx0XHRpZiAocGFzc2luZ0ZpbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG5cclxuXHRcdGNvbnN0IHBhc3NpbmdMaXN0ID0gdGhpcy5jb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLWlzc3Vlcy1saXN0JyB9KTtcclxuXHRcdFxyXG5cdFx0Ly8gSGVhZGVyIHdpdGggY29sbGFwc2UgZnVuY3Rpb25hbGl0eVxyXG5cdFx0Y29uc3QgcGFzc2luZ0hlYWRlciA9IHBhc3NpbmdMaXN0LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1pc3N1ZXMtaGVhZGVyLWNvbnRhaW5lcicgfSk7XHJcblx0XHRcclxuXHRcdC8vIENvbGxhcHNlIGljb24gKG9ubHkgdGhpcyBzaG91bGQgYmUgY2xpY2thYmxlKSAtIHN0YXJ0IHdpdGggcmlnaHQgYXJyb3cgKGNvbGxhcHNlZCBzdGF0ZSlcclxuXHRcdGNvbnN0IGNvbGxhcHNlSWNvbiA9IHBhc3NpbmdIZWFkZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ3Nlby1jb2xsYXBzZS1pY29uIHNlby1jb2xsYXBzaWJsZS1oZWFkZXInIH0pO1xyXG5cdFx0Y29sbGFwc2VJY29uLmFwcGVuZENoaWxkKGNyZWF0ZUNvbGxhcHNlSWNvbigpKTtcclxuXHRcdFxyXG5cdFx0Ly8gU3RhcnQgd2l0aCByaWdodCBhcnJvdyAoY29sbGFwc2VkIHN0YXRlKSBhbmQgYWRkIHJvdGF0aW9uIGNsYXNzXHJcblx0XHRjb25zdCBpY29uID0gY29sbGFwc2VJY29uLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpO1xyXG5cdFx0aWYgKGljb24pIHtcclxuXHRcdFx0Ly8gUm90YXRlIHRoZSBkb3duIGFycm93IHRvIHBvaW50IHJpZ2h0IChjb2xsYXBzZWQgc3RhdGUpXHJcblx0XHRcdGljb24uY2xhc3NMaXN0LmFkZCgnc2VvLWNvbGxhcHNlLWljb24tcm90YXRlZCcpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBDZW50ZXIgdGhlIGhlYWRpbmdcclxuXHRcdGNvbnN0IGhlYWRpbmdDb250YWluZXIgPSBwYXNzaW5nSGVhZGVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1oZWFkaW5nLWNlbnRlcicgfSk7XHJcblx0XHRoZWFkaW5nQ29udGFpbmVyLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0ZpbGVzIHRoYXQgcGFzcycsIGNsczogJ3Nlby1pc3N1ZXMtaGVhZGVyJyB9KTtcclxuXHRcdFxyXG5cdFx0Ly8gRmlsZXMgbGlzdCBjb250YWluZXIgKGNvbGxhcHNlZCBieSBkZWZhdWx0KVxyXG5cdFx0Y29uc3QgZmlsZXNMaXN0Q29udGFpbmVyID0gcGFzc2luZ0xpc3QuY3JlYXRlRWwoJ2RpdicsIHsgXHJcblx0XHRcdGNsczogJ3Nlby1maWxlcy1saXN0LWNvbnRhaW5lciBzZW8tcmVzdWx0cy1saXN0LWNvbGxhcHNlZCcgXHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0Ly8gQXBwbHkgc2FtZSBzb3J0aW5nIGFzIHRoZSBtYWluIGxpc3RcclxuXHRcdGNvbnN0IHNvcnRlZEZpbGVzID0gdGhpcy5zb3J0RmlsZXMocGFzc2luZ0ZpbGVzLCBjdXJyZW50U29ydCk7XHJcblx0XHRcclxuXHRcdHNvcnRlZEZpbGVzLmZvckVhY2gocmVzdWx0ID0+IHtcclxuXHRcdFx0Y29uc3QgZmlsZUVsID0gZmlsZXNMaXN0Q29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1maWxlLWlzc3VlJyB9KTtcclxuXHRcdFx0ZmlsZUVsLnNldEF0dHJpYnV0ZSgnZGF0YS1maWxlLXBhdGgnLCByZXN1bHQuZmlsZSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBNYWtlIGZpbGUgcGF0aCBjbGlja2FibGVcclxuXHRcdFx0Y29uc3QgZmlsZUxpbmsgPSBmaWxlRWwuY3JlYXRlRWwoJ2EnLCB7IFxyXG5cdFx0XHRcdHRleHQ6IHJlc3VsdC5kaXNwbGF5TmFtZSB8fCBnZXREaXNwbGF5UGF0aChyZXN1bHQuZmlsZSksXHJcblx0XHRcdFx0Y2xzOiAnc2VvLWZpbGUtbGluaycsXHJcblx0XHRcdFx0aHJlZjogJyMnXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRmaWxlTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMub25GaWxlQ2xpY2socmVzdWx0LmZpbGUpO1xyXG5cdFx0XHRcdH0pKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gU3RhdHMgYW5kIGF1ZGl0IGJ1dHRvbiBjb250YWluZXJcclxuXHRcdFx0Y29uc3Qgc3RhdHNDb250YWluZXIgPSBmaWxlRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLXN0YXRzLWNvbnRhaW5lcicgfSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBPbmx5IHNob3cgbm90aWNlcyBpZiB0aGV5IGV4aXN0XHJcblx0XHRcdGlmIChzaG93Tm90aWNlcyAmJiByZXN1bHQubm90aWNlc0NvdW50ID4gMCkge1xyXG5cdFx0XHRcdHN0YXRzQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuXHRcdFx0XHRcdHRleHQ6IGAke3Jlc3VsdC5ub3RpY2VzQ291bnR9IG5vdGljZXNgLFxyXG5cdFx0XHRcdFx0Y2xzOiAnc2VvLWZpbGUtc3RhdHMnXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIEF1ZGl0IGJ1dHRvblxyXG5cdFx0XHRjb25zdCBhdWRpdEJ0biA9IHN0YXRzQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcblx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gc2VvLWF1ZGl0LWJ0bicsXHJcblx0XHRcdFx0YXR0cjogeyAnYXJpYS1sYWJlbCc6ICdBdWRpdCB0aGlzIG5vdGUnIH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdHNldEljb24oYXVkaXRCdG4sICdzZWFyY2gtY2hlY2snKTtcclxuXHRcdFx0YXVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMub25GaWxlQXVkaXQocmVzdWx0LmZpbGUpO1xyXG5cdFx0XHRcdH0pKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQWRkIGNvbGxhcHNlIGZ1bmN0aW9uYWxpdHkgdG8gdGhlIGhlYWRlclxyXG5cdFx0Y29sbGFwc2VJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IGlzQ29sbGFwc2VkID0gZmlsZXNMaXN0Q29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnc2VvLXJlc3VsdHMtbGlzdC1jb2xsYXBzZWQnKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChpc0NvbGxhcHNlZCkge1xyXG5cdFx0XHRcdGZpbGVzTGlzdENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdzZW8tcmVzdWx0cy1saXN0LWNvbGxhcHNlZCcpO1xyXG5cdFx0XHRcdGZpbGVzTGlzdENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdzZW8tcmVzdWx0cy1saXN0LWV4cGFuZGVkJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZmlsZXNMaXN0Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ3Nlby1yZXN1bHRzLWxpc3QtZXhwYW5kZWQnKTtcclxuXHRcdFx0XHRmaWxlc0xpc3RDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnc2VvLXJlc3VsdHMtbGlzdC1jb2xsYXBzZWQnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gUm90YXRlIHRoZSBjb2xsYXBzZSBpY29uIHdpdGggc21vb3RoIHRyYW5zaXRpb25cclxuXHRcdFx0Y29uc3QgaWNvbiA9IGNvbGxhcHNlSWNvbi5xdWVyeVNlbGVjdG9yKCdzdmcnKTtcclxuXHRcdFx0aWYgKGljb24pIHtcclxuXHRcdFx0XHRpZiAoaXNDb2xsYXBzZWQpIHtcclxuXHRcdFx0XHRcdC8vIEdvaW5nIGZyb20gY29sbGFwc2VkIHRvIGV4cGFuZGVkOiByZW1vdmUgcm90YXRpb24gKGRvd24gYXJyb3cpXHJcblx0XHRcdFx0XHRpY29uLmNsYXNzTGlzdC5yZW1vdmUoJ3Nlby1jb2xsYXBzZS1pY29uLXJvdGF0ZWQnKTtcclxuXHRcdFx0XHRcdGljb24uY2xhc3NMaXN0LmFkZCgnc2VvLWNvbGxhcHNlLWljb24tbm9ybWFsJyk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIEdvaW5nIGZyb20gZXhwYW5kZWQgdG8gY29sbGFwc2VkOiBhZGQgcm90YXRpb24gKHJpZ2h0IGFycm93KVxyXG5cdFx0XHRcdFx0aWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdzZW8tY29sbGFwc2UtaWNvbi1ub3JtYWwnKTtcclxuXHRcdFx0XHRcdGljb24uY2xhc3NMaXN0LmFkZCgnc2VvLWNvbGxhcHNlLWljb24tcm90YXRlZCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHNvcnRGaWxlcyhmaWxlczogU0VPUmVzdWx0c1tdLCBzb3J0VHlwZTogc3RyaW5nKTogU0VPUmVzdWx0c1tdIHtcclxuXHRcdGNvbnN0IHNvcnRlZEZpbGVzID0gWy4uLmZpbGVzXTtcclxuXHRcdFxyXG5cdFx0c3dpdGNoIChzb3J0VHlwZSkge1xyXG5cdFx0XHRjYXNlICdub3RpY2VzLWRlc2MnOlxyXG5cdFx0XHRcdC8vIFNvcnQgYnkgbm90aWNlcyAoaGlnaCBmaXJzdCksIHRoZW4gaXNzdWVzIChoaWdoIGZpcnN0KSwgdGhlbiB3YXJuaW5ncyAoaGlnaCBmaXJzdCksIHRoZW4gZmlsZSBuYW1lIEEtWlxyXG5cdFx0XHRcdHNvcnRlZEZpbGVzLnNvcnQoKGEsIGIpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IG5vdGljZXNDb21wYXJlID0gYi5ub3RpY2VzQ291bnQgLSBhLm5vdGljZXNDb3VudDtcclxuXHRcdFx0XHRcdGlmIChub3RpY2VzQ29tcGFyZSAhPT0gMCkgcmV0dXJuIG5vdGljZXNDb21wYXJlO1xyXG5cdFx0XHRcdFx0Y29uc3QgaXNzdWVzQ29tcGFyZSA9IGIuaXNzdWVzQ291bnQgLSBhLmlzc3Vlc0NvdW50O1xyXG5cdFx0XHRcdFx0aWYgKGlzc3Vlc0NvbXBhcmUgIT09IDApIHJldHVybiBpc3N1ZXNDb21wYXJlO1xyXG5cdFx0XHRcdFx0Y29uc3Qgd2FybmluZ3NDb21wYXJlID0gYi53YXJuaW5nc0NvdW50IC0gYS53YXJuaW5nc0NvdW50O1xyXG5cdFx0XHRcdFx0aWYgKHdhcm5pbmdzQ29tcGFyZSAhPT0gMCkgcmV0dXJuIHdhcm5pbmdzQ29tcGFyZTtcclxuXHRcdFx0XHRcdGNvbnN0IGFGaWxlTmFtZSA9IGEuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdFx0Y29uc3QgYkZpbGVOYW1lID0gYi5maWxlLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XHJcblx0XHRcdFx0XHRyZXR1cm4gYUZpbGVOYW1lLmxvY2FsZUNvbXBhcmUoYkZpbGVOYW1lKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnbm90aWNlcy1hc2MnOlxyXG5cdFx0XHRcdC8vIFNvcnQgYnkgbm90aWNlcyAobG93IGZpcnN0KSwgdGhlbiBpc3N1ZXMgKGxvdyBmaXJzdCksIHRoZW4gd2FybmluZ3MgKGxvdyBmaXJzdCksIHRoZW4gZmlsZSBuYW1lIEEtWlxyXG5cdFx0XHRcdHNvcnRlZEZpbGVzLnNvcnQoKGEsIGIpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IG5vdGljZXNDb21wYXJlID0gYS5ub3RpY2VzQ291bnQgLSBiLm5vdGljZXNDb3VudDtcclxuXHRcdFx0XHRcdGlmIChub3RpY2VzQ29tcGFyZSAhPT0gMCkgcmV0dXJuIG5vdGljZXNDb21wYXJlO1xyXG5cdFx0XHRcdFx0Y29uc3QgaXNzdWVzQ29tcGFyZSA9IGEuaXNzdWVzQ291bnQgLSBiLmlzc3Vlc0NvdW50O1xyXG5cdFx0XHRcdFx0aWYgKGlzc3Vlc0NvbXBhcmUgIT09IDApIHJldHVybiBpc3N1ZXNDb21wYXJlO1xyXG5cdFx0XHRcdFx0Y29uc3Qgd2FybmluZ3NDb21wYXJlID0gYS53YXJuaW5nc0NvdW50IC0gYi53YXJuaW5nc0NvdW50O1xyXG5cdFx0XHRcdFx0aWYgKHdhcm5pbmdzQ29tcGFyZSAhPT0gMCkgcmV0dXJuIHdhcm5pbmdzQ29tcGFyZTtcclxuXHRcdFx0XHRcdGNvbnN0IGFGaWxlTmFtZSA9IGEuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdFx0Y29uc3QgYkZpbGVOYW1lID0gYi5maWxlLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XHJcblx0XHRcdFx0XHRyZXR1cm4gYUZpbGVOYW1lLmxvY2FsZUNvbXBhcmUoYkZpbGVOYW1lKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnd2FybmluZ3MtZGVzYyc6XHJcblx0XHRcdFx0Ly8gU29ydCBieSB3YXJuaW5ncyAoaGlnaCBmaXJzdCksIHRoZW4gYnkgaXNzdWVzIChoaWdoIGZpcnN0KSwgdGhlbiBieSBmaWxlIG5hbWUgQS1aXHJcblx0XHRcdFx0c29ydGVkRmlsZXMuc29ydCgoYSwgYikgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3Qgd2FybmluZ3NDb21wYXJlID0gYi53YXJuaW5nc0NvdW50IC0gYS53YXJuaW5nc0NvdW50O1xyXG5cdFx0XHRcdFx0aWYgKHdhcm5pbmdzQ29tcGFyZSAhPT0gMCkgcmV0dXJuIHdhcm5pbmdzQ29tcGFyZTtcclxuXHRcdFx0XHRcdGNvbnN0IGlzc3Vlc0NvbXBhcmUgPSBiLmlzc3Vlc0NvdW50IC0gYS5pc3N1ZXNDb3VudDtcclxuXHRcdFx0XHRcdGlmIChpc3N1ZXNDb21wYXJlICE9PSAwKSByZXR1cm4gaXNzdWVzQ29tcGFyZTtcclxuXHRcdFx0XHRcdGNvbnN0IGFGaWxlTmFtZSA9IGEuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdFx0Y29uc3QgYkZpbGVOYW1lID0gYi5maWxlLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XHJcblx0XHRcdFx0XHRyZXR1cm4gYUZpbGVOYW1lLmxvY2FsZUNvbXBhcmUoYkZpbGVOYW1lKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnd2FybmluZ3MtYXNjJzpcclxuXHRcdFx0XHQvLyBTb3J0IGJ5IHdhcm5pbmdzIChsb3cgZmlyc3QpLCB0aGVuIGJ5IGlzc3VlcyAobG93IGZpcnN0KSwgdGhlbiBieSBmaWxlIG5hbWUgQS1aXHJcblx0XHRcdFx0c29ydGVkRmlsZXMuc29ydCgoYSwgYikgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3Qgd2FybmluZ3NDb21wYXJlID0gYS53YXJuaW5nc0NvdW50IC0gYi53YXJuaW5nc0NvdW50O1xyXG5cdFx0XHRcdFx0aWYgKHdhcm5pbmdzQ29tcGFyZSAhPT0gMCkgcmV0dXJuIHdhcm5pbmdzQ29tcGFyZTtcclxuXHRcdFx0XHRcdGNvbnN0IGlzc3Vlc0NvbXBhcmUgPSBhLmlzc3Vlc0NvdW50IC0gYi5pc3N1ZXNDb3VudDtcclxuXHRcdFx0XHRcdGlmIChpc3N1ZXNDb21wYXJlICE9PSAwKSByZXR1cm4gaXNzdWVzQ29tcGFyZTtcclxuXHRcdFx0XHRcdGNvbnN0IGFGaWxlTmFtZSA9IGEuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdFx0Y29uc3QgYkZpbGVOYW1lID0gYi5maWxlLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XHJcblx0XHRcdFx0XHRyZXR1cm4gYUZpbGVOYW1lLmxvY2FsZUNvbXBhcmUoYkZpbGVOYW1lKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnaXNzdWVzLWRlc2MnOlxyXG5cdFx0XHRcdC8vIFNvcnQgYnkgaXNzdWVzIChoaWdoIGZpcnN0KSwgdGhlbiBieSB3YXJuaW5ncyAoaGlnaCBmaXJzdCksIHRoZW4gYnkgZmlsZSBuYW1lIEEtWlxyXG5cdFx0XHRcdHNvcnRlZEZpbGVzLnNvcnQoKGEsIGIpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IGlzc3Vlc0NvbXBhcmUgPSBiLmlzc3Vlc0NvdW50IC0gYS5pc3N1ZXNDb3VudDtcclxuXHRcdFx0XHRcdGlmIChpc3N1ZXNDb21wYXJlICE9PSAwKSByZXR1cm4gaXNzdWVzQ29tcGFyZTtcclxuXHRcdFx0XHRcdGNvbnN0IHdhcm5pbmdzQ29tcGFyZSA9IGIud2FybmluZ3NDb3VudCAtIGEud2FybmluZ3NDb3VudDtcclxuXHRcdFx0XHRcdGlmICh3YXJuaW5nc0NvbXBhcmUgIT09IDApIHJldHVybiB3YXJuaW5nc0NvbXBhcmU7XHJcblx0XHRcdFx0XHRjb25zdCBhRmlsZU5hbWUgPSBhLmZpbGUuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcclxuXHRcdFx0XHRcdGNvbnN0IGJGaWxlTmFtZSA9IGIuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGFGaWxlTmFtZS5sb2NhbGVDb21wYXJlKGJGaWxlTmFtZSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ2lzc3Vlcy1hc2MnOlxyXG5cdFx0XHRcdC8vIFNvcnQgYnkgaXNzdWVzIChsb3cgZmlyc3QpLCB0aGVuIGJ5IHdhcm5pbmdzIChsb3cgZmlyc3QpLCB0aGVuIGJ5IGZpbGUgbmFtZSBBLVpcclxuXHRcdFx0XHRzb3J0ZWRGaWxlcy5zb3J0KChhLCBiKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBpc3N1ZXNDb21wYXJlID0gYS5pc3N1ZXNDb3VudCAtIGIuaXNzdWVzQ291bnQ7XHJcblx0XHRcdFx0XHRpZiAoaXNzdWVzQ29tcGFyZSAhPT0gMCkgcmV0dXJuIGlzc3Vlc0NvbXBhcmU7XHJcblx0XHRcdFx0XHRjb25zdCB3YXJuaW5nc0NvbXBhcmUgPSBhLndhcm5pbmdzQ291bnQgLSBiLndhcm5pbmdzQ291bnQ7XHJcblx0XHRcdFx0XHRpZiAod2FybmluZ3NDb21wYXJlICE9PSAwKSByZXR1cm4gd2FybmluZ3NDb21wYXJlO1xyXG5cdFx0XHRcdFx0Y29uc3QgYUZpbGVOYW1lID0gYS5maWxlLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XHJcblx0XHRcdFx0XHRjb25zdCBiRmlsZU5hbWUgPSBiLmZpbGUuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcclxuXHRcdFx0XHRcdHJldHVybiBhRmlsZU5hbWUubG9jYWxlQ29tcGFyZShiRmlsZU5hbWUpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdmaWxlbmFtZS1hc2MnOlxyXG5cdFx0XHRcdHNvcnRlZEZpbGVzLnNvcnQoKGEsIGIpID0+IHtcclxuXHRcdFx0XHRcdC8vIFByaW1hcnk6IGZpbGUgbmFtZSBBLVpcclxuXHRcdFx0XHRcdGNvbnN0IGFGaWxlTmFtZSA9IGEuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdFx0Y29uc3QgYkZpbGVOYW1lID0gYi5maWxlLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XHJcblx0XHRcdFx0XHRjb25zdCBmaWxlTmFtZUNvbXBhcmUgPSBhRmlsZU5hbWUubG9jYWxlQ29tcGFyZShiRmlsZU5hbWUpO1xyXG5cdFx0XHRcdFx0aWYgKGZpbGVOYW1lQ29tcGFyZSAhPT0gMCkgcmV0dXJuIGZpbGVOYW1lQ29tcGFyZTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gU2Vjb25kYXJ5OiBwYXJlbnQgZm9sZGVyIEEtWiAocm9vdCBmaWxlcyBmaXJzdClcclxuXHRcdFx0XHRcdGNvbnN0IGFQYXJ0cyA9IGEuZmlsZS5zcGxpdCgnLycpO1xyXG5cdFx0XHRcdFx0Y29uc3QgYlBhcnRzID0gYi5maWxlLnNwbGl0KCcvJyk7XHJcblx0XHRcdFx0XHRjb25zdCBhUGFyZW50ID0gYVBhcnRzLmxlbmd0aCA+IDEgPyAoYVBhcnRzW2FQYXJ0cy5sZW5ndGggLSAyXSB8fCAnJykgOiAnJztcclxuXHRcdFx0XHRcdGNvbnN0IGJQYXJlbnQgPSBiUGFydHMubGVuZ3RoID4gMSA/IChiUGFydHNbYlBhcnRzLmxlbmd0aCAtIDJdIHx8ICcnKSA6ICcnO1xyXG5cdFx0XHRcdFx0Y29uc3QgcGFyZW50Q29tcGFyZSA9IGFQYXJlbnQubG9jYWxlQ29tcGFyZShiUGFyZW50KTtcclxuXHRcdFx0XHRcdGlmIChwYXJlbnRDb21wYXJlICE9PSAwKSByZXR1cm4gcGFyZW50Q29tcGFyZTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gVGVydGlhcnk6IGlzc3VlcyAoaGlnaCBmaXJzdClcclxuXHRcdFx0XHRcdGlmIChiLmlzc3Vlc0NvdW50ICE9PSBhLmlzc3Vlc0NvdW50KSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBiLmlzc3Vlc0NvdW50IC0gYS5pc3N1ZXNDb3VudDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIFF1YXRlcm5hcnk6IHdhcm5pbmdzIChoaWdoIGZpcnN0KVxyXG5cdFx0XHRcdFx0aWYgKGIud2FybmluZ3NDb3VudCAhPT0gYS53YXJuaW5nc0NvdW50KSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBiLndhcm5pbmdzQ291bnQgLSBhLndhcm5pbmdzQ291bnQ7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvLyBRdWluYXJ5OiBub3RpY2VzIChoaWdoIGZpcnN0KVxyXG5cdFx0XHRcdFx0cmV0dXJuIGIubm90aWNlc0NvdW50IC0gYS5ub3RpY2VzQ291bnQ7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ2ZpbGVuYW1lLWRlc2MnOlxyXG5cdFx0XHRcdHNvcnRlZEZpbGVzLnNvcnQoKGEsIGIpID0+IHtcclxuXHRcdFx0XHRcdC8vIFByaW1hcnk6IGZpbGUgbmFtZSBaLUFcclxuXHRcdFx0XHRcdGNvbnN0IGFGaWxlTmFtZSA9IGEuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdFx0Y29uc3QgYkZpbGVOYW1lID0gYi5maWxlLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XHJcblx0XHRcdFx0XHRjb25zdCBmaWxlTmFtZUNvbXBhcmUgPSBiRmlsZU5hbWUubG9jYWxlQ29tcGFyZShhRmlsZU5hbWUpO1xyXG5cdFx0XHRcdFx0aWYgKGZpbGVOYW1lQ29tcGFyZSAhPT0gMCkgcmV0dXJuIGZpbGVOYW1lQ29tcGFyZTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gU2Vjb25kYXJ5OiBwYXJlbnQgZm9sZGVyIFotQSAocm9vdCBmaWxlcyBsYXN0KVxyXG5cdFx0XHRcdFx0Y29uc3QgYVBhcnRzID0gYS5maWxlLnNwbGl0KCcvJyk7XHJcblx0XHRcdFx0XHRjb25zdCBiUGFydHMgPSBiLmZpbGUuc3BsaXQoJy8nKTtcclxuXHRcdFx0XHRcdGNvbnN0IGFQYXJlbnQgPSBhUGFydHMubGVuZ3RoID4gMSA/IChhUGFydHNbYVBhcnRzLmxlbmd0aCAtIDJdIHx8ICcnKSA6ICcnO1xyXG5cdFx0XHRcdFx0Y29uc3QgYlBhcmVudCA9IGJQYXJ0cy5sZW5ndGggPiAxID8gKGJQYXJ0c1tiUGFydHMubGVuZ3RoIC0gMl0gfHwgJycpIDogJyc7XHJcblx0XHRcdFx0XHRjb25zdCBwYXJlbnRDb21wYXJlID0gYlBhcmVudC5sb2NhbGVDb21wYXJlKGFQYXJlbnQpO1xyXG5cdFx0XHRcdFx0aWYgKHBhcmVudENvbXBhcmUgIT09IDApIHJldHVybiBwYXJlbnRDb21wYXJlO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBUZXJ0aWFyeTogaXNzdWVzIChoaWdoIGZpcnN0KVxyXG5cdFx0XHRcdFx0aWYgKGIuaXNzdWVzQ291bnQgIT09IGEuaXNzdWVzQ291bnQpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGIuaXNzdWVzQ291bnQgLSBhLmlzc3Vlc0NvdW50O1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gUXVhdGVybmFyeTogd2FybmluZ3MgKGhpZ2ggZmlyc3QpXHJcblx0XHRcdFx0XHRpZiAoYi53YXJuaW5nc0NvdW50ICE9PSBhLndhcm5pbmdzQ291bnQpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGIud2FybmluZ3NDb3VudCAtIGEud2FybmluZ3NDb3VudDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIFF1aW5hcnk6IG5vdGljZXMgKGhpZ2ggZmlyc3QpXHJcblx0XHRcdFx0XHRyZXR1cm4gYi5ub3RpY2VzQ291bnQgLSBhLm5vdGljZXNDb3VudDtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHNvcnRlZEZpbGVzO1xyXG5cdH1cclxuXHRcclxuXHRwcml2YXRlIHRvZ2dsZUNoZWNrc1Zpc2liaWxpdHkoKTogdm9pZCB7XHJcblx0XHRjb25zdCBjaGVja3NDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc2VvLWNoZWNrcycpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0aWYgKCFjaGVja3NDb250YWluZXIpIHJldHVybjtcclxuXHRcdFxyXG5cdFx0Ly8gR2V0IGFsbCBpbmRpdmlkdWFsIGNvbGxhcHNlIGhlYWRlcnMgYW5kIGZvcmNlIHRoZW0gdG8gdGhlIGFwcHJvcHJpYXRlIHN0YXRlXHJcblx0XHRjb25zdCBhbGxIZWFkZXJzID0gY2hlY2tzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZW8tY2hlY2staGVhZGVyJyk7XHJcblx0XHRhbGxIZWFkZXJzLmZvckVhY2goKGhlYWRlcikgPT4ge1xyXG5cdFx0XHRjb25zdCBodG1sSGVhZGVyID0gaGVhZGVyIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRjb25zdCByZXN1bHRzTGlzdCA9IGh0bWxIZWFkZXIucGFyZW50RWxlbWVudD8ucXVlcnlTZWxlY3RvcignLnNlby1yZXN1bHRzJykgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdGNvbnN0IGNvbGxhcHNlSWNvbiA9IGh0bWxIZWFkZXIucXVlcnlTZWxlY3RvcignLnNlby1jb2xsYXBzZS1pY29uIHN2ZycpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gRmluZCB0aGUgY2hlY2sgbmFtZSBmb3IgdGhpcyBoZWFkZXIgdG8gdXBkYXRlIHRoZSBzdGF0ZSBtYXBcclxuXHRcdFx0Y29uc3QgY2hlY2tOYW1lID0gdGhpcy5maW5kQ2hlY2tOYW1lRm9ySGVhZGVyKGh0bWxIZWFkZXIpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHJlc3VsdHNMaXN0ICYmIGNvbGxhcHNlSWNvbikge1xyXG5cdFx0XHRcdC8vIFVwZGF0ZSB0aGUgaW5kaXZpZHVhbCBzdGF0ZSBtYXBcclxuXHRcdFx0XHRpZiAoY2hlY2tOYW1lKSB7XHJcblx0XHRcdFx0XHR0aGlzLmluZGl2aWR1YWxDb2xsYXBzZVN0YXRlcy5zZXQoY2hlY2tOYW1lLCB0aGlzLmlzQ29sbGFwc2VkKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gRm9yY2UgdG8gdGhlIHN0YXRlIGJhc2VkIG9uIG1haW4gdG9nZ2xlXHJcblx0XHRcdFx0aWYgKHRoaXMuaXNDb2xsYXBzZWQpIHtcclxuXHRcdFx0XHRcdC8vIEZvcmNlIGFsbCB0byBjb2xsYXBzZWRcclxuXHRcdFx0XHRcdHJlc3VsdHNMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nlby1yZXN1bHRzLWxpc3QtZXhwYW5kZWQnKTtcclxuXHRcdFx0XHRcdHJlc3VsdHNMaXN0LmNsYXNzTGlzdC5hZGQoJ3Nlby1yZXN1bHRzLWxpc3QtY29sbGFwc2VkJyk7XHJcblx0XHRcdFx0XHRjb2xsYXBzZUljb24uY2xhc3NMaXN0LnJlbW92ZSgnc2VvLWNvbGxhcHNlLWljb24tbm9ybWFsJyk7XHJcblx0XHRcdFx0XHRjb2xsYXBzZUljb24uY2xhc3NMaXN0LmFkZCgnc2VvLWNvbGxhcHNlLWljb24tcm90YXRlZCcpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQvLyBGb3JjZSBhbGwgdG8gZXhwYW5kZWRcclxuXHRcdFx0XHRcdHJlc3VsdHNMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nlby1yZXN1bHRzLWxpc3QtY29sbGFwc2VkJyk7XHJcblx0XHRcdFx0XHRyZXN1bHRzTGlzdC5jbGFzc0xpc3QuYWRkKCdzZW8tcmVzdWx0cy1saXN0LWV4cGFuZGVkJyk7XHJcblx0XHRcdFx0XHRjb2xsYXBzZUljb24uY2xhc3NMaXN0LnJlbW92ZSgnc2VvLWNvbGxhcHNlLWljb24tcm90YXRlZCcpO1xyXG5cdFx0XHRcdFx0Y29sbGFwc2VJY29uLmNsYXNzTGlzdC5hZGQoJ3Nlby1jb2xsYXBzZS1pY29uLW5vcm1hbCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIEhlbHBlciBtZXRob2QgdG8gZmluZCB0aGUgY2hlY2sgbmFtZSBmb3IgYSBnaXZlbiBoZWFkZXJcclxuXHRwcml2YXRlIGZpbmRDaGVja05hbWVGb3JIZWFkZXIoaGVhZGVyOiBIVE1MRWxlbWVudCk6IHN0cmluZyB8IG51bGwge1xyXG5cdFx0Ly8gR2V0IHRoZSBjaGVjayBuYW1lIGZyb20gdGhlIGRhdGEgYXR0cmlidXRlXHJcblx0XHRyZXR1cm4gaGVhZGVyLmdldEF0dHJpYnV0ZSgnZGF0YS1jaGVjay1uYW1lJyk7XHJcblx0fVxyXG59XHJcbiIsICIvKipcbiAqIFBhbmVsIHJlbmRlcmluZyBsb2dpYyBmb3IgU0VPIHNpZGUgcGFuZWxcbiAqIEhhbmRsZXMgdGhlIGNvbXBsZXggcmVuZGVyaW5nIG9mIGJvdGggY3VycmVudCBhbmQgZ2xvYmFsIHBhbmVsc1xuICovXG5cbmltcG9ydCB7IEFwcCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IFNFT1BsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xuaW1wb3J0IHsgU0VPUmVzdWx0cyB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0VmF1bHRGb2xkZXJzSW5mbyB9IGZyb20gXCIuL3BhbmVsLXV0aWxzXCI7XG5pbXBvcnQgeyBQYW5lbEFjdGlvbnMgfSBmcm9tIFwiLi9wYW5lbC1hY3Rpb25zXCI7XG5pbXBvcnQgeyBSZXN1bHRzRGlzcGxheSB9IGZyb20gXCIuL3Jlc3VsdHMtZGlzcGxheVwiO1xuaW1wb3J0IHsgU0VPU2lkZVBhbmVsIH0gZnJvbSBcIi4vc2lkZS1wYW5lbFwiO1xuaW1wb3J0IHsgaXNTdXBwb3J0ZWRGaWxlIH0gZnJvbSBcIi4uL3V0aWxzL2ZpbGUtdXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIFBhbmVsUmVuZGVyZXIge1xuXHRjb25zdHJ1Y3Rvcihcblx0XHRwcml2YXRlIGFwcDogQXBwLFxuXHRcdHByaXZhdGUgcGx1Z2luOiBTRU9QbHVnaW4sXG5cdFx0cHJpdmF0ZSBhY3Rpb25zOiBQYW5lbEFjdGlvbnNcblx0KSB7fVxuXG5cdC8qKlxuXHQgKiBSZW5kZXJzIHRoZSBtYWluIHBhbmVsIGNvbnRlbnRcblx0ICovXG5cdHJlbmRlcihcblx0XHRjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXG5cdFx0cGFuZWxUeXBlOiAnY3VycmVudCcgfCAnZ2xvYmFsJyxcblx0XHRjdXJyZW50Tm90ZVJlc3VsdHM6IFNFT1Jlc3VsdHMgfCBudWxsLFxuXHRcdGdsb2JhbFJlc3VsdHM6IFNFT1Jlc3VsdHNbXSxcblx0XHRvblJlZnJlc2hDbGljazogKGJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQpID0+IFByb21pc2U8dm9pZD4sXG5cdFx0b25FeHRlcm5hbExpbmtzQ2xpY2s6ICgpID0+IFByb21pc2U8dm9pZD5cblx0KSB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cdFx0XHRjb250YWluZXJFbC5hZGRDbGFzcygnc2VvLXBhbmVsJyk7XG5cblx0XHRcdC8vIEhlYWRlciB3aXRoIHByb3BlciBzcGFjaW5nXG5cdFx0XHRjb25zdCBoZWFkZXIgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tcGFuZWwtaGVhZGVyJyB9KTtcblx0XHRcdGhlYWRlci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHBhbmVsVHlwZSA9PT0gJ2N1cnJlbnQnID8gJ1NFTyBhdWRpdDogY3VycmVudCBub3RlJyA6ICdTRU8gYXVkaXQ6IHZhdWx0JyB9KTtcblxuXHRcdFx0Ly8gU2hvdyBjdXJyZW50IG5vdGUgZmlsZSBwYXRoIGlmIGF2YWlsYWJsZVxuXHRcdFx0aWYgKHBhbmVsVHlwZSA9PT0gJ2N1cnJlbnQnKSB7XG5cdFx0XHRcdHRoaXMucmVuZGVyQ3VycmVudE5vdGVIZWFkZXIoaGVhZGVyLCBjdXJyZW50Tm90ZVJlc3VsdHMpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gU2hvdyB2YXVsdCBmb2xkZXJzIGluZm9ybWF0aW9uIGZvciBnbG9iYWwgcGFuZWxcblx0XHRcdFx0Y29uc3QgZmlsZUNvdW50ID0gZ2xvYmFsUmVzdWx0cy5sZW5ndGg7XG5cdFx0XHRcdGNvbnN0IGZvbGRlcnNJbmZvID0gZ2V0VmF1bHRGb2xkZXJzSW5mbyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY2FuRGlyZWN0b3JpZXMsIGZpbGVDb3VudCk7XG5cdFx0XHRcdGNvbnN0IGZvbGRlcnNFbCA9IGhlYWRlci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tZmlsZW5hbWUnIH0pO1xuXHRcdFx0XHRmb2xkZXJzRWwudGV4dENvbnRlbnQgPSBmb2xkZXJzSW5mbztcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWN0aW9uIGJ1dHRvbiBhdCB0aGUgdG9wXG5cdFx0XHRpZiAocGFuZWxUeXBlID09PSAnY3VycmVudCcpIHtcblx0XHRcdFx0dGhpcy5yZW5kZXJDdXJyZW50Tm90ZUFjdGlvbnMoY29udGFpbmVyRWwsIG9uUmVmcmVzaENsaWNrLCBvbkV4dGVybmFsTGlua3NDbGljayk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbnRlbnQgYmFzZWQgb24gcGFuZWwgdHlwZVxuXHRcdFx0aWYgKHBhbmVsVHlwZSA9PT0gJ2N1cnJlbnQnKSB7XG5cdFx0XHRcdHRoaXMucmVuZGVyQ3VycmVudE5vdGVDb250ZW50KGNvbnRhaW5lckVsLCBjdXJyZW50Tm90ZVJlc3VsdHMpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKGdsb2JhbFJlc3VsdHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyR2xvYmFsUmVzdWx0cyhjb250YWluZXJFbCwgZ2xvYmFsUmVzdWx0cyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCBub0dsb2JhbCA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1uby1yZXN1bHRzJyB9KTtcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IENvbnRhaW5zIHF1b3RlZCB0ZXh0IHdoaWNoIGlzIGFscmVhZHkgaW4gc2VudGVuY2UgY2FzZVxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXG5cdFx0XHRcdG5vR2xvYmFsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnQ2xpY2sgXCJBdWRpdCBhbGwgbm90ZXNcIiB0byBhdWRpdCB5b3VyIGZpbGVzIGluIHlvdXIgY29uZmlndXJlZCBkaXJlY3Rvcmllcy4nIH0pO1xuXHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlbmRlcmluZyBTRU8gcGFuZWw6JywgZXJyb3IpO1xuXHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFwiU0VPXCIgaXMgYSBwcm9wZXIgbm91biAoYWNyb255bSkgYW5kIHNob3VsZCBiZSBjYXBpdGFsaXplZFxuXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxuXHRcdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ0Vycm9yIGxvYWRpbmcgU0VPIHBhbmVsLiBQbGVhc2UgdHJ5IGFnYWluLicgfSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFJlbmRlcnMgdGhlIGN1cnJlbnQgbm90ZSBoZWFkZXIgd2l0aCBmaWxlIHBhdGhcblx0ICovXG5cdHByaXZhdGUgcmVuZGVyQ3VycmVudE5vdGVIZWFkZXIoaGVhZGVyOiBIVE1MRWxlbWVudCwgY3VycmVudE5vdGVSZXN1bHRzOiBTRU9SZXN1bHRzIHwgbnVsbCkge1xuXHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdGlmIChhY3RpdmVGaWxlICYmIGlzU3VwcG9ydGVkRmlsZShhY3RpdmVGaWxlLCB0aGlzLnBsdWdpbi5zZXR0aW5ncykpIHtcblx0XHRcdGNvbnN0IGZpbGVuYW1lRWwgPSBoZWFkZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLWZpbGVuYW1lJyB9KTtcblx0XHRcdFxuXHRcdFx0Ly8gR2V0IHRoZSBjb3JyZWN0IGRpc3BsYXkgbmFtZSBiYXNlZCBvbiB0aGUgY3VycmVudCBhY3RpdmUgZmlsZVxuXHRcdFx0bGV0IGRpc3BsYXlOYW1lID0gYWN0aXZlRmlsZS5wYXRoO1xuXHRcdFx0XG5cdFx0XHQvLyBJZiB3ZSBoYXZlIGN1cnJlbnQgbm90ZSByZXN1bHRzIGZvciB0aGlzIHNwZWNpZmljIGZpbGUsIHVzZSBpdHMgZGlzcGxheSBuYW1lXG5cdFx0XHRpZiAoY3VycmVudE5vdGVSZXN1bHRzICYmIGN1cnJlbnROb3RlUmVzdWx0cy5maWxlID09PSBhY3RpdmVGaWxlLnBhdGgpIHtcblx0XHRcdFx0ZGlzcGxheU5hbWUgPSBjdXJyZW50Tm90ZVJlc3VsdHMuZGlzcGxheU5hbWUgfHwgYWN0aXZlRmlsZS5wYXRoO1xuXHRcdFx0fVxuXHRcdFx0Ly8gSWYgd2UgaGF2ZSBnbG9iYWwgcmVzdWx0cyBmb3IgdGhpcyBmaWxlLCB1c2UgaXRzIGRpc3BsYXkgbmFtZVxuXHRcdFx0ZWxzZSBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FjaGVkR2xvYmFsUmVzdWx0cykge1xuXHRcdFx0XHRjb25zdCBnbG9iYWxSZXN1bHQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWNoZWRHbG9iYWxSZXN1bHRzLmZpbmQoXG5cdFx0XHRcdFx0cmVzdWx0ID0+IHJlc3VsdC5maWxlID09PSBhY3RpdmVGaWxlLnBhdGhcblx0XHRcdFx0KTtcblx0XHRcdFx0aWYgKGdsb2JhbFJlc3VsdCkge1xuXHRcdFx0XHRcdGRpc3BsYXlOYW1lID0gZ2xvYmFsUmVzdWx0LmRpc3BsYXlOYW1lIHx8IGFjdGl2ZUZpbGUucGF0aDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRmaWxlbmFtZUVsLnRleHRDb250ZW50ID0gYFRhcmdldCBub3RlOiAke2Rpc3BsYXlOYW1lfWA7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFJlbmRlcnMgYWN0aW9uIGJ1dHRvbnMgZm9yIGN1cnJlbnQgbm90ZSBwYW5lbFxuXHQgKi9cblx0cHJpdmF0ZSByZW5kZXJDdXJyZW50Tm90ZUFjdGlvbnMoXG5cdFx0Y29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBcblx0XHRvblJlZnJlc2hDbGljazogKGJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQpID0+IFByb21pc2U8dm9pZD4sXG5cdFx0b25FeHRlcm5hbExpbmtzQ2xpY2s6ICgpID0+IFByb21pc2U8dm9pZD5cblx0KSB7XG5cdFx0Y29uc3QgYXVkaXRDdXJyZW50QnRuID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG5cdFx0XHR0ZXh0OiAnUmVmcmVzaCcsXG5cdFx0XHRjbHM6ICdtb2QtY3RhIHNlby1idG4gc2VvLXRvcC1idG4nLFxuXHRcdFx0YXR0cjogeyAnZGF0YS1yZWZyZXNoLWJ0bic6ICd0cnVlJyB9XG5cdFx0fSk7XG5cdFx0XG5cdFx0Ly8gVXNlIG9ubHkgY2xpY2sgZXZlbnQgdG8gYXZvaWQgZG91YmxlIGV4ZWN1dGlvblxuXHRcdGF1ZGl0Q3VycmVudEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRhd2FpdCBvblJlZnJlc2hDbGljayhhdWRpdEN1cnJlbnRCdG4pO1xuXHRcdFx0fSkoKTtcblx0XHR9KTtcblxuXHRcdC8vIEV4dGVybmFsIGxpbmtzIGJ1dHRvbiAob25seSBzaG93IGlmIGVuYWJsZWQgaW4gc2V0dGluZ3MgYW5kIHZhdWx0LXdpZGUgaXMgZGlzYWJsZWQpXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUV4dGVybmFsTGlua0J1dHRvbiAmJiAhdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRXh0ZXJuYWxMaW5rVmF1bHRDaGVjaykge1xuXHRcdFx0Y29uc3QgZXh0ZXJuYWxMaW5rc0J0biA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuXHRcdFx0XHR0ZXh0OiAnQ2hlY2sgZXh0ZXJuYWwgbGlua3MgZm9yIDQwNHMnLFxuXHRcdFx0XHRjbHM6ICdzZW8tYnRuJ1xuXHRcdFx0fSk7XG5cdFx0XHRleHRlcm5hbExpbmtzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0ZXh0ZXJuYWxMaW5rc0J0bi5kaXNhYmxlZCA9IHRydWU7XG5cdFx0XHRcdFx0ZXh0ZXJuYWxMaW5rc0J0bi50ZXh0Q29udGVudCA9ICdUaGlzIG1heSB0YWtlIHNvbWUgdGltZS4uLic7XG5cdFx0XHRcdFx0ZXh0ZXJuYWxMaW5rc0J0bi5hZGRDbGFzcygnc2VvLWJ0bi1kaXNhYmxlZCcpO1xuXHRcdFx0XHRcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0YXdhaXQgb25FeHRlcm5hbExpbmtzQ2xpY2soKTtcblx0XHRcdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHRcdFx0ZXh0ZXJuYWxMaW5rc0J0bi5kaXNhYmxlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0ZXh0ZXJuYWxMaW5rc0J0bi50ZXh0Q29udGVudCA9ICdDaGVjayBleHRlcm5hbCBsaW5rcyBmb3IgNDA0cyc7XG5cdFx0XHRcdFx0XHRleHRlcm5hbExpbmtzQnRuLnJlbW92ZUNsYXNzKCdzZW8tYnRuLWRpc2FibGVkJyk7XG5cdFx0XHRcdFx0XHRleHRlcm5hbExpbmtzQnRuLmFkZENsYXNzKCdzZW8tYnRuLWVuYWJsZWQnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pKCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogUmVuZGVycyBjdXJyZW50IG5vdGUgY29udGVudFxuXHQgKi9cblx0cHJpdmF0ZSByZW5kZXJDdXJyZW50Tm90ZUNvbnRlbnQoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBjdXJyZW50Tm90ZVJlc3VsdHM6IFNFT1Jlc3VsdHMgfCBudWxsKSB7XG5cdFx0Ly8gQ2hlY2sgaWYgd2UgaGF2ZSByZXN1bHRzIGZvciB0aGUgY3VycmVudCBmaWxlIGZyb20gZ2xvYmFsIGF1ZGl0XG5cdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cdFx0bGV0IGN1cnJlbnRGaWxlUmVzdWx0czogU0VPUmVzdWx0cyB8IG51bGwgPSBudWxsO1xuXHRcdFxuXHRcdGlmIChhY3RpdmVGaWxlICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmNhY2hlZEdsb2JhbFJlc3VsdHMpIHtcblx0XHRcdC8vIEZpbmQgcmVzdWx0cyBmb3IgdGhlIGN1cnJlbnQgZmlsZSBpbiB0aGUgZ2xvYmFsIHJlc3VsdHNcblx0XHRcdGN1cnJlbnRGaWxlUmVzdWx0cyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNhY2hlZEdsb2JhbFJlc3VsdHMuZmluZChcblx0XHRcdFx0cmVzdWx0ID0+IHJlc3VsdC5maWxlID09PSBhY3RpdmVGaWxlLnBhdGhcblx0XHRcdCkgfHwgbnVsbDtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gU2hvdyByZXN1bHRzIGlmIHdlIGhhdmUgdGhlbSAoZWl0aGVyIGZyb20gY3VycmVudCBub3RlIGF1ZGl0IG9yIGdsb2JhbCBhdWRpdClcblx0XHRjb25zdCByZXN1bHRzVG9TaG93ID0gY3VycmVudE5vdGVSZXN1bHRzIHx8IGN1cnJlbnRGaWxlUmVzdWx0cztcblx0XHRpZiAocmVzdWx0c1RvU2hvdykge1xuXHRcdFx0Ly8gQ3JlYXRlIGEgbmV3IHJlc3VsdHMgY29udGFpbmVyIGFuZCByZW5kZXIgcmVzdWx0c1xuXHRcdFx0Y29uc3QgbmV3UmVzdWx0c0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1yZXN1bHRzLWNvbnRhaW5lcicgfSk7XG5cdFx0XHRcblx0XHRcdC8vIENyZWF0ZSBhIG5ldyByZXN1bHRzIGRpc3BsYXkgaW5zdGFuY2UgZm9yIHRoaXMgY29udGFpbmVyXG5cdFx0XHRjb25zdCB0ZW1wUmVzdWx0c0Rpc3BsYXkgPSBuZXcgUmVzdWx0c0Rpc3BsYXkoXG5cdFx0XHRcdG5ld1Jlc3VsdHNDb250YWluZXIsXG5cdFx0XHRcdGFzeW5jIChmaWxlUGF0aDogc3RyaW5nKSA9PiBhd2FpdCB0aGlzLmFjdGlvbnMub3BlbkZpbGUoZmlsZVBhdGgpLFxuXHRcdFx0XHRhc3luYyAoZmlsZVBhdGg6IHN0cmluZykgPT4gYXdhaXQgdGhpcy5hY3Rpb25zLm9wZW5GaWxlQW5kQXVkaXQoZmlsZVBhdGgpXG5cdFx0XHQpO1xuXHRcdFx0dGVtcFJlc3VsdHNEaXNwbGF5LnJlbmRlclJlc3VsdHMocmVzdWx0c1RvU2hvdyk7XG5cdFx0XHRcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc3Qgbm9SZXN1bHRzID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLW5vLXJlc3VsdHMnIH0pO1xuXHRcdFx0Y29uc3QgZmlsZVR5cGVUZXh0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlTURYU3VwcG9ydCA/ICdtYXJrZG93biBvciBNRFggZmlsZScgOiAnbWFya2Rvd24gZmlsZSc7XG5cdFx0XHRub1Jlc3VsdHMuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGBPcGVuIGEgJHtmaWxlVHlwZVRleHR9IGFuZCBjbGljayBcIlJlZnJlc2hcIiB0byBhdWRpdCBpdC5gIH0pO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBSZW5kZXJzIGdsb2JhbCByZXN1bHRzIHdpdGggc29ydGluZyBhbmQgZmlsdGVyaW5nXG5cdCAqL1xuXHRwcml2YXRlIHJlbmRlckdsb2JhbFJlc3VsdHMoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBnbG9iYWxSZXN1bHRzOiBTRU9SZXN1bHRzW10pIHtcblx0XHQvLyBDcmVhdGUgYSB0ZW1wb3JhcnkgcmVzdWx0cyBkaXNwbGF5IGluc3RhbmNlIGZvciBnbG9iYWwgcmVzdWx0c1xuXHRcdGNvbnN0IHRlbXBSZXN1bHRzRGlzcGxheSA9IG5ldyBSZXN1bHRzRGlzcGxheShcblx0XHRcdGNvbnRhaW5lckVsLFxuXHRcdFx0YXN5bmMgKGZpbGVQYXRoOiBzdHJpbmcpID0+IGF3YWl0IHRoaXMuYWN0aW9ucy5vcGVuRmlsZShmaWxlUGF0aCksXG5cdFx0XHRhc3luYyAoZmlsZVBhdGg6IHN0cmluZykgPT4gYXdhaXQgdGhpcy5hY3Rpb25zLm9wZW5GaWxlQW5kQXVkaXQoZmlsZVBhdGgpXG5cdFx0KTtcblx0XHRcblx0XHQvLyBSZW5kZXIgc3VtbWFyeSBzdGF0c1xuXHRcdHRlbXBSZXN1bHRzRGlzcGxheS5yZW5kZXJHbG9iYWxSZXN1bHRzKGdsb2JhbFJlc3VsdHMsIHRoaXMucGx1Z2luLnNldHRpbmdzKTtcblxuXHRcdC8vIEFkZCByZWZyZXNoIGJ1dHRvbiBiZWxvdyBzdGF0c1xuXHRcdGNvbnN0IHJlZnJlc2hCdG4gPSBjb250YWluZXJFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcblx0XHRcdHRleHQ6ICdSZWZyZXNoJyxcblx0XHRcdGNsczogJ21vZC1jdGEgc2VvLWJ0biBzZW8tcmVmcmVzaC1idG4nLFxuXHRcdFx0YXR0cjogeyAnZGF0YS1yZWZyZXNoLWJ0bic6ICd0cnVlJyB9XG5cdFx0fSk7XG5cdFx0cmVmcmVzaEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBpcyBhIGNhbmNlbCBvcGVyYXRpb25cblx0XHRcdFx0aWYgKHJlZnJlc2hCdG4udGV4dENvbnRlbnQgPT09ICdDYW5jZWwnKSB7XG5cdFx0XHRcdFx0Ly8gQ2FuY2VsIHRoZSBvbmdvaW5nIGF1ZGl0XG5cdFx0XHRcdFx0aWYgKFNFT1NpZGVQYW5lbC5nbG9iYWxBdWRpdENvbnRyb2xsZXIpIHtcblx0XHRcdFx0XHRcdFNFT1NpZGVQYW5lbC5nbG9iYWxBdWRpdENvbnRyb2xsZXIuYWJvcnQoKTtcblx0XHRcdFx0XHRcdFNFT1NpZGVQYW5lbC5nbG9iYWxBdWRpdENvbnRyb2xsZXIgPSBudWxsO1xuXHRcdFx0XHRcdFx0Y29uc29sZS5kZWJ1ZygnVmF1bHQgYXVkaXQgY2FuY2VsbGVkIGJ5IHVzZXInKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmVmcmVzaEJ0bi50ZXh0Q29udGVudCA9ICdSZWZyZXNoJztcblx0XHRcdFx0XHRyZWZyZXNoQnRuLmRpc2FibGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBTdGFydCBuZXcgYXVkaXRcblx0XHRcdFx0cmVmcmVzaEJ0bi50ZXh0Q29udGVudCA9ICdDYW5jZWwnO1xuXHRcdFx0XHRyZWZyZXNoQnRuLmRpc2FibGVkID0gZmFsc2U7IC8vIEtlZXAgZW5hYmxlZCBzbyB1c2VyIGNhbiBjYW5jZWxcblx0XHRcdFx0XG5cdFx0XHRcdC8vIENyZWF0ZSBhYm9ydCBjb250cm9sbGVyIGZvciB2YXVsdCBhdWRpdFxuXHRcdFx0XHRTRU9TaWRlUGFuZWwuZ2xvYmFsQXVkaXRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXHRcdFx0XHRcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5hY3Rpb25zLnJlZnJlc2hHbG9iYWxSZXN1bHRzKFNFT1NpZGVQYW5lbC5nbG9iYWxBdWRpdENvbnRyb2xsZXI/LnNpZ25hbCk7XG5cdFx0XHRcdFx0aWYgKHJlc3VsdHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0Ly8gT25seSBkaXNwYXRjaCBjb21wbGV0aW9uIGV2ZW50IGlmIGF1ZGl0IHdhc24ndCBjYW5jZWxsZWRcblx0XHRcdFx0XHRcdGlmIChTRU9TaWRlUGFuZWwuZ2xvYmFsQXVkaXRDb250cm9sbGVyICYmICFTRU9TaWRlUGFuZWwuZ2xvYmFsQXVkaXRDb250cm9sbGVyLnNpZ25hbC5hYm9ydGVkKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdzZW8tcmVmcmVzaC1jb21wbGV0ZScsIHsgXG5cdFx0XHRcdFx0XHRcdFx0ZGV0YWlsOiB7IHJlc3VsdHMgfSBcblx0XHRcdFx0XHRcdFx0fSkpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHQvLyBIYW5kbGUgY2FuY2VsbGF0aW9uIG9yIG90aGVyIGVycm9yc1xuXHRcdFx0XHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5kZWJ1ZygnVmF1bHQgYXVkaXQgY2FuY2VsbGVkIGluIHBhbmVsIHJlbmRlcmVyJyk7XG5cdFx0XHRcdFx0XHQvLyBEb24ndCBkaXNwYXRjaCBjb21wbGV0aW9uIGV2ZW50IGZvciBjYW5jZWxsZWQgYXVkaXRzXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHZhdWx0IGF1ZGl0OicsIGVycm9yKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdFx0cmVmcmVzaEJ0bi50ZXh0Q29udGVudCA9ICdSZWZyZXNoJztcblx0XHRcdFx0XHRyZWZyZXNoQnRuLmRpc2FibGVkID0gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0pKCk7XG5cdFx0fSk7XG5cblx0XHQvLyBSZW5kZXIgaXNzdWVzIGxpc3Qgd2l0aCBzb3J0aW5nXG5cdFx0dGVtcFJlc3VsdHNEaXNwbGF5LnJlbmRlcklzc3Vlc0xpc3QoXG5cdFx0XHRnbG9iYWxSZXN1bHRzLFxuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFNvcnQsXG5cdFx0XHQoc29ydFR5cGU6IHN0cmluZykgPT4ge1xuXHRcdFx0XHQvLyBUaGlzIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgY2FsbGluZyBjb2RlXG5cdFx0XHRcdGNvbnRhaW5lckVsLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdzZW8tc29ydC1jaGFuZ2UnLCB7IFxuXHRcdFx0XHRcdGRldGFpbDogeyBzb3J0VHlwZSB9IFxuXHRcdFx0XHR9KSk7XG5cdFx0XHR9LFxuXHRcdFx0KGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0XHRcdC8vIENoZWNrIGlmIG5vdGljZXMgc2hvdWxkIGJlIHNob3duXG5cdFx0XHRcdGNvbnN0IHNob3dOb3RpY2VzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tQb3RlbnRpYWxseUJyb2tlbkxpbmtzICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrUG90ZW50aWFsbHlCcm9rZW5FbWJlZHM7XG5cdFx0XHRcdGNvbnN0IGlzc3Vlc0ZpbGVzID0gZ2xvYmFsUmVzdWx0cy5maWx0ZXIociA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgaGFzSXNzdWVzID0gci5pc3N1ZXNDb3VudCA+IDA7XG5cdFx0XHRcdFx0Y29uc3QgaGFzV2FybmluZ3MgPSByLndhcm5pbmdzQ291bnQgPiAwO1xuXHRcdFx0XHRcdGNvbnN0IGhhc05vdGljZXMgPSBzaG93Tm90aWNlcyAmJiByLm5vdGljZXNDb3VudCA+IDA7XG5cdFx0XHRcdFx0cmV0dXJuIGhhc0lzc3VlcyB8fCBoYXNXYXJuaW5ncyB8fCBoYXNOb3RpY2VzO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0dGhpcy5hY3Rpb25zLnNob3dTb3J0TWVudShldmVudCwgaXNzdWVzRmlsZXMsIGNvbnRhaW5lckVsLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0U29ydCwgKHNvcnRUeXBlOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0XHRjb250YWluZXJFbC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnc2VvLXNvcnQtY2hhbmdlJywgeyBcblx0XHRcdFx0XHRcdGRldGFpbDogeyBzb3J0VHlwZSB9IFxuXHRcdFx0XHRcdH0pKTtcblx0XHRcdFx0fSwgdGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuXHRcdFx0fSxcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzXG5cdFx0KTtcblx0fVxufVxuIiwgImltcG9ydCB7IEFwcCwgVEZpbGUsIFRGb2xkZXIgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IFNFT1BsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xyXG5pbXBvcnQgeyBTRU9TaWRlUGFuZWwgfSBmcm9tIFwiLi9zaWRlLXBhbmVsXCI7XHJcbmltcG9ydCB7IFNFT0N1cnJlbnRQYW5lbFZpZXdUeXBlLCBTRU9HbG9iYWxQYW5lbFZpZXdUeXBlIH0gZnJvbSBcIi4vcGFuZWwtY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IGlzU3VwcG9ydGVkRmlsZSB9IGZyb20gXCIuLi91dGlscy9maWxlLXV0aWxzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUGFuZWxNYW5hZ2VyIHtcclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdHByaXZhdGUgYXBwOiBBcHAsXHJcblx0XHRwcml2YXRlIHBsdWdpbjogU0VPUGx1Z2luXHJcblx0KSB7fVxyXG5cclxuXHRvcGVuQ3VycmVudFBhbmVsKCkge1xyXG5cdFx0dm9pZCB0aGlzLm9wZW5QYW5lbChTRU9DdXJyZW50UGFuZWxWaWV3VHlwZSwgJ2N1cnJlbnQnKTtcclxuXHR9XHJcblxyXG5cdG9wZW5HbG9iYWxQYW5lbCgpIHtcclxuXHRcdHZvaWQgdGhpcy5vcGVuUGFuZWwoU0VPR2xvYmFsUGFuZWxWaWV3VHlwZSwgJ2dsb2JhbCcpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhc3luYyBvcGVuUGFuZWwodmlld1R5cGU6IHN0cmluZywgcGFuZWxUeXBlOiAnY3VycmVudCcgfCAnZ2xvYmFsJykge1xyXG5cdFx0Ly8gVHJ5IHRvIGZpbmQgZXhpc3RpbmcgcGFuZWwgZmlyc3RcclxuXHRcdGNvbnN0IGV4aXN0aW5nTGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUodmlld1R5cGUpWzBdO1xyXG5cdFx0XHJcblx0XHRpZiAoZXhpc3RpbmdMZWFmKSB7XHJcblx0XHRcdC8vIElmIHBhbmVsIGV4aXN0cywganVzdCByZXZlYWwgaXQgYW5kIG1ha2UgaXQgYWN0aXZlXHJcblx0XHRcdGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGV4aXN0aW5nTGVhZik7XHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGV4aXN0aW5nTGVhZik7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBTdG9yZSByZWZlcmVuY2UgZm9yIHNldHRpbmdzIHVwZGF0ZXNcclxuXHRcdFx0aWYgKGV4aXN0aW5nTGVhZi52aWV3IGluc3RhbmNlb2YgU0VPU2lkZVBhbmVsKSB7XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2lkZVBhbmVsID0gZXhpc3RpbmdMZWFmLnZpZXc7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIEVuc3VyZSBpY29uIGxvYWRzIHByb3Blcmx5IC0gdXNlIHNldFRpbWVvdXQgZm9yIHBhbmVsIHRpbWluZ1xyXG5cdFx0XHRpZiAoZXhpc3RpbmdMZWFmLnZpZXcgaW5zdGFuY2VvZiBTRU9TaWRlUGFuZWwpIHtcclxuXHRcdFx0XHRjb25zdCBwYW5lbCA9IGV4aXN0aW5nTGVhZi52aWV3O1xyXG5cdFx0XHRcdGlmICh0eXBlb2YgcGFuZWwuZm9yY2VJY29uUmVmcmVzaCA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiBwYW5lbC5mb3JjZUljb25SZWZyZXNoKCksIDEwMCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBDcmVhdGUgbmV3IHBhbmVsIGluIHRoZSByaWdodCBzaWRlIC0gdXNlIHRoZSBzaW1wbGUsIGRpcmVjdCBhcHByb2FjaFxyXG5cdFx0XHRjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAobGVhZikge1xyXG5cdFx0XHRcdC8vIENyZWF0ZSB0aGUgcGFuZWwgbWFudWFsbHkgLSB0aGlzIGlzIHRoZSBtb3N0IHJlbGlhYmxlIGFwcHJvYWNoXHJcblx0XHRcdFx0Y29uc3QgcGFuZWwgPSBuZXcgU0VPU2lkZVBhbmVsKHRoaXMucGx1Z2luLCBwYW5lbFR5cGUsIGxlYWYpO1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNpZGVQYW5lbCA9IHBhbmVsOyAvLyBTdG9yZSByZWZlcmVuY2UgZm9yIHNldHRpbmdzIHVwZGF0ZXNcclxuXHRcdFx0XHRhd2FpdCBsZWFmLm9wZW4ocGFuZWwpO1xyXG5cdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGxlYWYpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIEVuc3VyZSBpY29uIGxvYWRzIHByb3Blcmx5IGFmdGVyIG9wZW5pbmdcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBTRU9TaWRlUGFuZWwpIHtcclxuXHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBsZWFmLnZpZXcuZm9yY2VJY29uUmVmcmVzaCA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdFx0XHRcdGxlYWYudmlldy5mb3JjZUljb25SZWZyZXNoKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LCAxMDApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRnZXRGaWxlc1RvQ2hlY2soKTogUHJvbWlzZTxURmlsZVtdPiB7XHJcblx0XHRjb25zdCB7IHZhdWx0IH0gPSB0aGlzLmFwcDtcclxuXHRcdGNvbnN0IHsgc2NhbkRpcmVjdG9yaWVzLCBpZ25vcmVVbmRlcnNjb3JlRmlsZXMsIGVuYWJsZU1EWFN1cHBvcnQgfSA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xyXG5cdFx0XHJcblx0XHRsZXQgZmlsZXM6IFRGaWxlW107XHJcblx0XHRcclxuXHRcdGlmICghc2NhbkRpcmVjdG9yaWVzLnRyaW0oKSkge1xyXG5cdFx0XHQvLyBTY2FuIGFsbCBtYXJrZG93biBmaWxlc1xyXG5cdFx0XHRmaWxlcyA9IHZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIEFkZCBNRFggZmlsZXMgaWYgZW5hYmxlZFxyXG5cdFx0XHRpZiAoZW5hYmxlTURYU3VwcG9ydCkge1xyXG5cdFx0XHRcdGNvbnN0IG1keEZpbGVzID0gdmF1bHQuZ2V0RmlsZXMoKS5maWx0ZXIoKGZpbGUpOiBmaWxlIGlzIFRGaWxlID0+IFxyXG5cdFx0XHRcdFx0ZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkgPT09ICdtZHgnXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0XHRmaWxlcyA9IFsuLi5maWxlcywgLi4ubWR4RmlsZXNdO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb25zdCBkaXJlY3RvcmllcyA9IHNjYW5EaXJlY3Rvcmllcy5zcGxpdCgnLCcpLm1hcChkaXIgPT4gZGlyLnRyaW0oKSk7XHJcblx0XHRcdGZpbGVzID0gW107XHJcblx0XHRcdFxyXG5cdFx0XHRmb3IgKGNvbnN0IGRpciBvZiBkaXJlY3Rvcmllcykge1xyXG5cdFx0XHRcdGNvbnN0IGZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChkaXIpO1xyXG5cdFx0XHRcdGlmIChmb2xkZXIgJiYgZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG5cdFx0XHRcdFx0Ly8gR2V0IG1hcmtkb3duIGZpbGVzXHJcblx0XHRcdFx0XHRjb25zdCBtZEZpbGVzID0gdmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcihmaWxlID0+IFxyXG5cdFx0XHRcdFx0XHRmaWxlLnBhdGguc3RhcnRzV2l0aChkaXIgKyAnLycpIHx8IGZpbGUucGF0aCA9PT0gZGlyXHJcblx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0ZmlsZXMucHVzaCguLi5tZEZpbGVzKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gQWRkIE1EWCBmaWxlcyBpZiBlbmFibGVkXHJcblx0XHRcdFx0XHRpZiAoZW5hYmxlTURYU3VwcG9ydCkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBtZHhGaWxlcyA9IHZhdWx0LmdldEZpbGVzKCkuZmlsdGVyKChmaWxlKTogZmlsZSBpcyBURmlsZSA9PiBcclxuXHRcdFx0XHRcdFx0XHRmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgXHJcblx0XHRcdFx0XHRcdFx0ZmlsZS5leHRlbnNpb24udG9Mb3dlckNhc2UoKSA9PT0gJ21keCcgJiZcclxuXHRcdFx0XHRcdFx0XHQoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZGlyICsgJy8nKSB8fCBmaWxlLnBhdGggPT09IGRpcilcclxuXHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0ZmlsZXMucHVzaCguLi5tZHhGaWxlcyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIEZpbHRlciB0byBvbmx5IHN1cHBvcnRlZCBmaWxlIHR5cGVzXHJcblx0XHRmaWxlcyA9IGZpbGVzLmZpbHRlcihmaWxlID0+IGlzU3VwcG9ydGVkRmlsZShmaWxlLCB0aGlzLnBsdWdpbi5zZXR0aW5ncykpO1xyXG5cdFx0XHJcblx0XHQvLyBGaWx0ZXIgb3V0IGZpbGVzIHdpdGggdW5kZXJzY29yZSBwcmVmaXggaWYgc2V0dGluZyBpcyBlbmFibGVkXHJcblx0XHRpZiAoaWdub3JlVW5kZXJzY29yZUZpbGVzKSB7XHJcblx0XHRcdGZpbGVzID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGZpbGVOYW1lID0gZmlsZS5iYXNlbmFtZTtcclxuXHRcdFx0XHRyZXR1cm4gIWZpbGVOYW1lLnN0YXJ0c1dpdGgoJ18nKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoZmlsZXMpO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIEVycm9yIGhhbmRsaW5nIHV0aWxpdGllcyBmb3IgdGhlIFNFTyBwbHVnaW5cclxuICogUHJvdmlkZXMgY29uc2lzdGVudCBlcnJvciBoYW5kbGluZyBhbmQgdXNlciBmZWVkYmFja1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5cclxuLyoqXHJcbiAqIEVycm9yIHNldmVyaXR5IGxldmVsc1xyXG4gKi9cclxuZXhwb3J0IGVudW0gRXJyb3JTZXZlcml0eSB7XHJcblx0SU5GTyA9ICdpbmZvJyxcclxuXHRXQVJOSU5HID0gJ3dhcm5pbmcnLFxyXG5cdEVSUk9SID0gJ2Vycm9yJyxcclxuXHRDUklUSUNBTCA9ICdjcml0aWNhbCdcclxufVxyXG5cclxuLyoqXHJcbiAqIEN1c3RvbSBlcnJvciBjbGFzcyBmb3IgU0VPIHBsdWdpbiBlcnJvcnNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBTRU9QbHVnaW5FcnJvciBleHRlbmRzIEVycm9yIHtcclxuXHRwdWJsaWMgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHk7XHJcblx0cHVibGljIHVzZXJNZXNzYWdlOiBzdHJpbmc7XHJcblx0cHVibGljIHN1Z2dlc3Rpb24/OiBzdHJpbmc7XHJcblxyXG5cdGNvbnN0cnVjdG9yKFxyXG5cdFx0bWVzc2FnZTogc3RyaW5nLFxyXG5cdFx0c2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHkgPSBFcnJvclNldmVyaXR5LkVSUk9SLFxyXG5cdFx0dXNlck1lc3NhZ2U/OiBzdHJpbmcsXHJcblx0XHRzdWdnZXN0aW9uPzogc3RyaW5nXHJcblx0KSB7XHJcblx0XHRzdXBlcihtZXNzYWdlKTtcclxuXHRcdHRoaXMubmFtZSA9ICdTRU9QbHVnaW5FcnJvcic7XHJcblx0XHR0aGlzLnNldmVyaXR5ID0gc2V2ZXJpdHk7XHJcblx0XHR0aGlzLnVzZXJNZXNzYWdlID0gdXNlck1lc3NhZ2UgfHwgbWVzc2FnZTtcclxuXHRcdHRoaXMuc3VnZ2VzdGlvbiA9IHN1Z2dlc3Rpb247XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogSGFuZGxlcyBlcnJvcnMgd2l0aCB1c2VyLWZyaWVuZGx5IG1lc3NhZ2VzIGFuZCBsb2dnaW5nXHJcbiAqIEBwYXJhbSBlcnJvciAtIFRoZSBlcnJvciB0byBoYW5kbGVcclxuICogQHBhcmFtIGNvbnRleHQgLSBDb250ZXh0IGFib3V0IHdoZXJlIHRoZSBlcnJvciBvY2N1cnJlZFxyXG4gKiBAcGFyYW0gc2hvd05vdGljZSAtIFdoZXRoZXIgdG8gc2hvdyBhIG5vdGljZSB0byB0aGUgdXNlclxyXG4gKiBAcmV0dXJucyBGb3JtYXR0ZWQgZXJyb3IgaW5mb3JtYXRpb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVFcnJvcihcclxuXHRlcnJvcjogdW5rbm93bixcclxuXHRjb250ZXh0OiBzdHJpbmcsXHJcblx0c2hvd05vdGljZTogYm9vbGVhbiA9IHRydWVcclxuKTogeyBtZXNzYWdlOiBzdHJpbmc7IHNldmVyaXR5OiBFcnJvclNldmVyaXR5OyBzdWdnZXN0aW9uPzogc3RyaW5nIH0ge1xyXG5cdGxldCBtZXNzYWdlOiBzdHJpbmc7XHJcblx0bGV0IHNldmVyaXR5OiBFcnJvclNldmVyaXR5ID0gRXJyb3JTZXZlcml0eS5FUlJPUjtcclxuXHRsZXQgc3VnZ2VzdGlvbjogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG5cclxuXHRpZiAoZXJyb3IgaW5zdGFuY2VvZiBTRU9QbHVnaW5FcnJvcikge1xyXG5cdFx0bWVzc2FnZSA9IGVycm9yLnVzZXJNZXNzYWdlO1xyXG5cdFx0c2V2ZXJpdHkgPSBlcnJvci5zZXZlcml0eTtcclxuXHRcdHN1Z2dlc3Rpb24gPSBlcnJvci5zdWdnZXN0aW9uO1xyXG5cdH0gZWxzZSBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xyXG5cdFx0bWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XHJcblx0XHRzZXZlcml0eSA9IEVycm9yU2V2ZXJpdHkuRVJST1I7XHJcblx0XHRzdWdnZXN0aW9uID0gJ1BsZWFzZSB0cnkgYWdhaW4gb3IgY2hlY2sgdGhlIHBsdWdpbiBzZXR0aW5ncyc7XHJcblx0fSBlbHNlIHtcclxuXHRcdG1lc3NhZ2UgPSAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCc7XHJcblx0XHRzZXZlcml0eSA9IEVycm9yU2V2ZXJpdHkuQ1JJVElDQUw7XHJcblx0XHRzdWdnZXN0aW9uID0gJ1BsZWFzZSByZXN0YXJ0IE9ic2lkaWFuIGFuZCB0cnkgYWdhaW4nO1xyXG5cdH1cclxuXHJcblx0Ly8gTG9nIGVycm9yIGZvciBkZWJ1Z2dpbmdcclxuXHRjb25zb2xlLmVycm9yKGBbU0VPIFBsdWdpbl0gRXJyb3IgaW4gJHtjb250ZXh0fTpgLCBlcnJvcik7XHJcblxyXG5cdC8vIFNob3cgbm90aWNlIHRvIHVzZXIgaWYgcmVxdWVzdGVkXHJcblx0aWYgKHNob3dOb3RpY2UpIHtcclxuXHRcdGNvbnN0IG5vdGljZU1lc3NhZ2UgPSBzdWdnZXN0aW9uIFxyXG5cdFx0XHQ/IGAke21lc3NhZ2V9IC0gJHtzdWdnZXN0aW9ufWBcclxuXHRcdFx0OiBtZXNzYWdlO1xyXG5cdFx0XHJcblx0XHRuZXcgTm90aWNlKG5vdGljZU1lc3NhZ2UsIDUwMDApO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHsgbWVzc2FnZSwgc2V2ZXJpdHksIHN1Z2dlc3Rpb24gfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFdyYXBzIGFzeW5jIGZ1bmN0aW9ucyB3aXRoIGVycm9yIGhhbmRsaW5nXHJcbiAqIEBwYXJhbSBmbiAtIFRoZSBhc3luYyBmdW5jdGlvbiB0byB3cmFwXHJcbiAqIEBwYXJhbSBjb250ZXh0IC0gQ29udGV4dCBmb3IgZXJyb3IgcmVwb3J0aW5nXHJcbiAqIEBwYXJhbSBmYWxsYmFjayAtIEZhbGxiYWNrIHZhbHVlIHRvIHJldHVybiBvbiBlcnJvclxyXG4gKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIGZ1bmN0aW9uIHJlc3VsdCBvciBmYWxsYmFja1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhFcnJvckhhbmRsaW5nPFQ+KFxyXG5cdGZuOiAoKSA9PiBQcm9taXNlPFQ+IHwgVCxcclxuXHRjb250ZXh0OiBzdHJpbmcsXHJcblx0ZmFsbGJhY2s6IFRcclxuKTogUHJvbWlzZTxUPiB7XHJcblx0dHJ5IHtcclxuXHRcdHJldHVybiBhd2FpdCBmbigpO1xyXG5cdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRoYW5kbGVFcnJvcihlcnJvciwgY29udGV4dCwgdHJ1ZSk7XHJcblx0XHRyZXR1cm4gZmFsbGJhY2s7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIHNhZmUgYXN5bmMgZnVuY3Rpb24gdGhhdCBoYW5kbGVzIGVycm9ycyBncmFjZWZ1bGx5XHJcbiAqIEBwYXJhbSBmbiAtIFRoZSBhc3luYyBmdW5jdGlvbiB0byBtYWtlIHNhZmVcclxuICogQHBhcmFtIGNvbnRleHQgLSBDb250ZXh0IGZvciBlcnJvciByZXBvcnRpbmdcclxuICogQHBhcmFtIGZhbGxiYWNrIC0gRmFsbGJhY2sgdmFsdWUgdG8gcmV0dXJuIG9uIGVycm9yXHJcbiAqIEByZXR1cm5zIFNhZmUgYXN5bmMgZnVuY3Rpb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTYWZlQXN5bmNGdW5jdGlvbjxUIGV4dGVuZHMgdW5rbm93bltdLCBSPihcclxuXHRmbjogKC4uLmFyZ3M6IFQpID0+IFByb21pc2U8Uj4sXHJcblx0Y29udGV4dDogc3RyaW5nLFxyXG5cdGZhbGxiYWNrOiBSXHJcbikge1xyXG5cdHJldHVybiBhc3luYyAoLi4uYXJnczogVCk6IFByb21pc2U8Uj4gPT4ge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0cmV0dXJuIGF3YWl0IGZuKC4uLmFyZ3MpO1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0aGFuZGxlRXJyb3IoZXJyb3IsIGNvbnRleHQsIHRydWUpO1xyXG5cdFx0XHRyZXR1cm4gZmFsbGJhY2s7XHJcblx0XHR9XHJcblx0fTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGF0IHJlcXVpcmVkIHBhcmFtZXRlcnMgYXJlIG5vdCBudWxsL3VuZGVmaW5lZFxyXG4gKiBAcGFyYW0gcGFyYW1zIC0gT2JqZWN0IHdpdGggcGFyYW1ldGVyIG5hbWVzIGFuZCB2YWx1ZXNcclxuICogQHBhcmFtIGNvbnRleHQgLSBDb250ZXh0IGZvciBlcnJvciByZXBvcnRpbmdcclxuICogQHRocm93cyBTRU9QbHVnaW5FcnJvciBpZiBhbnkgcmVxdWlyZWQgcGFyYW1ldGVyIGlzIG1pc3NpbmdcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVJlcXVpcmVkUGFyYW1zKFxyXG5cdHBhcmFtczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXHJcblx0Y29udGV4dDogc3RyaW5nXHJcbik6IHZvaWQge1xyXG5cdGNvbnN0IG1pc3NpbmcgPSBPYmplY3QuZW50cmllcyhwYXJhbXMpXHJcblx0XHQuZmlsdGVyKChbXywgdmFsdWVdKSA9PiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKVxyXG5cdFx0Lm1hcCgoW25hbWVdKSA9PiBuYW1lKTtcclxuXHJcblx0aWYgKG1pc3NpbmcubGVuZ3RoID4gMCkge1xyXG5cdFx0dGhyb3cgbmV3IFNFT1BsdWdpbkVycm9yKFxyXG5cdFx0XHRgTWlzc2luZyByZXF1aXJlZCBwYXJhbWV0ZXJzOiAke21pc3Npbmcuam9pbignLCAnKX1gLFxyXG5cdFx0XHRFcnJvclNldmVyaXR5LkVSUk9SLFxyXG5cdFx0XHRgTWlzc2luZyByZXF1aXJlZCBwYXJhbWV0ZXJzOiAke21pc3Npbmcuam9pbignLCAnKX1gLFxyXG5cdFx0XHQnUGxlYXNlIGNoZWNrIHlvdXIgcGx1Z2luIGNvbmZpZ3VyYXRpb24nXHJcblx0XHQpO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBoYW5kbGVzIGVycm9yc1xyXG4gKiBAcGFyYW0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2VcclxuICogQHBhcmFtIGRlbGF5IC0gRGVsYXkgaW4gbWlsbGlzZWNvbmRzXHJcbiAqIEBwYXJhbSBjb250ZXh0IC0gQ29udGV4dCBmb3IgZXJyb3IgcmVwb3J0aW5nXHJcbiAqIEByZXR1cm5zIERlYm91bmNlZCBmdW5jdGlvbiB3aXRoIGVycm9yIGhhbmRsaW5nXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRGVib3VuY2VkRnVuY3Rpb248VCBleHRlbmRzIHVua25vd25bXSwgUj4oXHJcblx0Zm46ICguLi5hcmdzOiBUKSA9PiBQcm9taXNlPFI+LFxyXG5cdGRlbGF5OiBudW1iZXIsXHJcblx0Y29udGV4dDogc3RyaW5nXHJcbikge1xyXG5cdGxldCB0aW1lb3V0SWQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+IHwgbnVsbCA9IG51bGw7XHJcblxyXG5cdHJldHVybiBhc3luYyAoLi4uYXJnczogVCk6IFByb21pc2U8UiB8IHVuZGVmaW5lZD4gPT4ge1xyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcblx0XHRcdGlmICh0aW1lb3V0SWQpIHtcclxuXHRcdFx0XHRjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgZm4oLi4uYXJncyk7XHJcblx0XHRcdFx0XHRcdHJlc29sdmUocmVzdWx0KTtcclxuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdFx0XHRcdGhhbmRsZUVycm9yKGVycm9yLCBjb250ZXh0LCB0cnVlKTtcclxuXHRcdFx0XHRcdFx0cmVzb2x2ZSh1bmRlZmluZWQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pKCk7XHJcblx0XHRcdH0sIGRlbGF5KTtcclxuXHRcdH0pO1xyXG5cdH07XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBDYWNoZSBtYW5hZ2VtZW50IHV0aWxpdGllcyBmb3IgdGhlIFNFTyBwbHVnaW5cclxuICogUHJvdmlkZXMgaW50ZWxsaWdlbnQgY2FjaGluZyB3aXRoIHNpemUgbGltaXRzIGFuZCBleHBpcmF0aW9uXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgU0VPUmVzdWx0cyB9IGZyb20gXCIuLi90eXBlc1wiO1xyXG5cclxuLyoqXHJcbiAqIENhY2hlIGVudHJ5IGludGVyZmFjZVxyXG4gKi9cclxuaW50ZXJmYWNlIENhY2hlRW50cnk8VD4ge1xyXG5cdHZhbHVlOiBUO1xyXG5cdHRpbWVzdGFtcDogbnVtYmVyO1xyXG5cdGFjY2Vzc0NvdW50OiBudW1iZXI7XHJcblx0bGFzdEFjY2Vzc2VkOiBudW1iZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDYWNoZSBjb25maWd1cmF0aW9uXHJcbiAqL1xyXG5pbnRlcmZhY2UgQ2FjaGVDb25maWcge1xyXG5cdG1heFNpemU6IG51bWJlcjtcclxuXHRtYXhBZ2U6IG51bWJlcjsgLy8gaW4gbWlsbGlzZWNvbmRzXHJcblx0Y2xlYW51cEludGVydmFsOiBudW1iZXI7IC8vIGluIG1pbGxpc2Vjb25kc1xyXG59XHJcblxyXG4vKipcclxuICogR2VuZXJpYyBjYWNoZSBtYW5hZ2VyIHdpdGggTFJVIGV2aWN0aW9uIGFuZCBUVExcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDYWNoZU1hbmFnZXI8VD4ge1xyXG5cdHByaXZhdGUgY2FjaGUgPSBuZXcgTWFwPHN0cmluZywgQ2FjaGVFbnRyeTxUPj4oKTtcclxuXHRwcml2YXRlIGNvbmZpZzogQ2FjaGVDb25maWc7XHJcblx0cHJpdmF0ZSBjbGVhbnVwVGltZXI6IFJldHVyblR5cGU8dHlwZW9mIHNldEludGVydmFsPiB8IG51bGwgPSBudWxsO1xyXG5cclxuXHRjb25zdHJ1Y3Rvcihjb25maWc6IFBhcnRpYWw8Q2FjaGVDb25maWc+ID0ge30pIHtcclxuXHRcdHRoaXMuY29uZmlnID0ge1xyXG5cdFx0XHRtYXhTaXplOiBjb25maWcubWF4U2l6ZSB8fCAxMDAsXHJcblx0XHRcdG1heEFnZTogY29uZmlnLm1heEFnZSB8fCAzMCAqIDYwICogMTAwMCwgLy8gMzAgbWludXRlc1xyXG5cdFx0XHRjbGVhbnVwSW50ZXJ2YWw6IGNvbmZpZy5jbGVhbnVwSW50ZXJ2YWwgfHwgNSAqIDYwICogMTAwMCwgLy8gNSBtaW51dGVzXHJcblx0XHR9O1xyXG5cclxuXHRcdHRoaXMuc3RhcnRDbGVhbnVwVGltZXIoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCBhIHZhbHVlIGZyb20gY2FjaGVcclxuXHQgKiBAcGFyYW0ga2V5IC0gQ2FjaGUga2V5XHJcblx0ICogQHJldHVybnMgQ2FjaGVkIHZhbHVlIG9yIHVuZGVmaW5lZFxyXG5cdCAqL1xyXG5cdGdldChrZXk6IHN0cmluZyk6IFQgfCB1bmRlZmluZWQge1xyXG5cdFx0Y29uc3QgZW50cnkgPSB0aGlzLmNhY2hlLmdldChrZXkpO1xyXG5cdFx0aWYgKCFlbnRyeSkge1xyXG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIGVudHJ5IGhhcyBleHBpcmVkXHJcblx0XHRpZiAodGhpcy5pc0V4cGlyZWQoZW50cnkpKSB7XHJcblx0XHRcdHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7XHJcblx0XHRcdHJldHVybiB1bmRlZmluZWQ7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gVXBkYXRlIGFjY2VzcyBzdGF0aXN0aWNzXHJcblx0XHRlbnRyeS5hY2Nlc3NDb3VudCsrO1xyXG5cdFx0ZW50cnkubGFzdEFjY2Vzc2VkID0gRGF0ZS5ub3coKTtcclxuXHJcblx0XHRyZXR1cm4gZW50cnkudmFsdWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXQgYSB2YWx1ZSBpbiBjYWNoZVxyXG5cdCAqIEBwYXJhbSBrZXkgLSBDYWNoZSBrZXlcclxuXHQgKiBAcGFyYW0gdmFsdWUgLSBWYWx1ZSB0byBjYWNoZVxyXG5cdCAqL1xyXG5cdHNldChrZXk6IHN0cmluZywgdmFsdWU6IFQpOiB2b2lkIHtcclxuXHRcdC8vIFJlbW92ZSBleGlzdGluZyBlbnRyeSBpZiBpdCBleGlzdHNcclxuXHRcdGlmICh0aGlzLmNhY2hlLmhhcyhrZXkpKSB7XHJcblx0XHRcdHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgd2UgbmVlZCB0byBldmljdCBlbnRyaWVzXHJcblx0XHRpZiAodGhpcy5jYWNoZS5zaXplID49IHRoaXMuY29uZmlnLm1heFNpemUpIHtcclxuXHRcdFx0dGhpcy5ldmljdExSVSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEFkZCBuZXcgZW50cnlcclxuXHRcdHRoaXMuY2FjaGUuc2V0KGtleSwge1xyXG5cdFx0XHR2YWx1ZSxcclxuXHRcdFx0dGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG5cdFx0XHRhY2Nlc3NDb3VudDogMSxcclxuXHRcdFx0bGFzdEFjY2Vzc2VkOiBEYXRlLm5vdygpLFxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiBhIGtleSBleGlzdHMgaW4gY2FjaGVcclxuXHQgKiBAcGFyYW0ga2V5IC0gQ2FjaGUga2V5XHJcblx0ICogQHJldHVybnMgVHJ1ZSBpZiBrZXkgZXhpc3RzIGFuZCBpcyBub3QgZXhwaXJlZFxyXG5cdCAqL1xyXG5cdGhhcyhrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdFx0Y29uc3QgZW50cnkgPSB0aGlzLmNhY2hlLmdldChrZXkpO1xyXG5cdFx0aWYgKCFlbnRyeSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMuaXNFeHBpcmVkKGVudHJ5KSkge1xyXG5cdFx0XHR0aGlzLmNhY2hlLmRlbGV0ZShrZXkpO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBEZWxldGUgYSBzcGVjaWZpYyBrZXkgZnJvbSBjYWNoZVxyXG5cdCAqIEBwYXJhbSBrZXkgLSBDYWNoZSBrZXlcclxuXHQgKi9cclxuXHRkZWxldGUoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLmNhY2hlLmRlbGV0ZShrZXkpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2xlYXIgYWxsIGNhY2hlIGVudHJpZXNcclxuXHQgKi9cclxuXHRjbGVhcigpOiB2b2lkIHtcclxuXHRcdHRoaXMuY2FjaGUuY2xlYXIoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCBjYWNoZSBzdGF0aXN0aWNzXHJcblx0ICovXHJcblx0Z2V0U3RhdHMoKSB7XHJcblx0XHRjb25zdCBlbnRyaWVzID0gQXJyYXkuZnJvbSh0aGlzLmNhY2hlLnZhbHVlcygpKTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0c2l6ZTogdGhpcy5jYWNoZS5zaXplLFxyXG5cdFx0XHRtYXhTaXplOiB0aGlzLmNvbmZpZy5tYXhTaXplLFxyXG5cdFx0XHRoaXRSYXRlOiB0aGlzLmNhbGN1bGF0ZUhpdFJhdGUoKSxcclxuXHRcdFx0b2xkZXN0RW50cnk6IE1hdGgubWluKC4uLmVudHJpZXMubWFwKGUgPT4gZS50aW1lc3RhbXApKSxcclxuXHRcdFx0bmV3ZXN0RW50cnk6IE1hdGgubWF4KC4uLmVudHJpZXMubWFwKGUgPT4gZS50aW1lc3RhbXApKSxcclxuXHRcdFx0ZXhwaXJlZEVudHJpZXM6IGVudHJpZXMuZmlsdGVyKGUgPT4gdGhpcy5pc0V4cGlyZWQoZSkpLmxlbmd0aCxcclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDbGVhbiB1cCBleHBpcmVkIGVudHJpZXNcclxuXHQgKi9cclxuXHRjbGVhbnVwKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgZXhwaXJlZEtleXM6IHN0cmluZ1tdID0gW107XHJcblxyXG5cdFx0Zm9yIChjb25zdCBba2V5LCBlbnRyeV0gb2YgdGhpcy5jYWNoZS5lbnRyaWVzKCkpIHtcclxuXHRcdFx0aWYgKHRoaXMuaXNFeHBpcmVkKGVudHJ5KSkge1xyXG5cdFx0XHRcdGV4cGlyZWRLZXlzLnB1c2goa2V5KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGV4cGlyZWRLZXlzLmZvckVhY2goa2V5ID0+IHRoaXMuY2FjaGUuZGVsZXRlKGtleSkpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRGVzdHJveSB0aGUgY2FjaGUgbWFuYWdlciBhbmQgY2xlYW51cCByZXNvdXJjZXNcclxuXHQgKi9cclxuXHRkZXN0cm95KCk6IHZvaWQge1xyXG5cdFx0aWYgKHRoaXMuY2xlYW51cFRpbWVyKSB7XHJcblx0XHRcdGNsZWFySW50ZXJ2YWwodGhpcy5jbGVhbnVwVGltZXIpO1xyXG5cdFx0XHR0aGlzLmNsZWFudXBUaW1lciA9IG51bGw7XHJcblx0XHR9XHJcblx0XHR0aGlzLmNsZWFyKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiBhbiBlbnRyeSBoYXMgZXhwaXJlZFxyXG5cdCAqL1xyXG5cdHByaXZhdGUgaXNFeHBpcmVkKGVudHJ5OiBDYWNoZUVudHJ5PFQ+KTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gRGF0ZS5ub3coKSAtIGVudHJ5LnRpbWVzdGFtcCA+IHRoaXMuY29uZmlnLm1heEFnZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEV2aWN0IGxlYXN0IHJlY2VudGx5IHVzZWQgZW50cnlcclxuXHQgKi9cclxuXHRwcml2YXRlIGV2aWN0TFJVKCk6IHZvaWQge1xyXG5cdFx0bGV0IG9sZGVzdEtleSA9ICcnO1xyXG5cdFx0bGV0IG9sZGVzdFRpbWUgPSBEYXRlLm5vdygpO1xyXG5cclxuXHRcdGZvciAoY29uc3QgW2tleSwgZW50cnldIG9mIHRoaXMuY2FjaGUuZW50cmllcygpKSB7XHJcblx0XHRcdGlmIChlbnRyeS5sYXN0QWNjZXNzZWQgPCBvbGRlc3RUaW1lKSB7XHJcblx0XHRcdFx0b2xkZXN0VGltZSA9IGVudHJ5Lmxhc3RBY2Nlc3NlZDtcclxuXHRcdFx0XHRvbGRlc3RLZXkgPSBrZXk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAob2xkZXN0S2V5KSB7XHJcblx0XHRcdHRoaXMuY2FjaGUuZGVsZXRlKG9sZGVzdEtleSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDYWxjdWxhdGUgY2FjaGUgaGl0IHJhdGVcclxuXHQgKi9cclxuXHRwcml2YXRlIGNhbGN1bGF0ZUhpdFJhdGUoKTogbnVtYmVyIHtcclxuXHRcdGNvbnN0IGVudHJpZXMgPSBBcnJheS5mcm9tKHRoaXMuY2FjaGUudmFsdWVzKCkpO1xyXG5cdFx0Y29uc3QgdG90YWxBY2Nlc3NlcyA9IGVudHJpZXMucmVkdWNlKChzdW0sIGVudHJ5KSA9PiBzdW0gKyBlbnRyeS5hY2Nlc3NDb3VudCwgMCk7XHJcblx0XHRyZXR1cm4gdG90YWxBY2Nlc3NlcyA+IDAgPyBlbnRyaWVzLmxlbmd0aCAvIHRvdGFsQWNjZXNzZXMgOiAwO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU3RhcnQgdGhlIGNsZWFudXAgdGltZXJcclxuXHQgKi9cclxuXHRwcml2YXRlIHN0YXJ0Q2xlYW51cFRpbWVyKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5jbGVhbnVwVGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcblx0XHRcdHRoaXMuY2xlYW51cCgpO1xyXG5cdFx0fSwgdGhpcy5jb25maWcuY2xlYW51cEludGVydmFsKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTRU8tc3BlY2lmaWMgY2FjaGUgbWFuYWdlciBmb3Igc2NhbiByZXN1bHRzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU0VPQ2FjaGVNYW5hZ2VyIHtcclxuXHRwcml2YXRlIHJlc3VsdHNDYWNoZTogQ2FjaGVNYW5hZ2VyPFNFT1Jlc3VsdHNbXT47XHJcblx0cHJpdmF0ZSBmaWxlQ2FjaGU6IENhY2hlTWFuYWdlcjxzdHJpbmc+OyAvLyBGb3IgZmlsZSBjb250ZW50IGNhY2hpbmdcclxuXHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHR0aGlzLnJlc3VsdHNDYWNoZSA9IG5ldyBDYWNoZU1hbmFnZXI8U0VPUmVzdWx0c1tdPih7XHJcblx0XHRcdG1heFNpemU6IDUwLCAvLyBTdG9yZSB1cCB0byA1MCBzY2FuIHJlc3VsdHNcclxuXHRcdFx0bWF4QWdlOiA2MCAqIDYwICogMTAwMCwgLy8gMSBob3VyXHJcblx0XHRcdGNsZWFudXBJbnRlcnZhbDogMTAgKiA2MCAqIDEwMDAsIC8vIDEwIG1pbnV0ZXNcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuZmlsZUNhY2hlID0gbmV3IENhY2hlTWFuYWdlcjxzdHJpbmc+KHtcclxuXHRcdFx0bWF4U2l6ZTogMjAwLCAvLyBTdG9yZSB1cCB0byAyMDAgZmlsZSBjb250ZW50c1xyXG5cdFx0XHRtYXhBZ2U6IDMwICogNjAgKiAxMDAwLCAvLyAzMCBtaW51dGVzXHJcblx0XHRcdGNsZWFudXBJbnRlcnZhbDogNSAqIDYwICogMTAwMCwgLy8gNSBtaW51dGVzXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCBjYWNoZWQgc2NhbiByZXN1bHRzXHJcblx0ICogQHBhcmFtIGtleSAtIENhY2hlIGtleSAodXN1YWxseSBzY2FuIHR5cGUgKyB0aW1lc3RhbXApXHJcblx0ICogQHJldHVybnMgQ2FjaGVkIHJlc3VsdHMgb3IgdW5kZWZpbmVkXHJcblx0ICovXHJcblx0Z2V0UmVzdWx0cyhrZXk6IHN0cmluZyk6IFNFT1Jlc3VsdHNbXSB8IHVuZGVmaW5lZCB7XHJcblx0XHRyZXR1cm4gdGhpcy5yZXN1bHRzQ2FjaGUuZ2V0KGtleSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDYWNoZSBzY2FuIHJlc3VsdHNcclxuXHQgKiBAcGFyYW0ga2V5IC0gQ2FjaGUga2V5XHJcblx0ICogQHBhcmFtIHJlc3VsdHMgLSBSZXN1bHRzIHRvIGNhY2hlXHJcblx0ICovXHJcblx0c2V0UmVzdWx0cyhrZXk6IHN0cmluZywgcmVzdWx0czogU0VPUmVzdWx0c1tdKTogdm9pZCB7XHJcblx0XHR0aGlzLnJlc3VsdHNDYWNoZS5zZXQoa2V5LCByZXN1bHRzKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCBjYWNoZWQgZmlsZSBjb250ZW50XHJcblx0ICogQHBhcmFtIGZpbGVQYXRoIC0gRmlsZSBwYXRoXHJcblx0ICogQHJldHVybnMgQ2FjaGVkIGNvbnRlbnQgb3IgdW5kZWZpbmVkXHJcblx0ICovXHJcblx0Z2V0RmlsZUNvbnRlbnQoZmlsZVBhdGg6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcblx0XHRyZXR1cm4gdGhpcy5maWxlQ2FjaGUuZ2V0KGZpbGVQYXRoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENhY2hlIGZpbGUgY29udGVudFxyXG5cdCAqIEBwYXJhbSBmaWxlUGF0aCAtIEZpbGUgcGF0aFxyXG5cdCAqIEBwYXJhbSBjb250ZW50IC0gQ29udGVudCB0byBjYWNoZVxyXG5cdCAqL1xyXG5cdHNldEZpbGVDb250ZW50KGZpbGVQYXRoOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0dGhpcy5maWxlQ2FjaGUuc2V0KGZpbGVQYXRoLCBjb250ZW50KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENsZWFyIGFsbCBjYWNoZXNcclxuXHQgKi9cclxuXHRjbGVhckFsbCgpOiB2b2lkIHtcclxuXHRcdHRoaXMucmVzdWx0c0NhY2hlLmNsZWFyKCk7XHJcblx0XHR0aGlzLmZpbGVDYWNoZS5jbGVhcigpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IGNhY2hlIHN0YXRpc3RpY3NcclxuXHQgKi9cclxuXHRnZXRTdGF0cygpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHJlc3VsdHM6IHRoaXMucmVzdWx0c0NhY2hlLmdldFN0YXRzKCksXHJcblx0XHRcdGZpbGVzOiB0aGlzLmZpbGVDYWNoZS5nZXRTdGF0cygpLFxyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENsZWFuIHVwIGV4cGlyZWQgZW50cmllc1xyXG5cdCAqL1xyXG5cdGNsZWFudXAoKTogdm9pZCB7XHJcblx0XHR0aGlzLnJlc3VsdHNDYWNoZS5jbGVhbnVwKCk7XHJcblx0XHR0aGlzLmZpbGVDYWNoZS5jbGVhbnVwKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBEZXN0cm95IGNhY2hlIG1hbmFnZXJzXHJcblx0ICovXHJcblx0ZGVzdHJveSgpOiB2b2lkIHtcclxuXHRcdHRoaXMucmVzdWx0c0NhY2hlLmRlc3Ryb3koKTtcclxuXHRcdHRoaXMuZmlsZUNhY2hlLmRlc3Ryb3koKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHbG9iYWwgY2FjaGUgbWFuYWdlciBpbnN0YW5jZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHNlb0NhY2hlID0gbmV3IFNFT0NhY2hlTWFuYWdlcigpO1xyXG5cclxuLyoqXHJcbiAqIENsZWFyIGFsbCBTRU8gY2FjaGVzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJBbGxDYWNoZSgpOiB2b2lkIHtcclxuXHRzZW9DYWNoZS5jbGVhckFsbCgpO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGNhY2hlIHN0YXRpc3RpY3NcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDYWNoZVN0YXRzKCkge1xyXG5cdHJldHVybiBzZW9DYWNoZS5nZXRTdGF0cygpO1xyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRU8sU0FBUyxlQUFlLFVBQTBCO0FBRXhELFFBQU0sWUFBWSxTQUFTLFdBQVcsR0FBRyxJQUFJLFNBQVMsTUFBTSxDQUFDLElBQUk7QUFDakUsUUFBTSxRQUFRLFVBQVUsTUFBTSxHQUFHO0FBQ2pDLE1BQUksTUFBTSxVQUFVLEdBQUc7QUFDdEIsV0FBTztBQUFBLEVBQ1I7QUFDQSxTQUFPLE1BQU0sTUFBTSxFQUFFLEVBQUUsS0FBSyxHQUFH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T0FBTztBQUN0RCx5QkFBYSxRQUFRLFVBQVE7QUFDNUIsb0JBQU0sUUFBUSxLQUFLLGlCQUFpQixZQUFZO0FBQ2hELG9CQUFNLFFBQVEsVUFBUTtBQW5WN0I7QUFvVlEsc0JBQU0sUUFBTyxVQUFLLGdCQUFMLG1CQUFrQjtBQUMvQixvQkFBSSxTQUFTLHdCQUF3QjtBQUNwQyx1QkFBSyxPQUFPO0FBQUEsZ0JBQ2I7QUFBQSxjQUNELENBQUM7QUFBQSxZQUNGLENBQUM7QUFBQSxVQUNGLEdBQUcsR0FBRztBQUFBLFFBQ1A7QUFBQSxNQUNEO0FBQUEsSUFDRCxTQUFTLE9BQU87QUFDZixrQkFBWSxPQUFPLHdCQUF3QixJQUFJO0FBQUEsSUFDaEQ7QUFBQSxFQUNEO0FBQ0Q7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJmcm9udG1hdHRlciIsICJsaW5lcyIsICJfYSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAicnVuU0VPQ2hlY2siLCAiY2xlYXJDYWNoZUZvckZpbGUiLCAiY2xlYXJBbGxDYWNoZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZSIsICJoYXNOb3RpY2VzIiwgImhhc0Vycm9ycyIsICJ0b2dnbGVCdG4iLCAiaWNvbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImNsZWFyQWxsQ2FjaGUiLCAiY2xlYXJBbGxDYWNoZSIsICJydW5TRU9DaGVjayJdCn0K
