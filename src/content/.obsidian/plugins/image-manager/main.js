/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/modals/ConfirmModal.ts
var ConfirmModal_exports = {};
__export(ConfirmModal_exports, {
  ConfirmModal: () => ConfirmModal,
  openConfirmModal: () => openConfirmModal
});
function openConfirmModal(app, title, message, confirmText = "Confirm", cancelText = "Cancel") {
  const modal = new ConfirmModal(app, title, message, confirmText, cancelText);
  return modal.openAndAwaitResult();
}
var import_obsidian15, ConfirmModal;
var init_ConfirmModal = __esm({
  "src/modals/ConfirmModal.ts"() {
    import_obsidian15 = require("obsidian");
    ConfirmModal = class extends import_obsidian15.Modal {
      constructor(app, title, message, confirmText = "Confirm", cancelText = "Cancel") {
        super(app);
        this.title = title;
        this.message = message;
        this.confirmText = confirmText;
        this.cancelText = cancelText;
      }
      onOpen() {
        const { contentEl, titleEl } = this;
        titleEl.setText(this.title);
        const messageEl = contentEl.createDiv({ cls: "image-manager-confirm-message" });
        messageEl.createEl("p", { text: this.message });
        const buttonContainer = contentEl.createDiv({ cls: "image-manager-confirm-buttons" });
        buttonContainer.createEl("button", {
          text: this.confirmText,
          cls: "mod-cta"
        }).addEventListener("click", () => {
          this.resolve({ confirmed: true });
          this.close();
        });
        buttonContainer.createEl("button", {
          text: this.cancelText
        }).addEventListener("click", () => {
          this.resolve({ confirmed: false });
          this.close();
        });
        setTimeout(() => {
          const confirmButton = buttonContainer.querySelector(".mod-cta");
          confirmButton == null ? void 0 : confirmButton.focus();
        }, 50);
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
      openAndAwaitResult() {
        return new Promise((resolve) => {
          this.resolve = resolve;
          this.open();
        });
      }
    };
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ImageManagerPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian16 = require("obsidian");

// src/settings.ts
var import_obsidian2 = require("obsidian");

// src/utils/settings-compat.ts
var import_obsidian = require("obsidian");
var ObsidianModule = __toESM(require("obsidian"), 1);
function createSettingsGroup(containerEl, heading, manifestId) {
  if ((0, import_obsidian.requireApiVersion)("1.11.0")) {
    const SettingGroupClass = ObsidianModule.SettingGroup;
    if (SettingGroupClass) {
      const group = heading ? new SettingGroupClass(containerEl).setHeading(heading) : new SettingGroupClass(containerEl);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  if (manifestId) {
    containerEl.addClass(`${manifestId}-settings-compat`);
  }
  {
    if (heading) {
      const headingEl = containerEl.createDiv("setting-group-heading");
      headingEl.createEl("h3", { text: heading });
    }
    return {
      addSetting(cb) {
        const setting = new import_obsidian.Setting(containerEl);
        cb(setting);
      }
    };
  }
}

// src/types.ts
var DEFAULT_BANNER_DEVICE_SETTINGS = {
  ["desktop" /* Desktop */]: {
    enabled: true,
    height: 240,
    viewOffset: 0,
    noteOffset: -32,
    borderRadius: [0, 0, 0, 0],
    padding: 8,
    fade: true,
    animation: false,
    iconEnabled: false,
    iconSize: 96,
    iconRadius: 8,
    iconBackground: true,
    iconBorder: 2,
    iconFrame: true,
    iconAlignmentH: "flex-start",
    iconAlignmentV: "flex-end",
    iconOffsetX: 0,
    iconOffsetY: -24
  },
  ["tablet" /* Tablet */]: {
    enabled: true,
    height: 190,
    viewOffset: 0,
    noteOffset: -32,
    borderRadius: [0, 0, 0, 0],
    padding: 8,
    fade: true,
    animation: false,
    iconEnabled: false,
    iconSize: 96,
    iconRadius: 8,
    iconBackground: true,
    iconBorder: 2,
    iconFrame: true,
    iconAlignmentH: "flex-start",
    iconAlignmentV: "flex-end",
    iconOffsetX: 0,
    iconOffsetY: -24
  },
  ["phone" /* Phone */]: {
    enabled: true,
    height: 160,
    viewOffset: 0,
    noteOffset: -32,
    borderRadius: [0, 0, 0, 0],
    padding: 8,
    fade: true,
    animation: false,
    iconEnabled: false,
    iconSize: 56,
    iconRadius: 8,
    iconBackground: true,
    iconBorder: 2,
    iconFrame: true,
    iconAlignmentH: "flex-start",
    iconAlignmentV: "flex-end",
    iconOffsetX: 0,
    iconOffsetY: -24
  }
};
var DEFAULT_BANNER_SETTINGS = {
  properties: {
    imageProperty: "banner",
    iconProperty: "icon",
    hidePropertyEnabled: false,
    hideProperty: ""
  },
  desktop: { ...DEFAULT_BANNER_DEVICE_SETTINGS["desktop" /* Desktop */] },
  tablet: { ...DEFAULT_BANNER_DEVICE_SETTINGS["tablet" /* Tablet */] },
  phone: { ...DEFAULT_BANNER_DEVICE_SETTINGS["phone" /* Phone */] }
};
var DEFAULT_SETTINGS = {
  // General Settings
  enableRenameOnPaste: true,
  enableRenameOnDrop: true,
  imageNameTemplate: "{{fileName}}",
  attachmentLocation: "obsidian" /* ObsidianDefault */,
  customAttachmentPath: "./assets",
  // Image Services
  defaultProvider: "unsplash" /* Unsplash */,
  unsplashProxyServer: "",
  pexelsApiKey: "",
  pixabayApiKey: "",
  defaultOrientation: "any" /* Any */,
  defaultImageSize: "large" /* Large */,
  // Property Insertion
  enablePropertyPaste: true,
  propertyLinkFormat: "obsidian" /* ObsidianDefault */,
  customPropertyLinkFormat: "{image-url}",
  defaultPropertyName: "banner",
  // Conversion
  autoConvertRemoteImages: false,
  convertOnNoteOpen: false,
  convertOnNoteSave: false,
  // Rename Options
  autoRename: false,
  dupNumberDelimiter: "-",
  dupNumberAtStart: false,
  disableRenameNotice: false,
  enableDescriptiveImages: false,
  // Image Insertion Options (from Image Inserter)
  insertSize: "",
  // Empty = no size specified
  insertReferral: true,
  // Default to true (attribution)
  insertBackLink: false,
  // Default to false
  appendReferral: false,
  // Default to false
  // Banner Settings
  banner: { ...DEFAULT_BANNER_SETTINGS },
  // Advanced
  supportedExtensions: ["md", "mdx"],
  debugMode: false
};

// src/settings.ts
var ImageManagerSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    this.renderGeneralSettings(containerEl);
    this.renderImageServicesSettings(containerEl);
    this.renderPropertySettings(containerEl);
    this.renderConversionSettings(containerEl);
    this.renderRenameSettings(containerEl);
    this.renderBannerSettings(containerEl);
    this.renderAdvancedSettings(containerEl);
  }
  renderGeneralSettings(containerEl) {
    const group = createSettingsGroup(containerEl, void 0, "image-manager");
    group.addSetting((setting) => {
      setting.setName("Enable rename on paste").setDesc("Show rename dialog when pasting images").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.enableRenameOnPaste).onChange(async (value) => {
          this.plugin.settings.enableRenameOnPaste = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Enable rename on drag and drop").setDesc("Show rename dialog when dropping images").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.enableRenameOnDrop).onChange(async (value) => {
          this.plugin.settings.enableRenameOnDrop = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Image name template").setDesc("Template for generated image names. Variables: {{fileName}}, {{dirName}}, {{DATE:YYYY-MM-DD}}, {{TIME:HH-mm-ss}}").addText((text) => {
        text.setPlaceholder("{{fileName}}").setValue(this.plugin.settings.imageNameTemplate).onChange(async (value) => {
          this.plugin.settings.imageNameTemplate = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Attachment location").setDesc("Where to save inserted images").addDropdown((dropdown) => {
        dropdown.addOption("obsidian" /* ObsidianDefault */, "Use Obsidian's settings").addOption("same" /* SameFolder */, "Same folder as note").addOption("subfolder" /* Subfolder */, "Subfolder (configure below)").addOption("vault" /* VaultFolder */, "Vault folder (configure below)").setValue(this.plugin.settings.attachmentLocation).onChange(async (value) => {
          this.plugin.settings.attachmentLocation = value;
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.attachmentLocation !== "obsidian" /* ObsidianDefault */ && this.plugin.settings.attachmentLocation !== "same" /* SameFolder */) {
      group.addSetting((setting) => {
        setting.setName("Custom attachment path").setDesc('Path for attachments. Use "./" for relative to note, or "/" for vault root.').addText((text) => {
          text.setPlaceholder("./assets").setValue(this.plugin.settings.customAttachmentPath).onChange(async (value) => {
            this.plugin.settings.customAttachmentPath = value;
            await this.plugin.saveSettings();
          });
        });
      });
    }
  }
  renderImageServicesSettings(containerEl) {
    const group = createSettingsGroup(containerEl, "Image services", "image-manager");
    group.addSetting((setting) => {
      setting.setName("Default provider").setDesc("Default image provider for search").addDropdown((dropdown) => {
        dropdown.addOption("unsplash" /* Unsplash */, "Unsplash").addOption("pexels" /* Pexels */, "Pexels").addOption("pixabay" /* Pixabay */, "Pixabay").addOption("local" /* Local */, "Local files").setValue(this.plugin.settings.defaultProvider).onChange(async (value) => {
          this.plugin.settings.defaultProvider = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Default orientation").setDesc("Filter images by orientation").addDropdown((dropdown) => {
        dropdown.addOption("any" /* Any */, "Any").addOption("landscape" /* Landscape */, "Landscape").addOption("portrait" /* Portrait */, "Portrait").addOption("square" /* Square */, "Square").setValue(this.plugin.settings.defaultOrientation).onChange(async (value) => {
          this.plugin.settings.defaultOrientation = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Default image size").setDesc("Preferred size when downloading images").addDropdown((dropdown) => {
        dropdown.addOption("original" /* Original */, "Original").addOption("large" /* Large */, "Large").addOption("medium" /* Medium */, "Medium").addOption("small" /* Small */, "Small").setValue(this.plugin.settings.defaultImageSize).onChange(async (value) => {
          this.plugin.settings.defaultImageSize = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Unsplash proxy server").setDesc("Optional proxy server (leave empty to use built-in)").addText((text) => {
        text.setPlaceholder("https://your-proxy.com/").setValue(this.plugin.settings.unsplashProxyServer).onChange(async (value) => {
          this.plugin.settings.unsplashProxyServer = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Pexels API key").setDesc("Get your API key from https://www.pexels.com/api/new/").addText((text) => {
        text.setPlaceholder("Pexels API key").setValue(this.plugin.settings.pexelsApiKey).onChange(async (value) => {
          this.plugin.settings.pexelsApiKey = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Pixabay API key").setDesc("Get your API key from https://pixabay.com/api/docs/").addText((text) => {
        text.setPlaceholder("Pixabay API key").setValue(this.plugin.settings.pixabayApiKey).onChange(async (value) => {
          this.plugin.settings.pixabayApiKey = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Insert size").setDesc('Set the size of the image when inserting. Format could be only the width "200" or the width and height "200x100". Leave empty for no size.').addText((text) => {
        text.setPlaceholder("200 or 200x100").setValue(this.plugin.settings.insertSize).onChange(async (value) => {
          this.plugin.settings.insertSize = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Insert referral").setDesc("Insert the reference text").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.insertReferral).onChange(async (value) => {
          this.plugin.settings.insertReferral = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Insert backlink").setDesc("Insert a backlink in front of the reference text").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.insertBackLink).onChange(async (value) => {
          this.plugin.settings.insertBackLink = value;
          await this.plugin.saveSettings();
        });
      });
    });
  }
  renderPropertySettings(containerEl) {
    const group = createSettingsGroup(containerEl, "Property insertion", "image-manager");
    group.addSetting((setting) => {
      setting.setName("Enable paste into properties").setDesc("Allow pasting images directly into properties").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.enablePropertyPaste).onChange(async (value) => {
          this.plugin.settings.enablePropertyPaste = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Property link format").setDesc("How to format the image link in properties").addDropdown((dropdown) => {
        dropdown.addOption("obsidian" /* ObsidianDefault */, "Use Obsidian's settings").addOption("path" /* Path */, "Plain path (path/to/image.jpg)").addOption("relative" /* RelativePath */, "Relative path (./image.jpg)").addOption("wikilink" /* Wikilink */, "Wikilink ([[path/to/image.jpg]])").addOption("markdown" /* Markdown */, "Markdown (![](path/to/image.jpg))").addOption("custom" /* Custom */, "Custom format").setValue(this.plugin.settings.propertyLinkFormat).onChange(async (value) => {
          this.plugin.settings.propertyLinkFormat = value;
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.propertyLinkFormat === "custom" /* Custom */) {
      group.addSetting((setting) => {
        setting.setName("Custom format template").setDesc("Use {image-url} as placeholder for the image path").addText((text) => {
          text.setPlaceholder("{image-url}").setValue(this.plugin.settings.customPropertyLinkFormat).onChange(async (value) => {
            this.plugin.settings.customPropertyLinkFormat = value;
            await this.plugin.saveSettings();
          });
        });
      });
    }
    group.addSetting((setting) => {
      setting.setName("Default property name").setDesc("Default property name when inserting to properties via command").addText((text) => {
        text.setPlaceholder("Banner").setValue(this.plugin.settings.defaultPropertyName).onChange(async (value) => {
          this.plugin.settings.defaultPropertyName = value;
          await this.plugin.saveSettings();
        });
      });
    });
  }
  renderConversionSettings(containerEl) {
    const group = createSettingsGroup(containerEl, "Remote image conversion", "image-manager");
    group.addSetting((setting) => {
      setting.setName("Auto-convert remote images").setDesc("Automatically download and replace remote image urls with local files").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.autoConvertRemoteImages).onChange(async (value) => {
          this.plugin.settings.autoConvertRemoteImages = value;
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.autoConvertRemoteImages) {
      group.addSetting((setting) => {
        setting.setName("Convert on note open").setDesc("Process remote images when opening a note").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.convertOnNoteOpen).onChange(async (value) => {
            this.plugin.settings.convertOnNoteOpen = value;
            await this.plugin.saveSettings();
          });
        });
      });
      group.addSetting((setting) => {
        setting.setName("Convert on note save").setDesc("Process remote images when saving a note").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.convertOnNoteSave).onChange(async (value) => {
            this.plugin.settings.convertOnNoteSave = value;
            await this.plugin.saveSettings();
          });
        });
      });
    }
  }
  renderRenameSettings(containerEl) {
    const group = createSettingsGroup(containerEl, "Rename options", "image-manager");
    group.addSetting((setting) => {
      setting.setName("Descriptive images").setDesc("Ask for image description, use as display text and kebab-case for filename (applies to note body insertions only, not properties)").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.enableDescriptiveImages).onChange(async (value) => {
          this.plugin.settings.enableDescriptiveImages = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Auto rename").setDesc("Automatically rename without showing dialog (uses template)").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.autoRename).onChange(async (value) => {
          this.plugin.settings.autoRename = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Duplicate number delimiter").setDesc('Character(s) between name and number for duplicates (e.g., "-" gives "image-1")').addText((text) => {
        text.setPlaceholder("-").setValue(this.plugin.settings.dupNumberDelimiter).onChange(async (value) => {
          this.plugin.settings.dupNumberDelimiter = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Duplicate number at start").setDesc('Put the duplicate number at the start (e.g., "1-image" instead of "image-1")').addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.dupNumberAtStart).onChange(async (value) => {
          this.plugin.settings.dupNumberAtStart = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Disable rename notice").setDesc("Do not show a notice after renaming an image").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.disableRenameNotice).onChange(async (value) => {
          this.plugin.settings.disableRenameNotice = value;
          await this.plugin.saveSettings();
        });
      });
    });
  }
  /**
   * Get the current device type
   */
  getCurrentDevice() {
    if (import_obsidian2.Platform.isPhone) {
      return "phone" /* Phone */;
    }
    if (import_obsidian2.Platform.isTablet) {
      return "tablet" /* Tablet */;
    }
    return "desktop" /* Desktop */;
  }
  /**
   * Helper to preserve scroll position when re-rendering settings
   */
  refreshWithScrollPreserve(containerEl) {
    const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
    const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
    this.display();
    requestAnimationFrame(() => {
      if (scrollContainer) {
        scrollContainer.scrollTop = scrollTop;
      }
    });
  }
  renderBannerSettings(containerEl) {
    const group = createSettingsGroup(containerEl, "Banner images", "image-manager");
    const currentDevice = this.getCurrentDevice();
    const deviceSettings = this.plugin.settings.banner[currentDevice];
    const defaultDeviceSettings = DEFAULT_BANNER_DEVICE_SETTINGS[currentDevice];
    const propertySettings = this.plugin.settings.banner.properties;
    group.addSetting((setting) => {
      setting.setName("Show banner").setDesc(`Enable or disable banners on your ${currentDevice} device`).addToggle((toggle) => {
        toggle.setValue(deviceSettings.enabled).onChange(async (value) => {
          this.plugin.settings.banner[currentDevice].enabled = value;
          await this.plugin.saveSettings();
          this.refreshWithScrollPreserve(containerEl);
        });
      });
    });
    if (!deviceSettings.enabled) {
      return;
    }
    group.addSetting((setting) => {
      setting.setName("Height").setDesc(`Height of the banner on your ${currentDevice} device (in pixels)`).addText((text) => {
        text.setPlaceholder(String(defaultDeviceSettings.height)).setValue(String(deviceSettings.height)).onChange(async (value) => {
          const num = parseInt(value, 10);
          if (!isNaN(num) && num > 0) {
            this.plugin.settings.banner[currentDevice].height = num;
            await this.plugin.saveSettings();
          }
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Padding").setDesc("Padding of the banner from the edges of the note (in pixels)").addText((text) => {
        text.setPlaceholder(String(defaultDeviceSettings.padding)).setValue(String(deviceSettings.padding)).onChange(async (value) => {
          const num = parseInt(value, 10);
          if (!isNaN(num) && num >= 0) {
            this.plugin.settings.banner[currentDevice].padding = num;
            await this.plugin.saveSettings();
          }
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Note offset").setDesc("Move the position of the note content (in pixels)").addText((text) => {
        text.setPlaceholder(String(defaultDeviceSettings.noteOffset)).setValue(String(deviceSettings.noteOffset)).onChange(async (value) => {
          const num = parseInt(value, 10);
          if (!isNaN(num)) {
            this.plugin.settings.banner[currentDevice].noteOffset = num;
            await this.plugin.saveSettings();
          }
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("View offset").setDesc("Move the position of the view content (in pixels)").addText((text) => {
        text.setPlaceholder(String(defaultDeviceSettings.viewOffset)).setValue(String(deviceSettings.viewOffset)).onChange(async (value) => {
          const num = parseInt(value, 10);
          if (!isNaN(num)) {
            this.plugin.settings.banner[currentDevice].viewOffset = num;
            await this.plugin.saveSettings();
          }
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Fade").setDesc("Fade the image out towards the content").addToggle((toggle) => {
        toggle.setValue(deviceSettings.fade).onChange(async (value) => {
          this.plugin.settings.banner[currentDevice].fade = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Animation").setDesc("Enable banner animation when opening files").addToggle((toggle) => {
        toggle.setValue(deviceSettings.animation).onChange(async (value) => {
          this.plugin.settings.banner[currentDevice].animation = value;
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Banner property").setDesc("Name of the banner property this plugin will look for in the frontmatter").addText((text) => {
        text.setPlaceholder("Banner").setValue(propertySettings.imageProperty).onChange(async (value) => {
          this.plugin.settings.banner.properties.imageProperty = value || "banner";
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Icon property").setDesc("Name of the icon property this plugin will look for in the frontmatter").addText((text) => {
        text.setPlaceholder("Icon").setValue(propertySettings.iconProperty).onChange(async (value) => {
          this.plugin.settings.banner.properties.iconProperty = value || "icon";
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Enable per-note banner hiding").setDesc("Allow disabling banners on a per-note basis using a frontmatter property").addToggle((toggle) => {
        toggle.setValue(propertySettings.hidePropertyEnabled).onChange(async (value) => {
          this.plugin.settings.banner.properties.hidePropertyEnabled = value;
          await this.plugin.saveSettings();
          this.refreshWithScrollPreserve(containerEl);
        });
      });
    });
    if (propertySettings.hidePropertyEnabled) {
      group.addSetting((setting) => {
        setting.setName("Hide banner property").setDesc("Name of the frontmatter property that, when set to true, will hide the banner for that note").addText((text) => {
          text.setPlaceholder("Hide banner").setValue(propertySettings.hideProperty).onChange(async (value) => {
            this.plugin.settings.banner.properties.hideProperty = value || "";
            await this.plugin.saveSettings();
          });
        });
      });
    }
    group.addSetting((setting) => {
      setting.setName("Show icon").setDesc("Enable or disable the icon").addToggle((toggle) => {
        toggle.setValue(deviceSettings.iconEnabled).onChange(async (value) => {
          this.plugin.settings.banner[currentDevice].iconEnabled = value;
          await this.plugin.saveSettings();
          this.refreshWithScrollPreserve(containerEl);
        });
      });
    });
    if (deviceSettings.iconEnabled) {
      group.addSetting((setting) => {
        setting.setName("Icon size").setDesc("Size of the icon (in pixels)").addText((text) => {
          text.setPlaceholder(String(defaultDeviceSettings.iconSize)).setValue(String(deviceSettings.iconSize)).onChange(async (value) => {
            const num = parseInt(value, 10);
            if (!isNaN(num) && num > 0) {
              this.plugin.settings.banner[currentDevice].iconSize = num;
              await this.plugin.saveSettings();
            }
          });
        });
      });
      group.addSetting((setting) => {
        setting.setName("Icon background").setDesc("Enable or disable the icon background").addToggle((toggle) => {
          toggle.setValue(deviceSettings.iconBackground).onChange(async (value) => {
            this.plugin.settings.banner[currentDevice].iconBackground = value;
            await this.plugin.saveSettings();
          });
        });
      });
      group.addSetting((setting) => {
        setting.setName("Icon frame").setDesc("Show the border/background frame around the icon (disable to display just the icon graphic)").addToggle((toggle) => {
          toggle.setValue(deviceSettings.iconFrame).onChange(async (value) => {
            this.plugin.settings.banner[currentDevice].iconFrame = value;
            await this.plugin.saveSettings();
          });
        });
      });
      group.addSetting((setting) => {
        setting.setName("Icon border size").setDesc("Size of the icon border (in pixels)").addText((text) => {
          text.setPlaceholder(String(defaultDeviceSettings.iconBorder)).setValue(String(deviceSettings.iconBorder)).onChange(async (value) => {
            const num = parseInt(value, 10);
            if (!isNaN(num) && num >= 0) {
              this.plugin.settings.banner[currentDevice].iconBorder = num;
              await this.plugin.saveSettings();
            }
          });
        });
      });
      group.addSetting((setting) => {
        setting.setName("Icon border radius").setDesc("Size of the icon border radius (in pixels)").addText((text) => {
          text.setPlaceholder(String(defaultDeviceSettings.iconRadius)).setValue(String(deviceSettings.iconRadius)).onChange(async (value) => {
            const num = parseInt(value, 10);
            if (!isNaN(num) && num >= 0) {
              this.plugin.settings.banner[currentDevice].iconRadius = num;
              await this.plugin.saveSettings();
            }
          });
        });
      });
      group.addSetting((setting) => {
        setting.setName("Icon alignment - horizontal").setDesc("Horizontal alignment of the icon").addDropdown((dropdown) => {
          dropdown.addOption("flex-start", "Left").addOption("center", "Center").addOption("flex-end", "Right").setValue(deviceSettings.iconAlignmentH).onChange(async (value) => {
            this.plugin.settings.banner[currentDevice].iconAlignmentH = value;
            await this.plugin.saveSettings();
          });
        });
      });
      group.addSetting((setting) => {
        setting.setName("Icon alignment - vertical").setDesc("Vertical alignment of the icon").addDropdown((dropdown) => {
          dropdown.addOption("flex-start", "Top").addOption("center", "Center").addOption("flex-end", "Bottom").setValue(deviceSettings.iconAlignmentV).onChange(async (value) => {
            this.plugin.settings.banner[currentDevice].iconAlignmentV = value;
            await this.plugin.saveSettings();
          });
        });
      });
    }
  }
  renderAdvancedSettings(containerEl) {
    const group = createSettingsGroup(containerEl, "Advanced", "image-manager");
    group.addSetting((setting) => {
      setting.setName("Supported file extensions").setDesc("File extensions to process (comma-separated)").addText((text) => {
        const currentValue = this.plugin.settings.supportedExtensions.length > 0 ? this.plugin.settings.supportedExtensions.join(", ") : "";
        text.setPlaceholder("File extensions").setValue(currentValue).onChange(async (value) => {
          const extensions = value.split(",").map((ext) => ext.trim().toLowerCase()).filter((ext) => ext.length > 0);
          this.plugin.settings.supportedExtensions = extensions.length > 0 ? extensions : ["md"];
          await this.plugin.saveSettings();
        });
      });
    });
    group.addSetting((setting) => {
      setting.setName("Debug mode").setDesc("Enable debug logging to console").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.debugMode).onChange(async (value) => {
          this.plugin.settings.debugMode = value;
          await this.plugin.saveSettings();
        });
      });
    });
  }
};

// src/services/StorageManager.ts
var import_obsidian3 = require("obsidian");
var StorageManager = class {
  constructor(app, settings) {
    this.app = app;
    this.settings = settings;
  }
  /**
   * Update settings reference
   */
  updateSettings(settings) {
    this.settings = settings;
  }
  /**
   * Get the attachment folder path for a given note
   */
  getAttachmentFolder(noteFile) {
    var _a, _b;
    const notePath = (_b = (_a = noteFile.parent) == null ? void 0 : _a.path) != null ? _b : "";
    switch (this.settings.attachmentLocation) {
      case "same" /* SameFolder */:
        return notePath;
      case "subfolder" /* Subfolder */:
        return (0, import_obsidian3.normalizePath)(this.joinPaths(notePath, this.settings.customAttachmentPath));
      case "vault" /* VaultFolder */:
        return (0, import_obsidian3.normalizePath)(this.settings.customAttachmentPath);
      case "obsidian" /* ObsidianDefault */:
      default:
        return this.getObsidianAttachmentFolder(noteFile);
    }
  }
  /**
   * Get Obsidian's configured attachment folder
   */
  getObsidianAttachmentFolder(noteFile) {
    var _a, _b, _c;
    const vaultConfig = this.app.vault.config;
    const attachmentFolderPath = (_a = vaultConfig == null ? void 0 : vaultConfig.attachmentFolderPath) != null ? _a : "/";
    const notePath = (_c = (_b = noteFile.parent) == null ? void 0 : _b.path) != null ? _c : "";
    if (attachmentFolderPath === "/") {
      return "";
    } else if (attachmentFolderPath === "./") {
      return notePath;
    } else if (attachmentFolderPath.startsWith("./")) {
      const relativePath = attachmentFolderPath.slice(2);
      return (0, import_obsidian3.normalizePath)(this.joinPaths(notePath, relativePath));
    } else {
      return (0, import_obsidian3.normalizePath)(attachmentFolderPath);
    }
  }
  /**
   * Join path segments
   */
  joinPaths(...parts) {
    return parts.filter((p) => p).join("/");
  }
  /**
   * Ensure a folder exists, creating it if necessary
   */
  async ensureFolderExists(folderPath) {
    if (!folderPath) return;
    const normalizedPath = (0, import_obsidian3.normalizePath)(folderPath);
    const folder = this.app.vault.getAbstractFileByPath(normalizedPath);
    if (!folder) {
      await this.app.vault.createFolder(normalizedPath);
    } else if (!(folder instanceof import_obsidian3.TFolder)) {
      throw new Error(`Path exists but is not a folder: ${normalizedPath}`);
    }
  }
  /**
   * Generate a unique file path for an image
   */
  async getAvailablePath(baseName, extension, noteFile) {
    const folder = this.getAttachmentFolder(noteFile);
    await this.ensureFolderExists(folder);
    const sanitizedName = this.sanitizeFileName(baseName);
    let fileName = `${sanitizedName}.${extension}`;
    let filePath = folder ? (0, import_obsidian3.normalizePath)(this.joinPaths(folder, fileName)) : (0, import_obsidian3.normalizePath)(fileName);
    let counter = 1;
    while (this.app.vault.getAbstractFileByPath(filePath)) {
      if (this.settings.dupNumberAtStart) {
        fileName = `${counter}${this.settings.dupNumberDelimiter}${sanitizedName}.${extension}`;
      } else {
        fileName = `${sanitizedName}${this.settings.dupNumberDelimiter}${counter}.${extension}`;
      }
      filePath = folder ? (0, import_obsidian3.normalizePath)(this.joinPaths(folder, fileName)) : (0, import_obsidian3.normalizePath)(fileName);
      counter++;
    }
    return filePath;
  }
  /**
   * Save binary data as a file
   */
  async saveFile(data, filePath) {
    const normalizedPath = (0, import_obsidian3.normalizePath)(filePath);
    const lastSlash = normalizedPath.lastIndexOf("/");
    const parentPath = lastSlash > 0 ? normalizedPath.slice(0, lastSlash) : "";
    if (parentPath) {
      await this.ensureFolderExists(parentPath);
    }
    return await this.app.vault.createBinary(normalizedPath, data);
  }
  /**
   * Generate markdown image link for a file
   * Ensures the link includes '!' for images
   * @param displayText Optional display text to add after the link (e.g., ![[image.jpg|display text]])
   * @param insertSize Optional size to add (e.g., "200" or "200x100")
   */
  generateMarkdownLink(file, sourcePath, displayText, insertSize) {
    const link = this.app.fileManager.generateMarkdownLink(file, sourcePath);
    let imageLink = link;
    if (this.isImageFile(file) && !link.startsWith("!")) {
      imageLink = `!${link}`;
    }
    if (this.settings.debugMode) {
      console.debug("[Image Manager] generateMarkdownLink", {
        originalLink: link,
        imageLink,
        insertSize,
        displayText,
        hasSize: !!(insertSize && insertSize.trim())
      });
    }
    if (imageLink.startsWith("![") && imageLink.includes("](")) {
      if (insertSize && insertSize.trim()) {
        const sizePart = `|${insertSize}`;
        if (displayText && displayText.trim()) {
          imageLink = imageLink.replace(/^!\[([^\]]*)\]/, `![${displayText}${sizePart}]`);
        } else {
          const altMatch = imageLink.match(/^!\[([^\]]*)\]/);
          if (altMatch) {
            const alt = altMatch[1] || "";
            imageLink = imageLink.replace(/^!\[([^\]]*)\]/, `![${alt}${sizePart}]`);
          }
        }
      } else if (displayText && displayText.trim()) {
        imageLink = imageLink.replace(/^!\[([^\]]*)\]/, `![${displayText}]`);
      }
    } else if (imageLink.startsWith("![") && imageLink.includes("]]")) {
      const parts = [];
      if (insertSize && insertSize.trim()) {
        parts.push(insertSize);
      }
      if (displayText && displayText.trim()) {
        parts.push(displayText);
      }
      if (parts.length > 0) {
        imageLink = imageLink.replace(/\]\]$/, `|${parts.join("|")}]]`);
      }
    }
    if (this.settings.debugMode) {
      console.debug("[Image Manager] generateMarkdownLink result", {
        finalLink: imageLink
      });
    }
    return imageLink;
  }
  /**
   * Get relative path from source file to target file
   */
  getRelativePath(from, to) {
    var _a, _b, _c, _d;
    const fromDir = (_b = (_a = from.parent) == null ? void 0 : _a.path) != null ? _b : "";
    const toPath = to.path;
    if (!fromDir) {
      return toPath;
    }
    const toDir = (_d = (_c = to.parent) == null ? void 0 : _c.path) != null ? _d : "";
    if (fromDir === toDir) {
      return to.name;
    }
    return toPath;
  }
  /**
   * Sanitize a file name
   */
  sanitizeFileName(name) {
    return name.replace(/[\\/:*?"<>|]/g, "-").replace(/\s+/g, " ").replace(/^\.+/, "").replace(/\.+$/, "").trim();
  }
  /**
   * Get file extension from MIME type
   */
  getExtensionFromMimeType(mimeType) {
    var _a;
    const mimeToExt = {
      "image/jpeg": "jpg",
      "image/jpg": "jpg",
      "image/png": "png",
      "image/gif": "gif",
      "image/webp": "webp",
      "image/svg+xml": "svg",
      "image/bmp": "bmp",
      "image/tiff": "tiff",
      "image/avif": "avif"
    };
    return (_a = mimeToExt[mimeType]) != null ? _a : "png";
  }
  /**
   * Check if a file is an image based on extension
   */
  isImageFile(file) {
    const imageExtensions = ["jpg", "jpeg", "png", "gif", "webp", "svg", "bmp", "tiff", "avif"];
    return imageExtensions.includes(file.extension.toLowerCase());
  }
  /**
   * Check if a URL points to an external image
   */
  isExternalImageUrl(url) {
    try {
      const parsed = new URL(url);
      if (!["http:", "https:"].includes(parsed.protocol)) {
        return false;
      }
      const pathname = parsed.pathname.toLowerCase();
      const imageExtensions = [".jpg", ".jpeg", ".png", ".gif", ".webp", ".svg", ".bmp", ".tiff", ".avif"];
      if (imageExtensions.some((ext) => pathname.endsWith(ext))) {
        return true;
      }
      const imageHosts = [
        "images.unsplash.com",
        "images.pexels.com",
        "pixabay.com",
        "i.imgur.com",
        "cdn.discordapp.com"
      ];
      return imageHosts.some((host) => parsed.hostname.includes(host));
    } catch (e) {
      return false;
    }
  }
};

// src/services/ImageProcessor.ts
var import_obsidian6 = require("obsidian");

// src/utils/template.ts
function renderTemplate(template, variables, frontmatter) {
  var _a, _b;
  let result = template;
  result = result.replace(/\{\{fileName\}\}/g, variables.fileName);
  result = result.replace(/\{\{dirName\}\}/g, variables.dirName);
  result = result.replace(/\{\{imageNameKey\}\}/g, (_a = variables.imageNameKey) != null ? _a : "");
  result = result.replace(/\{\{firstHeading\}\}/g, (_b = variables.firstHeading) != null ? _b : "");
  result = result.replace(/\{\{DATE:([^}]+)\}\}/g, (_, format) => {
    return formatDate(/* @__PURE__ */ new Date(), format);
  });
  result = result.replace(/\{\{TIME:([^}]+)\}\}/g, (_, format) => {
    return formatTime(/* @__PURE__ */ new Date(), format);
  });
  if (frontmatter) {
    result = result.replace(/\{\{fm:([^}]+)\}\}/g, (_, key) => {
      const value = frontmatter[key.trim()];
      if (value == null) return "";
      if (typeof value === "string") return value;
      if (typeof value === "number" || typeof value === "boolean") return String(value);
      return "";
    });
  }
  return result;
}
function formatDate(date, format) {
  const year = date.getFullYear();
  const month = date.getMonth() + 1;
  const day = date.getDate();
  return format.replace("YYYY", String(year)).replace("YY", String(year).slice(-2)).replace("MM", String(month).padStart(2, "0")).replace("DD", String(day).padStart(2, "0")).replace("M", String(month)).replace("D", String(day));
}
function formatTime(date, format) {
  const hours = date.getHours();
  const minutes = date.getMinutes();
  const seconds = date.getSeconds();
  return format.replace("HH", String(hours).padStart(2, "0")).replace("mm", String(minutes).padStart(2, "0")).replace("ss", String(seconds).padStart(2, "0")).replace("H", String(hours)).replace("m", String(minutes)).replace("s", String(seconds));
}
function buildTemplateVariables(app, activeFile) {
  var _a, _b;
  const cache = app.metadataCache.getFileCache(activeFile);
  const frontmatter = cache == null ? void 0 : cache.frontmatter;
  let firstHeading = "";
  if (cache == null ? void 0 : cache.headings) {
    for (const heading of cache.headings) {
      if (heading.level === 1) {
        firstHeading = heading.heading;
        break;
      }
    }
  }
  return {
    fileName: activeFile.basename,
    dirName: (_b = (_a = activeFile.parent) == null ? void 0 : _a.name) != null ? _b : "",
    imageNameKey: frontmatter == null ? void 0 : frontmatter.imageNameKey,
    firstHeading,
    date: formatDate(/* @__PURE__ */ new Date(), "YYYY-MM-DD"),
    time: formatTime(/* @__PURE__ */ new Date(), "HH-mm-ss")
  };
}
function isTemplateMeaningful(result, delimiter) {
  const meaninglessRegex = new RegExp(`[${escapeRegExp(delimiter)}\\s]`, "gm");
  return result.replace(meaninglessRegex, "") !== "";
}
function escapeRegExp(string) {
  return string.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}

// src/modals/RenameModal.ts
var import_obsidian4 = require("obsidian");
var RenameModal = class extends import_obsidian4.Modal {
  constructor(app, imageFile, suggestedName, onSubmit) {
    super(app);
    this.nameInput = null;
    this.previewEl = null;
    this.errorEl = null;
    this.imageFile = imageFile;
    this.suggestedName = suggestedName;
    this.currentName = suggestedName;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl, titleEl } = this;
    this.containerEl.addClass("image-manager-rename-modal");
    titleEl.setText("Rename image");
    this.renderImagePreview(contentEl);
    this.renderFileInfo(contentEl);
    this.renderNameInput(contentEl);
    this.errorEl = contentEl.createDiv({ cls: "image-manager-error image-manager-error-hidden" });
    this.renderButtons(contentEl);
    setTimeout(() => {
      if (this.nameInput) {
        this.nameInput.focus();
        this.nameInput.select();
      }
    }, 50);
  }
  renderImagePreview(containerEl) {
    const previewContainer = containerEl.createDiv({ cls: "image-manager-preview" });
    const img = previewContainer.createEl("img", {
      attr: {
        src: this.app.vault.getResourcePath(this.imageFile),
        alt: this.imageFile.name
      }
    });
    img.addClass("image-manager-preview-img");
  }
  renderFileInfo(containerEl) {
    const infoContainer = containerEl.createDiv({ cls: "image-manager-info" });
    const infoList = infoContainer.createEl("ul");
    const originalItem = infoList.createEl("li");
    originalItem.createEl("strong", { text: "Original: " });
    originalItem.createEl("span", { text: this.imageFile.path });
    const newItem = infoList.createEl("li");
    newItem.createEl("strong", { text: "New path: " });
    this.previewEl = newItem.createEl("span", { text: this.getNewPath(this.currentName) });
  }
  renderNameInput(containerEl) {
    new import_obsidian4.Setting(containerEl).setName("New name").setDesc("Enter a new name for the image (without extension)").addText((text) => {
      this.nameInput = text.inputEl;
      text.setPlaceholder("Enter name").setValue(this.currentName).onChange((value) => {
        this.currentName = this.sanitizeName(value);
        this.updatePreview();
      });
      text.inputEl.addEventListener("keydown", (e) => {
        if (e.key === "Enter" && !e.isComposing) {
          e.preventDefault();
          this.submit();
        }
      });
    });
  }
  renderButtons(containerEl) {
    new import_obsidian4.Setting(containerEl).addButton((btn) => {
      btn.setButtonText("Rename").setCta().onClick(() => this.submit());
    }).addButton((btn) => {
      btn.setButtonText("Skip").onClick(() => this.cancel());
    });
  }
  getNewPath(name) {
    var _a, _b;
    const folder = (_b = (_a = this.imageFile.parent) == null ? void 0 : _a.path) != null ? _b : "";
    const extension = this.imageFile.extension;
    const fileName = `${name}.${extension}`;
    return folder ? `${folder}/${fileName}` : fileName;
  }
  updatePreview() {
    if (this.previewEl) {
      this.previewEl.setText(this.getNewPath(this.currentName));
    }
  }
  sanitizeName(name) {
    return name.replace(/[\\/:*?"<>|]/g, "-").replace(/\s+/g, " ").trim();
  }
  showError(message) {
    if (this.errorEl) {
      this.errorEl.setText(message);
      this.errorEl.addClass("image-manager-error-visible");
      this.errorEl.removeClass("image-manager-error-hidden");
    }
  }
  hideError() {
    if (this.errorEl) {
      this.errorEl.addClass("image-manager-error-hidden");
      this.errorEl.removeClass("image-manager-error-visible");
    }
  }
  submit() {
    this.hideError();
    if (!this.currentName || this.currentName.trim() === "") {
      this.showError("Name cannot be empty");
      return;
    }
    this.onSubmit({
      newName: this.currentName,
      cancelled: false
    });
    this.close();
  }
  cancel() {
    this.onSubmit({
      newName: "",
      cancelled: true
    });
    this.close();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
function openRenameModal(app, imageFile, suggestedName) {
  return new Promise((resolve) => {
    const modal = new RenameModal(app, imageFile, suggestedName, resolve);
    modal.open();
  });
}

// src/modals/DescriptiveImageModal.ts
var import_obsidian5 = require("obsidian");

// src/utils/kebab-case.ts
function toKebabCase(str) {
  return str.toLowerCase().replace(/[<>:"/\\|?*]/g, "").replace(/['"]/g, "").replace(/[^\w\s-]/g, "").trim().replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "");
}

// src/modals/DescriptiveImageModal.ts
var DescriptiveImageModal = class extends import_obsidian5.Modal {
  constructor(app, imageFile, onSubmit) {
    super(app);
    this.description = "";
    this.descriptionInput = null;
    this.previewEl = null;
    this.fileNamePreviewEl = null;
    this.errorEl = null;
    this.imageFile = imageFile;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl, titleEl } = this;
    this.containerEl.addClass("image-manager-rename-modal");
    titleEl.setText("Describe image");
    this.renderImagePreview(contentEl);
    new import_obsidian5.Setting(contentEl).setName("Image description").setDesc("Describe this image. This will be used as display text and for the filename.").addTextArea((text) => {
      this.descriptionInput = text.inputEl;
      text.setPlaceholder("A beautiful sunset over mountains").setValue(this.description).onChange((value) => {
        this.description = value;
        this.updatePreview();
      });
      text.inputEl.addEventListener("keydown", (e) => {
        if (e.key === "Enter" && (e.ctrlKey || e.metaKey) && !e.isComposing) {
          e.preventDefault();
          this.submit();
        }
      });
    });
    const previewContainer = contentEl.createDiv({ cls: "image-manager-info" });
    previewContainer.createEl("p", { text: "Preview:" });
    const fileNamePreview = previewContainer.createEl("p");
    fileNamePreview.createEl("strong", { text: "Filename: " });
    this.fileNamePreviewEl = fileNamePreview.createEl("span");
    const linkPreview = previewContainer.createEl("p");
    linkPreview.createEl("strong", { text: "Link: " });
    this.previewEl = linkPreview.createEl("span", { cls: "code" });
    this.errorEl = contentEl.createDiv({ cls: "image-manager-error image-manager-error-hidden" });
    new import_obsidian5.Setting(contentEl).addButton((btn) => {
      btn.setButtonText("Insert").setCta().onClick(() => this.submit());
    }).addButton((btn) => {
      btn.setButtonText("Cancel").onClick(() => this.cancel());
    });
    setTimeout(() => {
      if (this.descriptionInput) {
        this.descriptionInput.focus();
      }
    }, 50);
  }
  renderImagePreview(containerEl) {
    const previewContainer = containerEl.createDiv({ cls: "image-manager-preview" });
    const img = previewContainer.createEl("img", {
      attr: {
        src: this.app.vault.getResourcePath(this.imageFile),
        alt: this.imageFile.name
      }
    });
    img.addClass("image-manager-preview-img");
  }
  updatePreview() {
    if (!this.description || this.description.trim() === "") {
      if (this.fileNamePreviewEl) {
        this.fileNamePreviewEl.setText("(enter description)");
      }
      if (this.previewEl) {
        this.previewEl.setText("(enter description)");
      }
      return;
    }
    const kebabName = toKebabCase(this.description);
    const extension = this.imageFile.extension;
    const fileName = `${kebabName}.${extension}`;
    const displayText = this.description.trim();
    if (this.fileNamePreviewEl) {
      this.fileNamePreviewEl.setText(fileName);
    }
    if (this.previewEl) {
      this.previewEl.setText(`![[${fileName}|${displayText}]]`);
    }
  }
  showError(message) {
    if (this.errorEl) {
      this.errorEl.setText(message);
      this.errorEl.addClass("image-manager-error-visible");
      this.errorEl.removeClass("image-manager-error-hidden");
    }
  }
  hideError() {
    if (this.errorEl) {
      this.errorEl.addClass("image-manager-error-hidden");
      this.errorEl.removeClass("image-manager-error-visible");
    }
  }
  submit() {
    this.hideError();
    if (!this.description || this.description.trim() === "") {
      this.showError("Description cannot be empty");
      return;
    }
    const kebabName = toKebabCase(this.description);
    if (!kebabName || kebabName === "") {
      this.showError("Description must contain valid characters");
      return;
    }
    this.onSubmit({
      description: this.description.trim(),
      fileName: kebabName,
      cancelled: false
    });
    this.close();
  }
  cancel() {
    this.onSubmit({
      description: "",
      fileName: "",
      cancelled: true
    });
    this.close();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
function openDescriptiveImageModal(app, imageFile) {
  return new Promise((resolve) => {
    const modal = new DescriptiveImageModal(app, imageFile, resolve);
    modal.open();
  });
}

// src/services/ImageProcessor.ts
var ImageProcessor = class {
  constructor(app, settings, storageManager) {
    this.app = app;
    this.settings = settings;
    this.storageManager = storageManager;
  }
  /**
   * Update settings reference
   */
  updateSettings(settings) {
    this.settings = settings;
    this.storageManager.updateSettings(settings);
  }
  /**
   * Process a pasted/dropped image file
   * This is called from our event handlers (user-initiated action)
   * @param isPropertyInsertion - If true, skip descriptive images (only applies to note body)
   */
  async processImageFile(file, activeFile, showRenameModal = true, isPropertyInsertion = false) {
    try {
      const arrayBuffer = await file.arrayBuffer();
      const extension = this.getExtension(file);
      const suggestedName = this.generateSuggestedName(activeFile);
      let finalName = suggestedName;
      if (showRenameModal && !this.settings.autoRename) {
        const tempPath = await this.storageManager.getAvailablePath(
          `temp-${Date.now()}`,
          extension,
          activeFile
        );
        const tempFile = await this.storageManager.saveFile(arrayBuffer, tempPath);
        let finalName2;
        let displayText;
        if (this.settings.enableDescriptiveImages) {
          const descResult = await openDescriptiveImageModal(this.app, tempFile);
          if (descResult.cancelled) {
            await this.app.fileManager.trashFile(tempFile);
            return {
              file: null,
              path: "",
              linkText: "",
              success: false,
              error: "Cancelled by user"
            };
          }
          finalName2 = descResult.fileName;
          displayText = descResult.description;
        } else {
          const result = await openRenameModal(this.app, tempFile, suggestedName);
          if (result.cancelled) {
            await this.app.fileManager.trashFile(tempFile);
            return {
              file: null,
              path: "",
              linkText: "",
              success: false,
              error: "Cancelled by user"
            };
          }
          finalName2 = result.newName;
        }
        const finalPath = await this.getDeduplicatedPath(finalName2, extension, activeFile);
        await this.app.fileManager.renameFile(tempFile, finalPath);
        const abstractFile = this.app.vault.getAbstractFileByPath(finalPath);
        if (!(abstractFile instanceof import_obsidian6.TFile)) {
          throw new Error("Renamed file not found");
        }
        const renamedFile = abstractFile;
        const linkText = this.storageManager.generateMarkdownLink(
          renamedFile,
          activeFile.path,
          displayText,
          this.settings.insertSize
        );
        if (!this.settings.disableRenameNotice) {
          new import_obsidian6.Notice(`Image saved as: ${renamedFile.name}`);
        }
        return {
          file: renamedFile,
          path: finalPath,
          linkText,
          success: true
        };
      } else {
        const finalPath = await this.getDeduplicatedPath(finalName, extension, activeFile);
        const savedFile = await this.storageManager.saveFile(arrayBuffer, finalPath);
        const linkText = this.storageManager.generateMarkdownLink(
          savedFile,
          activeFile.path,
          void 0,
          this.settings.insertSize
        );
        if (!this.settings.disableRenameNotice) {
          new import_obsidian6.Notice(`Image saved as: ${savedFile.name}`);
        }
        return {
          file: savedFile,
          path: finalPath,
          linkText,
          success: true
        };
      }
    } catch (error) {
      console.error("Error processing image:", error);
      return {
        file: null,
        path: "",
        linkText: "",
        success: false,
        error: error instanceof Error ? error.message : String(error)
      };
    }
  }
  /**
   * Process an image from a URL (download and save locally)
   * @param isPropertyInsertion - If true, skip descriptive images (only applies to note body)
   */
  async processImageUrl(url, activeFile, showRenameModal = true, isPropertyInsertion = false) {
    var _a;
    try {
      const response = await (0, import_obsidian6.requestUrl)({ url });
      if (response.status >= 400) {
        throw new Error(`Failed to download image: ${response.status}`);
      }
      const arrayBuffer = response.arrayBuffer;
      const contentType = (_a = response.headers["content-type"]) != null ? _a : "image/png";
      const extension = this.storageManager.getExtensionFromMimeType(contentType);
      const suggestedName = this.generateSuggestedName(activeFile);
      let finalName = suggestedName;
      if (showRenameModal && !this.settings.autoRename) {
        const tempPath = await this.storageManager.getAvailablePath(
          `temp-${Date.now()}`,
          extension,
          activeFile
        );
        const tempFile = await this.storageManager.saveFile(arrayBuffer, tempPath);
        let finalName2;
        let displayText;
        if (this.settings.enableDescriptiveImages && !isPropertyInsertion) {
          const descResult = await openDescriptiveImageModal(this.app, tempFile);
          if (descResult.cancelled) {
            await this.app.fileManager.trashFile(tempFile);
            return {
              file: null,
              path: "",
              linkText: "",
              success: false,
              error: "Cancelled by user"
            };
          }
          finalName2 = descResult.fileName;
          displayText = descResult.description;
        } else {
          const result = await openRenameModal(this.app, tempFile, suggestedName);
          if (result.cancelled) {
            await this.app.fileManager.trashFile(tempFile);
            return {
              file: null,
              path: "",
              linkText: "",
              success: false,
              error: "Cancelled by user"
            };
          }
          finalName2 = result.newName;
        }
        const finalPath = await this.getDeduplicatedPath(finalName2, extension, activeFile);
        await this.app.fileManager.renameFile(tempFile, finalPath);
        const abstractFile = this.app.vault.getAbstractFileByPath(finalPath);
        if (!(abstractFile instanceof import_obsidian6.TFile)) {
          throw new Error("Renamed file not found");
        }
        const renamedFile = abstractFile;
        const linkText = this.storageManager.generateMarkdownLink(
          renamedFile,
          activeFile.path,
          displayText,
          this.settings.insertSize
        );
        if (!this.settings.disableRenameNotice) {
          new import_obsidian6.Notice(`Image downloaded and saved as: ${renamedFile.name}`);
        }
        return {
          file: renamedFile,
          path: finalPath,
          linkText,
          success: true
        };
      } else {
        const finalPath = await this.getDeduplicatedPath(finalName, extension, activeFile);
        const savedFile = await this.storageManager.saveFile(arrayBuffer, finalPath);
        const linkText = this.storageManager.generateMarkdownLink(
          savedFile,
          activeFile.path,
          void 0,
          this.settings.insertSize
        );
        if (!this.settings.disableRenameNotice) {
          new import_obsidian6.Notice(`Image downloaded and saved as: ${savedFile.name}`);
        }
        return {
          file: savedFile,
          path: finalPath,
          linkText,
          success: true
        };
      }
    } catch (error) {
      console.error("Error processing image URL:", error);
      return {
        file: null,
        path: "",
        linkText: "",
        success: false,
        error: error instanceof Error ? error.message : String(error)
      };
    }
  }
  /**
   * Generate a suggested name based on the template
   */
  generateSuggestedName(activeFile) {
    const variables = buildTemplateVariables(this.app, activeFile);
    const rendered = renderTemplate(this.settings.imageNameTemplate, variables);
    if (isTemplateMeaningful(rendered, this.settings.dupNumberDelimiter)) {
      return this.storageManager.sanitizeFileName(rendered);
    }
    return activeFile.basename;
  }
  /**
   * Get a deduplicated file path
   */
  async getDeduplicatedPath(baseName, extension, activeFile) {
    return await this.storageManager.getAvailablePath(baseName, extension, activeFile);
  }
  /**
   * Get file extension from File object
   */
  getExtension(file) {
    var _a;
    const nameParts = file.name.split(".");
    if (nameParts.length > 1) {
      const nameExt = (_a = nameParts[nameParts.length - 1]) == null ? void 0 : _a.toLowerCase();
      if (nameExt) {
        return nameExt;
      }
    }
    return this.storageManager.getExtensionFromMimeType(file.type);
  }
  /**
   * Insert link text at cursor position
   */
  insertLinkAtCursor(linkText) {
    const view = this.app.workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
    if (view == null ? void 0 : view.editor) {
      view.editor.replaceSelection(linkText);
    }
  }
  /**
   * Get the active markdown file
   */
  getActiveFile() {
    var _a;
    const view = this.app.workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
    return (_a = view == null ? void 0 : view.file) != null ? _a : null;
  }
  /**
   * Rename an existing image file with optional rename modal
   * Used by LocalConversionService to rename converted images
   */
  async renameImageFile(imageFile, suggestedName, activeFile) {
    try {
      const extension = imageFile.extension;
      let finalName = suggestedName;
      let displayText = "";
      if (this.settings.enableDescriptiveImages) {
        const descResult = await openDescriptiveImageModal(this.app, imageFile);
        if (descResult.cancelled) {
          return null;
        }
        displayText = descResult.description;
        finalName = descResult.fileName;
      }
      if (!this.settings.autoRename) {
        const result = await openRenameModal(
          this.app,
          imageFile,
          finalName
        );
        if (result.cancelled) {
          return null;
        }
        finalName = result.newName;
      }
      const finalPath = await this.getDeduplicatedPath(finalName, extension, activeFile);
      await this.app.fileManager.renameFile(imageFile, finalPath);
      const abstractFile = this.app.vault.getAbstractFileByPath(finalPath);
      if (!(abstractFile instanceof import_obsidian6.TFile)) {
        throw new Error("Renamed file not found");
      }
      const renamedFile = abstractFile;
      const linkText = this.storageManager.generateMarkdownLink(
        renamedFile,
        activeFile.path,
        displayText,
        this.settings.insertSize
      );
      return {
        file: renamedFile,
        path: finalPath,
        linkText,
        success: true
      };
    } catch (error) {
      console.error("Error renaming image file:", error);
      return {
        file: null,
        path: "",
        linkText: "",
        success: false,
        error: error instanceof Error ? error.message : String(error)
      };
    }
  }
  /**
   * Debug logging
   */
  log(...args) {
    if (this.settings.debugMode) {
      console.debug("[Image Manager]", ...args);
    }
  }
};

// src/services/PropertyHandler.ts
var import_obsidian8 = require("obsidian");

// src/utils/mdx-frontmatter.ts
var import_obsidian7 = require("obsidian");
function isMdxFile(file) {
  return file.extension === "mdx";
}
function isMarkdownFile(file) {
  return file.extension === "md" || file.extension === "mdx";
}
function parseMdxFrontmatter(content) {
  var _a;
  const frontmatterRegex = /^---\r?\n([\s\S]*?)\r?\n---\r?\n/;
  const match = content.match(frontmatterRegex);
  if (!match) {
    return {
      frontmatter: {},
      body: content
    };
  }
  const frontmatterText = (_a = match[1]) != null ? _a : "";
  const bodyContent = content.slice(match[0].length);
  try {
    const parsed = (0, import_obsidian7.parseYaml)(frontmatterText);
    const frontmatter = parsed && typeof parsed === "object" ? parsed : {};
    return {
      frontmatter,
      body: bodyContent
    };
  } catch (e) {
    console.error("Error parsing MDX frontmatter:", e);
    return {
      frontmatter: {},
      body: bodyContent
    };
  }
}
async function readMdxFrontmatter(app, file) {
  if (!isMdxFile(file)) {
    return null;
  }
  try {
    const content = await app.vault.read(file);
    const parsed = parseMdxFrontmatter(content);
    return parsed ? parsed.frontmatter : null;
  } catch (e) {
    console.error(`Error reading MDX frontmatter from ${file.path}:`, e);
    return null;
  }
}
async function processMdxFrontMatter(app, file, callback) {
  if (!isMdxFile(file)) {
    throw new Error(`File ${file.path} is not an MDX file`);
  }
  try {
    const content = await app.vault.read(file);
    const parsed = parseMdxFrontmatter(content);
    if (!parsed) {
      throw new Error("Failed to parse existing frontmatter");
    }
    const frontmatter = { ...parsed.frontmatter };
    callback(frontmatter);
    const newFrontmatterText = (0, import_obsidian7.stringifyYaml)(frontmatter).trim();
    const newContent = `---
${newFrontmatterText}
---
${parsed.body}`;
    await app.vault.modify(file, newContent);
  } catch (e) {
    console.error(`Error processing MDX frontmatter for ${file.path}:`, e);
    throw e;
  }
}
async function getFrontmatter(app, file) {
  var _a;
  if (isMdxFile(file)) {
    return await readMdxFrontmatter(app, file);
  }
  const cache = app.metadataCache.getFileCache(file);
  return (_a = cache == null ? void 0 : cache.frontmatter) != null ? _a : null;
}

// src/services/PropertyHandler.ts
var PropertyHandler = class {
  constructor(app, settings, storageManager, imageProcessor, remoteService) {
    this.app = app;
    this.settings = settings;
    this.storageManager = storageManager;
    this.imageProcessor = imageProcessor;
    this.remoteService = remoteService;
  }
  /**
   * Update settings reference
   */
  updateSettings(settings) {
    var _a;
    this.settings = settings;
    (_a = this.imageProcessor) == null ? void 0 : _a.updateSettings(settings);
  }
  /**
   * Set an image property value in frontmatter
   */
  async setPropertyValue(noteFile, propertyName, imageFile) {
    const linkValue = this.formatPropertyLink(imageFile, noteFile);
    try {
      if (isMdxFile(noteFile)) {
        await this.setMdxProperty(noteFile, propertyName, linkValue);
      } else {
        await this.setMdProperty(noteFile, propertyName, linkValue);
      }
      new import_obsidian8.Notice(`Image added to property: ${propertyName}`);
    } catch (error) {
      console.error("Failed to update property:", error);
      new import_obsidian8.Notice(`Failed to update property: ${error instanceof Error ? error.message : String(error)}`);
      throw error;
    }
  }
  /**
   * Set property in MD file using Obsidian's API
   */
  async setMdProperty(file, propertyName, value) {
    await this.app.fileManager.processFrontMatter(file, (frontmatter) => {
      frontmatter[propertyName] = value;
    });
  }
  /**
   * Set property in MDX file using custom handler
   */
  async setMdxProperty(file, propertyName, value) {
    await processMdxFrontMatter(this.app, file, (frontmatter) => {
      frontmatter[propertyName] = value;
    });
  }
  /**
   * Format the image link according to settings
   * Public method so PasteHandler can get the formatted value for UI updates
   */
  formatPropertyLink(imageFile, noteFile) {
    if (this.settings.propertyLinkFormat === "obsidian" /* ObsidianDefault */) {
      const generatedLink = this.app.fileManager.generateMarkdownLink(imageFile, noteFile.path);
      if (generatedLink.startsWith("![") && generatedLink.includes("]]")) {
        return generatedLink.substring(1);
      } else if (generatedLink.startsWith("![") && generatedLink.includes("](")) {
        const match = generatedLink.match(/!\[.*?\]\((.*?)\)/);
        return match && match[1] ? match[1] : generatedLink;
      } else if (generatedLink.startsWith("[[") && generatedLink.endsWith("]]")) {
        return generatedLink;
      } else if (generatedLink.includes("](")) {
        const match = generatedLink.match(/\[.*?\]\((.*?)\)/);
        return match && match[1] ? match[1] : generatedLink;
      }
      return generatedLink;
    }
    let pathToUse;
    switch (this.settings.propertyLinkFormat) {
      case "relative" /* RelativePath */:
        pathToUse = `./${imageFile.name}`;
        break;
      case "custom" /* Custom */:
        pathToUse = imageFile.name;
        break;
      case "path" /* Path */:
      default:
        pathToUse = this.getRelativePath(noteFile, imageFile);
        break;
    }
    switch (this.settings.propertyLinkFormat) {
      case "wikilink" /* Wikilink */:
        return `[[${pathToUse}]]`;
      case "markdown" /* Markdown */:
        return `![](${encodeURI(pathToUse)})`;
      case "custom" /* Custom */:
        return this.settings.customPropertyLinkFormat.replace(
          /\{image-url\}/gi,
          pathToUse
        );
      case "relative" /* RelativePath */:
      case "path" /* Path */:
      default:
        return pathToUse;
    }
  }
  /**
   * Get relative path from note to image
   */
  getRelativePath(fromFile, toFile) {
    var _a;
    const vaultConfig = this.app.vault.config;
    const useMarkdownLinks = (_a = vaultConfig == null ? void 0 : vaultConfig.useMarkdownLinks) != null ? _a : false;
    const useWikilinks = !useMarkdownLinks;
    if (useWikilinks && this.settings.propertyLinkFormat === "wikilink" /* Wikilink */) {
      return toFile.name;
    }
    return this.storageManager.getRelativePath(fromFile, toFile);
  }
  /**
   * Get the current value of a property
   */
  getPropertyValue(file, propertyName) {
    var _a;
    const cache = this.app.metadataCache.getFileCache(file);
    return (_a = cache == null ? void 0 : cache.frontmatter) == null ? void 0 : _a[propertyName];
  }
  /**
   * Check if a property exists in frontmatter
   */
  hasProperty(file, propertyName) {
    var _a;
    const cache = this.app.metadataCache.getFileCache(file);
    return ((_a = cache == null ? void 0 : cache.frontmatter) == null ? void 0 : _a[propertyName]) !== void 0;
  }
  /**
   * Insert an image from a URL into a property
   * Downloads the image, saves it locally, and sets the property
   * @param remoteImage Optional RemoteImage object for generating referral text
   */
  async insertImageFromUrl(imageUrl, noteFile, propertyName, remoteImage) {
    const result = await this.imageProcessor.processImageUrl(
      imageUrl,
      noteFile,
      true,
      // Show rename modal if enabled
      true
      // isPropertyInsertion - skip descriptive images
    );
    if (!result.success || !result.file) {
      throw new Error(result.error || "Failed to process image");
    }
    await this.setPropertyValue(noteFile, propertyName, result.file);
    if (this.settings.appendReferral && remoteImage && this.remoteService) {
      const referralText = this.remoteService.generateReferralText(remoteImage);
      if (referralText) {
        const content = await this.app.vault.read(noteFile);
        const updatedContent = content + referralText;
        await this.app.vault.modify(noteFile, updatedContent);
      }
    }
  }
};

// src/services/PasteHandler.ts
var import_obsidian9 = require("obsidian");
var PasteHandler = class {
  constructor(app, settings, imageProcessor, propertyHandler) {
    this.app = app;
    this.settings = settings;
    this.imageProcessor = imageProcessor;
    this.propertyHandler = propertyHandler;
  }
  /**
   * Update settings reference
   */
  updateSettings(settings) {
    this.settings = settings;
  }
  /**
   * Handle editor paste event
   * This is registered via workspace.on('editor-paste')
   */
  async handleEditorPaste(evt, editor, view) {
    var _a;
    if (!this.settings.enableRenameOnPaste) {
      return false;
    }
    const activeEl = document.activeElement;
    if (activeEl && this.isFrontmatterField(activeEl)) {
      return false;
    }
    const files = (_a = evt.clipboardData) == null ? void 0 : _a.files;
    if (!files || files.length === 0) {
      return false;
    }
    const imageFiles = [];
    for (let i = 0; i < files.length; i++) {
      const file = files.item(i);
      if (file && file.type.startsWith("image/")) {
        imageFiles.push(file);
      }
    }
    if (imageFiles.length === 0) {
      return false;
    }
    evt.preventDefault();
    const activeFile = view.file;
    if (!activeFile) {
      new import_obsidian9.Notice("No active file");
      return true;
    }
    for (let i = 0; i < imageFiles.length; i++) {
      const imageFile = imageFiles[i];
      if (!imageFile) continue;
      const result = await this.imageProcessor.processImageFile(
        imageFile,
        activeFile,
        true
        // Show rename modal
      );
      if (result.success && result.linkText) {
        editor.replaceSelection(result.linkText);
      }
    }
    return true;
  }
  /**
   * Handle paste into frontmatter property
   * This is registered via document paste event with property detection
   */
  async handlePropertyPaste(evt) {
    var _a;
    if (!this.settings.enablePropertyPaste) {
      return false;
    }
    const activeEl = document.activeElement;
    if (!activeEl) {
      return false;
    }
    if (!this.isFrontmatterField(activeEl)) {
      return false;
    }
    if (this.settings.debugMode) {
      console.debug("[Image Manager] Property paste detected", {
        activeElement: activeEl.tagName,
        classes: activeEl.className,
        propertyName: this.getPropertyName(activeEl)
      });
    }
    const files = (_a = evt.clipboardData) == null ? void 0 : _a.files;
    if (!files || files.length === 0) {
      return false;
    }
    let imageFile = null;
    for (let i = 0; i < files.length; i++) {
      const f = files.item(i);
      if (f && f.type.startsWith("image/")) {
        imageFile = f;
        break;
      }
    }
    if (!imageFile) {
      return false;
    }
    const currentEl = document.activeElement;
    if (!currentEl || !this.isFrontmatterField(currentEl)) {
      return false;
    }
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      return false;
    }
    evt.preventDefault();
    evt.stopPropagation();
    evt.stopImmediatePropagation();
    const propertyName = this.getPropertyName(currentEl);
    if (!propertyName) {
      new import_obsidian9.Notice("Could not determine property name");
      return true;
    }
    const result = await this.imageProcessor.processImageFile(
      imageFile,
      activeFile,
      true,
      // Show rename modal for property paste
      true
      // isPropertyInsertion - skip descriptive images
    );
    if (result.success && result.file) {
      const linkValue = this.propertyHandler.formatPropertyLink(result.file, activeFile);
      await this.propertyHandler.setPropertyValue(
        activeFile,
        propertyName,
        result.file
      );
      await new Promise((resolve) => setTimeout(resolve, 300));
      const propertyEl = document.querySelector(
        `.metadata-property[data-property-key="${propertyName}"]`
      );
      if (this.settings.debugMode) {
        console.debug("[Image Manager] Updating property UI", {
          propertyName,
          linkValue,
          propertyElFound: !!propertyEl
        });
      }
      const inputEl = propertyEl == null ? void 0 : propertyEl.querySelector(
        ".metadata-input-longtext, .metadata-input-text, input.metadata-input, textarea.metadata-input"
      );
      if (inputEl) {
        if (this.settings.debugMode) {
          const currentValue = inputEl instanceof HTMLInputElement || inputEl instanceof HTMLTextAreaElement ? inputEl.value : inputEl.textContent || inputEl.innerText;
          console.debug("[Image Manager] Found input field, updating value", {
            elementType: inputEl.tagName,
            currentValue,
            newValue: linkValue
          });
        }
        if (inputEl instanceof HTMLInputElement || inputEl instanceof HTMLTextAreaElement) {
          inputEl.value = linkValue;
        } else {
          inputEl.textContent = linkValue;
          inputEl.innerText = linkValue;
        }
        const inputEvent = new Event("input", { bubbles: true, cancelable: true });
        const changeEvent = new Event("change", { bubbles: true, cancelable: true });
        const blurEvent = new Event("blur", { bubbles: true, cancelable: true });
        inputEl.dispatchEvent(inputEvent);
        setTimeout(() => {
          inputEl.dispatchEvent(changeEvent);
          if (inputEl instanceof HTMLElement) {
            inputEl.focus();
            setTimeout(() => {
              inputEl.blur();
              inputEl.dispatchEvent(blurEvent);
              setTimeout(() => {
                const view = this.app.workspace.getActiveViewOfType(import_obsidian9.MarkdownView);
                if (view == null ? void 0 : view.editor) {
                  view.editor.focus();
                }
              }, 50);
            }, 50);
          }
        }, 50);
      } else {
        const view = this.app.workspace.getActiveViewOfType(import_obsidian9.MarkdownView);
        if (view == null ? void 0 : view.editor) {
          view.editor.focus();
        }
      }
    }
    return true;
  }
  /**
   * Check if an element is a supported frontmatter field
   * Works for both MD and MDX files
   */
  isFrontmatterField(element) {
    const propertyEl = element.closest(".metadata-property");
    if (!propertyEl) {
      return false;
    }
    return element.matches(".metadata-input-longtext") || element.matches(".metadata-input-text") || element.matches("input.metadata-input") || element.matches("textarea.metadata-input") || // Also check if the element itself is an input/textarea/div inside a property
    (element instanceof HTMLInputElement || element instanceof HTMLTextAreaElement || element instanceof HTMLDivElement && element.classList.contains("metadata-input-longtext")) && propertyEl !== null;
  }
  /**
   * Get the property name from a frontmatter field element
   */
  getPropertyName(element) {
    var _a;
    const propertyEl = element.closest(".metadata-property");
    return (_a = propertyEl == null ? void 0 : propertyEl.getAttribute("data-property-key")) != null ? _a : null;
  }
};
var DropHandler = class {
  constructor(app, settings, imageProcessor) {
    this.app = app;
    this.settings = settings;
    this.imageProcessor = imageProcessor;
  }
  /**
   * Update settings reference
   */
  updateSettings(settings) {
    this.settings = settings;
  }
  /**
   * Handle editor drop event
   */
  async handleEditorDrop(evt, editor, view) {
    var _a;
    if (!this.settings.enableRenameOnDrop) {
      return false;
    }
    const files = (_a = evt.dataTransfer) == null ? void 0 : _a.files;
    if (!files || files.length === 0) {
      return false;
    }
    const imageFiles = [];
    for (let i = 0; i < files.length; i++) {
      const f = files.item(i);
      if (f && f.type.startsWith("image/")) {
        imageFiles.push(f);
      }
    }
    if (imageFiles.length === 0) {
      return false;
    }
    evt.preventDefault();
    const activeFile = view.file;
    if (!activeFile) {
      new import_obsidian9.Notice("No active file");
      return true;
    }
    for (let i = 0; i < imageFiles.length; i++) {
      const imageFile = imageFiles[i];
      if (!imageFile) continue;
      const result = await this.imageProcessor.processImageFile(
        imageFile,
        activeFile,
        true
      );
      if (result.success && result.linkText) {
        editor.replaceSelection(result.linkText);
      }
    }
    return true;
  }
};

// src/services/RemoteImageService.ts
var import_obsidian10 = require("obsidian");
var UNSPLASH_PROXY = "https://insert-unsplash-image.cloudy9101.com/";
var RemoteImageService = class {
  constructor(settings) {
    this.settings = settings;
  }
  /**
   * Update settings reference
   */
  updateSettings(settings) {
    this.settings = settings;
  }
  /**
   * Search for images from the specified provider
   */
  async search(query, provider, page = 1) {
    const targetProvider = provider != null ? provider : this.settings.defaultProvider;
    switch (targetProvider) {
      case "unsplash" /* Unsplash */:
        return await this.searchUnsplash(query, page);
      case "pexels" /* Pexels */:
        return await this.searchPexels(query, page);
      case "pixabay" /* Pixabay */:
        return await this.searchPixabay(query, page);
      default:
        throw new Error(`Unsupported provider: ${targetProvider}`);
    }
  }
  /**
   * Search Unsplash
   */
  async searchUnsplash(query, page) {
    var _a;
    let proxyUrl = this.settings.unsplashProxyServer || UNSPLASH_PROXY;
    if (!proxyUrl.endsWith("/")) {
      proxyUrl += "/";
    }
    const orientation = this.mapOrientation(this.settings.defaultOrientation);
    const url = new URL("/search/photos", proxyUrl);
    url.searchParams.set("query", query);
    url.searchParams.set("page", String(page));
    url.searchParams.set("per_page", "20");
    if (orientation) {
      url.searchParams.set("orientation", orientation);
    }
    const response = await (0, import_obsidian10.requestUrl)({ url: url.toString() });
    if (response.status >= 400) {
      console.error("Unsplash API error:", response.status, response.text);
      throw new Error(`Unsplash search failed: ${response.status} - ${response.text}`);
    }
    const data = response.json;
    if (!data || !data.results) {
      console.error("Invalid Unsplash response:", data);
      throw new Error("Invalid response from Unsplash API");
    }
    const results = (_a = data.results) != null ? _a : [];
    return results.map((photo) => this.mapUnsplashPhoto(photo));
  }
  /**
   * Search Pexels
   */
  async searchPexels(query, page) {
    var _a;
    const apiKey = this.settings.pexelsApiKey;
    if (!apiKey) {
      throw new Error("Pexels API key is required. Please configure it in settings.");
    }
    const orientation = this.mapOrientation(this.settings.defaultOrientation);
    const params = new URLSearchParams({
      query,
      page: String(page),
      per_page: "20"
    });
    if (orientation) {
      params.set("orientation", orientation);
    }
    const url = `https://api.pexels.com/v1/search?${params.toString()}`;
    const response = await (0, import_obsidian10.requestUrl)({
      url,
      headers: {
        Authorization: apiKey
      }
    });
    if (response.status >= 400) {
      throw new Error(`Pexels search failed: ${response.status}`);
    }
    const data = response.json;
    const photos = (_a = data.photos) != null ? _a : [];
    return photos.map((photo) => this.mapPexelsPhoto(photo));
  }
  /**
   * Search Pixabay
   */
  async searchPixabay(query, page) {
    var _a;
    const apiKey = this.settings.pixabayApiKey;
    if (!apiKey) {
      throw new Error("Pixabay API key is required. Please configure it in settings.");
    }
    const orientation = this.mapPixabayOrientation(this.settings.defaultOrientation);
    const params = new URLSearchParams({
      key: apiKey,
      q: query,
      page: String(page),
      per_page: "20",
      image_type: "photo"
    });
    if (orientation) {
      params.set("orientation", orientation);
    }
    const url = `https://pixabay.com/api/?${params.toString()}`;
    const response = await (0, import_obsidian10.requestUrl)({ url });
    if (response.status >= 400) {
      throw new Error(`Pixabay search failed: ${response.status}`);
    }
    const data = response.json;
    const hits = (_a = data.hits) != null ? _a : [];
    return hits.map((hit) => this.mapPixabayHit(hit));
  }
  /**
   * Get the download URL for an image based on size preference
   */
  getDownloadUrl(image, size) {
    const targetSize = size != null ? size : this.settings.defaultImageSize;
    switch (targetSize) {
      case "original" /* Original */:
        return image.fullUrl;
      case "large" /* Large */:
        return image.regularUrl;
      case "medium" /* Medium */:
        return image.regularUrl;
      case "small" /* Small */:
        return image.thumbnailUrl;
      default:
        return image.regularUrl;
    }
  }
  /**
   * Download an image and return the binary data
   */
  async downloadImage(image) {
    const url = this.getDownloadUrl(image);
    const response = await (0, import_obsidian10.requestUrl)({ url });
    if (response.status >= 400) {
      throw new Error(`Failed to download image: ${response.status}`);
    }
    return response.arrayBuffer;
  }
  /**
   * Generate referral text for an image (attribution)
   * Based on Image Inserter's referral format
   */
  generateReferralText(image) {
    if (!this.settings.insertReferral) {
      return "";
    }
    const backlink = this.settings.insertBackLink && image.pageUrl ? `[Backlink](${image.pageUrl}) | ` : "";
    let referral = "";
    switch (image.provider) {
      case "unsplash" /* Unsplash */:
        if (image.author && image.authorUrl) {
          const utm = "utm_source=Obsidian%20Image%20Manager&utm_medium=referral";
          referral = `
*${backlink}Photo by [${image.author}](${image.authorUrl}) on [Unsplash](https://unsplash.com/?${utm})*
`;
        }
        break;
      case "pexels" /* Pexels */:
        if (image.author && image.authorUrl) {
          referral = `
*${backlink}Photo by [${image.author}](${image.authorUrl}) on [Pexels](https://www.pexels.com/)*
`;
        }
        break;
      case "pixabay" /* Pixabay */:
        if (image.author && image.authorUrl) {
          referral = `
*${backlink}Image by [${image.author}](${image.authorUrl}) on [Pixabay](https://pixabay.com/)*
`;
        }
        break;
    }
    return referral;
  }
  /**
   * Map orientation setting to API parameter
   */
  mapOrientation(orientation) {
    switch (orientation) {
      case "landscape" /* Landscape */:
        return "landscape";
      case "portrait" /* Portrait */:
        return "portrait";
      case "square" /* Square */:
        return "squarish";
      default:
        return null;
    }
  }
  /**
   * Map orientation for Pixabay (different values)
   */
  mapPixabayOrientation(orientation) {
    switch (orientation) {
      case "landscape" /* Landscape */:
        return "horizontal";
      case "portrait" /* Portrait */:
        return "vertical";
      default:
        return null;
    }
  }
  /**
   * Map Unsplash photo to RemoteImage
   */
  mapUnsplashPhoto(photo) {
    var _a, _b;
    return {
      id: photo.id,
      provider: "unsplash" /* Unsplash */,
      thumbnailUrl: photo.urls.thumb,
      regularUrl: photo.urls.regular,
      fullUrl: photo.urls.full,
      downloadUrl: photo.links.download_location || photo.links.download,
      width: photo.width,
      height: photo.height,
      description: (_b = (_a = photo.description) != null ? _a : photo.alt_description) != null ? _b : "",
      author: photo.user.name,
      authorUrl: photo.user.links.html,
      pageUrl: photo.links.html
    };
  }
  /**
   * Map Pexels photo to RemoteImage
   */
  mapPexelsPhoto(photo) {
    var _a;
    return {
      id: String(photo.id),
      provider: "pexels" /* Pexels */,
      thumbnailUrl: photo.src.tiny,
      regularUrl: photo.src.large,
      fullUrl: photo.src.original,
      downloadUrl: photo.src.original,
      width: photo.width,
      height: photo.height,
      description: (_a = photo.alt) != null ? _a : "",
      author: photo.photographer,
      authorUrl: photo.photographer_url,
      pageUrl: photo.url
    };
  }
  /**
   * Map Pixabay hit to RemoteImage
   */
  mapPixabayHit(hit) {
    return {
      id: String(hit.id),
      provider: "pixabay" /* Pixabay */,
      thumbnailUrl: hit.previewURL,
      regularUrl: hit.webformatURL,
      fullUrl: hit.largeImageURL,
      downloadUrl: hit.largeImageURL,
      width: hit.imageWidth,
      height: hit.imageHeight,
      description: hit.tags,
      author: hit.user,
      authorUrl: `https://pixabay.com/users/${hit.user}-${hit.user_id}/`,
      pageUrl: hit.pageURL
    };
  }
};

// src/services/LocalConversionService.ts
var import_obsidian11 = require("obsidian");
var MARKDOWN_IMAGE_REGEX = /!\[([^\]]*)\]\((https?:\/\/[^\s)]+)\)/g;
var HTML_IMAGE_REGEX = /<img[^>]+src=["'](https?:\/\/[^"']+)["'][^>]*>/g;
var LocalConversionService = class {
  constructor(app, settings, storageManager, imageProcessor) {
    this.app = app;
    this.settings = settings;
    this.storageManager = storageManager;
    this.imageProcessor = imageProcessor;
  }
  /**
   * Update settings reference
   */
  updateSettings(settings) {
    var _a;
    this.settings = settings;
    (_a = this.imageProcessor) == null ? void 0 : _a.updateSettings(settings);
  }
  /**
   * Process a file to convert all remote images to local
   */
  async processFile(file) {
    if (!isMarkdownFile(file)) {
      return 0;
    }
    const content = await this.app.vault.read(file);
    const { newContent, count } = await this.processContent(content, file);
    if (count > 0) {
      await this.app.vault.modify(file, newContent);
    }
    return count;
  }
  /**
   * Process content and replace remote images with local
   */
  async processContent(content, sourceFile) {
    let newContent = content;
    let count = 0;
    const externalImages = this.findExternalImages(content, sourceFile);
    for (const image of externalImages) {
      try {
        const tempPath = await this.downloadAndSave(image.url, sourceFile);
        if (!tempPath) {
          continue;
        }
        const tempFile = this.app.vault.getAbstractFileByPath(tempPath);
        if (!(tempFile instanceof import_obsidian11.TFile)) {
          continue;
        }
        let finalFile = tempFile;
        const suggestedName = image.alt ? this.storageManager.sanitizeFileName(image.alt) : tempFile.basename;
        const result = await this.imageProcessor.renameImageFile(
          tempFile,
          suggestedName,
          sourceFile
        );
        if (result && result.file) {
          finalFile = result.file;
        } else {
          await this.app.fileManager.trashFile(tempFile);
          continue;
        }
        newContent = newContent.replace(image.fullMatch, image.replacement(finalFile.path));
        count++;
      } catch (error) {
        console.error(`Failed to convert image: ${image.url}`, error);
      }
    }
    return { newContent, count };
  }
  /**
   * Check if a position in content is inside a code block
   */
  isInsideCodeBlock(content, position) {
    const fencedCodeBlockRegex = /```[\s\S]*?```/g;
    let match;
    while ((match = fencedCodeBlockRegex.exec(content)) !== null) {
      const start = match.index;
      const end = start + match[0].length;
      if (position >= start && position < end) {
        return true;
      }
    }
    const fencedPositions = Array.from({ length: content.length }, () => false);
    const fencedRegex = /```[\s\S]*?```/g;
    while ((match = fencedRegex.exec(content)) !== null) {
      for (let i = match.index; i < match.index + match[0].length; i++) {
        fencedPositions[i] = true;
      }
    }
    const inlineCodeRegex = /`[^`\n]+`/g;
    while ((match = inlineCodeRegex.exec(content)) !== null) {
      if (fencedPositions[match.index]) {
        continue;
      }
      const start = match.index;
      const end = start + match[0].length;
      if (position >= start && position < end) {
        return true;
      }
    }
    return false;
  }
  /**
   * Find all external images in content
   */
  findExternalImages(content, sourceFile) {
    var _a;
    const matches = [];
    let match;
    const mdRegex = new RegExp(MARKDOWN_IMAGE_REGEX.source, "g");
    while ((match = mdRegex.exec(content)) !== null) {
      const matchIndex = match.index;
      if (this.isInsideCodeBlock(content, matchIndex)) {
        continue;
      }
      const fullMatch = match[0];
      const alt = (_a = match[1]) != null ? _a : "";
      const url = match[2];
      if (url && this.isExternalUrl(url) && this.isImageUrl(url)) {
        const sourceFileRef = sourceFile;
        matches.push({
          fullMatch,
          url,
          alt,
          replacement: (localPath) => {
            const savedFile = this.app.vault.getAbstractFileByPath(localPath);
            if (savedFile instanceof import_obsidian11.TFile) {
              const link = this.storageManager.generateMarkdownLink(savedFile, sourceFileRef.path);
              if (alt && link.startsWith("![") && link.includes("]]")) {
                return link.replace("]]", `|${alt}]]`);
              }
              if (link.startsWith("![") && link.includes("](")) {
                const pathMatch = link.match(/\]\(([^)]+)\)/);
                if (pathMatch) {
                  return `![${alt}](${pathMatch[1]})`;
                }
                return `![${alt}](${encodeURI(localPath)})`;
              }
              return link;
            }
            const localFile = this.app.vault.getAbstractFileByPath(localPath);
            if (localFile instanceof import_obsidian11.TFile) {
              const relativePath = this.storageManager.getRelativePath(sourceFileRef, localFile);
              return `![${alt}](${encodeURI(relativePath)})`;
            }
            return `![${alt}](${encodeURI(localPath)})`;
          }
        });
      }
    }
    const htmlRegex = new RegExp(HTML_IMAGE_REGEX.source, "g");
    while ((match = htmlRegex.exec(content)) !== null) {
      const matchIndex = match.index;
      if (this.isInsideCodeBlock(content, matchIndex)) {
        continue;
      }
      const fullMatch = match[0];
      const url = match[1];
      if (url && this.isExternalUrl(url) && this.isImageUrl(url)) {
        matches.push({
          fullMatch,
          url,
          replacement: (localPath) => `![](${encodeURI(localPath)})`
        });
      }
    }
    return matches;
  }
  /**
   * Check if a URL is external
   */
  isExternalUrl(url) {
    try {
      const parsed = new URL(url);
      return ["http:", "https:"].includes(parsed.protocol);
    } catch (e) {
      return false;
    }
  }
  /**
   * Check if a URL is likely an image URL
   * Returns false for known non-image embeds (YouTube, etc.)
   */
  isImageUrl(url) {
    try {
      const parsed = new URL(url);
      const hostname = parsed.hostname.toLowerCase();
      const pathname = parsed.pathname.toLowerCase();
      const nonImageDomains = [
        "youtube.com",
        "www.youtube.com",
        "youtu.be",
        "m.youtube.com",
        "youtube-nocookie.com",
        "www.youtube-nocookie.com",
        "vimeo.com",
        "www.vimeo.com",
        "spotify.com",
        "open.spotify.com",
        "soundcloud.com",
        "www.soundcloud.com"
      ];
      if (nonImageDomains.some((domain) => hostname === domain || hostname.endsWith("." + domain))) {
        return false;
      }
      const imageExtensions = [".jpg", ".jpeg", ".png", ".gif", ".webp", ".svg", ".bmp", ".ico", ".tiff", ".tif"];
      const hasImageExtension = imageExtensions.some((ext) => pathname.endsWith(ext));
      const searchParams = parsed.searchParams.toString().toLowerCase();
      const hasImageInQuery = imageExtensions.some((ext) => searchParams.includes(ext));
      return hasImageExtension || hasImageInQuery;
    } catch (e) {
      return false;
    }
  }
  /**
   * Download an image and save it locally
   */
  async downloadAndSave(url, sourceFile) {
    var _a, _b, _c;
    try {
      const response = await (0, import_obsidian11.requestUrl)({ url });
      if (response.status >= 400) {
        throw new Error(`HTTP ${response.status}`);
      }
      const contentType = (_a = response.headers["content-type"]) != null ? _a : "image/png";
      const extension = this.storageManager.getExtensionFromMimeType(contentType);
      const arrayBuffer = response.arrayBuffer;
      const urlPath = new URL(url).pathname;
      const urlFileName = (_c = (_b = urlPath.split("/").pop()) == null ? void 0 : _b.split(".")[0]) != null ? _c : "image";
      const baseName = this.storageManager.sanitizeFileName(urlFileName);
      const filePath = await this.storageManager.getAvailablePath(baseName, extension, sourceFile);
      await this.storageManager.saveFile(arrayBuffer, filePath);
      return filePath;
    } catch (error) {
      console.error(`Failed to download ${url}:`, error);
      return null;
    }
  }
  /**
   * Process all files in the vault
   */
  async processAllFiles() {
    const files = this.app.vault.getMarkdownFiles();
    let totalCount = 0;
    for (const file of files) {
      if (this.settings.supportedExtensions.includes(file.extension)) {
        const count = await this.processFile(file);
        totalCount += count;
      }
    }
    return totalCount;
  }
  /**
   * Register event handlers for automatic conversion
   */
  registerEventHandlers(onNoteOpen, onNoteSave) {
  }
};

// src/services/BannerService.ts
var import_obsidian12 = require("obsidian");
var ObsidianModule2 = __toESM(require("obsidian"), 1);
function setCssProperties(element, props) {
  const obsidian = ObsidianModule2;
  if (typeof obsidian.setCssProperties === "function") {
    obsidian.setCssProperties(element, props);
  } else {
    for (const [key, value] of Object.entries(props)) {
      element.style.setProperty(key, value);
    }
  }
}
var CSS_CLASSES = {
  Main: "image-manager-banner",
  Icon: "banner-icon",
  Static: "static"
};
var PATTERNS = {
  Wikilink: /^!?\[\[([^\]]+?)(\|([^\]]+?))?\]\]$/,
  Markdown: /^!?\[([^\]]*)\]\(([^)]+?)\)$/,
  MarkdownBare: /^!?<([^>]+)>$/,
  Weblink: /^https?:\/\//i
};
var bannerDataStore = /* @__PURE__ */ new Map();
var BannerService = class {
  constructor(app, settings) {
    this.app = app;
    this.settings = settings;
  }
  /**
   * Update settings reference
   */
  updateSettings(settings) {
    this.settings = settings;
  }
  /**
   * Get the current device type
   */
  getCurrentDevice() {
    if (import_obsidian12.Platform.isPhone) {
      return "phone" /* Phone */;
    }
    if (import_obsidian12.Platform.isTablet) {
      return "tablet" /* Tablet */;
    }
    return "desktop" /* Desktop */;
  }
  /**
   * Get device-specific settings
   */
  getDeviceSettings() {
    const device = this.getCurrentDevice();
    return this.settings.banner[device];
  }
  /**
   * Process all open markdown views
   */
  processAll() {
    const deviceSettings = this.getDeviceSettings();
    this.app.workspace.iterateRootLeaves((leaf) => {
      const view = leaf.view;
      if (view instanceof import_obsidian12.MarkdownView) {
        if (deviceSettings.enabled) {
          const file = (view == null ? void 0 : view.file) || null;
          void this.process(file, view);
        } else {
          this.remove(view);
        }
      }
    });
  }
  /**
   * Process a single file/view
   */
  async process(file, view) {
    const data = await this.compute(file, view);
    if (!data) {
      return;
    }
    if (!data.image) {
      this.remove(view, data);
      return;
    }
    if (!data.icon) {
      data.needsUpdate = true;
    }
    const deviceSettings = this.getDeviceSettings();
    if (deviceSettings.enabled) {
      await this.render(data, view);
    }
  }
  /**
   * Compute banner data from frontmatter
   */
  async compute(file, targetView) {
    var _a;
    const view = targetView || this.getActiveView();
    if (!file || !(view instanceof import_obsidian12.MarkdownView)) {
      return null;
    }
    const deviceSettings = this.getDeviceSettings();
    if (!deviceSettings.enabled) {
      return null;
    }
    if (!this.settings.supportedExtensions.includes(file.extension) && file.extension !== "md") {
      return null;
    }
    const leafId = (_a = view == null ? void 0 : view.leaf) == null ? void 0 : _a.id;
    if (!leafId) {
      return null;
    }
    const oldData = bannerDataStore.get(leafId) || this.createDefaultBannerData();
    const newData = this.createDefaultBannerData(view, oldData.viewMode);
    if (file.extension === "md") {
      const cache = this.app.metadataCache.getFileCache(file);
      if ((cache == null ? void 0 : cache.frontmatter) != null) {
        const propertySettings2 = this.settings.banner.properties;
        const imageProp2 = propertySettings2.imageProperty;
        const iconProp2 = propertySettings2.iconProperty;
        if (propertySettings2.hidePropertyEnabled && propertySettings2.hideProperty) {
          const hideProp = propertySettings2.hideProperty;
          const hideValue = cache.frontmatter[hideProp];
          if (hideValue === true || hideValue === "true" || hideValue === 1 || hideValue === "1") {
            return newData;
          }
        }
        const hasBannerProperty = cache.frontmatter[imageProp2] != null;
        const hasIconProperty = deviceSettings.iconEnabled && cache.frontmatter[iconProp2] != null;
        if (!hasBannerProperty && !hasIconProperty) {
          return newData;
        }
      }
    }
    const frontmatter = await getFrontmatter(this.app, file);
    if (!frontmatter) {
      return newData;
    }
    const propertySettings = this.settings.banner.properties;
    if (propertySettings.hidePropertyEnabled && propertySettings.hideProperty) {
      const hideProp = propertySettings.hideProperty;
      const hideValue = frontmatter[hideProp];
      if (hideValue === true || hideValue === "true" || hideValue === 1 || hideValue === "1") {
        return newData;
      }
    }
    const imageProp = propertySettings.imageProperty;
    const iconProp = propertySettings.iconProperty;
    const imageValue = frontmatter[imageProp];
    if (imageValue && typeof imageValue === "string") {
      newData.image = imageValue;
      newData.filepath = file.path;
      if (oldData.filepath !== newData.filepath) {
        newData.needsUpdate = true;
        newData.isImageChange = true;
      } else if (oldData.image !== newData.image) {
        newData.needsUpdate = true;
        newData.isImageChange = true;
        if (await this.isImagePropertiesUpdate(oldData.image, newData.image, view)) {
          newData.isImagePropsUpdate = true;
          newData.isImageChange = false;
        }
      }
    }
    if (deviceSettings.iconEnabled) {
      const iconValue = frontmatter[iconProp];
      if (iconValue && typeof iconValue === "string") {
        newData.icon = iconValue;
        if (oldData.icon !== newData.icon) {
          newData.needsUpdate = true;
        }
      } else if (oldData.icon) {
        newData.icon = null;
        newData.needsUpdate = true;
      }
    }
    return newData;
  }
  /**
   * Render banner in the view
   */
  async render(data, targetView) {
    var _a;
    const { image, viewMode, lastViewMode, needsUpdate, isImageChange } = data;
    const view = targetView || this.getActiveView();
    if (!view || !(view instanceof import_obsidian12.MarkdownView)) {
      return;
    }
    const container = view.containerEl;
    if (!container || !needsUpdate && lastViewMode === viewMode) {
      return;
    }
    const containers = container.querySelectorAll(
      ".cm-scroller, .markdown-reading-view > .markdown-preview-view"
    );
    if (containers.length === 0) {
      return;
    }
    const imageOptions = await this.parseLink(image || "", view);
    const banners = this.updateBannerElements(data, imageOptions, containers);
    const deviceSettings = this.getDeviceSettings();
    if (deviceSettings.iconEnabled && data.icon) {
      await this.updateIcons(data, banners, view);
    }
    if (!isImageChange) {
      this.replaceBanners(banners);
    } else {
      this.injectBanners(banners, containers);
    }
    data.lastViewMode = viewMode;
    container.dataset.imBanner = "";
    const leafId = (_a = view == null ? void 0 : view.leaf) == null ? void 0 : _a.id;
    if (leafId) {
      bannerDataStore.set(leafId, data);
    }
  }
  /**
   * Update banner DOM elements
   */
  updateBannerElements(data, imgOptions, containers) {
    const { isImageChange, isImagePropsUpdate } = data;
    const banners = [];
    containers.forEach((container) => {
      var _a;
      let element = container.querySelector(`.${CSS_CLASSES.Main}`);
      if (!element) {
        element = document.createElement("div");
        element.classList.add(CSS_CLASSES.Main);
      }
      banners.push(element);
      if (isImageChange || isImagePropsUpdate) {
        if (isImageChange) {
          element.classList.remove(CSS_CLASSES.Static);
          (_a = element.firstChild) == null ? void 0 : _a.remove();
        }
        const cssVars = {
          "--im-banner-img-x": `${imgOptions.x}px`,
          "--im-banner-img-y": `${imgOptions.y}px`,
          "--im-banner-size": imgOptions.repeatable ? "auto" : "cover",
          "--im-banner-repeat": imgOptions.repeatable ? "repeat" : "no-repeat",
          "--im-banner-url": "none"
        };
        if (imgOptions.type === "video" /* Video */) {
          const video = document.createElement("video");
          video.controls = false;
          video.autoplay = true;
          video.muted = true;
          video.loop = true;
          video.src = imgOptions.url.replace(/^"|"$/g, "");
          element.appendChild(video);
        } else {
          cssVars["--im-banner-url"] = `url(${imgOptions.url})`;
        }
        setCssProperties(container, cssVars);
      }
    });
    return banners;
  }
  /**
   * Update icon elements on banners
   */
  async updateIcons(data, banners, view) {
    var _a;
    const deviceSettings = this.getDeviceSettings();
    let calculatedFontSize = null;
    for (const banner of banners) {
      const { icon } = data;
      let iconContainer = banner.querySelector(`.${CSS_CLASSES.Icon}`);
      const hasContainer = iconContainer !== null;
      if (hasContainer) {
        iconContainer == null ? void 0 : iconContainer.classList.add(CSS_CLASSES.Static);
      }
      if (deviceSettings.iconEnabled && icon) {
        if (!hasContainer) {
          iconContainer = document.createElement("div");
          iconContainer.classList.add(CSS_CLASSES.Icon);
          const innerDiv = document.createElement("div");
          iconContainer.appendChild(innerDiv);
          banner.prepend(iconContainer);
        }
        const iconElement = iconContainer == null ? void 0 : iconContainer.querySelector("div");
        if (!iconElement) continue;
        const iconData = await this.parseIcon(icon, view);
        let value = ((_a = iconData.value) == null ? void 0 : _a.replace(/([#.:[\\]"])/g, "\\$1")) || "";
        iconElement.dataset.type = iconData.type;
        if (iconData.type === "link" /* Link */) {
          setCssProperties(iconElement, {
            "--im-banner-icon-value": `url(${value})`
          });
        } else {
          calculatedFontSize = calculatedFontSize != null ? calculatedFontSize : this.calculateFontSize(value, deviceSettings.iconSize);
          setCssProperties(iconElement, {
            "--im-banner-icon-value": `"${value}"`,
            "--im-banner-icon-fontsize": calculatedFontSize
          });
        }
      } else if (hasContainer && iconContainer) {
        data.icon = null;
        iconContainer.remove();
      }
    }
  }
  /**
   * Inject banners into containers
   */
  injectBanners(banners, containers) {
    const deviceSettings = this.getDeviceSettings();
    const shouldAnimate = deviceSettings.animation;
    containers.forEach((container, index) => {
      const banner = banners[index];
      if (banner) {
        banner.classList.remove(CSS_CLASSES.Static);
        container.prepend(banner);
        if (shouldAnimate) {
          void banner.offsetHeight;
          requestAnimationFrame(() => {
            banner.onanimationend = () => {
              banner.classList.add(CSS_CLASSES.Static);
            };
          });
        } else {
          banner.classList.add(CSS_CLASSES.Static);
        }
      }
    });
  }
  /**
   * Replace banners (no animation)
   */
  replaceBanners(banners) {
    banners.forEach((banner) => {
      banner.classList.add(CSS_CLASSES.Static);
    });
  }
  /**
   * Remove banner from view
   */
  remove(view, data) {
    var _a;
    const targetView = view || (data == null ? void 0 : data.filepath) ? this.getActiveView() : null;
    if (!(targetView instanceof import_obsidian12.MarkdownView)) {
      return;
    }
    const container = targetView.containerEl;
    if (!container) {
      return;
    }
    const targets = container.querySelectorAll(`.${CSS_CLASSES.Main}`);
    targets.forEach((t) => t.remove());
    const leafId = (_a = targetView == null ? void 0 : targetView.leaf) == null ? void 0 : _a.id;
    if (leafId) {
      bannerDataStore.delete(leafId);
    }
    delete container.dataset.imBanner;
  }
  /**
   * Apply current settings to DOM
   */
  applySettings() {
    var _a;
    const deviceSettings = this.getDeviceSettings();
    const height = deviceSettings.height;
    const noteOffset = deviceSettings.noteOffset;
    const viewOffset = deviceSettings.viewOffset;
    const radius = deviceSettings.borderRadius;
    const padding = deviceSettings.padding;
    const fade = deviceSettings.fade;
    const cssVars = {
      "--im-banner-height": `${height}px`,
      "--im-banner-note-offset": `${noteOffset}px`,
      "--im-banner-view-offset": `${viewOffset}px`,
      "--im-banner-radius": `${radius[0]}px ${radius[1]}px ${radius[2]}px ${radius[3]}px`,
      "--im-banner-padding": `${padding}px`,
      "--im-banner-mask": fade ? "revert-layer" : "initial",
      "--im-banner-mask-webkit": fade ? "revert-layer" : "initial"
    };
    if (deviceSettings.iconEnabled) {
      const iconFrame = (_a = deviceSettings.iconFrame) != null ? _a : true;
      cssVars["--im-banner-icon-size-w"] = `${deviceSettings.iconSize}px`;
      cssVars["--im-banner-icon-size-h"] = `${deviceSettings.iconSize}px`;
      cssVars["--im-banner-icon-radius"] = `${deviceSettings.iconRadius}px`;
      cssVars["--im-banner-icon-align-h"] = deviceSettings.iconAlignmentH;
      cssVars["--im-banner-icon-align-v"] = deviceSettings.iconAlignmentV;
      cssVars["--im-banner-icon-offset-x"] = `${deviceSettings.iconOffsetX}px`;
      cssVars["--im-banner-icon-offset-y"] = `${deviceSettings.iconOffsetY}px`;
      cssVars["--im-banner-icon-border"] = iconFrame ? `${deviceSettings.iconBorder}px` : "0px";
      cssVars["--im-banner-icon-background"] = iconFrame && deviceSettings.iconBackground ? "revert-layer" : "transparent";
    }
    setCssProperties(document.body, cssVars);
    this.processAll();
  }
  /**
   * Parse image link string into options
   */
  async parseLink(str, view) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k;
    let url = null;
    let displayText = null;
    let external = false;
    let obsidianUrl = false;
    let options = { x: 0, y: 0, repeatable: false };
    const wikilinkMatch = str.match(PATTERNS.Wikilink);
    if (wikilinkMatch) {
      url = (_b = (_a = wikilinkMatch[1]) == null ? void 0 : _a.trim()) != null ? _b : null;
      displayText = (_d = (_c = wikilinkMatch[3]) == null ? void 0 : _c.trim()) != null ? _d : null;
    }
    const markdownMatch = str.match(PATTERNS.Markdown);
    const markdownBareMatch = str.match(PATTERNS.MarkdownBare);
    if (markdownMatch) {
      displayText = (_f = (_e = markdownMatch[1]) == null ? void 0 : _e.trim()) != null ? _f : null;
      url = (_h = (_g = markdownMatch[2]) == null ? void 0 : _g.trim()) != null ? _h : null;
    } else if (markdownBareMatch) {
      url = (_j = (_i = markdownBareMatch[1]) == null ? void 0 : _i.trim()) != null ? _j : null;
      displayText = null;
    }
    if (!url) {
      url = str;
      displayText = null;
    }
    external = PATTERNS.Weblink.test(url);
    if (this.isObsidianUrl(url)) {
      const urlStr = url.replace("obsidian://open", "");
      const params = new URLSearchParams(urlStr);
      const file = params.get("file");
      if (file) {
        url = file;
        obsidianUrl = true;
        external = false;
        displayText = null;
      }
    }
    if (url.startsWith("file:")) {
      url = url.replace(/^file:\/{1,}/, import_obsidian12.Platform.resourcePathPrefix);
      external = true;
    }
    const hashIndex = url.indexOf("#");
    if ((external || obsidianUrl) && hashIndex !== -1) {
      options = this.parseImageProperties(url.substring(hashIndex + 1));
      url = url.replace(/#.*/, "").trim();
    }
    if (displayText) {
      options = this.parseImageProperties(displayText);
    }
    if (!external) {
      const vault = this.app.vault;
      let file = null;
      if ((view == null ? void 0 : view.file) && (url.includes("../") || url.includes("./") || !url.startsWith("/") && url.includes("/"))) {
        const resolvedPath = this.app.metadataCache.getFirstLinkpathDest(url, view.file.path);
        if (resolvedPath) {
          file = resolvedPath;
        }
      }
      if (!file) {
        const files = vault.getFiles().filter((f) => f.path === url || f.name === url);
        file = files.find((f) => f.path === url) || files.find((f) => f.name === url) || null;
      }
      if (file) {
        url = vault.getResourcePath(file);
      }
    }
    let type = null;
    try {
      const urlObj = new URL(url);
      const extension = (_k = urlObj.pathname.split(".").pop()) == null ? void 0 : _k.toLowerCase();
      const imageExtensions = ["jpg", "jpeg", "png", "gif", "svg", "webp"];
      const videoExtensions = ["mp4", "webm", "ogg", "ogv", "mov"];
      if (extension && imageExtensions.includes(extension)) {
        type = "image" /* Image */;
      } else if (extension && videoExtensions.includes(extension)) {
        type = "video" /* Video */;
      }
      if (!type) {
        try {
          const response = await (0, import_obsidian12.requestUrl)({ url, method: "HEAD" });
          const contentType = (response == null ? void 0 : response.headers["content-type"]) || null;
          if (contentType) {
            if (contentType.includes("image")) {
              type = "image" /* Image */;
            } else if (contentType.includes("video")) {
              type = "video" /* Video */;
            }
          }
        } catch (e) {
        }
      }
    } catch (e) {
    }
    return {
      url: `"${url.trim().replace(/(["\\])/g, "\\$1")}"`,
      external,
      type,
      ...options
    };
  }
  /**
   * Parse image properties (offset, repeat) from string
   */
  parseImageProperties(str) {
    const values = str.toLowerCase();
    const repeatable = values.includes("repeat");
    const sizes = str.split(/x|,/);
    const numbers = sizes.filter((v) => !isNaN(parseInt(v.trim(), 10)));
    let x = 0;
    let y = 0;
    const num0 = numbers[0];
    const num1 = numbers[1];
    if (numbers.length === 2 && num0 && num1) {
      x = parseInt(num0.trim(), 10);
      y = parseInt(num1.trim(), 10);
    } else if (numbers.length === 1 && num0) {
      y = parseInt(num0.trim(), 10);
    }
    return { x, y, repeatable };
  }
  /**
   * Parse icon property
   */
  async parseIcon(icon, view) {
    const str = icon || "";
    const result = { value: null, type: "text" /* Text */ };
    const isExplicitLink = PATTERNS.Wikilink.test(str) || PATTERNS.Markdown.test(str) || PATTERNS.MarkdownBare.test(str) || PATTERNS.Weblink.test(str) || this.isObsidianUrl(str);
    const imageExtensions = /\.(jpg|jpeg|png|gif|svg|webp|bmp|ico|avif)$/i;
    const isFilePath = imageExtensions.test(str);
    if (isExplicitLink || isFilePath) {
      result.type = "link" /* Link */;
      const data = await this.parseLink(str, view);
      result.value = data.url;
    } else {
      result.value = str;
    }
    return result;
  }
  /**
   * Check if only image properties changed (not the URL)
   */
  async isImagePropertiesUpdate(oldStr, newStr, view) {
    if (!oldStr || !newStr) {
      return false;
    }
    const oldOpt = await this.parseLink(oldStr, view);
    const newOpt = await this.parseLink(newStr, view);
    return oldOpt.url === newOpt.url;
  }
  /**
   * Check if URL is an obsidian:// URL
   */
  isObsidianUrl(url) {
    return url.startsWith("obsidian://open");
  }
  /**
   * Calculate font size to fit text in icon
   * Uses actual DOM measurement for accurate sizing
   */
  calculateFontSize(textContent, iconSize) {
    const temp = document.createElement("span");
    temp.addClass("im-measure-temp");
    setCssProperties(temp, {
      position: "absolute",
      visibility: "hidden",
      "white-space": "nowrap",
      padding: "0",
      margin: "0",
      left: "-9999px"
    });
    temp.textContent = textContent.toUpperCase();
    document.body.appendChild(temp);
    const checkWidth = iconSize - 16;
    let fontSize = iconSize;
    setCssProperties(temp, { "font-size": `${fontSize}px` });
    while (temp.offsetWidth > checkWidth && fontSize > 1) {
      fontSize -= 1;
      setCssProperties(temp, { "font-size": `${fontSize}px` });
    }
    document.body.removeChild(temp);
    return `${fontSize}px`;
  }
  /**
   * Get active markdown view
   */
  getActiveView() {
    return this.app.workspace.getActiveViewOfType(import_obsidian12.MarkdownView);
  }
  /**
   * Create default banner data object
   */
  createDefaultBannerData(view, lastViewMode) {
    let viewMode = null;
    if (view) {
      const mode = view.getMode();
      viewMode = mode === "preview" ? "preview" : "source";
    }
    return {
      filepath: null,
      image: null,
      icon: null,
      viewMode,
      lastViewMode: lastViewMode || null,
      isImagePropsUpdate: false,
      isImageChange: false,
      needsUpdate: false
    };
  }
  /**
   * Cleanup when plugin unloads
   */
  destroy() {
    document.querySelectorAll(`.${CSS_CLASSES.Main}`).forEach((el) => el.remove());
    bannerDataStore.clear();
  }
};

// src/modals/FilePickerModal.ts
var import_obsidian13 = require("obsidian");
var FilePickerModal = class extends import_obsidian13.Modal {
  constructor(app, imageProcessor, propertyHandler, insertToProperty = false, propertyName) {
    super(app);
    this.imageProcessor = imageProcessor;
    this.propertyHandler = propertyHandler;
    this.insertToProperty = insertToProperty;
    this.propertyName = propertyName;
  }
  onOpen() {
    const { contentEl } = this;
    const input = contentEl.createEl("input", {
      type: "file",
      attr: {
        accept: "image/*",
        multiple: "true",
        style: "display: none;"
      }
    });
    input.addEventListener("change", () => {
      void this.handleFileSelection(input);
    });
    input.addEventListener("cancel", () => {
      this.close();
    });
    input.click();
  }
  async handleFileSelection(input) {
    this.close();
    const files = input.files;
    if (!files || files.length === 0) {
      new import_obsidian13.Notice("No files selected");
      return;
    }
    const activeFile = this.getActiveFile();
    if (!activeFile) {
      new import_obsidian13.Notice("No active file");
      return;
    }
    const view = this.app.workspace.getActiveViewOfType(import_obsidian13.MarkdownView);
    const editor = view == null ? void 0 : view.editor;
    for (let i = 0; i < files.length; i++) {
      const file = files.item(i);
      if (!file || !file.type.startsWith("image/")) {
        continue;
      }
      if (this.insertToProperty) {
        if (!this.propertyName || this.propertyName.trim() === "") {
          new import_obsidian13.Notice("Please specify a property name in settings");
          return;
        }
        const result = await this.imageProcessor.processImageFile(
          file,
          activeFile,
          true,
          // Show rename modal
          true
          // isPropertyInsertion - skip descriptive images
        );
        if (result.success && result.file) {
          await this.propertyHandler.setPropertyValue(
            activeFile,
            this.propertyName,
            result.file
          );
        }
      } else {
        const result = await this.imageProcessor.processImageFile(
          file,
          activeFile,
          true
          // Show rename modal
        );
        if (result.success && result.linkText && editor) {
          editor.replaceSelection(result.linkText);
        }
      }
    }
    new import_obsidian13.Notice(`Added ${files.length} image(s)`);
  }
  getActiveFile() {
    var _a;
    const view = this.app.workspace.getActiveViewOfType(import_obsidian13.MarkdownView);
    return (_a = view == null ? void 0 : view.file) != null ? _a : null;
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
function openFilePicker(app, imageProcessor, propertyHandler, insertToProperty = false, propertyName) {
  new FilePickerModal(app, imageProcessor, propertyHandler, insertToProperty, propertyName).open();
}

// src/modals/RemoteSearchModal.ts
var import_obsidian14 = require("obsidian");
var RemoteSearchModal = class extends import_obsidian14.Modal {
  constructor(app, settings, remoteService, imageProcessor, propertyHandler, options = {}) {
    super(app);
    this.container = null;
    this.queryInput = null;
    this.providerSelect = null;
    this.sizeSelect = null;
    this.scrollArea = null;
    this.imagesList = null;
    this.loadingContainer = null;
    this.currentQuery = "";
    this.currentPage = 1;
    this.currentResults = [];
    this.isLoading = false;
    this.selectedImage = 0;
    this.settings = settings;
    this.remoteService = remoteService;
    this.imageProcessor = imageProcessor;
    this.propertyHandler = propertyHandler;
    this.options = options;
    this.currentProvider = settings.defaultProvider;
    this.containerEl.addClass("image-inserter-container");
  }
  onOpen() {
    const { contentEl } = this;
    this.container = contentEl.createDiv({ cls: "container" });
    const inputGroup = this.container.createDiv({ cls: "input-group" });
    this.queryInput = inputGroup.createEl("input", {
      type: "text",
      cls: "query-input",
      attr: { placeholder: "Search images...", autofocus: "true" }
    });
    this.providerSelect = inputGroup.createEl("select", { cls: "selector" });
    this.providerSelect.createEl("option", { text: "Unsplash", value: "unsplash" /* Unsplash */ });
    this.providerSelect.createEl("option", { text: "Pexels", value: "pexels" /* Pexels */ });
    this.providerSelect.createEl("option", { text: "Pixabay", value: "pixabay" /* Pixabay */ });
    this.providerSelect.value = this.currentProvider;
    this.sizeSelect = inputGroup.createEl("select", { cls: "selector" });
    this.sizeSelect.createEl("option", { text: "Original", value: "original" /* Original */ });
    this.sizeSelect.createEl("option", { text: "Large", value: "large" /* Large */ });
    this.sizeSelect.createEl("option", { text: "Medium", value: "medium" /* Medium */ });
    this.sizeSelect.createEl("option", { text: "Small", value: "small" /* Small */ });
    this.sizeSelect.value = this.settings.defaultImageSize;
    this.loadingContainer = this.container.createDiv({ cls: "loading-container" });
    const loaderIcon = this.loadingContainer.createDiv({ cls: "loader-icon" });
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("width", "24");
    svg.setAttribute("height", "24");
    svg.setAttribute("viewBox", "0 0 24 24");
    svg.setAttribute("fill", "none");
    svg.setAttribute("stroke", "currentColor");
    svg.setAttribute("stroke-width", "2");
    svg.setAttribute("stroke-linecap", "round");
    svg.setAttribute("stroke-linejoin", "round");
    svg.classList.add("lucide", "lucide-loader-circle");
    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
    path.setAttribute("d", "M21 12a9 9 0 1 1-6.219-8.56");
    svg.appendChild(path);
    loaderIcon.appendChild(svg);
    this.showLoading(false);
    this.scrollArea = this.container.createDiv({ cls: "scroll-area" });
    this.imagesList = this.scrollArea.createDiv({ cls: "images-list" });
    this.setupEventListeners();
    setTimeout(() => {
      var _a;
      (_a = this.queryInput) == null ? void 0 : _a.focus();
    }, 50);
  }
  setupEventListeners() {
    var _a, _b, _c, _d;
    const debouncedSearch = (0, import_obsidian14.debounce)((query) => {
      if (query.trim()) {
        void this.performSearch(query);
      } else {
        this.clearResults();
      }
    }, 1e3, true);
    (_a = this.queryInput) == null ? void 0 : _a.addEventListener("input", (e) => {
      const query = e.target.value;
      this.currentQuery = query;
      this.showLoading(true);
      debouncedSearch(query);
    });
    (_b = this.queryInput) == null ? void 0 : _b.addEventListener("keydown", (e) => {
      var _a2;
      if (e.key === "Enter") {
        e.preventDefault();
        const query = ((_a2 = this.queryInput) == null ? void 0 : _a2.value.trim()) || "";
        if (query) {
          void this.performSearch(query);
        } else if (this.currentResults.length > 0 && this.selectedImage < this.currentResults.length) {
          const image = this.currentResults[this.selectedImage];
          if (image) {
            void this.insertImage(image);
          }
        }
      } else if (e.ctrlKey && e.key === "n") {
        e.preventDefault();
        if (this.currentResults.length > 0) {
          this.selectedImage = (this.selectedImage + 1) % this.currentResults.length;
          this.renderResults();
        }
      } else if (e.ctrlKey && e.key === "p") {
        e.preventDefault();
        if (this.currentResults.length > 0) {
          this.selectedImage = (this.selectedImage - 1 + this.currentResults.length) % this.currentResults.length;
          this.renderResults();
        }
      }
    });
    (_c = this.providerSelect) == null ? void 0 : _c.addEventListener("change", (e) => {
      this.currentProvider = e.target.value;
      this.currentPage = 1;
      if (this.currentQuery) {
        this.showLoading(true);
        void this.performSearch(this.currentQuery);
      }
    });
    (_d = this.sizeSelect) == null ? void 0 : _d.addEventListener("change", (e) => {
      const size = e.target.value;
      this.settings.defaultImageSize = size;
      if (this.currentQuery) {
        this.showLoading(true);
        void this.performSearch(this.currentQuery);
      }
    });
  }
  async performSearch(query) {
    if (this.isLoading) return;
    this.currentQuery = query;
    this.currentPage = 1;
    this.isLoading = true;
    this.showLoading(true);
    try {
      this.currentResults = await this.remoteService.search(
        query,
        this.currentProvider,
        this.currentPage
      );
      this.selectedImage = 0;
      this.renderResults();
    } catch (error) {
      console.error("Search failed:", error);
      const errorMsg = error instanceof Error ? error.message : "Search failed";
      new import_obsidian14.Notice(`Request failed, status ${errorMsg}`);
      this.renderError(errorMsg);
    } finally {
      this.isLoading = false;
      this.showLoading(false);
    }
  }
  renderResults() {
    if (!this.imagesList) return;
    this.imagesList.empty();
    if (this.currentResults.length === 0) {
      const noResult = this.imagesList.createDiv({ cls: "no-result-container" });
      noResult.setText("No results found");
      return;
    }
    for (let i = 0; i < this.currentResults.length; i++) {
      const image = this.currentResults[i];
      if (!image) continue;
      const result = this.imagesList.createDiv({
        cls: `query-result${i === this.selectedImage ? " is-selected" : ""}`
      });
      result.createEl("img", {
        attr: {
          src: image.thumbnailUrl,
          alt: image.description || "Image"
        }
      });
      result.addEventListener("click", () => {
        void this.insertImage(image);
      });
      result.addEventListener("mousemove", () => {
        this.selectedImage = i;
        this.renderResults();
      });
    }
    this.renderPagination();
  }
  renderPagination() {
    if (!this.scrollArea) return;
    const existingPagination = this.scrollArea.querySelector(".pagination");
    if (existingPagination) {
      existingPagination.remove();
    }
    const hasMore = this.currentResults.length >= 20;
    if (hasMore || this.currentPage > 1) {
      const pagination = this.scrollArea.createDiv({ cls: "pagination" });
      if (this.currentPage > 1) {
        const prevBtn = pagination.createEl("button", { cls: "btn", text: "Previous" });
        prevBtn.addEventListener("click", () => {
          this.currentPage--;
          this.showLoading(true);
          void this.performSearch(this.currentQuery);
        });
      }
      if (hasMore) {
        const nextBtn = pagination.createEl("button", { cls: "btn", text: "Next" });
        nextBtn.addEventListener("click", () => {
          this.currentPage++;
          this.showLoading(true);
          void this.performSearch(this.currentQuery);
        });
      }
    }
  }
  renderError(message) {
    if (!this.imagesList) return;
    this.imagesList.empty();
    const errorDiv = this.imagesList.createDiv({ cls: "no-result-container error-text" });
    errorDiv.setText(`Error: ${message}`);
  }
  clearResults() {
    if (this.imagesList) {
      this.imagesList.empty();
    }
    this.currentResults = [];
  }
  showLoading(show) {
    if (this.loadingContainer) {
      this.loadingContainer.style.display = show ? "flex" : "none";
    }
    if (this.scrollArea) {
      if (show) {
        this.scrollArea.addClass("loading");
      } else {
        this.scrollArea.removeClass("loading");
      }
    }
  }
  async insertImage(image) {
    this.close();
    const activeFile = this.getActiveFile();
    if (!activeFile) {
      new import_obsidian14.Notice("No active file");
      return;
    }
    try {
      const downloadUrl = this.remoteService.getDownloadUrl(image, this.settings.defaultImageSize);
      if (this.options.insertToProperty) {
        if (!this.options.propertyName || this.options.propertyName.trim() === "") {
          new import_obsidian14.Notice("Please specify a property name in settings");
          return;
        }
        await this.propertyHandler.insertImageFromUrl(
          downloadUrl,
          activeFile,
          this.options.propertyName,
          image
          // Pass RemoteImage for referral text generation
        );
      } else {
        const result = await this.imageProcessor.processImageUrl(
          downloadUrl,
          activeFile,
          true
          // Show rename modal
        );
        if (result.success && result.linkText) {
          const referralText = this.remoteService.generateReferralText(image);
          const fullText = result.linkText + referralText;
          const view = this.app.workspace.getActiveViewOfType(import_obsidian14.MarkdownView);
          if (view == null ? void 0 : view.editor) {
            view.editor.replaceSelection(fullText);
          }
        }
      }
    } catch (error) {
      console.error("Failed to insert image:", error);
      new import_obsidian14.Notice(`Failed to insert image: ${error instanceof Error ? error.message : String(error)}`);
    }
  }
  getActiveFile() {
    var _a;
    const view = this.app.workspace.getActiveViewOfType(import_obsidian14.MarkdownView);
    return (_a = view == null ? void 0 : view.file) != null ? _a : null;
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
function openRemoteSearch(app, settings, remoteService, imageProcessor, propertyHandler, options = {}) {
  new RemoteSearchModal(app, settings, remoteService, imageProcessor, propertyHandler, options).open();
}

// src/main.ts
var ImageManagerPlugin = class extends import_obsidian16.Plugin {
  async onload() {
    await this.loadSettings();
    this.initializeServices();
    this.registerEventHandlers();
    this.registerCommands();
    this.addSettingTab(new ImageManagerSettingTab(this.app, this));
    this.log("Image Manager plugin loaded");
  }
  onunload() {
    var _a;
    (_a = this.bannerService) == null ? void 0 : _a.destroy();
    this.log("Image Manager plugin unloaded");
  }
  /**
   * Initialize all services
   */
  initializeServices() {
    this.storageManager = new StorageManager(this.app, this.settings);
    this.remoteService = new RemoteImageService(this.settings);
    this.imageProcessor = new ImageProcessor(this.app, this.settings, this.storageManager);
    this.propertyHandler = new PropertyHandler(this.app, this.settings, this.storageManager, this.imageProcessor, this.remoteService);
    this.pasteHandler = new PasteHandler(
      this.app,
      this.settings,
      this.imageProcessor,
      this.propertyHandler
    );
    this.dropHandler = new DropHandler(this.app, this.settings, this.imageProcessor);
    this.conversionService = new LocalConversionService(this.app, this.settings, this.storageManager, this.imageProcessor);
    this.bannerService = new BannerService(this.app, this.settings);
  }
  /**
   * Register event handlers
   */
  registerEventHandlers() {
    this.registerEvent(
      this.app.workspace.on("editor-paste", (evt, editor, view) => {
        void this.pasteHandler.handleEditorPaste(evt, editor, view);
      })
    );
    this.registerEvent(
      this.app.workspace.on("editor-drop", (evt, editor, view) => {
        void this.dropHandler.handleEditorDrop(evt, editor, view);
      })
    );
    this.registerDomEvent(document, "paste", (evt) => {
      const target = evt.target;
      if (!target || !target.closest(".workspace")) {
        return;
      }
      void this.pasteHandler.handlePropertyPaste(evt);
    }, { capture: true });
    this.registerEvent(
      this.app.workspace.on("file-open", (file) => {
        if (!file) {
          return;
        }
        if (this.settings.autoConvertRemoteImages && this.settings.convertOnNoteOpen) {
          if (this.settings.supportedExtensions.includes(file.extension)) {
            void (async () => {
              await new Promise((resolve) => setTimeout(resolve, 500));
              const count = await this.conversionService.processFile(file);
              if (count > 0) {
                new import_obsidian16.Notice(`Converted ${count} remote image(s) to local`);
              }
            })();
          }
        }
        const deviceSettings = this.bannerService.getDeviceSettings();
        if (deviceSettings.enabled && (this.settings.supportedExtensions.includes(file.extension) || file.extension === "md")) {
          const view = this.app.workspace.getActiveViewOfType(import_obsidian16.MarkdownView);
          if (view instanceof import_obsidian16.MarkdownView) {
            void this.bannerService.process(file, view);
          }
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("layout-change", () => {
        const deviceSettings = this.bannerService.getDeviceSettings();
        if (!deviceSettings.enabled) {
          return;
        }
        const view = this.app.workspace.getActiveViewOfType(import_obsidian16.MarkdownView);
        if (view && view.file && (this.settings.supportedExtensions.includes(view.file.extension) || view.file.extension === "md")) {
          void this.bannerService.process(view.file, view);
        }
      })
    );
    this.registerEvent(
      this.app.metadataCache.on("changed", (file) => {
        const deviceSettings = this.bannerService.getDeviceSettings();
        if (!deviceSettings.enabled || !this.settings.supportedExtensions.includes(file.extension) && file.extension !== "md") {
          return;
        }
        this.app.workspace.iterateRootLeaves((leaf) => {
          const view = leaf.view;
          if (view instanceof import_obsidian16.MarkdownView && view.file === file) {
            void this.bannerService.process(file, view);
          }
        });
      })
    );
    this.app.workspace.onLayoutReady(() => {
      this.bannerService.applySettings();
    });
  }
  /**
   * Register commands
   */
  registerCommands() {
    this.addCommand({
      id: "insert-image",
      name: "Insert local image",
      editorCallback: (editor, view) => {
        openFilePicker(this.app, this.imageProcessor, this.propertyHandler);
      }
    });
    this.addCommand({
      id: "search-image",
      name: "Insert remote image",
      editorCallback: (editor, view) => {
        openRemoteSearch(
          this.app,
          this.settings,
          this.remoteService,
          this.imageProcessor,
          this.propertyHandler
        );
      }
    });
    this.addCommand({
      id: "insert-remote-image-to-property",
      name: "Insert remote image to property",
      editorCallback: (editor, view) => {
        openRemoteSearch(
          this.app,
          this.settings,
          this.remoteService,
          this.imageProcessor,
          this.propertyHandler,
          { insertToProperty: true, propertyName: this.settings.defaultPropertyName }
        );
      }
    });
    this.addCommand({
      id: "insert-local-image-to-property",
      name: "Insert local image to property",
      editorCallback: (editor, view) => {
        openFilePicker(
          this.app,
          this.imageProcessor,
          this.propertyHandler,
          true,
          // insertToProperty
          this.settings.defaultPropertyName
        );
      }
    });
    this.addCommand({
      id: "convert-remote-images",
      name: "Convert remote images",
      editorCallback: async (editor, view) => {
        const file = view.file;
        if (!file) {
          new import_obsidian16.Notice("No active file");
          return;
        }
        const count = await this.conversionService.processFile(file);
        if (count > 0) {
          new import_obsidian16.Notice(`Converted ${count} remote image(s) to local`);
        } else {
          new import_obsidian16.Notice("No remote images found");
        }
      }
    });
    this.addCommand({
      id: "convert-all-remote-images",
      name: "Convert all remote images",
      callback: async () => {
        const { openConfirmModal: openConfirmModal2 } = await Promise.resolve().then(() => (init_ConfirmModal(), ConfirmModal_exports));
        const result = await openConfirmModal2(
          this.app,
          "Convert All Remote Images",
          "This will scan all files in your vault and convert every remote image URL to a local file. This action cannot be undone.\n\nEach image will be downloaded and you'll be prompted to rename them. This may take a while if you have many images.\n\nAre you sure you want to proceed?",
          "Yes, convert all images",
          "Cancel"
        );
        if (!result.confirmed) {
          return;
        }
        new import_obsidian16.Notice("Processing all files... This may take a while.");
        const count = await this.conversionService.processAllFiles();
        new import_obsidian16.Notice(`Converted ${count} remote image(s) to local`);
      }
    });
  }
  /**
   * Load settings from storage
   */
  async loadSettings() {
    const data = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, data != null ? data : {});
  }
  /**
   * Save settings to storage
   */
  async saveSettings() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i;
    await this.saveData(this.settings);
    (_a = this.storageManager) == null ? void 0 : _a.updateSettings(this.settings);
    (_b = this.imageProcessor) == null ? void 0 : _b.updateSettings(this.settings);
    (_c = this.propertyHandler) == null ? void 0 : _c.updateSettings(this.settings);
    (_d = this.pasteHandler) == null ? void 0 : _d.updateSettings(this.settings);
    (_e = this.dropHandler) == null ? void 0 : _e.updateSettings(this.settings);
    (_f = this.remoteService) == null ? void 0 : _f.updateSettings(this.settings);
    (_g = this.conversionService) == null ? void 0 : _g.updateSettings(this.settings);
    (_h = this.bannerService) == null ? void 0 : _h.updateSettings(this.settings);
    (_i = this.bannerService) == null ? void 0 : _i.applySettings();
  }
  /**
   * Debug logging
   */
  log(...args) {
    var _a;
    if ((_a = this.settings) == null ? void 0 : _a.debugMode) {
      console.debug("[Image Manager]", ...args);
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21vZGFscy9Db25maXJtTW9kYWwudHMiLCAic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy91dGlscy9zZXR0aW5ncy1jb21wYXQudHMiLCAic3JjL3R5cGVzLnRzIiwgInNyYy9zZXJ2aWNlcy9TdG9yYWdlTWFuYWdlci50cyIsICJzcmMvc2VydmljZXMvSW1hZ2VQcm9jZXNzb3IudHMiLCAic3JjL3V0aWxzL3RlbXBsYXRlLnRzIiwgInNyYy9tb2RhbHMvUmVuYW1lTW9kYWwudHMiLCAic3JjL21vZGFscy9EZXNjcmlwdGl2ZUltYWdlTW9kYWwudHMiLCAic3JjL3V0aWxzL2tlYmFiLWNhc2UudHMiLCAic3JjL3NlcnZpY2VzL1Byb3BlcnR5SGFuZGxlci50cyIsICJzcmMvdXRpbHMvbWR4LWZyb250bWF0dGVyLnRzIiwgInNyYy9zZXJ2aWNlcy9QYXN0ZUhhbmRsZXIudHMiLCAic3JjL3NlcnZpY2VzL1JlbW90ZUltYWdlU2VydmljZS50cyIsICJzcmMvc2VydmljZXMvTG9jYWxDb252ZXJzaW9uU2VydmljZS50cyIsICJzcmMvc2VydmljZXMvQmFubmVyU2VydmljZS50cyIsICJzcmMvbW9kYWxzL0ZpbGVQaWNrZXJNb2RhbC50cyIsICJzcmMvbW9kYWxzL1JlbW90ZVNlYXJjaE1vZGFsLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKipcclxuICogQ29uZmlybWF0aW9uIE1vZGFsXHJcbiAqIFNpbXBsZSBtb2RhbCBmb3IgY29uZmlybWluZyBwb3RlbnRpYWxseSBkZXN0cnVjdGl2ZSBhY3Rpb25zXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29uZmlybVJlc3VsdCB7XHJcblx0Y29uZmlybWVkOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdHByaXZhdGUgdGl0bGU6IHN0cmluZztcclxuXHRwcml2YXRlIG1lc3NhZ2U6IHN0cmluZztcclxuXHRwcml2YXRlIGNvbmZpcm1UZXh0OiBzdHJpbmc7XHJcblx0cHJpdmF0ZSBjYW5jZWxUZXh0OiBzdHJpbmc7XHJcblx0cHJpdmF0ZSByZXNvbHZlOiAocmVzdWx0OiBDb25maXJtUmVzdWx0KSA9PiB2b2lkO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdGFwcDogQXBwLFxyXG5cdFx0dGl0bGU6IHN0cmluZyxcclxuXHRcdG1lc3NhZ2U6IHN0cmluZyxcclxuXHRcdGNvbmZpcm1UZXh0OiBzdHJpbmcgPSAnQ29uZmlybScsXHJcblx0XHRjYW5jZWxUZXh0OiBzdHJpbmcgPSAnQ2FuY2VsJ1xyXG5cdCkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMudGl0bGUgPSB0aXRsZTtcclxuXHRcdHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XHJcblx0XHR0aGlzLmNvbmZpcm1UZXh0ID0gY29uZmlybVRleHQ7XHJcblx0XHR0aGlzLmNhbmNlbFRleHQgPSBjYW5jZWxUZXh0O1xyXG5cdH1cclxuXHJcblx0b25PcGVuKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwsIHRpdGxlRWwgfSA9IHRoaXM7XHJcblx0XHR0aXRsZUVsLnNldFRleHQodGhpcy50aXRsZSk7XHJcblxyXG5cdFx0Ly8gTWVzc2FnZVxyXG5cdFx0Y29uc3QgbWVzc2FnZUVsID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2ltYWdlLW1hbmFnZXItY29uZmlybS1tZXNzYWdlJyB9KTtcclxuXHRcdG1lc3NhZ2VFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogdGhpcy5tZXNzYWdlIH0pO1xyXG5cclxuXHRcdC8vIEJ1dHRvbnNcclxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdpbWFnZS1tYW5hZ2VyLWNvbmZpcm0tYnV0dG9ucycgfSk7XHJcblx0XHRcclxuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHR0ZXh0OiB0aGlzLmNvbmZpcm1UZXh0LFxyXG5cdFx0XHRjbHM6ICdtb2QtY3RhJyxcclxuXHRcdH0pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnJlc29sdmUoeyBjb25maXJtZWQ6IHRydWUgfSk7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHR0ZXh0OiB0aGlzLmNhbmNlbFRleHQsXHJcblx0XHR9KS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0dGhpcy5yZXNvbHZlKHsgY29uZmlybWVkOiBmYWxzZSB9KTtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gRm9jdXMgdGhlIGNvbmZpcm0gYnV0dG9uXHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0Y29uc3QgY29uZmlybUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcubW9kLWN0YScpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5cdFx0XHRjb25maXJtQnV0dG9uPy5mb2N1cygpO1xyXG5cdFx0fSwgNTApO1xyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgb3BlbkFuZEF3YWl0UmVzdWx0KCk6IFByb21pc2U8Q29uZmlybVJlc3VsdD4ge1xyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcblx0XHRcdHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XHJcblx0XHRcdHRoaXMub3BlbigpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogT3BlbiBhIGNvbmZpcm1hdGlvbiBtb2RhbCBhbmQgcmV0dXJuIHRoZSByZXN1bHRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBvcGVuQ29uZmlybU1vZGFsKFxyXG5cdGFwcDogQXBwLFxyXG5cdHRpdGxlOiBzdHJpbmcsXHJcblx0bWVzc2FnZTogc3RyaW5nLFxyXG5cdGNvbmZpcm1UZXh0OiBzdHJpbmcgPSAnQ29uZmlybScsXHJcblx0Y2FuY2VsVGV4dDogc3RyaW5nID0gJ0NhbmNlbCdcclxuKTogUHJvbWlzZTxDb25maXJtUmVzdWx0PiB7XHJcblx0Y29uc3QgbW9kYWwgPSBuZXcgQ29uZmlybU1vZGFsKGFwcCwgdGl0bGUsIG1lc3NhZ2UsIGNvbmZpcm1UZXh0LCBjYW5jZWxUZXh0KTtcclxuXHRyZXR1cm4gbW9kYWwub3BlbkFuZEF3YWl0UmVzdWx0KCk7XHJcbn1cclxuIiwgIi8qKlxuICogSW1hZ2UgTWFuYWdlciBQbHVnaW5cbiAqIEluc2VydCwgcmVuYW1lLCBhbmQgc29ydCBleHRlcm5hbCBpbWFnZXMgYnkgdHJhbnNmb3JtaW5nIHRoZW0gaW50byBsb2NhbCBmaWxlc1xuICovXG5cbmltcG9ydCB7IEVkaXRvciwgTWFya2Rvd25WaWV3LCBOb3RpY2UsIFBsdWdpbiwgVEZpbGUsIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTLCBJbWFnZU1hbmFnZXJTZXR0aW5ncywgSW1hZ2VNYW5hZ2VyU2V0dGluZ1RhYiB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgU3RvcmFnZU1hbmFnZXIgfSBmcm9tICcuL3NlcnZpY2VzL1N0b3JhZ2VNYW5hZ2VyJztcbmltcG9ydCB7IEltYWdlUHJvY2Vzc29yIH0gZnJvbSAnLi9zZXJ2aWNlcy9JbWFnZVByb2Nlc3Nvcic7XG5pbXBvcnQgeyBQcm9wZXJ0eUhhbmRsZXIgfSBmcm9tICcuL3NlcnZpY2VzL1Byb3BlcnR5SGFuZGxlcic7XG5pbXBvcnQgeyBQYXN0ZUhhbmRsZXIsIERyb3BIYW5kbGVyIH0gZnJvbSAnLi9zZXJ2aWNlcy9QYXN0ZUhhbmRsZXInO1xuaW1wb3J0IHsgUmVtb3RlSW1hZ2VTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9SZW1vdGVJbWFnZVNlcnZpY2UnO1xuaW1wb3J0IHsgTG9jYWxDb252ZXJzaW9uU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvTG9jYWxDb252ZXJzaW9uU2VydmljZSc7XG5pbXBvcnQgeyBCYW5uZXJTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9CYW5uZXJTZXJ2aWNlJztcbmltcG9ydCB7IG9wZW5GaWxlUGlja2VyIH0gZnJvbSAnLi9tb2RhbHMvRmlsZVBpY2tlck1vZGFsJztcbmltcG9ydCB7IG9wZW5SZW1vdGVTZWFyY2ggfSBmcm9tICcuL21vZGFscy9SZW1vdGVTZWFyY2hNb2RhbCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEltYWdlTWFuYWdlclBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncztcblxuXHQvLyBTZXJ2aWNlc1xuXHRwcml2YXRlIHN0b3JhZ2VNYW5hZ2VyOiBTdG9yYWdlTWFuYWdlcjtcblx0cHJpdmF0ZSBpbWFnZVByb2Nlc3NvcjogSW1hZ2VQcm9jZXNzb3I7XG5cdHByaXZhdGUgcHJvcGVydHlIYW5kbGVyOiBQcm9wZXJ0eUhhbmRsZXI7XG5cdHByaXZhdGUgcGFzdGVIYW5kbGVyOiBQYXN0ZUhhbmRsZXI7XG5cdHByaXZhdGUgZHJvcEhhbmRsZXI6IERyb3BIYW5kbGVyO1xuXHRwcml2YXRlIHJlbW90ZVNlcnZpY2U6IFJlbW90ZUltYWdlU2VydmljZTtcblx0cHJpdmF0ZSBjb252ZXJzaW9uU2VydmljZTogTG9jYWxDb252ZXJzaW9uU2VydmljZTtcblx0cHJpdmF0ZSBiYW5uZXJTZXJ2aWNlOiBCYW5uZXJTZXJ2aWNlO1xuXG5cdGFzeW5jIG9ubG9hZCgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0Ly8gSW5pdGlhbGl6ZSBzZXJ2aWNlc1xuXHRcdHRoaXMuaW5pdGlhbGl6ZVNlcnZpY2VzKCk7XG5cblx0XHQvLyBSZWdpc3RlciBldmVudCBoYW5kbGVyc1xuXHRcdHRoaXMucmVnaXN0ZXJFdmVudEhhbmRsZXJzKCk7XG5cblx0XHQvLyBSZWdpc3RlciBjb21tYW5kc1xuXHRcdHRoaXMucmVnaXN0ZXJDb21tYW5kcygpO1xuXG5cdFx0Ly8gQWRkIHNldHRpbmdzIHRhYlxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgSW1hZ2VNYW5hZ2VyU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG5cdFx0dGhpcy5sb2coJ0ltYWdlIE1hbmFnZXIgcGx1Z2luIGxvYWRlZCcpO1xuXHR9XG5cblx0b251bmxvYWQoKTogdm9pZCB7XG5cdFx0Ly8gQ2xlYW4gdXAgYmFubmVyIHNlcnZpY2Vcblx0XHR0aGlzLmJhbm5lclNlcnZpY2U/LmRlc3Ryb3koKTtcblx0XHRcblx0XHR0aGlzLmxvZygnSW1hZ2UgTWFuYWdlciBwbHVnaW4gdW5sb2FkZWQnKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBJbml0aWFsaXplIGFsbCBzZXJ2aWNlc1xuXHQgKi9cblx0cHJpdmF0ZSBpbml0aWFsaXplU2VydmljZXMoKTogdm9pZCB7XG5cdFx0dGhpcy5zdG9yYWdlTWFuYWdlciA9IG5ldyBTdG9yYWdlTWFuYWdlcih0aGlzLmFwcCwgdGhpcy5zZXR0aW5ncyk7XG5cdFx0dGhpcy5yZW1vdGVTZXJ2aWNlID0gbmV3IFJlbW90ZUltYWdlU2VydmljZSh0aGlzLnNldHRpbmdzKTtcblx0XHR0aGlzLmltYWdlUHJvY2Vzc29yID0gbmV3IEltYWdlUHJvY2Vzc29yKHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzLCB0aGlzLnN0b3JhZ2VNYW5hZ2VyKTtcblx0XHR0aGlzLnByb3BlcnR5SGFuZGxlciA9IG5ldyBQcm9wZXJ0eUhhbmRsZXIodGhpcy5hcHAsIHRoaXMuc2V0dGluZ3MsIHRoaXMuc3RvcmFnZU1hbmFnZXIsIHRoaXMuaW1hZ2VQcm9jZXNzb3IsIHRoaXMucmVtb3RlU2VydmljZSk7XG5cdFx0dGhpcy5wYXN0ZUhhbmRsZXIgPSBuZXcgUGFzdGVIYW5kbGVyKFxuXHRcdFx0dGhpcy5hcHAsXG5cdFx0XHR0aGlzLnNldHRpbmdzLFxuXHRcdFx0dGhpcy5pbWFnZVByb2Nlc3Nvcixcblx0XHRcdHRoaXMucHJvcGVydHlIYW5kbGVyXG5cdFx0KTtcblx0XHR0aGlzLmRyb3BIYW5kbGVyID0gbmV3IERyb3BIYW5kbGVyKHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzLCB0aGlzLmltYWdlUHJvY2Vzc29yKTtcblx0XHR0aGlzLmNvbnZlcnNpb25TZXJ2aWNlID0gbmV3IExvY2FsQ29udmVyc2lvblNlcnZpY2UodGhpcy5hcHAsIHRoaXMuc2V0dGluZ3MsIHRoaXMuc3RvcmFnZU1hbmFnZXIsIHRoaXMuaW1hZ2VQcm9jZXNzb3IpO1xuXHRcdHRoaXMuYmFubmVyU2VydmljZSA9IG5ldyBCYW5uZXJTZXJ2aWNlKHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZWdpc3RlciBldmVudCBoYW5kbGVyc1xuXHQgKi9cblx0cHJpdmF0ZSByZWdpc3RlckV2ZW50SGFuZGxlcnMoKTogdm9pZCB7XG5cdFx0Ly8gRWRpdG9yIHBhc3RlIGhhbmRsZXJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2VkaXRvci1wYXN0ZScsIChldnQ6IENsaXBib2FyZEV2ZW50LCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdHZvaWQgdGhpcy5wYXN0ZUhhbmRsZXIuaGFuZGxlRWRpdG9yUGFzdGUoZXZ0LCBlZGl0b3IsIHZpZXcpO1xuXHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0Ly8gRWRpdG9yIGRyb3AgaGFuZGxlclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbignZWRpdG9yLWRyb3AnLCAoZXZ0OiBEcmFnRXZlbnQsIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0dm9pZCB0aGlzLmRyb3BIYW5kbGVyLmhhbmRsZUVkaXRvckRyb3AoZXZ0LCBlZGl0b3IsIHZpZXcpO1xuXHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0Ly8gRE9NIHBhc3RlIGhhbmRsZXIgZm9yIGZyb250bWF0dGVyIHByb3BlcnRpZXNcblx0XHQvLyBVc2UgY2FwdHVyZSBwaGFzZSBidXQgYmUgZGVmZW5zaXZlIC0gb25seSBoYW5kbGUgaWYgd2UncmUgZGVmaW5pdGVseSBpbiBhIHByb3BlcnR5IGZpZWxkXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAncGFzdGUnLCAoZXZ0OiBDbGlwYm9hcmRFdmVudCkgPT4ge1xuXHRcdFx0Ly8gT25seSBoYW5kbGUgaWYgd2UncmUgaW4gdGhlIE9ic2lkaWFuIHdvcmtzcGFjZSAobm90IHN5c3RlbSBVSSBsaWtlIHRpdGxlIGJhcilcblx0XHRcdGNvbnN0IHRhcmdldCA9IGV2dC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRpZiAoIXRhcmdldCB8fCAhdGFyZ2V0LmNsb3Nlc3QoJy53b3Jrc3BhY2UnKSkge1xuXHRcdFx0XHRyZXR1cm47IC8vIE5vdCBpbiB3b3Jrc3BhY2UsIGRvbid0IGludGVyZmVyZVxuXHRcdFx0fVxuXHRcdFx0dm9pZCB0aGlzLnBhc3RlSGFuZGxlci5oYW5kbGVQcm9wZXJ0eVBhc3RlKGV2dCk7XG5cdFx0fSwgeyBjYXB0dXJlOiB0cnVlIH0pO1xuXG5cdFx0Ly8gRmlsZSBvcGVuIGhhbmRsZXIgZm9yIGF1dG8tY29udmVyc2lvbiBhbmQgYmFubmVyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKCdmaWxlLW9wZW4nLCAoZmlsZTogVEZpbGUgfCBudWxsKSA9PiB7XG5cdFx0XHRcdGlmICghZmlsZSkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEF1dG8tY29udmVyc2lvbiAobm9uLWJsb2NraW5nKVxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5hdXRvQ29udmVydFJlbW90ZUltYWdlcyAmJiB0aGlzLnNldHRpbmdzLmNvbnZlcnRPbk5vdGVPcGVuKSB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Muc3VwcG9ydGVkRXh0ZW5zaW9ucy5pbmNsdWRlcyhmaWxlLmV4dGVuc2lvbikpIHtcblx0XHRcdFx0XHRcdC8vIEZpcmUtYW5kLWZvcmdldDogZG9uJ3QgYmxvY2sgZmlsZSBvcGVuXG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdC8vIFNtYWxsIGRlbGF5IHRvIGxldCBmaWxlIGZ1bGx5IGxvYWRcblx0XHRcdFx0XHRcdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBjb3VudCA9IGF3YWl0IHRoaXMuY29udmVyc2lvblNlcnZpY2UucHJvY2Vzc0ZpbGUoZmlsZSk7XG5cdFx0XHRcdFx0XHRcdGlmIChjb3VudCA+IDApIHtcblx0XHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBDb252ZXJ0ZWQgJHtjb3VudH0gcmVtb3RlIGltYWdlKHMpIHRvIGxvY2FsYCk7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmVmcmVzaCB0aGUgdmlldyB0byBzaG93IHVwZGF0ZWQgY29udGVudFxuXHRcdFx0XHRcdFx0XHRcdC8vIFRoZSBmaWxlIG1vZGlmaWNhdGlvbiB3aWxsIHRyaWdnZXIgT2JzaWRpYW4ncyBVSSByZWZyZXNoIGF1dG9tYXRpY2FsbHlcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBCYW5uZXIgcmVuZGVyaW5nIC0gb25seSBpZiBlbmFibGVkIGFuZCBmaWxlIGV4dGVuc2lvbiBpcyBzdXBwb3J0ZWRcblx0XHRcdFx0Ly8gQWxzbyBhbGxvdyAnbWQnIGFzIGEgZmFsbGJhY2sgaW4gY2FzZSB1c2VyIGRpZG4ndCBpbmNsdWRlIGl0IGluIHN1cHBvcnRlZEV4dGVuc2lvbnNcblx0XHRcdFx0Y29uc3QgZGV2aWNlU2V0dGluZ3MgPSB0aGlzLmJhbm5lclNlcnZpY2UuZ2V0RGV2aWNlU2V0dGluZ3MoKTtcblx0XHRcdFx0aWYgKGRldmljZVNldHRpbmdzLmVuYWJsZWQgJiYgKHRoaXMuc2V0dGluZ3Muc3VwcG9ydGVkRXh0ZW5zaW9ucy5pbmNsdWRlcyhmaWxlLmV4dGVuc2lvbikgfHwgZmlsZS5leHRlbnNpb24gPT09ICdtZCcpKSB7XG5cdFx0XHRcdFx0Y29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0XHRcdFx0aWYgKHZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcpIHtcblx0XHRcdFx0XHRcdHZvaWQgdGhpcy5iYW5uZXJTZXJ2aWNlLnByb2Nlc3MoZmlsZSwgdmlldyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHQvLyBMYXlvdXQgY2hhbmdlIGhhbmRsZXIgZm9yIGJhbm5lclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbignbGF5b3V0LWNoYW5nZScsICgpID0+IHtcblx0XHRcdFx0Y29uc3QgZGV2aWNlU2V0dGluZ3MgPSB0aGlzLmJhbm5lclNlcnZpY2UuZ2V0RGV2aWNlU2V0dGluZ3MoKTtcblx0XHRcdFx0aWYgKCFkZXZpY2VTZXR0aW5ncy5lbmFibGVkKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG5cdFx0XHRcdC8vIEFsc28gYWxsb3cgJ21kJyBhcyBhIGZhbGxiYWNrIGluIGNhc2UgdXNlciBkaWRuJ3QgaW5jbHVkZSBpdCBpbiBzdXBwb3J0ZWRFeHRlbnNpb25zXG5cdFx0XHRcdGlmICh2aWV3ICYmIHZpZXcuZmlsZSAmJiAodGhpcy5zZXR0aW5ncy5zdXBwb3J0ZWRFeHRlbnNpb25zLmluY2x1ZGVzKHZpZXcuZmlsZS5leHRlbnNpb24pIHx8IHZpZXcuZmlsZS5leHRlbnNpb24gPT09ICdtZCcpKSB7XG5cdFx0XHRcdFx0Ly8gUHJvY2VzcyBpZiB0aGlzIHZpZXcgaGFzbid0IGJlZW4gcHJvY2Vzc2VkIHlldFxuXHRcdFx0XHRcdHZvaWQgdGhpcy5iYW5uZXJTZXJ2aWNlLnByb2Nlc3Modmlldy5maWxlLCB2aWV3KTtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0Ly8gTWV0YWRhdGEgY2hhbmdlIGhhbmRsZXIgZm9yIGJhbm5lciB1cGRhdGVzXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdFx0dGhpcy5hcHAubWV0YWRhdGFDYWNoZS5vbignY2hhbmdlZCcsIChmaWxlOiBURmlsZSkgPT4ge1xuXHRcdFx0XHRjb25zdCBkZXZpY2VTZXR0aW5ncyA9IHRoaXMuYmFubmVyU2VydmljZS5nZXREZXZpY2VTZXR0aW5ncygpO1xuXHRcdFx0XHQvLyBBbHNvIGFsbG93ICdtZCcgYXMgYSBmYWxsYmFjayBpbiBjYXNlIHVzZXIgZGlkbid0IGluY2x1ZGUgaXQgaW4gc3VwcG9ydGVkRXh0ZW5zaW9uc1xuXHRcdFx0XHRpZiAoIWRldmljZVNldHRpbmdzLmVuYWJsZWQgfHwgKCF0aGlzLnNldHRpbmdzLnN1cHBvcnRlZEV4dGVuc2lvbnMuaW5jbHVkZXMoZmlsZS5leHRlbnNpb24pICYmIGZpbGUuZXh0ZW5zaW9uICE9PSAnbWQnKSkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIE9ubHkgaXRlcmF0ZSBsZWF2ZXMgdGhhdCBhcmUgbWFya2Rvd24gdmlld3MgZm9yIHRoaXMgZmlsZVxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZVJvb3RMZWF2ZXMoKGxlYWY6IFdvcmtzcGFjZUxlYWYpID0+IHtcblx0XHRcdFx0XHRjb25zdCB2aWV3ID0gbGVhZi52aWV3IGFzIE1hcmtkb3duVmlldztcblx0XHRcdFx0XHRpZiAodmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldyAmJiB2aWV3LmZpbGUgPT09IGZpbGUpIHtcblx0XHRcdFx0XHRcdHZvaWQgdGhpcy5iYW5uZXJTZXJ2aWNlLnByb2Nlc3MoZmlsZSwgdmlldyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdC8vIEFwcGx5IGJhbm5lciBzZXR0aW5ncyB3aGVuIGxheW91dCBpcyByZWFkeVxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcblx0XHRcdHRoaXMuYmFubmVyU2VydmljZS5hcHBseVNldHRpbmdzKCk7XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogUmVnaXN0ZXIgY29tbWFuZHNcblx0ICovXG5cdHByaXZhdGUgcmVnaXN0ZXJDb21tYW5kcygpOiB2b2lkIHtcblx0XHQvLyBJbnNlcnQgbG9jYWwgaW1hZ2Vcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdpbnNlcnQtaW1hZ2UnLFxuXHRcdFx0bmFtZTogJ0luc2VydCBsb2NhbCBpbWFnZScsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0b3BlbkZpbGVQaWNrZXIodGhpcy5hcHAsIHRoaXMuaW1hZ2VQcm9jZXNzb3IsIHRoaXMucHJvcGVydHlIYW5kbGVyKTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHQvLyBJbnNlcnQgcmVtb3RlIGltYWdlXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnc2VhcmNoLWltYWdlJyxcblx0XHRcdG5hbWU6ICdJbnNlcnQgcmVtb3RlIGltYWdlJyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHRvcGVuUmVtb3RlU2VhcmNoKFxuXHRcdFx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MsXG5cdFx0XHRcdFx0dGhpcy5yZW1vdGVTZXJ2aWNlLFxuXHRcdFx0XHRcdHRoaXMuaW1hZ2VQcm9jZXNzb3IsXG5cdFx0XHRcdFx0dGhpcy5wcm9wZXJ0eUhhbmRsZXJcblx0XHRcdFx0KTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHQvLyBJbnNlcnQgcmVtb3RlIGltYWdlIHRvIHByb3BlcnR5XG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnaW5zZXJ0LXJlbW90ZS1pbWFnZS10by1wcm9wZXJ0eScsXG5cdFx0XHRuYW1lOiAnSW5zZXJ0IHJlbW90ZSBpbWFnZSB0byBwcm9wZXJ0eScsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0b3BlblJlbW90ZVNlYXJjaChcblx0XHRcdFx0XHR0aGlzLmFwcCxcblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLFxuXHRcdFx0XHRcdHRoaXMucmVtb3RlU2VydmljZSxcblx0XHRcdFx0XHR0aGlzLmltYWdlUHJvY2Vzc29yLFxuXHRcdFx0XHRcdHRoaXMucHJvcGVydHlIYW5kbGVyLFxuXHRcdFx0XHRcdHsgaW5zZXJ0VG9Qcm9wZXJ0eTogdHJ1ZSwgcHJvcGVydHlOYW1lOiB0aGlzLnNldHRpbmdzLmRlZmF1bHRQcm9wZXJ0eU5hbWUgfVxuXHRcdFx0XHQpO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vIEluc2VydCBsb2NhbCBpbWFnZSB0byBwcm9wZXJ0eVxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2luc2VydC1sb2NhbC1pbWFnZS10by1wcm9wZXJ0eScsXG5cdFx0XHRuYW1lOiAnSW5zZXJ0IGxvY2FsIGltYWdlIHRvIHByb3BlcnR5Jyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHRvcGVuRmlsZVBpY2tlcihcblx0XHRcdFx0XHR0aGlzLmFwcCxcblx0XHRcdFx0XHR0aGlzLmltYWdlUHJvY2Vzc29yLFxuXHRcdFx0XHRcdHRoaXMucHJvcGVydHlIYW5kbGVyLFxuXHRcdFx0XHRcdHRydWUsIC8vIGluc2VydFRvUHJvcGVydHlcblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmRlZmF1bHRQcm9wZXJ0eU5hbWVcblx0XHRcdFx0KTtcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHQvLyBDb252ZXJ0IHJlbW90ZSBpbWFnZXMgaW4gY3VycmVudCBmaWxlXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnY29udmVydC1yZW1vdGUtaW1hZ2VzJyxcblx0XHRcdG5hbWU6ICdDb252ZXJ0IHJlbW90ZSBpbWFnZXMnLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGZpbGUgPSB2aWV3LmZpbGU7XG5cdFx0XHRcdGlmICghZmlsZSkge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBmaWxlJyk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgY291bnQgPSBhd2FpdCB0aGlzLmNvbnZlcnNpb25TZXJ2aWNlLnByb2Nlc3NGaWxlKGZpbGUpO1xuXHRcdFx0XHRpZiAoY291bnQgPiAwKSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShgQ29udmVydGVkICR7Y291bnR9IHJlbW90ZSBpbWFnZShzKSB0byBsb2NhbGApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoJ05vIHJlbW90ZSBpbWFnZXMgZm91bmQnKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vIENvbnZlcnQgcmVtb3RlIGltYWdlcyBpbiBhbGwgZmlsZXNcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdjb252ZXJ0LWFsbC1yZW1vdGUtaW1hZ2VzJyxcblx0XHRcdG5hbWU6ICdDb252ZXJ0IGFsbCByZW1vdGUgaW1hZ2VzJyxcblx0XHRcdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHsgb3BlbkNvbmZpcm1Nb2RhbCB9ID0gYXdhaXQgaW1wb3J0KCcuL21vZGFscy9Db25maXJtTW9kYWwnKTtcblx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgb3BlbkNvbmZpcm1Nb2RhbChcblx0XHRcdFx0XHR0aGlzLmFwcCxcblx0XHRcdFx0XHQnQ29udmVydCBBbGwgUmVtb3RlIEltYWdlcycsXG5cdFx0XHRcdFx0J1RoaXMgd2lsbCBzY2FuIGFsbCBmaWxlcyBpbiB5b3VyIHZhdWx0IGFuZCBjb252ZXJ0IGV2ZXJ5IHJlbW90ZSBpbWFnZSBVUkwgdG8gYSBsb2NhbCBmaWxlLiBUaGlzIGFjdGlvbiBjYW5ub3QgYmUgdW5kb25lLlxcblxcbkVhY2ggaW1hZ2Ugd2lsbCBiZSBkb3dubG9hZGVkIGFuZCB5b3VcXCdsbCBiZSBwcm9tcHRlZCB0byByZW5hbWUgdGhlbS4gVGhpcyBtYXkgdGFrZSBhIHdoaWxlIGlmIHlvdSBoYXZlIG1hbnkgaW1hZ2VzLlxcblxcbkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBwcm9jZWVkPycsXG5cdFx0XHRcdFx0J1llcywgY29udmVydCBhbGwgaW1hZ2VzJyxcblx0XHRcdFx0XHQnQ2FuY2VsJ1xuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGlmICghcmVzdWx0LmNvbmZpcm1lZCkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdG5ldyBOb3RpY2UoJ1Byb2Nlc3NpbmcgYWxsIGZpbGVzLi4uIFRoaXMgbWF5IHRha2UgYSB3aGlsZS4nKTtcblx0XHRcdFx0Y29uc3QgY291bnQgPSBhd2FpdCB0aGlzLmNvbnZlcnNpb25TZXJ2aWNlLnByb2Nlc3NBbGxGaWxlcygpO1xuXHRcdFx0XHRuZXcgTm90aWNlKGBDb252ZXJ0ZWQgJHtjb3VudH0gcmVtb3RlIGltYWdlKHMpIHRvIGxvY2FsYCk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIExvYWQgc2V0dGluZ3MgZnJvbSBzdG9yYWdlXG5cdCAqL1xuXHRhc3luYyBsb2FkU2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKSBhcyBQYXJ0aWFsPEltYWdlTWFuYWdlclNldHRpbmdzPiB8IG51bGw7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGRhdGEgPz8ge30pO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNhdmUgc2V0dGluZ3MgdG8gc3RvcmFnZVxuXHQgKi9cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cblx0XHQvLyBVcGRhdGUgc2VydmljZXMgd2l0aCBuZXcgc2V0dGluZ3Ncblx0XHR0aGlzLnN0b3JhZ2VNYW5hZ2VyPy51cGRhdGVTZXR0aW5ncyh0aGlzLnNldHRpbmdzKTtcblx0XHR0aGlzLmltYWdlUHJvY2Vzc29yPy51cGRhdGVTZXR0aW5ncyh0aGlzLnNldHRpbmdzKTtcblx0XHR0aGlzLnByb3BlcnR5SGFuZGxlcj8udXBkYXRlU2V0dGluZ3ModGhpcy5zZXR0aW5ncyk7XG5cdFx0dGhpcy5wYXN0ZUhhbmRsZXI/LnVwZGF0ZVNldHRpbmdzKHRoaXMuc2V0dGluZ3MpO1xuXHRcdHRoaXMuZHJvcEhhbmRsZXI/LnVwZGF0ZVNldHRpbmdzKHRoaXMuc2V0dGluZ3MpO1xuXHRcdHRoaXMucmVtb3RlU2VydmljZT8udXBkYXRlU2V0dGluZ3ModGhpcy5zZXR0aW5ncyk7XG5cdFx0dGhpcy5jb252ZXJzaW9uU2VydmljZT8udXBkYXRlU2V0dGluZ3ModGhpcy5zZXR0aW5ncyk7XG5cdFx0XG5cdFx0Ly8gVXBkYXRlIGFuZCBhcHBseSBiYW5uZXIgc2V0dGluZ3Ncblx0XHR0aGlzLmJhbm5lclNlcnZpY2U/LnVwZGF0ZVNldHRpbmdzKHRoaXMuc2V0dGluZ3MpO1xuXHRcdHRoaXMuYmFubmVyU2VydmljZT8uYXBwbHlTZXR0aW5ncygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIERlYnVnIGxvZ2dpbmdcblx0ICovXG5cdHByaXZhdGUgbG9nKC4uLmFyZ3M6IHVua25vd25bXSk6IHZvaWQge1xuXHRcdGlmICh0aGlzLnNldHRpbmdzPy5kZWJ1Z01vZGUpIHtcblx0XHRcdGNvbnNvbGUuZGVidWcoJ1tJbWFnZSBNYW5hZ2VyXScsIC4uLmFyZ3MpO1xuXHRcdH1cblx0fVxufVxuIiwgIi8qKlxyXG4gKiBJbWFnZSBNYW5hZ2VyIFBsdWdpbiBTZXR0aW5nc1xyXG4gKiBTZXR0aW5ncyB0YWIgd2l0aCBTZXR0aW5nR3JvdXAgY29tcGF0aWJpbGl0eSBmb3IgT2JzaWRpYW4gMS4xMS4wK1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgUGxhdGZvcm0sIFBsdWdpblNldHRpbmdUYWIgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IGNyZWF0ZVNldHRpbmdzR3JvdXAgfSBmcm9tICcuL3V0aWxzL3NldHRpbmdzLWNvbXBhdCc7XHJcbmltcG9ydCB7XHJcblx0SW1hZ2VNYW5hZ2VyU2V0dGluZ3MsXHJcblx0REVGQVVMVF9TRVRUSU5HUyxcclxuXHRJbWFnZVByb3ZpZGVyLFxyXG5cdEltYWdlT3JpZW50YXRpb24sXHJcblx0SW1hZ2VTaXplLFxyXG5cdFByb3BlcnR5TGlua0Zvcm1hdCxcclxuXHRBdHRhY2htZW50TG9jYXRpb24sXHJcblx0RGV2aWNlVHlwZSxcclxuXHRERUZBVUxUX0JBTk5FUl9ERVZJQ0VfU0VUVElOR1MsXHJcbn0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCB0eXBlIEltYWdlTWFuYWdlclBsdWdpbiBmcm9tICcuL21haW4nO1xyXG5cclxuZXhwb3J0IHsgREVGQVVMVF9TRVRUSU5HUyB9O1xyXG5leHBvcnQgdHlwZSB7IEltYWdlTWFuYWdlclNldHRpbmdzIH07XHJcblxyXG5leHBvcnQgY2xhc3MgSW1hZ2VNYW5hZ2VyU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogSW1hZ2VNYW5hZ2VyUGx1Z2luO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBJbWFnZU1hbmFnZXJQbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuXHRcdC8vIEdlbmVyYWwgU2V0dGluZ3NcclxuXHRcdHRoaXMucmVuZGVyR2VuZXJhbFNldHRpbmdzKGNvbnRhaW5lckVsKTtcclxuXHJcblx0XHQvLyBJbWFnZSBTZXJ2aWNlc1xyXG5cdFx0dGhpcy5yZW5kZXJJbWFnZVNlcnZpY2VzU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG5cclxuXHRcdC8vIFByb3BlcnR5IEluc2VydGlvblxyXG5cdFx0dGhpcy5yZW5kZXJQcm9wZXJ0eVNldHRpbmdzKGNvbnRhaW5lckVsKTtcclxuXHJcblx0XHQvLyBDb252ZXJzaW9uXHJcblx0XHR0aGlzLnJlbmRlckNvbnZlcnNpb25TZXR0aW5ncyhjb250YWluZXJFbCk7XHJcblxyXG5cdFx0Ly8gUmVuYW1lIE9wdGlvbnNcclxuXHRcdHRoaXMucmVuZGVyUmVuYW1lU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG5cclxuXHRcdC8vIEJhbm5lciBJbWFnZXNcclxuXHRcdHRoaXMucmVuZGVyQmFubmVyU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG5cclxuXHRcdC8vIEFkdmFuY2VkXHJcblx0XHR0aGlzLnJlbmRlckFkdmFuY2VkU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJHZW5lcmFsU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHQvLyBHZW5lcmFsIHNldHRpbmdzIHdpdGhvdXQgaGVhZGluZyAoZmlyc3Qgc2VjdGlvbiBkb2Vzbid0IG5lZWQgYSBoZWFkaW5nKVxyXG5cdFx0Y29uc3QgZ3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lckVsLCB1bmRlZmluZWQsICdpbWFnZS1tYW5hZ2VyJyk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0VuYWJsZSByZW5hbWUgb24gcGFzdGUnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdTaG93IHJlbmFtZSBkaWFsb2cgd2hlbiBwYXN0aW5nIGltYWdlcycpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVJlbmFtZU9uUGFzdGUpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVSZW5hbWVPblBhc3RlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0VuYWJsZSByZW5hbWUgb24gZHJhZyBhbmQgZHJvcCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ1Nob3cgcmVuYW1lIGRpYWxvZyB3aGVuIGRyb3BwaW5nIGltYWdlcycpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVJlbmFtZU9uRHJvcClcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVJlbmFtZU9uRHJvcCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdJbWFnZSBuYW1lIHRlbXBsYXRlJylcclxuXHRcdFx0XHQuc2V0RGVzYygnVGVtcGxhdGUgZm9yIGdlbmVyYXRlZCBpbWFnZSBuYW1lcy4gVmFyaWFibGVzOiB7e2ZpbGVOYW1lfX0sIHt7ZGlyTmFtZX19LCB7e0RBVEU6WVlZWS1NTS1ERH19LCB7e1RJTUU6SEgtbW0tc3N9fScpXHJcblx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcclxuXHRcdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCd7e2ZpbGVOYW1lfX0nKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW1hZ2VOYW1lVGVtcGxhdGUpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbWFnZU5hbWVUZW1wbGF0ZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdBdHRhY2htZW50IGxvY2F0aW9uJylcclxuXHRcdFx0XHQuc2V0RGVzYygnV2hlcmUgdG8gc2F2ZSBpbnNlcnRlZCBpbWFnZXMnKVxyXG5cdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuXHRcdFx0XHRcdGRyb3Bkb3duXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oQXR0YWNobWVudExvY2F0aW9uLk9ic2lkaWFuRGVmYXVsdCwgXCJVc2UgT2JzaWRpYW4ncyBzZXR0aW5nc1wiKVxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKEF0dGFjaG1lbnRMb2NhdGlvbi5TYW1lRm9sZGVyLCAnU2FtZSBmb2xkZXIgYXMgbm90ZScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oQXR0YWNobWVudExvY2F0aW9uLlN1YmZvbGRlciwgJ1N1YmZvbGRlciAoY29uZmlndXJlIGJlbG93KScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oQXR0YWNobWVudExvY2F0aW9uLlZhdWx0Rm9sZGVyLCAnVmF1bHQgZm9sZGVyIChjb25maWd1cmUgYmVsb3cpJylcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmF0dGFjaG1lbnRMb2NhdGlvbilcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmF0dGFjaG1lbnRMb2NhdGlvbiA9IHZhbHVlIGFzIEF0dGFjaG1lbnRMb2NhdGlvbjtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gd2hlbiByZS1yZW5kZXJpbmdcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHwgXHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5wYXJlbnRFbGVtZW50O1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IHNjcm9sbENvbnRhaW5lcj8uc2Nyb2xsVG9wIHx8IDA7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7IC8vIFJlZnJlc2ggdG8gc2hvdy9oaWRlIHBhdGggaW5wdXRcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXJpbmdcclxuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFNob3cgY3VzdG9tIHBhdGggaW5wdXQgaWYgbm90IHVzaW5nIE9ic2lkaWFuIGRlZmF1bHRcclxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdHRhY2htZW50TG9jYXRpb24gIT09IEF0dGFjaG1lbnRMb2NhdGlvbi5PYnNpZGlhbkRlZmF1bHQgJiZcclxuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXR0YWNobWVudExvY2F0aW9uICE9PSBBdHRhY2htZW50TG9jYXRpb24uU2FtZUZvbGRlcikge1xyXG5cdFx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldE5hbWUoJ0N1c3RvbSBhdHRhY2htZW50IHBhdGgnKVxyXG5cdFx0XHRcdFx0LnNldERlc2MoJ1BhdGggZm9yIGF0dGFjaG1lbnRzLiBVc2UgXCIuL1wiIGZvciByZWxhdGl2ZSB0byBub3RlLCBvciBcIi9cIiBmb3IgdmF1bHQgcm9vdC4nKVxyXG5cdFx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcclxuXHRcdFx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignLi9hc3NldHMnKVxyXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21BdHRhY2htZW50UGF0aClcclxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21BdHRhY2htZW50UGF0aCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbmRlckltYWdlU2VydmljZXNTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ0ltYWdlIHNlcnZpY2VzJywgJ2ltYWdlLW1hbmFnZXInKTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRGVmYXVsdCBwcm92aWRlcicpXHJcblx0XHRcdFx0LnNldERlc2MoJ0RlZmF1bHQgaW1hZ2UgcHJvdmlkZXIgZm9yIHNlYXJjaCcpXHJcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG5cdFx0XHRcdFx0ZHJvcGRvd25cclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihJbWFnZVByb3ZpZGVyLlVuc3BsYXNoLCAnVW5zcGxhc2gnKVxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKEltYWdlUHJvdmlkZXIuUGV4ZWxzLCAnUGV4ZWxzJylcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihJbWFnZVByb3ZpZGVyLlBpeGFiYXksICdQaXhhYmF5JylcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihJbWFnZVByb3ZpZGVyLkxvY2FsLCAnTG9jYWwgZmlsZXMnKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFByb3ZpZGVyKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFByb3ZpZGVyID0gdmFsdWUgYXMgSW1hZ2VQcm92aWRlcjtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRGVmYXVsdCBvcmllbnRhdGlvbicpXHJcblx0XHRcdFx0LnNldERlc2MoJ0ZpbHRlciBpbWFnZXMgYnkgb3JpZW50YXRpb24nKVxyXG5cdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuXHRcdFx0XHRcdGRyb3Bkb3duXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oSW1hZ2VPcmllbnRhdGlvbi5BbnksICdBbnknKVxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKEltYWdlT3JpZW50YXRpb24uTGFuZHNjYXBlLCAnTGFuZHNjYXBlJylcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihJbWFnZU9yaWVudGF0aW9uLlBvcnRyYWl0LCAnUG9ydHJhaXQnKVxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKEltYWdlT3JpZW50YXRpb24uU3F1YXJlLCAnU3F1YXJlJylcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRPcmllbnRhdGlvbilcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRPcmllbnRhdGlvbiA9IHZhbHVlIGFzIEltYWdlT3JpZW50YXRpb247XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0RlZmF1bHQgaW1hZ2Ugc2l6ZScpXHJcblx0XHRcdFx0LnNldERlc2MoJ1ByZWZlcnJlZCBzaXplIHdoZW4gZG93bmxvYWRpbmcgaW1hZ2VzJylcclxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcblx0XHRcdFx0XHRkcm9wZG93blxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKEltYWdlU2l6ZS5PcmlnaW5hbCwgJ09yaWdpbmFsJylcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihJbWFnZVNpemUuTGFyZ2UsICdMYXJnZScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oSW1hZ2VTaXplLk1lZGl1bSwgJ01lZGl1bScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oSW1hZ2VTaXplLlNtYWxsLCAnU21hbGwnKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEltYWdlU2l6ZSlcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRJbWFnZVNpemUgPSB2YWx1ZSBhcyBJbWFnZVNpemU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1Vuc3BsYXNoIHByb3h5IHNlcnZlcicpXHJcblx0XHRcdFx0LnNldERlc2MoJ09wdGlvbmFsIHByb3h5IHNlcnZlciAobGVhdmUgZW1wdHkgdG8gdXNlIGJ1aWx0LWluKScpXHJcblx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcclxuXHRcdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdodHRwczovL3lvdXItcHJveHkuY29tLycpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy51bnNwbGFzaFByb3h5U2VydmVyKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudW5zcGxhc2hQcm94eVNlcnZlciA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdQZXhlbHMgQVBJIGtleScpXHJcblx0XHRcdFx0LnNldERlc2MoJ0dldCB5b3VyIEFQSSBrZXkgZnJvbSBodHRwczovL3d3dy5wZXhlbHMuY29tL2FwaS9uZXcvJylcclxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG5cdFx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ1BleGVscyBBUEkga2V5JylcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnBleGVsc0FwaUtleSlcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnBleGVsc0FwaUtleSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdQaXhhYmF5IEFQSSBrZXknKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdHZXQgeW91ciBBUEkga2V5IGZyb20gaHR0cHM6Ly9waXhhYmF5LmNvbS9hcGkvZG9jcy8nKVxyXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignUGl4YWJheSBBUEkga2V5JylcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnBpeGFiYXlBcGlLZXkpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5waXhhYmF5QXBpS2V5ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0luc2VydCBzaXplJylcclxuXHRcdFx0XHQuc2V0RGVzYygnU2V0IHRoZSBzaXplIG9mIHRoZSBpbWFnZSB3aGVuIGluc2VydGluZy4gRm9ybWF0IGNvdWxkIGJlIG9ubHkgdGhlIHdpZHRoIFwiMjAwXCIgb3IgdGhlIHdpZHRoIGFuZCBoZWlnaHQgXCIyMDB4MTAwXCIuIExlYXZlIGVtcHR5IGZvciBubyBzaXplLicpXHJcblx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcclxuXHRcdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCcyMDAgb3IgMjAweDEwMCcpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbnNlcnRTaXplKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5zZXJ0U2l6ZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdJbnNlcnQgcmVmZXJyYWwnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdJbnNlcnQgdGhlIHJlZmVyZW5jZSB0ZXh0JylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5zZXJ0UmVmZXJyYWwpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbnNlcnRSZWZlcnJhbCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdJbnNlcnQgYmFja2xpbmsnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdJbnNlcnQgYSBiYWNrbGluayBpbiBmcm9udCBvZiB0aGUgcmVmZXJlbmNlIHRleHQnKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbnNlcnRCYWNrTGluaylcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmluc2VydEJhY2tMaW5rID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbmRlclByb3BlcnR5U2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBncm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsICdQcm9wZXJ0eSBpbnNlcnRpb24nLCAnaW1hZ2UtbWFuYWdlcicpO1xyXG5cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdFbmFibGUgcGFzdGUgaW50byBwcm9wZXJ0aWVzJylcclxuXHRcdFx0XHQuc2V0RGVzYygnQWxsb3cgcGFzdGluZyBpbWFnZXMgZGlyZWN0bHkgaW50byBwcm9wZXJ0aWVzJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlUHJvcGVydHlQYXN0ZSlcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVByb3BlcnR5UGFzdGUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnUHJvcGVydHkgbGluayBmb3JtYXQnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdIb3cgdG8gZm9ybWF0IHRoZSBpbWFnZSBsaW5rIGluIHByb3BlcnRpZXMnKVxyXG5cdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuXHRcdFx0XHRcdGRyb3Bkb3duXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oUHJvcGVydHlMaW5rRm9ybWF0Lk9ic2lkaWFuRGVmYXVsdCwgXCJVc2UgT2JzaWRpYW4ncyBzZXR0aW5nc1wiKVxyXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKFByb3BlcnR5TGlua0Zvcm1hdC5QYXRoLCAnUGxhaW4gcGF0aCAocGF0aC90by9pbWFnZS5qcGcpJylcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihQcm9wZXJ0eUxpbmtGb3JtYXQuUmVsYXRpdmVQYXRoLCAnUmVsYXRpdmUgcGF0aCAoLi9pbWFnZS5qcGcpJylcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihQcm9wZXJ0eUxpbmtGb3JtYXQuV2lraWxpbmssICdXaWtpbGluayAoW1twYXRoL3RvL2ltYWdlLmpwZ11dKScpXHJcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oUHJvcGVydHlMaW5rRm9ybWF0Lk1hcmtkb3duLCAnTWFya2Rvd24gKCFbXShwYXRoL3RvL2ltYWdlLmpwZykpJylcclxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihQcm9wZXJ0eUxpbmtGb3JtYXQuQ3VzdG9tLCAnQ3VzdG9tIGZvcm1hdCcpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm9wZXJ0eUxpbmtGb3JtYXQpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm9wZXJ0eUxpbmtGb3JtYXQgPSB2YWx1ZSBhcyBQcm9wZXJ0eUxpbmtGb3JtYXQ7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gUHJlc2VydmUgc2Nyb2xsIHBvc2l0aW9uIHdoZW4gcmUtcmVuZGVyaW5nXHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8IFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwucGFyZW50RWxlbWVudDtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpOyAvLyBSZWZyZXNoIHRvIHNob3cvaGlkZSBjdXN0b20gZm9ybWF0IGlucHV0XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyaW5nXHJcblx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBTaG93IGN1c3RvbSBmb3JtYXQgaW5wdXQgd2hlbiBcIkN1c3RvbVwiIGlzIHNlbGVjdGVkXHJcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvcGVydHlMaW5rRm9ybWF0ID09PSBQcm9wZXJ0eUxpbmtGb3JtYXQuQ3VzdG9tKSB7XHJcblx0XHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHQuc2V0TmFtZSgnQ3VzdG9tIGZvcm1hdCB0ZW1wbGF0ZScpXHJcblx0XHRcdFx0XHQuc2V0RGVzYygnVXNlIHtpbWFnZS11cmx9IGFzIHBsYWNlaG9sZGVyIGZvciB0aGUgaW1hZ2UgcGF0aCcpXHJcblx0XHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCd7aW1hZ2UtdXJsfScpXHJcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVByb3BlcnR5TGlua0Zvcm1hdClcclxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21Qcm9wZXJ0eUxpbmtGb3JtYXQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdEZWZhdWx0IHByb3BlcnR5IG5hbWUnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdEZWZhdWx0IHByb3BlcnR5IG5hbWUgd2hlbiBpbnNlcnRpbmcgdG8gcHJvcGVydGllcyB2aWEgY29tbWFuZCcpXHJcblx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcclxuXHRcdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignQmFubmVyJylcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRQcm9wZXJ0eU5hbWUpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0UHJvcGVydHlOYW1lID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbmRlckNvbnZlcnNpb25TZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ1JlbW90ZSBpbWFnZSBjb252ZXJzaW9uJywgJ2ltYWdlLW1hbmFnZXInKTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQXV0by1jb252ZXJ0IHJlbW90ZSBpbWFnZXMnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdBdXRvbWF0aWNhbGx5IGRvd25sb2FkIGFuZCByZXBsYWNlIHJlbW90ZSBpbWFnZSB1cmxzIHdpdGggbG9jYWwgZmlsZXMnKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQ29udmVydFJlbW90ZUltYWdlcylcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9Db252ZXJ0UmVtb3RlSW1hZ2VzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gUHJlc2VydmUgc2Nyb2xsIHBvc2l0aW9uIHdoZW4gcmUtcmVuZGVyaW5nXHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8IFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwucGFyZW50RWxlbWVudDtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpOyAvLyBSZWZyZXNoIHRvIHNob3cvaGlkZSBzdWItb3B0aW9uc1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIHJlbmRlcmluZ1xyXG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoc2Nyb2xsQ29udGFpbmVyKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9Db252ZXJ0UmVtb3RlSW1hZ2VzKSB7XHJcblx0XHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHQuc2V0TmFtZSgnQ29udmVydCBvbiBub3RlIG9wZW4nKVxyXG5cdFx0XHRcdFx0LnNldERlc2MoJ1Byb2Nlc3MgcmVtb3RlIGltYWdlcyB3aGVuIG9wZW5pbmcgYSBub3RlJylcclxuXHRcdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udmVydE9uTm90ZU9wZW4pXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udmVydE9uTm90ZU9wZW4gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKCdDb252ZXJ0IG9uIG5vdGUgc2F2ZScpXHJcblx0XHRcdFx0XHQuc2V0RGVzYygnUHJvY2VzcyByZW1vdGUgaW1hZ2VzIHdoZW4gc2F2aW5nIGEgbm90ZScpXHJcblx0XHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnZlcnRPbk5vdGVTYXZlKVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnZlcnRPbk5vdGVTYXZlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyUmVuYW1lU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBncm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsICdSZW5hbWUgb3B0aW9ucycsICdpbWFnZS1tYW5hZ2VyJyk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0Rlc2NyaXB0aXZlIGltYWdlcycpXHJcblx0XHRcdFx0LnNldERlc2MoJ0FzayBmb3IgaW1hZ2UgZGVzY3JpcHRpb24sIHVzZSBhcyBkaXNwbGF5IHRleHQgYW5kIGtlYmFiLWNhc2UgZm9yIGZpbGVuYW1lIChhcHBsaWVzIHRvIG5vdGUgYm9keSBpbnNlcnRpb25zIG9ubHksIG5vdCBwcm9wZXJ0aWVzKScpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZURlc2NyaXB0aXZlSW1hZ2VzKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRGVzY3JpcHRpdmVJbWFnZXMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQXV0byByZW5hbWUnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdBdXRvbWF0aWNhbGx5IHJlbmFtZSB3aXRob3V0IHNob3dpbmcgZGlhbG9nICh1c2VzIHRlbXBsYXRlKScpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9SZW5hbWUpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvUmVuYW1lID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0R1cGxpY2F0ZSBudW1iZXIgZGVsaW1pdGVyJylcclxuXHRcdFx0XHQuc2V0RGVzYygnQ2hhcmFjdGVyKHMpIGJldHdlZW4gbmFtZSBhbmQgbnVtYmVyIGZvciBkdXBsaWNhdGVzIChlLmcuLCBcIi1cIiBnaXZlcyBcImltYWdlLTFcIiknKVxyXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignLScpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXBOdW1iZXJEZWxpbWl0ZXIpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXBOdW1iZXJEZWxpbWl0ZXIgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRHVwbGljYXRlIG51bWJlciBhdCBzdGFydCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ1B1dCB0aGUgZHVwbGljYXRlIG51bWJlciBhdCB0aGUgc3RhcnQgKGUuZy4sIFwiMS1pbWFnZVwiIGluc3RlYWQgb2YgXCJpbWFnZS0xXCIpJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVwTnVtYmVyQXRTdGFydClcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmR1cE51bWJlckF0U3RhcnQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRGlzYWJsZSByZW5hbWUgbm90aWNlJylcclxuXHRcdFx0XHQuc2V0RGVzYygnRG8gbm90IHNob3cgYSBub3RpY2UgYWZ0ZXIgcmVuYW1pbmcgYW4gaW1hZ2UnKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kaXNhYmxlUmVuYW1lTm90aWNlKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGlzYWJsZVJlbmFtZU5vdGljZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IHRoZSBjdXJyZW50IGRldmljZSB0eXBlXHJcblx0ICovXHJcblx0cHJpdmF0ZSBnZXRDdXJyZW50RGV2aWNlKCk6IERldmljZVR5cGUge1xyXG5cdFx0aWYgKFBsYXRmb3JtLmlzUGhvbmUpIHtcclxuXHRcdFx0cmV0dXJuIERldmljZVR5cGUuUGhvbmU7XHJcblx0XHR9XHJcblx0XHRpZiAoUGxhdGZvcm0uaXNUYWJsZXQpIHtcclxuXHRcdFx0cmV0dXJuIERldmljZVR5cGUuVGFibGV0O1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIERldmljZVR5cGUuRGVza3RvcDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhlbHBlciB0byBwcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gd2hlbiByZS1yZW5kZXJpbmcgc2V0dGluZ3NcclxuXHQgKi9cclxuXHRwcml2YXRlIHJlZnJlc2hXaXRoU2Nyb2xsUHJlc2VydmUoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fFxyXG5cdFx0XHRjb250YWluZXJFbC5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8XHJcblx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XHJcblx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xyXG5cclxuXHRcdHRoaXMuZGlzcGxheSgpO1xyXG5cclxuXHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcclxuXHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyQmFubmVyU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBncm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsICdCYW5uZXIgaW1hZ2VzJywgJ2ltYWdlLW1hbmFnZXInKTtcclxuXHRcdGNvbnN0IGN1cnJlbnREZXZpY2UgPSB0aGlzLmdldEN1cnJlbnREZXZpY2UoKTtcclxuXHRcdGNvbnN0IGRldmljZVNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFubmVyW2N1cnJlbnREZXZpY2VdO1xyXG5cdFx0Y29uc3QgZGVmYXVsdERldmljZVNldHRpbmdzID0gREVGQVVMVF9CQU5ORVJfREVWSUNFX1NFVFRJTkdTW2N1cnJlbnREZXZpY2VdO1xyXG5cdFx0Y29uc3QgcHJvcGVydHlTZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmJhbm5lci5wcm9wZXJ0aWVzO1xyXG5cclxuXHRcdC8vIERldmljZS1zcGVjaWZpYyBlbmFibGUgdG9nZ2xlXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnU2hvdyBiYW5uZXInKVxyXG5cdFx0XHRcdC5zZXREZXNjKGBFbmFibGUgb3IgZGlzYWJsZSBiYW5uZXJzIG9uIHlvdXIgJHtjdXJyZW50RGV2aWNlfSBkZXZpY2VgKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShkZXZpY2VTZXR0aW5ncy5lbmFibGVkKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFubmVyW2N1cnJlbnREZXZpY2VdLmVuYWJsZWQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlZnJlc2hXaXRoU2Nyb2xsUHJlc2VydmUoY29udGFpbmVyRWwpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIE9ubHkgc2hvdyBvdGhlciBzZXR0aW5ncyBpZiBlbmFibGVkXHJcblx0XHRpZiAoIWRldmljZVNldHRpbmdzLmVuYWJsZWQpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEJhbm5lciBoZWlnaHRcclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdIZWlnaHQnKVxyXG5cdFx0XHRcdC5zZXREZXNjKGBIZWlnaHQgb2YgdGhlIGJhbm5lciBvbiB5b3VyICR7Y3VycmVudERldmljZX0gZGV2aWNlIChpbiBwaXhlbHMpYClcclxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG5cdFx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoU3RyaW5nKGRlZmF1bHREZXZpY2VTZXR0aW5ncy5oZWlnaHQpKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoU3RyaW5nKGRldmljZVNldHRpbmdzLmhlaWdodCkpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSwgMTApO1xyXG5cdFx0XHRcdFx0XHRcdGlmICghaXNOYU4obnVtKSAmJiBudW0gPiAwKSB7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYW5uZXJbY3VycmVudERldmljZV0uaGVpZ2h0ID0gbnVtO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEJhbm5lciBwYWRkaW5nXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnUGFkZGluZycpXHJcblx0XHRcdFx0LnNldERlc2MoJ1BhZGRpbmcgb2YgdGhlIGJhbm5lciBmcm9tIHRoZSBlZGdlcyBvZiB0aGUgbm90ZSAoaW4gcGl4ZWxzKScpXHJcblx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcclxuXHRcdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFN0cmluZyhkZWZhdWx0RGV2aWNlU2V0dGluZ3MucGFkZGluZykpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShTdHJpbmcoZGV2aWNlU2V0dGluZ3MucGFkZGluZykpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSwgMTApO1xyXG5cdFx0XHRcdFx0XHRcdGlmICghaXNOYU4obnVtKSAmJiBudW0gPj0gMCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFubmVyW2N1cnJlbnREZXZpY2VdLnBhZGRpbmcgPSBudW07XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gTm90ZSBvZmZzZXRcclxuXHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdOb3RlIG9mZnNldCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ01vdmUgdGhlIHBvc2l0aW9uIG9mIHRoZSBub3RlIGNvbnRlbnQgKGluIHBpeGVscyknKVxyXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihTdHJpbmcoZGVmYXVsdERldmljZVNldHRpbmdzLm5vdGVPZmZzZXQpKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoU3RyaW5nKGRldmljZVNldHRpbmdzLm5vdGVPZmZzZXQpKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbnVtID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcclxuXHRcdFx0XHRcdFx0XHRpZiAoIWlzTmFOKG51bSkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJhbm5lcltjdXJyZW50RGV2aWNlXS5ub3RlT2Zmc2V0ID0gbnVtO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFZpZXcgb2Zmc2V0XHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnVmlldyBvZmZzZXQnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdNb3ZlIHRoZSBwb3NpdGlvbiBvZiB0aGUgdmlldyBjb250ZW50IChpbiBwaXhlbHMpJylcclxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG5cdFx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoU3RyaW5nKGRlZmF1bHREZXZpY2VTZXR0aW5ncy52aWV3T2Zmc2V0KSlcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKFN0cmluZyhkZXZpY2VTZXR0aW5ncy52aWV3T2Zmc2V0KSlcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCFpc05hTihudW0pKSB7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYW5uZXJbY3VycmVudERldmljZV0udmlld09mZnNldCA9IG51bTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBGYWRlXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRmFkZScpXHJcblx0XHRcdFx0LnNldERlc2MoJ0ZhZGUgdGhlIGltYWdlIG91dCB0b3dhcmRzIHRoZSBjb250ZW50JylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoZGV2aWNlU2V0dGluZ3MuZmFkZSlcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJhbm5lcltjdXJyZW50RGV2aWNlXS5mYWRlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQW5pbWF0aW9uXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQW5pbWF0aW9uJylcclxuXHRcdFx0XHQuc2V0RGVzYygnRW5hYmxlIGJhbm5lciBhbmltYXRpb24gd2hlbiBvcGVuaW5nIGZpbGVzJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoZGV2aWNlU2V0dGluZ3MuYW5pbWF0aW9uKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFubmVyW2N1cnJlbnREZXZpY2VdLmFuaW1hdGlvbiA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEZyb250bWF0dGVyIHByb3BlcnR5IHNldHRpbmdzIChnbG9iYWwsIG5vdCBkZXZpY2Utc3BlY2lmaWMpXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQmFubmVyIHByb3BlcnR5JylcclxuXHRcdFx0XHQuc2V0RGVzYygnTmFtZSBvZiB0aGUgYmFubmVyIHByb3BlcnR5IHRoaXMgcGx1Z2luIHdpbGwgbG9vayBmb3IgaW4gdGhlIGZyb250bWF0dGVyJylcclxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG5cdFx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0Jhbm5lcicpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShwcm9wZXJ0eVNldHRpbmdzLmltYWdlUHJvcGVydHkpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYW5uZXIucHJvcGVydGllcy5pbWFnZVByb3BlcnR5ID0gdmFsdWUgfHwgJ2Jhbm5lcic7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0ljb24gcHJvcGVydHknKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdOYW1lIG9mIHRoZSBpY29uIHByb3BlcnR5IHRoaXMgcGx1Z2luIHdpbGwgbG9vayBmb3IgaW4gdGhlIGZyb250bWF0dGVyJylcclxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG5cdFx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0ljb24nKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUocHJvcGVydHlTZXR0aW5ncy5pY29uUHJvcGVydHkpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYW5uZXIucHJvcGVydGllcy5pY29uUHJvcGVydHkgPSB2YWx1ZSB8fCAnaWNvbic7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0VuYWJsZSBwZXItbm90ZSBiYW5uZXIgaGlkaW5nJylcclxuXHRcdFx0XHQuc2V0RGVzYygnQWxsb3cgZGlzYWJsaW5nIGJhbm5lcnMgb24gYSBwZXItbm90ZSBiYXNpcyB1c2luZyBhIGZyb250bWF0dGVyIHByb3BlcnR5JylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUocHJvcGVydHlTZXR0aW5ncy5oaWRlUHJvcGVydHlFbmFibGVkKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFubmVyLnByb3BlcnRpZXMuaGlkZVByb3BlcnR5RW5hYmxlZCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucmVmcmVzaFdpdGhTY3JvbGxQcmVzZXJ2ZShjb250YWluZXJFbCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gU2hvdyBoaWRlIHByb3BlcnR5IGlucHV0IHdoZW4gZW5hYmxlZFxyXG5cdFx0aWYgKHByb3BlcnR5U2V0dGluZ3MuaGlkZVByb3BlcnR5RW5hYmxlZCkge1xyXG5cdFx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldE5hbWUoJ0hpZGUgYmFubmVyIHByb3BlcnR5JylcclxuXHRcdFx0XHRcdC5zZXREZXNjKCdOYW1lIG9mIHRoZSBmcm9udG1hdHRlciBwcm9wZXJ0eSB0aGF0LCB3aGVuIHNldCB0byB0cnVlLCB3aWxsIGhpZGUgdGhlIGJhbm5lciBmb3IgdGhhdCBub3RlJylcclxuXHRcdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0hpZGUgYmFubmVyJylcclxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUocHJvcGVydHlTZXR0aW5ncy5oaWRlUHJvcGVydHkpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFubmVyLnByb3BlcnRpZXMuaGlkZVByb3BlcnR5ID0gdmFsdWUgfHwgJyc7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJY29uIHNldHRpbmdzXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnU2hvdyBpY29uJylcclxuXHRcdFx0XHQuc2V0RGVzYygnRW5hYmxlIG9yIGRpc2FibGUgdGhlIGljb24nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShkZXZpY2VTZXR0aW5ncy5pY29uRW5hYmxlZClcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJhbm5lcltjdXJyZW50RGV2aWNlXS5pY29uRW5hYmxlZCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucmVmcmVzaFdpdGhTY3JvbGxQcmVzZXJ2ZShjb250YWluZXJFbCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gT25seSBzaG93IGljb24gc2V0dGluZ3MgaWYgZW5hYmxlZFxyXG5cdFx0aWYgKGRldmljZVNldHRpbmdzLmljb25FbmFibGVkKSB7XHJcblx0XHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHQuc2V0TmFtZSgnSWNvbiBzaXplJylcclxuXHRcdFx0XHRcdC5zZXREZXNjKCdTaXplIG9mIHRoZSBpY29uIChpbiBwaXhlbHMpJylcclxuXHRcdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoU3RyaW5nKGRlZmF1bHREZXZpY2VTZXR0aW5ncy5pY29uU2l6ZSkpXHJcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKFN0cmluZyhkZXZpY2VTZXR0aW5ncy5pY29uU2l6ZSkpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbnVtID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcclxuXHRcdFx0XHRcdFx0XHRcdGlmICghaXNOYU4obnVtKSAmJiBudW0gPiAwKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJhbm5lcltjdXJyZW50RGV2aWNlXS5pY29uU2l6ZSA9IG51bTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldE5hbWUoJ0ljb24gYmFja2dyb3VuZCcpXHJcblx0XHRcdFx0XHQuc2V0RGVzYygnRW5hYmxlIG9yIGRpc2FibGUgdGhlIGljb24gYmFja2dyb3VuZCcpXHJcblx0XHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKGRldmljZVNldHRpbmdzLmljb25CYWNrZ3JvdW5kKVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJhbm5lcltjdXJyZW50RGV2aWNlXS5pY29uQmFja2dyb3VuZCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldE5hbWUoJ0ljb24gZnJhbWUnKVxyXG5cdFx0XHRcdFx0LnNldERlc2MoJ1Nob3cgdGhlIGJvcmRlci9iYWNrZ3JvdW5kIGZyYW1lIGFyb3VuZCB0aGUgaWNvbiAoZGlzYWJsZSB0byBkaXNwbGF5IGp1c3QgdGhlIGljb24gZ3JhcGhpYyknKVxyXG5cdFx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZShkZXZpY2VTZXR0aW5ncy5pY29uRnJhbWUpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFubmVyW2N1cnJlbnREZXZpY2VdLmljb25GcmFtZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdFx0LnNldE5hbWUoJ0ljb24gYm9yZGVyIHNpemUnKVxyXG5cdFx0XHRcdFx0LnNldERlc2MoJ1NpemUgb2YgdGhlIGljb24gYm9yZGVyIChpbiBwaXhlbHMpJylcclxuXHRcdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0XHRcdHRleHRcclxuXHRcdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoU3RyaW5nKGRlZmF1bHREZXZpY2VTZXR0aW5ncy5pY29uQm9yZGVyKSlcclxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUoU3RyaW5nKGRldmljZVNldHRpbmdzLmljb25Cb3JkZXIpKVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoIWlzTmFOKG51bSkgJiYgbnVtID49IDApIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFubmVyW2N1cnJlbnREZXZpY2VdLmljb25Cb3JkZXIgPSBudW07XHJcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKCdJY29uIGJvcmRlciByYWRpdXMnKVxyXG5cdFx0XHRcdFx0LnNldERlc2MoJ1NpemUgb2YgdGhlIGljb24gYm9yZGVyIHJhZGl1cyAoaW4gcGl4ZWxzKScpXHJcblx0XHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFN0cmluZyhkZWZhdWx0RGV2aWNlU2V0dGluZ3MuaWNvblJhZGl1cykpXHJcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKFN0cmluZyhkZXZpY2VTZXR0aW5ncy5pY29uUmFkaXVzKSlcclxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSwgMTApO1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFpc05hTihudW0pICYmIG51bSA+PSAwKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJhbm5lcltjdXJyZW50RGV2aWNlXS5pY29uUmFkaXVzID0gbnVtO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0XHQuc2V0TmFtZSgnSWNvbiBhbGlnbm1lbnQgLSBob3Jpem9udGFsJylcclxuXHRcdFx0XHRcdC5zZXREZXNjKCdIb3Jpem9udGFsIGFsaWdubWVudCBvZiB0aGUgaWNvbicpXHJcblx0XHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcblx0XHRcdFx0XHRcdGRyb3Bkb3duXHJcblx0XHRcdFx0XHRcdFx0LmFkZE9wdGlvbignZmxleC1zdGFydCcsICdMZWZ0JylcclxuXHRcdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdjZW50ZXInLCAnQ2VudGVyJylcclxuXHRcdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdmbGV4LWVuZCcsICdSaWdodCcpXHJcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKGRldmljZVNldHRpbmdzLmljb25BbGlnbm1lbnRIKVxyXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJhbm5lcltjdXJyZW50RGV2aWNlXS5pY29uQWxpZ25tZW50SCA9IHZhbHVlIGFzICdmbGV4LXN0YXJ0JyB8ICdjZW50ZXInIHwgJ2ZsZXgtZW5kJztcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKCdJY29uIGFsaWdubWVudCAtIHZlcnRpY2FsJylcclxuXHRcdFx0XHRcdC5zZXREZXNjKCdWZXJ0aWNhbCBhbGlnbm1lbnQgb2YgdGhlIGljb24nKVxyXG5cdFx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG5cdFx0XHRcdFx0XHRkcm9wZG93blxyXG5cdFx0XHRcdFx0XHRcdC5hZGRPcHRpb24oJ2ZsZXgtc3RhcnQnLCAnVG9wJylcclxuXHRcdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdjZW50ZXInLCAnQ2VudGVyJylcclxuXHRcdFx0XHRcdFx0XHQuYWRkT3B0aW9uKCdmbGV4LWVuZCcsICdCb3R0b20nKVxyXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZShkZXZpY2VTZXR0aW5ncy5pY29uQWxpZ25tZW50VilcclxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYW5uZXJbY3VycmVudERldmljZV0uaWNvbkFsaWdubWVudFYgPSB2YWx1ZSBhcyAnZmxleC1zdGFydCcgfCAnY2VudGVyJyB8ICdmbGV4LWVuZCc7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyQWR2YW5jZWRTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ0FkdmFuY2VkJywgJ2ltYWdlLW1hbmFnZXInKTtcclxuXHJcblx0XHRncm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnU3VwcG9ydGVkIGZpbGUgZXh0ZW5zaW9ucycpXHJcblx0XHRcdFx0LnNldERlc2MoJ0ZpbGUgZXh0ZW5zaW9ucyB0byBwcm9jZXNzIChjb21tYS1zZXBhcmF0ZWQpJylcclxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFZhbHVlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3VwcG9ydGVkRXh0ZW5zaW9ucy5sZW5ndGggPiAwXHJcblx0XHRcdFx0XHRcdD8gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3VwcG9ydGVkRXh0ZW5zaW9ucy5qb2luKCcsICcpXHJcblx0XHRcdFx0XHRcdDogJyc7XHJcblx0XHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRmlsZSBleHRlbnNpb25zJylcclxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKGN1cnJlbnRWYWx1ZSlcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGV4dGVuc2lvbnMgPSB2YWx1ZVxyXG5cdFx0XHRcdFx0XHRcdFx0LnNwbGl0KCcsJylcclxuXHRcdFx0XHRcdFx0XHRcdC5tYXAoKGV4dCkgPT4gZXh0LnRyaW0oKS50b0xvd2VyQ2FzZSgpKVxyXG5cdFx0XHRcdFx0XHRcdFx0LmZpbHRlcigoZXh0KSA9PiBleHQubGVuZ3RoID4gMCk7XHJcblx0XHRcdFx0XHRcdFx0Ly8gRGVmYXVsdCB0byAnbWQnIGlmIGVtcHR5XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3VwcG9ydGVkRXh0ZW5zaW9ucyA9IGV4dGVuc2lvbnMubGVuZ3RoID4gMCA/IGV4dGVuc2lvbnMgOiBbJ21kJ107XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0RlYnVnIG1vZGUnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdFbmFibGUgZGVidWcgbG9nZ2luZyB0byBjb25zb2xlJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVidWdNb2RlKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z01vZGUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIENvbXBhdGliaWxpdHkgdXRpbGl0aWVzIGZvciBzZXR0aW5nc1xyXG4gKiBQcm92aWRlcyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IGZvciBTZXR0aW5nR3JvdXAgKHJlcXVpcmVzIEFQSSAxLjExLjArKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFNldHRpbmcsIHJlcXVpcmVBcGlWZXJzaW9uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgKiBhcyBPYnNpZGlhbk1vZHVsZSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vKipcclxuICogSW50ZXJmYWNlIHRoYXQgd29ya3Mgd2l0aCBib3RoIFNldHRpbmdHcm91cCBhbmQgZmFsbGJhY2sgY29udGFpbmVyXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFNldHRpbmdzQ29udGFpbmVyIHtcclxuXHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgc2V0dGluZ3MgY29udGFpbmVyIHRoYXQgdXNlcyBTZXR0aW5nR3JvdXAgaWYgYXZhaWxhYmxlIChBUEkgMS4xMS4wKyksXHJcbiAqIG90aGVyd2lzZSBmYWxscyBiYWNrIHRvIGNyZWF0aW5nIGEgaGVhZGluZyBhbmQgdXNpbmcgdGhlIGNvbnRhaW5lciBkaXJlY3RseS5cclxuICogXHJcbiAqIFVzZXMgcmVxdWlyZUFwaVZlcnNpb24oJzEuMTEuMCcpIHRvIGNoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUuXHJcbiAqIFRoaXMgaXMgdGhlIG9mZmljaWFsIE9ic2lkaWFuIEFQSSBtZXRob2QgZm9yIHZlcnNpb24gY2hlY2tpbmcuXHJcbiAqIFxyXG4gKiBAcGFyYW0gY29udGFpbmVyRWwgLSBUaGUgY29udGFpbmVyIGVsZW1lbnQgZm9yIHNldHRpbmdzXHJcbiAqIEBwYXJhbSBoZWFkaW5nIC0gVGhlIGhlYWRpbmcgdGV4dCBmb3IgdGhlIHNldHRpbmdzIGdyb3VwIChvcHRpb25hbClcclxuICogQHBhcmFtIG1hbmlmZXN0SWQgLSBUaGUgcGx1Z2luJ3MgbWFuaWZlc3QgSUQgZm9yIENTUyBzY29waW5nIChyZXF1aXJlZCBmb3IgZmFsbGJhY2sgbW9kZSlcclxuICogQHJldHVybnMgQSBjb250YWluZXIgdGhhdCBjYW4gYmUgdXNlZCB0byBhZGQgc2V0dGluZ3NcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXR0aW5nc0dyb3VwKFxyXG5cdGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcclxuXHRoZWFkaW5nPzogc3RyaW5nLFxyXG5cdG1hbmlmZXN0SWQ/OiBzdHJpbmdcclxuKTogU2V0dGluZ3NDb250YWluZXIge1xyXG5cdC8vIENoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUgKEFQSSAxLjExLjArKVxyXG5cdC8vIHJlcXVpcmVBcGlWZXJzaW9uIGlzIHRoZSBvZmZpY2lhbCBPYnNpZGlhbiBBUEkgbWV0aG9kIGZvciB2ZXJzaW9uIGNoZWNraW5nXHJcblx0aWYgKHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjAnKSkge1xyXG5cdFx0Ly8gVXNlIFNldHRpbmdHcm91cCAtIGl0J3MgZ3VhcmFudGVlZCB0byBleGlzdCBpZiByZXF1aXJlQXBpVmVyc2lvbiByZXR1cm5zIHRydWVcclxuXHRcdC8vIEFjY2VzcyBTZXR0aW5nR3JvdXAgdmlhIHR5cGUgYXNzZXJ0aW9uIHNpbmNlIGl0IG1heSBub3QgYmUgaW4gdHlwZSBkZWZpbml0aW9uc1xyXG5cdFx0Ly8gZm9yIG9sZGVyIFR5cGVTY3JpcHQgdmVyc2lvbnMsIGJ1dCBleGlzdHMgYXQgcnVudGltZSBpbiBPYnNpZGlhbiAxLjExLjArXHJcblx0XHQvLyBVc2luZyB1bmtub3duIGluc3RlYWQgb2YgYW55IHRvIHNhdGlzZnkgZXNsaW50IHdoaWxlIG1haW50YWluaW5nIHR5cGUgc2FmZXR5XHJcblx0XHRjb25zdCBTZXR0aW5nR3JvdXBDbGFzcyA9IChPYnNpZGlhbk1vZHVsZSBhcyB1bmtub3duIGFzIHsgU2V0dGluZ0dyb3VwPzogbmV3IChjb250YWluZXJFbDogSFRNTEVsZW1lbnQpID0+IHtcclxuXHRcdFx0c2V0SGVhZGluZyhoZWFkaW5nOiBzdHJpbmcpOiB7XHJcblx0XHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcblx0XHR9IH0pLlNldHRpbmdHcm91cDtcclxuXHRcdFxyXG5cdFx0aWYgKFNldHRpbmdHcm91cENsYXNzKSB7XHJcblx0XHRcdGNvbnN0IGdyb3VwID0gaGVhZGluZyBcclxuXHRcdFx0XHQ/IG5ldyBTZXR0aW5nR3JvdXBDbGFzcyhjb250YWluZXJFbCkuc2V0SGVhZGluZyhoZWFkaW5nKVxyXG5cdFx0XHRcdDogbmV3IFNldHRpbmdHcm91cENsYXNzKGNvbnRhaW5lckVsKTtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xyXG5cdFx0XHRcdFx0Z3JvdXAuYWRkU2V0dGluZyhjYik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBGYWxsYmFjayBwYXRoIChlaXRoZXIgQVBJIDwgMS4xMS4wIG9yIFNldHRpbmdHcm91cCBub3QgZm91bmQpXHJcblx0Ly8gQWRkIHNjb3BpbmcgY2xhc3MgdG8gY29udGFpbmVyRWwgdG8gc2NvcGUgQ1NTIHRvIG9ubHkgdGhpcyBwbHVnaW4ncyBzZXR0aW5nc1xyXG5cdGlmIChtYW5pZmVzdElkKSB7XHJcblx0XHRjb250YWluZXJFbC5hZGRDbGFzcyhgJHttYW5pZmVzdElkfS1zZXR0aW5ncy1jb21wYXRgKTtcclxuXHR9XHJcblx0XHJcblx0e1xyXG5cdFx0Ly8gRmFsbGJhY2s6IENyZWF0ZSBhIGhlYWRpbmcgbWFudWFsbHkgZm9yIG9sZGVyIEFQSSB2ZXJzaW9uc1xyXG5cdFx0Ly8gTm90ZTogV2hpbGUgYmVzdCBwcmFjdGljZSBwcmVmZXJzIFNldHRpbmcuc2V0SGVhZGluZygpLCB0aGUgZmFsbGJhY2sgcGF0aFxyXG5cdFx0Ly8gaXMgZm9yIHZlcnNpb25zIHRoYXQgbWF5IG5vdCBzdXBwb3J0IGl0LCBzbyBtYW51YWwgaGVhZGluZyBpcyBhcHByb3ByaWF0ZSBoZXJlXHJcblx0XHRpZiAoaGVhZGluZykge1xyXG5cdFx0XHRjb25zdCBoZWFkaW5nRWwgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3NldHRpbmctZ3JvdXAtaGVhZGluZycpO1xyXG5cdFx0XHRoZWFkaW5nRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiBoZWFkaW5nIH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xyXG5cdFx0XHRcdGNvbnN0IHNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbCk7XHJcblx0XHRcdFx0Y2Ioc2V0dGluZyk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG59XHJcbiIsICIvKipcclxuICogSW1hZ2UgTWFuYWdlciBQbHVnaW4gVHlwZXNcclxuICogU2hhcmVkIFR5cGVTY3JpcHQgaW50ZXJmYWNlcyBhbmQgdHlwZSBkZWZpbml0aW9uc1xyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBTdXBwb3J0ZWQgaW1hZ2UgcHJvdmlkZXJzIGZvciByZW1vdGUgc2VhcmNoXHJcbiAqL1xyXG5leHBvcnQgZW51bSBJbWFnZVByb3ZpZGVyIHtcclxuXHRVbnNwbGFzaCA9ICd1bnNwbGFzaCcsXHJcblx0UGV4ZWxzID0gJ3BleGVscycsXHJcblx0UGl4YWJheSA9ICdwaXhhYmF5JyxcclxuXHRMb2NhbCA9ICdsb2NhbCcsXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbWFnZSBvcmllbnRhdGlvbiBmaWx0ZXJcclxuICovXHJcbmV4cG9ydCBlbnVtIEltYWdlT3JpZW50YXRpb24ge1xyXG5cdEFueSA9ICdhbnknLFxyXG5cdExhbmRzY2FwZSA9ICdsYW5kc2NhcGUnLFxyXG5cdFBvcnRyYWl0ID0gJ3BvcnRyYWl0JyxcclxuXHRTcXVhcmUgPSAnc3F1YXJlJyxcclxufVxyXG5cclxuLyoqXHJcbiAqIEltYWdlIHNpemUgcHJlZmVyZW5jZVxyXG4gKi9cclxuZXhwb3J0IGVudW0gSW1hZ2VTaXplIHtcclxuXHRPcmlnaW5hbCA9ICdvcmlnaW5hbCcsXHJcblx0TGFyZ2UgPSAnbGFyZ2UnLFxyXG5cdE1lZGl1bSA9ICdtZWRpdW0nLFxyXG5cdFNtYWxsID0gJ3NtYWxsJyxcclxufVxyXG5cclxuLyoqXHJcbiAqIExpbmsgZm9ybWF0IGZvciBpbnNlcnRpbmcgaW1hZ2VzIGludG8gcHJvcGVydGllc1xyXG4gKi9cclxuZXhwb3J0IGVudW0gUHJvcGVydHlMaW5rRm9ybWF0IHtcclxuXHRPYnNpZGlhbkRlZmF1bHQgPSAnb2JzaWRpYW4nLCAvLyBVc2UgT2JzaWRpYW4ncyBkZWZhdWx0IGxpbmsgZm9ybWF0IChyZXNwZWN0cyB1c2VNYXJrZG93bkxpbmtzLCBuZXdMaW5rRm9ybWF0KVxyXG5cdFBhdGggPSAncGF0aCcsICAgICAgICAgICAvLyBjb3ZlcjogcGF0aC90by9pbWFnZS5qcGdcclxuXHRSZWxhdGl2ZVBhdGggPSAncmVsYXRpdmUnLCAvLyBjb3ZlcjogLi9pbWFnZS5qcGcgb3IgaW1hZ2UuanBnIChzYW1lIGZvbGRlcilcclxuXHRXaWtpbGluayA9ICd3aWtpbGluaycsICAgLy8gY292ZXI6IFwiW1twYXRoL3RvL2ltYWdlLmpwZ11dXCJcclxuXHRNYXJrZG93biA9ICdtYXJrZG93bicsICAgLy8gY292ZXI6IFwiIVtdKHBhdGgvdG8vaW1hZ2UuanBnKVwiXHJcblx0Q3VzdG9tID0gJ2N1c3RvbScsICAgICAgIC8vIGNvdmVyOiBcIntpbWFnZS11cmx9XCIgd2l0aCBjdXN0b20gZm9ybWF0XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBdHRhY2htZW50IGxvY2F0aW9uIG92ZXJyaWRlIG9wdGlvbnNcclxuICovXHJcbmV4cG9ydCBlbnVtIEF0dGFjaG1lbnRMb2NhdGlvbiB7XHJcblx0T2JzaWRpYW5EZWZhdWx0ID0gJ29ic2lkaWFuJywgIC8vIEZvbGxvdyBPYnNpZGlhbidzIHNldHRpbmdcclxuXHRTYW1lRm9sZGVyID0gJ3NhbWUnLCAgICAgICAgICAgLy8gU2FtZSBmb2xkZXIgYXMgbm90ZVxyXG5cdFN1YmZvbGRlciA9ICdzdWJmb2xkZXInLCAgICAgICAvLyBDb25maWd1cmFibGUgc3ViZm9sZGVyXHJcblx0VmF1bHRGb2xkZXIgPSAndmF1bHQnLCAgICAgICAgIC8vIENlbnRyYWxpemVkIHZhdWx0IGZvbGRlclxyXG59XHJcblxyXG4vKipcclxuICogRGV2aWNlIHR5cGVzIGZvciBiYW5uZXIgc2V0dGluZ3NcclxuICovXHJcbmV4cG9ydCBlbnVtIERldmljZVR5cGUge1xyXG5cdERlc2t0b3AgPSAnZGVza3RvcCcsXHJcblx0VGFibGV0ID0gJ3RhYmxldCcsXHJcblx0UGhvbmUgPSAncGhvbmUnLFxyXG59XHJcblxyXG4vKipcclxuICogSWNvbiB0eXBlIGZvciBiYW5uZXIgaWNvbnNcclxuICovXHJcbmV4cG9ydCBlbnVtIEJhbm5lckljb25UeXBlIHtcclxuXHRMaW5rID0gJ2xpbmsnLFxyXG5cdFRleHQgPSAndGV4dCcsXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb250ZW50IHR5cGUgZm9yIGJhbm5lciAoaW1hZ2Ugb3IgdmlkZW8pXHJcbiAqL1xyXG5leHBvcnQgZW51bSBCYW5uZXJDb250ZW50VHlwZSB7XHJcblx0SW1hZ2UgPSAnaW1hZ2UnLFxyXG5cdFZpZGVvID0gJ3ZpZGVvJyxcclxufVxyXG5cclxuLyoqXHJcbiAqIERldmljZS1zcGVjaWZpYyBiYW5uZXIgc2V0dGluZ3NcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQmFubmVyRGV2aWNlU2V0dGluZ3Mge1xyXG5cdC8vIENvcmUgYmFubmVyIHNldHRpbmdzXHJcblx0ZW5hYmxlZDogYm9vbGVhbjtcclxuXHRoZWlnaHQ6IG51bWJlcjtcclxuXHR2aWV3T2Zmc2V0OiBudW1iZXI7XHJcblx0bm90ZU9mZnNldDogbnVtYmVyO1xyXG5cdGJvcmRlclJhZGl1czogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XHJcblx0cGFkZGluZzogbnVtYmVyO1xyXG5cdGZhZGU6IGJvb2xlYW47XHJcblx0YW5pbWF0aW9uOiBib29sZWFuO1xyXG5cdFxyXG5cdC8vIEljb24gc2V0dGluZ3NcclxuXHRpY29uRW5hYmxlZDogYm9vbGVhbjtcclxuXHRpY29uU2l6ZTogbnVtYmVyO1xyXG5cdGljb25SYWRpdXM6IG51bWJlcjtcclxuXHRpY29uQmFja2dyb3VuZDogYm9vbGVhbjtcclxuXHRpY29uQm9yZGVyOiBudW1iZXI7XHJcblx0aWNvbkZyYW1lOiBib29sZWFuO1xyXG5cdGljb25BbGlnbm1lbnRIOiAnZmxleC1zdGFydCcgfCAnY2VudGVyJyB8ICdmbGV4LWVuZCc7XHJcblx0aWNvbkFsaWdubWVudFY6ICdmbGV4LXN0YXJ0JyB8ICdjZW50ZXInIHwgJ2ZsZXgtZW5kJztcclxuXHRpY29uT2Zmc2V0WDogbnVtYmVyO1xyXG5cdGljb25PZmZzZXRZOiBudW1iZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBCYW5uZXIgcHJvcGVydHkgc2V0dGluZ3MgKGdsb2JhbCwgbm90IGRldmljZS1zcGVjaWZpYylcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQmFubmVyUHJvcGVydHlTZXR0aW5ncyB7XHJcblx0aW1hZ2VQcm9wZXJ0eTogc3RyaW5nO1xyXG5cdGljb25Qcm9wZXJ0eTogc3RyaW5nO1xyXG5cdGhpZGVQcm9wZXJ0eUVuYWJsZWQ6IGJvb2xlYW47XHJcblx0aGlkZVByb3BlcnR5OiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb21wbGV0ZSBiYW5uZXIgc2V0dGluZ3NcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQmFubmVyU2V0dGluZ3Mge1xyXG5cdHByb3BlcnRpZXM6IEJhbm5lclByb3BlcnR5U2V0dGluZ3M7XHJcblx0ZGVza3RvcDogQmFubmVyRGV2aWNlU2V0dGluZ3M7XHJcblx0dGFibGV0OiBCYW5uZXJEZXZpY2VTZXR0aW5ncztcclxuXHRwaG9uZTogQmFubmVyRGV2aWNlU2V0dGluZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQYXJzZWQgYmFubmVyIGltYWdlIG9wdGlvbnNcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQmFubmVySW1hZ2VPcHRpb25zIHtcclxuXHR1cmw6IHN0cmluZztcclxuXHRleHRlcm5hbDogYm9vbGVhbjtcclxuXHR4OiBudW1iZXI7XHJcblx0eTogbnVtYmVyO1xyXG5cdHR5cGU6IEJhbm5lckNvbnRlbnRUeXBlIHwgbnVsbDtcclxuXHRyZXBlYXRhYmxlOiBib29sZWFuO1xyXG59XHJcblxyXG4vKipcclxuICogQmFubmVyIGRhdGEgZm9yIGEgc3BlY2lmaWMgdmlld1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCYW5uZXJEYXRhIHtcclxuXHRmaWxlcGF0aDogc3RyaW5nIHwgbnVsbDtcclxuXHRpbWFnZTogc3RyaW5nIHwgbnVsbDtcclxuXHRpY29uOiBzdHJpbmcgfCBudWxsO1xyXG5cdHZpZXdNb2RlOiAnc291cmNlJyB8ICdwcmV2aWV3JyB8IG51bGw7XHJcblx0bGFzdFZpZXdNb2RlOiAnc291cmNlJyB8ICdwcmV2aWV3JyB8IG51bGw7XHJcblx0aXNJbWFnZUNoYW5nZTogYm9vbGVhbjtcclxuXHRpc0ltYWdlUHJvcHNVcGRhdGU6IGJvb2xlYW47XHJcblx0bmVlZHNVcGRhdGU6IGJvb2xlYW47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZWZhdWx0IGRldmljZS1zcGVjaWZpYyBiYW5uZXIgc2V0dGluZ3NcclxuICovXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX0JBTk5FUl9ERVZJQ0VfU0VUVElOR1M6IFJlY29yZDxEZXZpY2VUeXBlLCBCYW5uZXJEZXZpY2VTZXR0aW5ncz4gPSB7XHJcblx0W0RldmljZVR5cGUuRGVza3RvcF06IHtcclxuXHRcdGVuYWJsZWQ6IHRydWUsXHJcblx0XHRoZWlnaHQ6IDI0MCxcclxuXHRcdHZpZXdPZmZzZXQ6IDAsXHJcblx0XHRub3RlT2Zmc2V0OiAtMzIsXHJcblx0XHRib3JkZXJSYWRpdXM6IFswLCAwLCAwLCAwXSxcclxuXHRcdHBhZGRpbmc6IDgsXHJcblx0XHRmYWRlOiB0cnVlLFxyXG5cdFx0YW5pbWF0aW9uOiBmYWxzZSxcclxuXHRcdGljb25FbmFibGVkOiBmYWxzZSxcclxuXHRcdGljb25TaXplOiA5NixcclxuXHRcdGljb25SYWRpdXM6IDgsXHJcblx0XHRpY29uQmFja2dyb3VuZDogdHJ1ZSxcclxuXHRcdGljb25Cb3JkZXI6IDIsXHJcblx0XHRpY29uRnJhbWU6IHRydWUsXHJcblx0XHRpY29uQWxpZ25tZW50SDogJ2ZsZXgtc3RhcnQnLFxyXG5cdFx0aWNvbkFsaWdubWVudFY6ICdmbGV4LWVuZCcsXHJcblx0XHRpY29uT2Zmc2V0WDogMCxcclxuXHRcdGljb25PZmZzZXRZOiAtMjQsXHJcblx0fSxcclxuXHRbRGV2aWNlVHlwZS5UYWJsZXRdOiB7XHJcblx0XHRlbmFibGVkOiB0cnVlLFxyXG5cdFx0aGVpZ2h0OiAxOTAsXHJcblx0XHR2aWV3T2Zmc2V0OiAwLFxyXG5cdFx0bm90ZU9mZnNldDogLTMyLFxyXG5cdFx0Ym9yZGVyUmFkaXVzOiBbMCwgMCwgMCwgMF0sXHJcblx0XHRwYWRkaW5nOiA4LFxyXG5cdFx0ZmFkZTogdHJ1ZSxcclxuXHRcdGFuaW1hdGlvbjogZmFsc2UsXHJcblx0XHRpY29uRW5hYmxlZDogZmFsc2UsXHJcblx0XHRpY29uU2l6ZTogOTYsXHJcblx0XHRpY29uUmFkaXVzOiA4LFxyXG5cdFx0aWNvbkJhY2tncm91bmQ6IHRydWUsXHJcblx0XHRpY29uQm9yZGVyOiAyLFxyXG5cdFx0aWNvbkZyYW1lOiB0cnVlLFxyXG5cdFx0aWNvbkFsaWdubWVudEg6ICdmbGV4LXN0YXJ0JyxcclxuXHRcdGljb25BbGlnbm1lbnRWOiAnZmxleC1lbmQnLFxyXG5cdFx0aWNvbk9mZnNldFg6IDAsXHJcblx0XHRpY29uT2Zmc2V0WTogLTI0LFxyXG5cdH0sXHJcblx0W0RldmljZVR5cGUuUGhvbmVdOiB7XHJcblx0XHRlbmFibGVkOiB0cnVlLFxyXG5cdFx0aGVpZ2h0OiAxNjAsXHJcblx0XHR2aWV3T2Zmc2V0OiAwLFxyXG5cdFx0bm90ZU9mZnNldDogLTMyLFxyXG5cdFx0Ym9yZGVyUmFkaXVzOiBbMCwgMCwgMCwgMF0sXHJcblx0XHRwYWRkaW5nOiA4LFxyXG5cdFx0ZmFkZTogdHJ1ZSxcclxuXHRcdGFuaW1hdGlvbjogZmFsc2UsXHJcblx0XHRpY29uRW5hYmxlZDogZmFsc2UsXHJcblx0XHRpY29uU2l6ZTogNTYsXHJcblx0XHRpY29uUmFkaXVzOiA4LFxyXG5cdFx0aWNvbkJhY2tncm91bmQ6IHRydWUsXHJcblx0XHRpY29uQm9yZGVyOiAyLFxyXG5cdFx0aWNvbkZyYW1lOiB0cnVlLFxyXG5cdFx0aWNvbkFsaWdubWVudEg6ICdmbGV4LXN0YXJ0JyxcclxuXHRcdGljb25BbGlnbm1lbnRWOiAnZmxleC1lbmQnLFxyXG5cdFx0aWNvbk9mZnNldFg6IDAsXHJcblx0XHRpY29uT2Zmc2V0WTogLTI0LFxyXG5cdH0sXHJcbn07XHJcblxyXG4vKipcclxuICogRGVmYXVsdCBiYW5uZXIgc2V0dGluZ3NcclxuICovXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX0JBTk5FUl9TRVRUSU5HUzogQmFubmVyU2V0dGluZ3MgPSB7XHJcblx0cHJvcGVydGllczoge1xyXG5cdFx0aW1hZ2VQcm9wZXJ0eTogJ2Jhbm5lcicsXHJcblx0XHRpY29uUHJvcGVydHk6ICdpY29uJyxcclxuXHRcdGhpZGVQcm9wZXJ0eUVuYWJsZWQ6IGZhbHNlLFxyXG5cdFx0aGlkZVByb3BlcnR5OiAnJyxcclxuXHR9LFxyXG5cdGRlc2t0b3A6IHsgLi4uREVGQVVMVF9CQU5ORVJfREVWSUNFX1NFVFRJTkdTW0RldmljZVR5cGUuRGVza3RvcF0gfSxcclxuXHR0YWJsZXQ6IHsgLi4uREVGQVVMVF9CQU5ORVJfREVWSUNFX1NFVFRJTkdTW0RldmljZVR5cGUuVGFibGV0XSB9LFxyXG5cdHBob25lOiB7IC4uLkRFRkFVTFRfQkFOTkVSX0RFVklDRV9TRVRUSU5HU1tEZXZpY2VUeXBlLlBob25lXSB9LFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFBsdWdpbiBzZXR0aW5ncyBpbnRlcmZhY2VcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSW1hZ2VNYW5hZ2VyU2V0dGluZ3Mge1xyXG5cdC8vIEdlbmVyYWwgU2V0dGluZ3NcclxuXHRlbmFibGVSZW5hbWVPblBhc3RlOiBib29sZWFuO1xyXG5cdGVuYWJsZVJlbmFtZU9uRHJvcDogYm9vbGVhbjtcclxuXHRpbWFnZU5hbWVUZW1wbGF0ZTogc3RyaW5nO1xyXG5cdGF0dGFjaG1lbnRMb2NhdGlvbjogQXR0YWNobWVudExvY2F0aW9uO1xyXG5cdGN1c3RvbUF0dGFjaG1lbnRQYXRoOiBzdHJpbmc7XHJcblx0XHJcblx0Ly8gSW1hZ2UgU2VydmljZXNcclxuXHRkZWZhdWx0UHJvdmlkZXI6IEltYWdlUHJvdmlkZXI7XHJcblx0dW5zcGxhc2hQcm94eVNlcnZlcjogc3RyaW5nO1xyXG5cdHBleGVsc0FwaUtleTogc3RyaW5nO1xyXG5cdHBpeGFiYXlBcGlLZXk6IHN0cmluZztcclxuXHRkZWZhdWx0T3JpZW50YXRpb246IEltYWdlT3JpZW50YXRpb247XHJcblx0ZGVmYXVsdEltYWdlU2l6ZTogSW1hZ2VTaXplO1xyXG5cdFxyXG5cdC8vIFByb3BlcnR5IEluc2VydGlvblxyXG5cdGVuYWJsZVByb3BlcnR5UGFzdGU6IGJvb2xlYW47XHJcblx0cHJvcGVydHlMaW5rRm9ybWF0OiBQcm9wZXJ0eUxpbmtGb3JtYXQ7XHJcblx0Y3VzdG9tUHJvcGVydHlMaW5rRm9ybWF0OiBzdHJpbmc7XHJcblx0ZGVmYXVsdFByb3BlcnR5TmFtZTogc3RyaW5nO1xyXG5cdFxyXG5cdC8vIENvbnZlcnNpb25cclxuXHRhdXRvQ29udmVydFJlbW90ZUltYWdlczogYm9vbGVhbjtcclxuXHRjb252ZXJ0T25Ob3RlT3BlbjogYm9vbGVhbjtcclxuXHRjb252ZXJ0T25Ob3RlU2F2ZTogYm9vbGVhbjtcclxuXHRcclxuXHQvLyBSZW5hbWUgT3B0aW9uc1xyXG5cdGF1dG9SZW5hbWU6IGJvb2xlYW47XHJcblx0ZHVwTnVtYmVyRGVsaW1pdGVyOiBzdHJpbmc7XHJcblx0ZHVwTnVtYmVyQXRTdGFydDogYm9vbGVhbjtcclxuXHRkaXNhYmxlUmVuYW1lTm90aWNlOiBib29sZWFuO1xyXG5cdGVuYWJsZURlc2NyaXB0aXZlSW1hZ2VzOiBib29sZWFuOyAvLyBBc2sgZm9yIGRlc2NyaXB0aW9uLCB1c2UgYXMgZGlzcGxheSB0ZXh0IChub3RlIGJvZHkgb25seSlcclxuXHRcclxuXHQvLyBJbWFnZSBJbnNlcnRpb24gT3B0aW9ucyAoZnJvbSBJbWFnZSBJbnNlcnRlcilcclxuXHRpbnNlcnRTaXplOiBzdHJpbmc7IC8vIEltYWdlIHNpemUgaW4gbWFya2Rvd24gKGUuZy4sIFwiMjAwXCIgb3IgXCIyMDB4MTAwXCIpXHJcblx0aW5zZXJ0UmVmZXJyYWw6IGJvb2xlYW47IC8vIEluc2VydCBhdHRyaWJ1dGlvbiB0ZXh0IChlLmcuLCBcIlBob3RvIGJ5IFthdXRob3JdIG9uIFtwcm92aWRlcl1cIilcclxuXHRpbnNlcnRCYWNrTGluazogYm9vbGVhbjsgLy8gSW5zZXJ0IGJhY2tsaW5rIGJlZm9yZSBhdHRyaWJ1dGlvbiAoZS5nLiwgXCJbQmFja2xpbmtdKHVybCkgfCBQaG90byBieS4uLlwiKVxyXG5cdGFwcGVuZFJlZmVycmFsOiBib29sZWFuOyAvLyBBcHBlbmQgcmVmZXJyYWwgYXQgZW5kIG9mIGZpbGUgd2hlbiBpbnNlcnRpbmcgdG8gZnJvbnRtYXR0ZXJcclxuXHRcclxuXHQvLyBCYW5uZXIgU2V0dGluZ3NcclxuXHRiYW5uZXI6IEJhbm5lclNldHRpbmdzO1xyXG5cdFxyXG5cdC8vIEFkdmFuY2VkXHJcblx0c3VwcG9ydGVkRXh0ZW5zaW9uczogc3RyaW5nW107XHJcblx0ZGVidWdNb2RlOiBib29sZWFuO1xyXG59XHJcblxyXG4vKipcclxuICogRGVmYXVsdCBzZXR0aW5nc1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEltYWdlTWFuYWdlclNldHRpbmdzID0ge1xyXG5cdC8vIEdlbmVyYWwgU2V0dGluZ3NcclxuXHRlbmFibGVSZW5hbWVPblBhc3RlOiB0cnVlLFxyXG5cdGVuYWJsZVJlbmFtZU9uRHJvcDogdHJ1ZSxcclxuXHRpbWFnZU5hbWVUZW1wbGF0ZTogJ3t7ZmlsZU5hbWV9fScsXHJcblx0YXR0YWNobWVudExvY2F0aW9uOiBBdHRhY2htZW50TG9jYXRpb24uT2JzaWRpYW5EZWZhdWx0LFxyXG5cdGN1c3RvbUF0dGFjaG1lbnRQYXRoOiAnLi9hc3NldHMnLFxyXG5cdFxyXG5cdC8vIEltYWdlIFNlcnZpY2VzXHJcblx0ZGVmYXVsdFByb3ZpZGVyOiBJbWFnZVByb3ZpZGVyLlVuc3BsYXNoLFxyXG5cdHVuc3BsYXNoUHJveHlTZXJ2ZXI6ICcnLFxyXG5cdHBleGVsc0FwaUtleTogJycsXHJcblx0cGl4YWJheUFwaUtleTogJycsXHJcblx0ZGVmYXVsdE9yaWVudGF0aW9uOiBJbWFnZU9yaWVudGF0aW9uLkFueSxcclxuXHRkZWZhdWx0SW1hZ2VTaXplOiBJbWFnZVNpemUuTGFyZ2UsXHJcblx0XHJcblx0Ly8gUHJvcGVydHkgSW5zZXJ0aW9uXHJcblx0ZW5hYmxlUHJvcGVydHlQYXN0ZTogdHJ1ZSxcclxuXHRwcm9wZXJ0eUxpbmtGb3JtYXQ6IFByb3BlcnR5TGlua0Zvcm1hdC5PYnNpZGlhbkRlZmF1bHQsXHJcblx0Y3VzdG9tUHJvcGVydHlMaW5rRm9ybWF0OiAne2ltYWdlLXVybH0nLFxyXG5cdGRlZmF1bHRQcm9wZXJ0eU5hbWU6ICdiYW5uZXInLFxyXG5cdFxyXG5cdC8vIENvbnZlcnNpb25cclxuXHRhdXRvQ29udmVydFJlbW90ZUltYWdlczogZmFsc2UsXHJcblx0Y29udmVydE9uTm90ZU9wZW46IGZhbHNlLFxyXG5cdGNvbnZlcnRPbk5vdGVTYXZlOiBmYWxzZSxcclxuXHRcclxuXHQvLyBSZW5hbWUgT3B0aW9uc1xyXG5cdGF1dG9SZW5hbWU6IGZhbHNlLFxyXG5cdGR1cE51bWJlckRlbGltaXRlcjogJy0nLFxyXG5cdGR1cE51bWJlckF0U3RhcnQ6IGZhbHNlLFxyXG5cdGRpc2FibGVSZW5hbWVOb3RpY2U6IGZhbHNlLFxyXG5cdGVuYWJsZURlc2NyaXB0aXZlSW1hZ2VzOiBmYWxzZSxcclxuXHRcclxuXHQvLyBJbWFnZSBJbnNlcnRpb24gT3B0aW9ucyAoZnJvbSBJbWFnZSBJbnNlcnRlcilcclxuXHRpbnNlcnRTaXplOiAnJywgLy8gRW1wdHkgPSBubyBzaXplIHNwZWNpZmllZFxyXG5cdGluc2VydFJlZmVycmFsOiB0cnVlLCAvLyBEZWZhdWx0IHRvIHRydWUgKGF0dHJpYnV0aW9uKVxyXG5cdGluc2VydEJhY2tMaW5rOiBmYWxzZSwgLy8gRGVmYXVsdCB0byBmYWxzZVxyXG5cdGFwcGVuZFJlZmVycmFsOiBmYWxzZSwgLy8gRGVmYXVsdCB0byBmYWxzZVxyXG5cdFxyXG5cdC8vIEJhbm5lciBTZXR0aW5nc1xyXG5cdGJhbm5lcjogeyAuLi5ERUZBVUxUX0JBTk5FUl9TRVRUSU5HUyB9LFxyXG5cdFxyXG5cdC8vIEFkdmFuY2VkXHJcblx0c3VwcG9ydGVkRXh0ZW5zaW9uczogWydtZCcsICdtZHgnXSxcclxuXHRkZWJ1Z01vZGU6IGZhbHNlLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYW4gaW1hZ2UgZnJvbSBhIHJlbW90ZSBwcm92aWRlclxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBSZW1vdGVJbWFnZSB7XHJcblx0aWQ6IHN0cmluZztcclxuXHRwcm92aWRlcjogSW1hZ2VQcm92aWRlcjtcclxuXHR0aHVtYm5haWxVcmw6IHN0cmluZztcclxuXHRyZWd1bGFyVXJsOiBzdHJpbmc7XHJcblx0ZnVsbFVybDogc3RyaW5nO1xyXG5cdGRvd25sb2FkVXJsOiBzdHJpbmc7XHJcblx0d2lkdGg6IG51bWJlcjtcclxuXHRoZWlnaHQ6IG51bWJlcjtcclxuXHRkZXNjcmlwdGlvbj86IHN0cmluZztcclxuXHRhdXRob3I/OiBzdHJpbmc7XHJcblx0YXV0aG9yVXJsPzogc3RyaW5nO1xyXG5cdHBhZ2VVcmw/OiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXN1bHQgb2YgcHJvY2Vzc2luZyBhbiBpbWFnZVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBQcm9jZXNzZWRJbWFnZSB7XHJcblx0ZmlsZTogVEZpbGUgfCBudWxsO1xyXG5cdHBhdGg6IHN0cmluZztcclxuXHRsaW5rVGV4dDogc3RyaW5nO1xyXG5cdHN1Y2Nlc3M6IGJvb2xlYW47XHJcblx0ZXJyb3I/OiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbWFnZSBpbnNlcnRpb24gY29udGV4dFxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJbnNlcnRpb25Db250ZXh0IHtcclxuXHRpc1Byb3BlcnR5OiBib29sZWFuO1xyXG5cdHByb3BlcnR5TmFtZT86IHN0cmluZztcclxuXHRjdXJzb3JQb3NpdGlvbj86IEVkaXRvclBvc2l0aW9uO1xyXG5cdGFjdGl2ZUZpbGU6IFRGaWxlO1xyXG59XHJcblxyXG4vKipcclxuICogTmFtZSB0ZW1wbGF0ZSB2YXJpYWJsZXNcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTmFtZVRlbXBsYXRlVmFyaWFibGVzIHtcclxuXHRmaWxlTmFtZTogc3RyaW5nO1xyXG5cdGRpck5hbWU6IHN0cmluZztcclxuXHRpbWFnZU5hbWVLZXk/OiBzdHJpbmc7XHJcblx0Zmlyc3RIZWFkaW5nPzogc3RyaW5nO1xyXG5cdGRhdGU6IHN0cmluZztcclxuXHR0aW1lOiBzdHJpbmc7XHJcblx0aW5kZXg/OiBudW1iZXI7XHJcbn1cclxuXHJcbi8vIEltcG9ydCB0eXBlcyBmcm9tIE9ic2lkaWFuIGZvciB1c2UgaW4gaW50ZXJmYWNlc1xyXG5pbXBvcnQgdHlwZSB7IFRGaWxlLCBFZGl0b3JQb3NpdGlvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuIiwgIi8qKlxyXG4gKiBTdG9yYWdlIE1hbmFnZXIgU2VydmljZVxyXG4gKiBIYW5kbGVzIGZpbGUgc3RvcmFnZSwgcGF0aCByZXNvbHV0aW9uLCBhbmQgT2JzaWRpYW4gYXR0YWNobWVudCBsb2NhdGlvbiBpbnRlZ3JhdGlvblxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIFRGb2xkZXIsIG5vcm1hbGl6ZVBhdGggfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEltYWdlTWFuYWdlclNldHRpbmdzLCBBdHRhY2htZW50TG9jYXRpb24gfSBmcm9tICcuLi90eXBlcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgU3RvcmFnZU1hbmFnZXIge1xyXG5cdHByaXZhdGUgYXBwOiBBcHA7XHJcblx0cHJpdmF0ZSBzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3M7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3MpIHtcclxuXHRcdHRoaXMuYXBwID0gYXBwO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlIHNldHRpbmdzIHJlZmVyZW5jZVxyXG5cdCAqL1xyXG5cdHVwZGF0ZVNldHRpbmdzKHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncyk6IHZvaWQge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IHRoZSBhdHRhY2htZW50IGZvbGRlciBwYXRoIGZvciBhIGdpdmVuIG5vdGVcclxuXHQgKi9cclxuXHRnZXRBdHRhY2htZW50Rm9sZGVyKG5vdGVGaWxlOiBURmlsZSk6IHN0cmluZyB7XHJcblx0XHRjb25zdCBub3RlUGF0aCA9IG5vdGVGaWxlLnBhcmVudD8ucGF0aCA/PyAnJztcclxuXHJcblx0XHRzd2l0Y2ggKHRoaXMuc2V0dGluZ3MuYXR0YWNobWVudExvY2F0aW9uKSB7XHJcblx0XHRcdGNhc2UgQXR0YWNobWVudExvY2F0aW9uLlNhbWVGb2xkZXI6XHJcblx0XHRcdFx0cmV0dXJuIG5vdGVQYXRoO1xyXG5cclxuXHRcdFx0Y2FzZSBBdHRhY2htZW50TG9jYXRpb24uU3ViZm9sZGVyOlxyXG5cdFx0XHRcdHJldHVybiBub3JtYWxpemVQYXRoKHRoaXMuam9pblBhdGhzKG5vdGVQYXRoLCB0aGlzLnNldHRpbmdzLmN1c3RvbUF0dGFjaG1lbnRQYXRoKSk7XHJcblxyXG5cdFx0XHRjYXNlIEF0dGFjaG1lbnRMb2NhdGlvbi5WYXVsdEZvbGRlcjpcclxuXHRcdFx0XHRyZXR1cm4gbm9ybWFsaXplUGF0aCh0aGlzLnNldHRpbmdzLmN1c3RvbUF0dGFjaG1lbnRQYXRoKTtcclxuXHJcblx0XHRcdGNhc2UgQXR0YWNobWVudExvY2F0aW9uLk9ic2lkaWFuRGVmYXVsdDpcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5nZXRPYnNpZGlhbkF0dGFjaG1lbnRGb2xkZXIobm90ZUZpbGUpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IE9ic2lkaWFuJ3MgY29uZmlndXJlZCBhdHRhY2htZW50IGZvbGRlclxyXG5cdCAqL1xyXG5cdHByaXZhdGUgZ2V0T2JzaWRpYW5BdHRhY2htZW50Rm9sZGVyKG5vdGVGaWxlOiBURmlsZSk6IHN0cmluZyB7XHJcblx0XHQvLyBBY2Nlc3MgT2JzaWRpYW4ncyBpbnRlcm5hbCBjb25maWcgZm9yIGF0dGFjaG1lbnQgZm9sZGVyIChub3QgaW4gcHVibGljIEFQSSB0eXBlcyBidXQgYWNjZXNzaWJsZSBhdCBydW50aW1lKVxyXG5cdFx0Y29uc3QgdmF1bHRDb25maWcgPSAodGhpcy5hcHAudmF1bHQgYXMgdW5rbm93biBhcyB7IGNvbmZpZz86IHsgYXR0YWNobWVudEZvbGRlclBhdGg/OiBzdHJpbmcgfSB9KS5jb25maWc7XHJcblx0XHRjb25zdCBhdHRhY2htZW50Rm9sZGVyUGF0aDogc3RyaW5nID0gdmF1bHRDb25maWc/LmF0dGFjaG1lbnRGb2xkZXJQYXRoID8/ICcvJztcclxuXHRcdGNvbnN0IG5vdGVQYXRoID0gbm90ZUZpbGUucGFyZW50Py5wYXRoID8/ICcnO1xyXG5cclxuXHRcdGlmIChhdHRhY2htZW50Rm9sZGVyUGF0aCA9PT0gJy8nKSB7XHJcblx0XHRcdC8vIFZhdWx0IHJvb3RcclxuXHRcdFx0cmV0dXJuICcnO1xyXG5cdFx0fSBlbHNlIGlmIChhdHRhY2htZW50Rm9sZGVyUGF0aCA9PT0gJy4vJykge1xyXG5cdFx0XHQvLyBTYW1lIGZvbGRlciBhcyBub3RlXHJcblx0XHRcdHJldHVybiBub3RlUGF0aDtcclxuXHRcdH0gZWxzZSBpZiAoYXR0YWNobWVudEZvbGRlclBhdGguc3RhcnRzV2l0aCgnLi8nKSkge1xyXG5cdFx0XHQvLyBSZWxhdGl2ZSB0byBub3RlXHJcblx0XHRcdGNvbnN0IHJlbGF0aXZlUGF0aCA9IGF0dGFjaG1lbnRGb2xkZXJQYXRoLnNsaWNlKDIpO1xyXG5cdFx0XHRyZXR1cm4gbm9ybWFsaXplUGF0aCh0aGlzLmpvaW5QYXRocyhub3RlUGF0aCwgcmVsYXRpdmVQYXRoKSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBBYnNvbHV0ZSBwYXRoIGluIHZhdWx0XHJcblx0XHRcdHJldHVybiBub3JtYWxpemVQYXRoKGF0dGFjaG1lbnRGb2xkZXJQYXRoKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0LyoqXHJcblx0ICogSm9pbiBwYXRoIHNlZ21lbnRzXHJcblx0ICovXHJcblx0cHJpdmF0ZSBqb2luUGF0aHMoLi4ucGFydHM6IHN0cmluZ1tdKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBwYXJ0cy5maWx0ZXIocCA9PiBwKS5qb2luKCcvJyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBFbnN1cmUgYSBmb2xkZXIgZXhpc3RzLCBjcmVhdGluZyBpdCBpZiBuZWNlc3NhcnlcclxuXHQgKi9cclxuXHRhc3luYyBlbnN1cmVGb2xkZXJFeGlzdHMoZm9sZGVyUGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRpZiAoIWZvbGRlclBhdGgpIHJldHVybjtcclxuXHJcblx0XHRjb25zdCBub3JtYWxpemVkUGF0aCA9IG5vcm1hbGl6ZVBhdGgoZm9sZGVyUGF0aCk7XHJcblx0XHRjb25zdCBmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobm9ybWFsaXplZFBhdGgpO1xyXG5cclxuXHRcdGlmICghZm9sZGVyKSB7XHJcblx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihub3JtYWxpemVkUGF0aCk7XHJcblx0XHR9IGVsc2UgaWYgKCEoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBQYXRoIGV4aXN0cyBidXQgaXMgbm90IGEgZm9sZGVyOiAke25vcm1hbGl6ZWRQYXRofWApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2VuZXJhdGUgYSB1bmlxdWUgZmlsZSBwYXRoIGZvciBhbiBpbWFnZVxyXG5cdCAqL1xyXG5cdGFzeW5jIGdldEF2YWlsYWJsZVBhdGgoYmFzZU5hbWU6IHN0cmluZywgZXh0ZW5zaW9uOiBzdHJpbmcsIG5vdGVGaWxlOiBURmlsZSk6IFByb21pc2U8c3RyaW5nPiB7XHJcblx0XHRjb25zdCBmb2xkZXIgPSB0aGlzLmdldEF0dGFjaG1lbnRGb2xkZXIobm90ZUZpbGUpO1xyXG5cdFx0YXdhaXQgdGhpcy5lbnN1cmVGb2xkZXJFeGlzdHMoZm9sZGVyKTtcclxuXHJcblx0XHRjb25zdCBzYW5pdGl6ZWROYW1lID0gdGhpcy5zYW5pdGl6ZUZpbGVOYW1lKGJhc2VOYW1lKTtcclxuXHRcdGxldCBmaWxlTmFtZSA9IGAke3Nhbml0aXplZE5hbWV9LiR7ZXh0ZW5zaW9ufWA7XHJcblx0XHRsZXQgZmlsZVBhdGggPSBmb2xkZXIgPyBub3JtYWxpemVQYXRoKHRoaXMuam9pblBhdGhzKGZvbGRlciwgZmlsZU5hbWUpKSA6IG5vcm1hbGl6ZVBhdGgoZmlsZU5hbWUpO1xyXG5cclxuXHRcdC8vIENoZWNrIGZvciBkdXBsaWNhdGVzXHJcblx0XHRsZXQgY291bnRlciA9IDE7XHJcblx0XHR3aGlsZSAodGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKSkge1xyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5kdXBOdW1iZXJBdFN0YXJ0KSB7XHJcblx0XHRcdFx0ZmlsZU5hbWUgPSBgJHtjb3VudGVyfSR7dGhpcy5zZXR0aW5ncy5kdXBOdW1iZXJEZWxpbWl0ZXJ9JHtzYW5pdGl6ZWROYW1lfS4ke2V4dGVuc2lvbn1gO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGZpbGVOYW1lID0gYCR7c2FuaXRpemVkTmFtZX0ke3RoaXMuc2V0dGluZ3MuZHVwTnVtYmVyRGVsaW1pdGVyfSR7Y291bnRlcn0uJHtleHRlbnNpb259YDtcclxuXHRcdFx0fVxyXG5cdFx0XHRmaWxlUGF0aCA9IGZvbGRlciA/IG5vcm1hbGl6ZVBhdGgodGhpcy5qb2luUGF0aHMoZm9sZGVyLCBmaWxlTmFtZSkpIDogbm9ybWFsaXplUGF0aChmaWxlTmFtZSk7XHJcblx0XHRcdGNvdW50ZXIrKztcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gZmlsZVBhdGg7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTYXZlIGJpbmFyeSBkYXRhIGFzIGEgZmlsZVxyXG5cdCAqL1xyXG5cdGFzeW5jIHNhdmVGaWxlKGRhdGE6IEFycmF5QnVmZmVyLCBmaWxlUGF0aDogc3RyaW5nKTogUHJvbWlzZTxURmlsZT4ge1xyXG5cdFx0Y29uc3Qgbm9ybWFsaXplZFBhdGggPSBub3JtYWxpemVQYXRoKGZpbGVQYXRoKTtcclxuXHRcdFxyXG5cdFx0Ly8gRW5zdXJlIHBhcmVudCBmb2xkZXIgZXhpc3RzXHJcblx0XHRjb25zdCBsYXN0U2xhc2ggPSBub3JtYWxpemVkUGF0aC5sYXN0SW5kZXhPZignLycpO1xyXG5cdFx0Y29uc3QgcGFyZW50UGF0aCA9IGxhc3RTbGFzaCA+IDAgPyBub3JtYWxpemVkUGF0aC5zbGljZSgwLCBsYXN0U2xhc2gpIDogJyc7XHJcblx0XHRpZiAocGFyZW50UGF0aCkge1xyXG5cdFx0XHRhd2FpdCB0aGlzLmVuc3VyZUZvbGRlckV4aXN0cyhwYXJlbnRQYXRoKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlQmluYXJ5KG5vcm1hbGl6ZWRQYXRoLCBkYXRhKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdlbmVyYXRlIG1hcmtkb3duIGltYWdlIGxpbmsgZm9yIGEgZmlsZVxyXG5cdCAqIEVuc3VyZXMgdGhlIGxpbmsgaW5jbHVkZXMgJyEnIGZvciBpbWFnZXNcclxuXHQgKiBAcGFyYW0gZGlzcGxheVRleHQgT3B0aW9uYWwgZGlzcGxheSB0ZXh0IHRvIGFkZCBhZnRlciB0aGUgbGluayAoZS5nLiwgIVtbaW1hZ2UuanBnfGRpc3BsYXkgdGV4dF1dKVxyXG5cdCAqIEBwYXJhbSBpbnNlcnRTaXplIE9wdGlvbmFsIHNpemUgdG8gYWRkIChlLmcuLCBcIjIwMFwiIG9yIFwiMjAweDEwMFwiKVxyXG5cdCAqL1xyXG5cdGdlbmVyYXRlTWFya2Rvd25MaW5rKGZpbGU6IFRGaWxlLCBzb3VyY2VQYXRoOiBzdHJpbmcsIGRpc3BsYXlUZXh0Pzogc3RyaW5nLCBpbnNlcnRTaXplPzogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdGNvbnN0IGxpbmsgPSB0aGlzLmFwcC5maWxlTWFuYWdlci5nZW5lcmF0ZU1hcmtkb3duTGluayhmaWxlLCBzb3VyY2VQYXRoKTtcclxuXHRcdC8vIE9ic2lkaWFuJ3MgZ2VuZXJhdGVNYXJrZG93bkxpbmsgc2hvdWxkIGluY2x1ZGUgJyEnIGZvciBpbWFnZXMsIGJ1dCBlbnN1cmUgaXQgZG9lc1xyXG5cdFx0bGV0IGltYWdlTGluayA9IGxpbms7XHJcblx0XHRpZiAodGhpcy5pc0ltYWdlRmlsZShmaWxlKSAmJiAhbGluay5zdGFydHNXaXRoKCchJykpIHtcclxuXHRcdFx0Ly8gSWYgaXQncyBhbiBpbWFnZSBidXQgZG9lc24ndCBzdGFydCB3aXRoICchJywgYWRkIGl0XHJcblx0XHRcdGltYWdlTGluayA9IGAhJHtsaW5rfWA7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIERlYnVnIGxvZ2dpbmdcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xyXG5cdFx0XHRjb25zb2xlLmRlYnVnKCdbSW1hZ2UgTWFuYWdlcl0gZ2VuZXJhdGVNYXJrZG93bkxpbmsnLCB7XHJcblx0XHRcdFx0b3JpZ2luYWxMaW5rOiBsaW5rLFxyXG5cdFx0XHRcdGltYWdlTGluayxcclxuXHRcdFx0XHRpbnNlcnRTaXplLFxyXG5cdFx0XHRcdGRpc3BsYXlUZXh0LFxyXG5cdFx0XHRcdGhhc1NpemU6ICEhKGluc2VydFNpemUgJiYgaW5zZXJ0U2l6ZS50cmltKCkpXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBIYW5kbGUgc2l6ZSBhbmQgZGlzcGxheSB0ZXh0XHJcblx0XHQvLyBGb3Igd2lraWxpbmtzOiAhW1twYXRoXV0gLT4gIVtbcGF0aHxzaXplXV0gb3IgIVtbcGF0aHxzaXplfGRpc3BsYXlUZXh0XV1cclxuXHRcdC8vIEZvciBtYXJrZG93bjogIVthbHRdKHBhdGgpIC0+ICFbYWx0fHNpemVdKHBhdGgpIG9yICFbZGlzcGxheVRleHR8c2l6ZV0ocGF0aClcclxuXHRcdGlmIChpbWFnZUxpbmsuc3RhcnRzV2l0aCgnIVsnKSAmJiBpbWFnZUxpbmsuaW5jbHVkZXMoJ10oJykpIHtcclxuXHRcdFx0Ly8gTWFya2Rvd24gbGluazogIVthbHRdKHBhdGgpXHJcblx0XHRcdGlmIChpbnNlcnRTaXplICYmIGluc2VydFNpemUudHJpbSgpKSB7XHJcblx0XHRcdFx0Ly8gQWRkIHNpemU6ICFbYWx0fHNpemVdKHBhdGgpXHJcblx0XHRcdFx0Y29uc3Qgc2l6ZVBhcnQgPSBgfCR7aW5zZXJ0U2l6ZX1gO1xyXG5cdFx0XHRcdGlmIChkaXNwbGF5VGV4dCAmJiBkaXNwbGF5VGV4dC50cmltKCkpIHtcclxuXHRcdFx0XHRcdC8vIEJvdGggc2l6ZSBhbmQgZGlzcGxheSB0ZXh0OiAhW2Rpc3BsYXlUZXh0fHNpemVdKHBhdGgpXHJcblx0XHRcdFx0XHRpbWFnZUxpbmsgPSBpbWFnZUxpbmsucmVwbGFjZSgvXiFcXFsoW15cXF1dKilcXF0vLCBgIVske2Rpc3BsYXlUZXh0fSR7c2l6ZVBhcnR9XWApO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQvLyBKdXN0IHNpemU6ICFbYWx0fHNpemVdKHBhdGgpXHJcblx0XHRcdFx0XHQvLyBIYW5kbGUgZW1wdHkgYWx0IHRleHQgY2FzZTogIVtdIC0+ICFbfHNpemVdXHJcblx0XHRcdFx0XHRjb25zdCBhbHRNYXRjaCA9IGltYWdlTGluay5tYXRjaCgvXiFcXFsoW15cXF1dKilcXF0vKTtcclxuXHRcdFx0XHRcdGlmIChhbHRNYXRjaCkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBhbHQgPSBhbHRNYXRjaFsxXSB8fCAnJztcclxuXHRcdFx0XHRcdFx0aW1hZ2VMaW5rID0gaW1hZ2VMaW5rLnJlcGxhY2UoL14hXFxbKFteXFxdXSopXFxdLywgYCFbJHthbHR9JHtzaXplUGFydH1dYCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2UgaWYgKGRpc3BsYXlUZXh0ICYmIGRpc3BsYXlUZXh0LnRyaW0oKSkge1xyXG5cdFx0XHRcdC8vIEp1c3QgZGlzcGxheSB0ZXh0OiAhW2Rpc3BsYXlUZXh0XShwYXRoKVxyXG5cdFx0XHRcdGltYWdlTGluayA9IGltYWdlTGluay5yZXBsYWNlKC9eIVxcWyhbXlxcXV0qKVxcXS8sIGAhWyR7ZGlzcGxheVRleHR9XWApO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKGltYWdlTGluay5zdGFydHNXaXRoKCchWycpICYmIGltYWdlTGluay5pbmNsdWRlcygnXV0nKSkge1xyXG5cdFx0XHQvLyBXaWtpbGluazogIVtbcGF0aF1dXHJcblx0XHRcdGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xyXG5cdFx0XHRpZiAoaW5zZXJ0U2l6ZSAmJiBpbnNlcnRTaXplLnRyaW0oKSkge1xyXG5cdFx0XHRcdHBhcnRzLnB1c2goaW5zZXJ0U2l6ZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGRpc3BsYXlUZXh0ICYmIGRpc3BsYXlUZXh0LnRyaW0oKSkge1xyXG5cdFx0XHRcdHBhcnRzLnB1c2goZGlzcGxheVRleHQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChwYXJ0cy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0Ly8gQWRkIHNpemUgYW5kL29yIGRpc3BsYXkgdGV4dDogIVtbcGF0aHxzaXplXV0gb3IgIVtbcGF0aHxzaXplfGRpc3BsYXlUZXh0XV1cclxuXHRcdFx0XHRpbWFnZUxpbmsgPSBpbWFnZUxpbmsucmVwbGFjZSgvXFxdXFxdJC8sIGB8JHtwYXJ0cy5qb2luKCd8Jyl9XV1gKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBEZWJ1ZyBsb2dnaW5nXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcclxuXHRcdFx0Y29uc29sZS5kZWJ1ZygnW0ltYWdlIE1hbmFnZXJdIGdlbmVyYXRlTWFya2Rvd25MaW5rIHJlc3VsdCcsIHtcclxuXHRcdFx0XHRmaW5hbExpbms6IGltYWdlTGlua1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIGltYWdlTGluaztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCByZWxhdGl2ZSBwYXRoIGZyb20gc291cmNlIGZpbGUgdG8gdGFyZ2V0IGZpbGVcclxuXHQgKi9cclxuXHRnZXRSZWxhdGl2ZVBhdGgoZnJvbTogVEZpbGUsIHRvOiBURmlsZSk6IHN0cmluZyB7XHJcblx0XHRjb25zdCBmcm9tRGlyID0gZnJvbS5wYXJlbnQ/LnBhdGggPz8gJyc7XHJcblx0XHRjb25zdCB0b1BhdGggPSB0by5wYXRoO1xyXG5cclxuXHRcdGlmICghZnJvbURpcikge1xyXG5cdFx0XHRyZXR1cm4gdG9QYXRoO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNpbXBsZSByZWxhdGl2ZSBwYXRoIGNhbGN1bGF0aW9uXHJcblx0XHQvLyBGb3Igc2FtZSBkaXJlY3RvcnksIGp1c3QgcmV0dXJuIGZpbGUgbmFtZVxyXG5cdFx0Y29uc3QgdG9EaXIgPSB0by5wYXJlbnQ/LnBhdGggPz8gJyc7XHJcblx0XHRpZiAoZnJvbURpciA9PT0gdG9EaXIpIHtcclxuXHRcdFx0cmV0dXJuIHRvLm5hbWU7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gT3RoZXJ3aXNlIHJldHVybiB0aGUgZnVsbCBwYXRoXHJcblx0XHRyZXR1cm4gdG9QYXRoO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2FuaXRpemUgYSBmaWxlIG5hbWVcclxuXHQgKi9cclxuXHRzYW5pdGl6ZUZpbGVOYW1lKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHQvLyBSZW1vdmUgb3IgcmVwbGFjZSBpbnZhbGlkIGNoYXJhY3RlcnNcclxuXHRcdHJldHVybiBuYW1lXHJcblx0XHRcdC5yZXBsYWNlKC9bXFxcXC86Kj9cIjw+fF0vZywgJy0nKSAgLy8gUmVwbGFjZSBXaW5kb3dzIGludmFsaWQgY2hhcnNcclxuXHRcdFx0LnJlcGxhY2UoL1xccysvZywgJyAnKSAgICAgICAgICAgIC8vIE5vcm1hbGl6ZSB3aGl0ZXNwYWNlXHJcblx0XHRcdC5yZXBsYWNlKC9eXFwuKy8sICcnKSAgICAgICAgICAgICAvLyBSZW1vdmUgbGVhZGluZyBkb3RzXHJcblx0XHRcdC5yZXBsYWNlKC9cXC4rJC8sICcnKSAgICAgICAgICAgICAvLyBSZW1vdmUgdHJhaWxpbmcgZG90c1xyXG5cdFx0XHQudHJpbSgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IGZpbGUgZXh0ZW5zaW9uIGZyb20gTUlNRSB0eXBlXHJcblx0ICovXHJcblx0Z2V0RXh0ZW5zaW9uRnJvbU1pbWVUeXBlKG1pbWVUeXBlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0Y29uc3QgbWltZVRvRXh0OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xyXG5cdFx0XHQnaW1hZ2UvanBlZyc6ICdqcGcnLFxyXG5cdFx0XHQnaW1hZ2UvanBnJzogJ2pwZycsXHJcblx0XHRcdCdpbWFnZS9wbmcnOiAncG5nJyxcclxuXHRcdFx0J2ltYWdlL2dpZic6ICdnaWYnLFxyXG5cdFx0XHQnaW1hZ2Uvd2VicCc6ICd3ZWJwJyxcclxuXHRcdFx0J2ltYWdlL3N2Zyt4bWwnOiAnc3ZnJyxcclxuXHRcdFx0J2ltYWdlL2JtcCc6ICdibXAnLFxyXG5cdFx0XHQnaW1hZ2UvdGlmZic6ICd0aWZmJyxcclxuXHRcdFx0J2ltYWdlL2F2aWYnOiAnYXZpZicsXHJcblx0XHR9O1xyXG5cclxuXHRcdHJldHVybiBtaW1lVG9FeHRbbWltZVR5cGVdID8/ICdwbmcnO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgYSBmaWxlIGlzIGFuIGltYWdlIGJhc2VkIG9uIGV4dGVuc2lvblxyXG5cdCAqL1xyXG5cdGlzSW1hZ2VGaWxlKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XHJcblx0XHRjb25zdCBpbWFnZUV4dGVuc2lvbnMgPSBbJ2pwZycsICdqcGVnJywgJ3BuZycsICdnaWYnLCAnd2VicCcsICdzdmcnLCAnYm1wJywgJ3RpZmYnLCAnYXZpZiddO1xyXG5cdFx0cmV0dXJuIGltYWdlRXh0ZW5zaW9ucy5pbmNsdWRlcyhmaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIGEgVVJMIHBvaW50cyB0byBhbiBleHRlcm5hbCBpbWFnZVxyXG5cdCAqL1xyXG5cdGlzRXh0ZXJuYWxJbWFnZVVybCh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgcGFyc2VkID0gbmV3IFVSTCh1cmwpO1xyXG5cdFx0XHRpZiAoIVsnaHR0cDonLCAnaHR0cHM6J10uaW5jbHVkZXMocGFyc2VkLnByb3RvY29sKSkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQ2hlY2sgaWYgVVJMIGVuZHMgd2l0aCBjb21tb24gaW1hZ2UgZXh0ZW5zaW9uc1xyXG5cdFx0XHRjb25zdCBwYXRobmFtZSA9IHBhcnNlZC5wYXRobmFtZS50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0XHRjb25zdCBpbWFnZUV4dGVuc2lvbnMgPSBbJy5qcGcnLCAnLmpwZWcnLCAnLnBuZycsICcuZ2lmJywgJy53ZWJwJywgJy5zdmcnLCAnLmJtcCcsICcudGlmZicsICcuYXZpZiddO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQWxzbyBjaGVjayBmb3IgaW1hZ2UtcmVsYXRlZCBxdWVyeSBwYXJhbXMgb3IgcGF0aHNcclxuXHRcdFx0aWYgKGltYWdlRXh0ZW5zaW9ucy5zb21lKGV4dCA9PiBwYXRobmFtZS5lbmRzV2l0aChleHQpKSkge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDb21tb24gaW1hZ2UgaG9zdGluZyBwYXR0ZXJuc1xyXG5cdFx0XHRjb25zdCBpbWFnZUhvc3RzID0gW1xyXG5cdFx0XHRcdCdpbWFnZXMudW5zcGxhc2guY29tJyxcclxuXHRcdFx0XHQnaW1hZ2VzLnBleGVscy5jb20nLFxyXG5cdFx0XHRcdCdwaXhhYmF5LmNvbScsXHJcblx0XHRcdFx0J2kuaW1ndXIuY29tJyxcclxuXHRcdFx0XHQnY2RuLmRpc2NvcmRhcHAuY29tJyxcclxuXHRcdFx0XTtcclxuXHJcblx0XHRcdHJldHVybiBpbWFnZUhvc3RzLnNvbWUoaG9zdCA9PiBwYXJzZWQuaG9zdG5hbWUuaW5jbHVkZXMoaG9zdCkpO1xyXG5cdFx0fSBjYXRjaCB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBJbWFnZSBQcm9jZXNzb3IgU2VydmljZVxyXG4gKiBDb3JlIGltYWdlIGhhbmRsaW5nLCBkb3dubG9hZGluZywgYW5kIHByb2Nlc3NpbmdcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBOb3RpY2UsIE1hcmtkb3duVmlldywgcmVxdWVzdFVybCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgSW1hZ2VNYW5hZ2VyU2V0dGluZ3MsIFByb2Nlc3NlZEltYWdlIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBTdG9yYWdlTWFuYWdlciB9IGZyb20gJy4vU3RvcmFnZU1hbmFnZXInO1xyXG5pbXBvcnQgeyByZW5kZXJUZW1wbGF0ZSwgYnVpbGRUZW1wbGF0ZVZhcmlhYmxlcywgaXNUZW1wbGF0ZU1lYW5pbmdmdWwgfSBmcm9tICcuLi91dGlscy90ZW1wbGF0ZSc7XHJcbmltcG9ydCB7IG9wZW5SZW5hbWVNb2RhbCB9IGZyb20gJy4uL21vZGFscy9SZW5hbWVNb2RhbCc7XHJcbmltcG9ydCB7IG9wZW5EZXNjcmlwdGl2ZUltYWdlTW9kYWwgfSBmcm9tICcuLi9tb2RhbHMvRGVzY3JpcHRpdmVJbWFnZU1vZGFsJztcclxuXHJcbmV4cG9ydCBjbGFzcyBJbWFnZVByb2Nlc3NvciB7XHJcblx0cHJpdmF0ZSBhcHA6IEFwcDtcclxuXHRwcml2YXRlIHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncztcclxuXHRwcml2YXRlIHN0b3JhZ2VNYW5hZ2VyOiBTdG9yYWdlTWFuYWdlcjtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncywgc3RvcmFnZU1hbmFnZXI6IFN0b3JhZ2VNYW5hZ2VyKSB7XHJcblx0XHR0aGlzLmFwcCA9IGFwcDtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuXHRcdHRoaXMuc3RvcmFnZU1hbmFnZXIgPSBzdG9yYWdlTWFuYWdlcjtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSBzZXR0aW5ncyByZWZlcmVuY2VcclxuXHQgKi9cclxuXHR1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3MpOiB2b2lkIHtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuXHRcdHRoaXMuc3RvcmFnZU1hbmFnZXIudXBkYXRlU2V0dGluZ3Moc2V0dGluZ3MpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUHJvY2VzcyBhIHBhc3RlZC9kcm9wcGVkIGltYWdlIGZpbGVcclxuXHQgKiBUaGlzIGlzIGNhbGxlZCBmcm9tIG91ciBldmVudCBoYW5kbGVycyAodXNlci1pbml0aWF0ZWQgYWN0aW9uKVxyXG5cdCAqIEBwYXJhbSBpc1Byb3BlcnR5SW5zZXJ0aW9uIC0gSWYgdHJ1ZSwgc2tpcCBkZXNjcmlwdGl2ZSBpbWFnZXMgKG9ubHkgYXBwbGllcyB0byBub3RlIGJvZHkpXHJcblx0ICovXHJcblx0YXN5bmMgcHJvY2Vzc0ltYWdlRmlsZShcclxuXHRcdGZpbGU6IEZpbGUsXHJcblx0XHRhY3RpdmVGaWxlOiBURmlsZSxcclxuXHRcdHNob3dSZW5hbWVNb2RhbDogYm9vbGVhbiA9IHRydWUsXHJcblx0XHRpc1Byb3BlcnR5SW5zZXJ0aW9uOiBib29sZWFuID0gZmFsc2VcclxuXHQpOiBQcm9taXNlPFByb2Nlc3NlZEltYWdlPiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyBSZWFkIGZpbGUgZGF0YVxyXG5cdFx0XHRjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKTtcclxuXHRcdFx0Y29uc3QgZXh0ZW5zaW9uID0gdGhpcy5nZXRFeHRlbnNpb24oZmlsZSk7XHJcblxyXG5cdFx0XHQvLyBHZW5lcmF0ZSBzdWdnZXN0ZWQgbmFtZSBmcm9tIHRlbXBsYXRlXHJcblx0XHRcdGNvbnN0IHN1Z2dlc3RlZE5hbWUgPSB0aGlzLmdlbmVyYXRlU3VnZ2VzdGVkTmFtZShhY3RpdmVGaWxlKTtcclxuXHJcblx0XHRcdC8vIEdldCB0aGUgbmFtZSB0byB1c2VcclxuXHRcdFx0bGV0IGZpbmFsTmFtZSA9IHN1Z2dlc3RlZE5hbWU7XHJcblxyXG5cdFx0XHRpZiAoc2hvd1JlbmFtZU1vZGFsICYmICF0aGlzLnNldHRpbmdzLmF1dG9SZW5hbWUpIHtcclxuXHRcdFx0XHQvLyBDcmVhdGUgYSB0ZW1wb3JhcnkgZmlsZSB0byBzaG93IGluIG1vZGFsXHJcblx0XHRcdFx0Y29uc3QgdGVtcFBhdGggPSBhd2FpdCB0aGlzLnN0b3JhZ2VNYW5hZ2VyLmdldEF2YWlsYWJsZVBhdGgoXHJcblx0XHRcdFx0XHRgdGVtcC0ke0RhdGUubm93KCl9YCxcclxuXHRcdFx0XHRcdGV4dGVuc2lvbixcclxuXHRcdFx0XHRcdGFjdGl2ZUZpbGVcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHRcdGNvbnN0IHRlbXBGaWxlID0gYXdhaXQgdGhpcy5zdG9yYWdlTWFuYWdlci5zYXZlRmlsZShhcnJheUJ1ZmZlciwgdGVtcFBhdGgpO1xyXG5cclxuXHRcdFx0XHRsZXQgZmluYWxOYW1lOiBzdHJpbmc7XHJcblx0XHRcdFx0bGV0IGRpc3BsYXlUZXh0OiBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcblxyXG5cdFx0XHRcdC8vIFNob3cgZGVzY3JpcHRpdmUgaW1hZ2UgbW9kYWwgaWYgZW5hYmxlZCwgb3RoZXJ3aXNlIHNob3cgcmVuYW1lIG1vZGFsXHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlRGVzY3JpcHRpdmVJbWFnZXMpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGRlc2NSZXN1bHQgPSBhd2FpdCBvcGVuRGVzY3JpcHRpdmVJbWFnZU1vZGFsKHRoaXMuYXBwLCB0ZW1wRmlsZSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmIChkZXNjUmVzdWx0LmNhbmNlbGxlZCkge1xyXG5cdFx0XHRcdFx0XHQvLyBVc2VyIGNhbmNlbGxlZCAtIGRlbGV0ZSB0ZW1wIGZpbGUgYW5kIHJldHVyblxyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci50cmFzaEZpbGUodGVtcEZpbGUpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdFx0XHRcdGZpbGU6IG51bGwsXHJcblx0XHRcdFx0XHRcdFx0cGF0aDogJycsXHJcblx0XHRcdFx0XHRcdFx0bGlua1RleHQ6ICcnLFxyXG5cdFx0XHRcdFx0XHRcdHN1Y2Nlc3M6IGZhbHNlLFxyXG5cdFx0XHRcdFx0XHRcdGVycm9yOiAnQ2FuY2VsbGVkIGJ5IHVzZXInLFxyXG5cdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGZpbmFsTmFtZSA9IGRlc2NSZXN1bHQuZmlsZU5hbWU7XHJcblx0XHRcdFx0XHRkaXNwbGF5VGV4dCA9IGRlc2NSZXN1bHQuZGVzY3JpcHRpb247XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIFNob3cgcmVuYW1lIG1vZGFsXHJcblx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBvcGVuUmVuYW1lTW9kYWwodGhpcy5hcHAsIHRlbXBGaWxlLCBzdWdnZXN0ZWROYW1lKTtcclxuXHJcblx0XHRcdFx0XHRpZiAocmVzdWx0LmNhbmNlbGxlZCkge1xyXG5cdFx0XHRcdFx0XHQvLyBVc2VyIGNhbmNlbGxlZCAtIGRlbGV0ZSB0ZW1wIGZpbGUgYW5kIHJldHVyblxyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci50cmFzaEZpbGUodGVtcEZpbGUpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdFx0XHRcdGZpbGU6IG51bGwsXHJcblx0XHRcdFx0XHRcdFx0cGF0aDogJycsXHJcblx0XHRcdFx0XHRcdFx0bGlua1RleHQ6ICcnLFxyXG5cdFx0XHRcdFx0XHRcdHN1Y2Nlc3M6IGZhbHNlLFxyXG5cdFx0XHRcdFx0XHRcdGVycm9yOiAnQ2FuY2VsbGVkIGJ5IHVzZXInLFxyXG5cdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGZpbmFsTmFtZSA9IHJlc3VsdC5uZXdOYW1lO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gUmVuYW1lIHRoZSB0ZW1wIGZpbGUgdG8gdGhlIGZpbmFsIG5hbWVcclxuXHRcdFx0XHRjb25zdCBmaW5hbFBhdGggPSBhd2FpdCB0aGlzLmdldERlZHVwbGljYXRlZFBhdGgoZmluYWxOYW1lLCBleHRlbnNpb24sIGFjdGl2ZUZpbGUpO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUodGVtcEZpbGUsIGZpbmFsUGF0aCk7XHJcblxyXG5cdFx0XHRcdGNvbnN0IGFic3RyYWN0RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaW5hbFBhdGgpO1xyXG5cdFx0XHRcdGlmICghKGFic3RyYWN0RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xyXG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdSZW5hbWVkIGZpbGUgbm90IGZvdW5kJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNvbnN0IHJlbmFtZWRGaWxlID0gYWJzdHJhY3RGaWxlO1xyXG5cdFx0XHRcdGNvbnN0IGxpbmtUZXh0ID0gdGhpcy5zdG9yYWdlTWFuYWdlci5nZW5lcmF0ZU1hcmtkb3duTGluayhcclxuXHRcdFx0XHRcdHJlbmFtZWRGaWxlLFxyXG5cdFx0XHRcdFx0YWN0aXZlRmlsZS5wYXRoLFxyXG5cdFx0XHRcdFx0ZGlzcGxheVRleHQsXHJcblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmluc2VydFNpemVcclxuXHRcdFx0XHQpO1xyXG5cclxuXHRcdFx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuZGlzYWJsZVJlbmFtZU5vdGljZSkge1xyXG5cdFx0XHRcdFx0bmV3IE5vdGljZShgSW1hZ2Ugc2F2ZWQgYXM6ICR7cmVuYW1lZEZpbGUubmFtZX1gKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0XHRmaWxlOiByZW5hbWVkRmlsZSxcclxuXHRcdFx0XHRcdHBhdGg6IGZpbmFsUGF0aCxcclxuXHRcdFx0XHRcdGxpbmtUZXh0LFxyXG5cdFx0XHRcdFx0c3VjY2VzczogdHJ1ZSxcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIEF1dG8tcmVuYW1lIHdpdGhvdXQgbW9kYWxcclxuXHRcdFx0XHRjb25zdCBmaW5hbFBhdGggPSBhd2FpdCB0aGlzLmdldERlZHVwbGljYXRlZFBhdGgoZmluYWxOYW1lLCBleHRlbnNpb24sIGFjdGl2ZUZpbGUpO1xyXG5cdFx0XHRcdGNvbnN0IHNhdmVkRmlsZSA9IGF3YWl0IHRoaXMuc3RvcmFnZU1hbmFnZXIuc2F2ZUZpbGUoYXJyYXlCdWZmZXIsIGZpbmFsUGF0aCk7XHJcblx0XHRcdFx0Y29uc3QgbGlua1RleHQgPSB0aGlzLnN0b3JhZ2VNYW5hZ2VyLmdlbmVyYXRlTWFya2Rvd25MaW5rKFxyXG5cdFx0XHRcdFx0c2F2ZWRGaWxlLFxyXG5cdFx0XHRcdFx0YWN0aXZlRmlsZS5wYXRoLFxyXG5cdFx0XHRcdFx0dW5kZWZpbmVkLFxyXG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5pbnNlcnRTaXplXHJcblx0XHRcdFx0KTtcclxuXHJcblx0XHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLmRpc2FibGVSZW5hbWVOb3RpY2UpIHtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYEltYWdlIHNhdmVkIGFzOiAke3NhdmVkRmlsZS5uYW1lfWApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdGZpbGU6IHNhdmVkRmlsZSxcclxuXHRcdFx0XHRcdHBhdGg6IGZpbmFsUGF0aCxcclxuXHRcdFx0XHRcdGxpbmtUZXh0LFxyXG5cdFx0XHRcdFx0c3VjY2VzczogdHJ1ZSxcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHR9XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvciBwcm9jZXNzaW5nIGltYWdlOicsIGVycm9yKTtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRmaWxlOiBudWxsLFxyXG5cdFx0XHRcdHBhdGg6ICcnLFxyXG5cdFx0XHRcdGxpbmtUZXh0OiAnJyxcclxuXHRcdFx0XHRzdWNjZXNzOiBmYWxzZSxcclxuXHRcdFx0XHRlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUHJvY2VzcyBhbiBpbWFnZSBmcm9tIGEgVVJMIChkb3dubG9hZCBhbmQgc2F2ZSBsb2NhbGx5KVxyXG5cdCAqIEBwYXJhbSBpc1Byb3BlcnR5SW5zZXJ0aW9uIC0gSWYgdHJ1ZSwgc2tpcCBkZXNjcmlwdGl2ZSBpbWFnZXMgKG9ubHkgYXBwbGllcyB0byBub3RlIGJvZHkpXHJcblx0ICovXHJcblx0YXN5bmMgcHJvY2Vzc0ltYWdlVXJsKFxyXG5cdFx0dXJsOiBzdHJpbmcsXHJcblx0XHRhY3RpdmVGaWxlOiBURmlsZSxcclxuXHRcdHNob3dSZW5hbWVNb2RhbDogYm9vbGVhbiA9IHRydWUsXHJcblx0XHRpc1Byb3BlcnR5SW5zZXJ0aW9uOiBib29sZWFuID0gZmFsc2VcclxuXHQpOiBQcm9taXNlPFByb2Nlc3NlZEltYWdlPiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyBEb3dubG9hZCB0aGUgaW1hZ2VcclxuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHsgdXJsIH0pO1xyXG5cdFx0XHRpZiAocmVzcG9uc2Uuc3RhdHVzID49IDQwMCkge1xyXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGRvd25sb2FkIGltYWdlOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgYXJyYXlCdWZmZXIgPSByZXNwb25zZS5hcnJheUJ1ZmZlcjtcclxuXHRcdFx0Y29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzWydjb250ZW50LXR5cGUnXSA/PyAnaW1hZ2UvcG5nJztcclxuXHRcdFx0Y29uc3QgZXh0ZW5zaW9uID0gdGhpcy5zdG9yYWdlTWFuYWdlci5nZXRFeHRlbnNpb25Gcm9tTWltZVR5cGUoY29udGVudFR5cGUpO1xyXG5cclxuXHRcdFx0Ly8gR2VuZXJhdGUgc3VnZ2VzdGVkIG5hbWVcclxuXHRcdFx0Y29uc3Qgc3VnZ2VzdGVkTmFtZSA9IHRoaXMuZ2VuZXJhdGVTdWdnZXN0ZWROYW1lKGFjdGl2ZUZpbGUpO1xyXG5cclxuXHRcdFx0Ly8gR2V0IGZpbmFsIG5hbWVcclxuXHRcdFx0bGV0IGZpbmFsTmFtZSA9IHN1Z2dlc3RlZE5hbWU7XHJcblxyXG5cdFx0XHRpZiAoc2hvd1JlbmFtZU1vZGFsICYmICF0aGlzLnNldHRpbmdzLmF1dG9SZW5hbWUpIHtcclxuXHRcdFx0XHQvLyBTYXZlIHRlbXAgZmlsZSBmaXJzdFxyXG5cdFx0XHRcdGNvbnN0IHRlbXBQYXRoID0gYXdhaXQgdGhpcy5zdG9yYWdlTWFuYWdlci5nZXRBdmFpbGFibGVQYXRoKFxyXG5cdFx0XHRcdFx0YHRlbXAtJHtEYXRlLm5vdygpfWAsXHJcblx0XHRcdFx0XHRleHRlbnNpb24sXHJcblx0XHRcdFx0XHRhY3RpdmVGaWxlXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0XHRjb25zdCB0ZW1wRmlsZSA9IGF3YWl0IHRoaXMuc3RvcmFnZU1hbmFnZXIuc2F2ZUZpbGUoYXJyYXlCdWZmZXIsIHRlbXBQYXRoKTtcclxuXHJcblx0XHRcdFx0bGV0IGZpbmFsTmFtZTogc3RyaW5nO1xyXG5cdFx0XHRcdGxldCBkaXNwbGF5VGV4dDogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0XHQvLyBTaG93IGRlc2NyaXB0aXZlIGltYWdlIG1vZGFsIGlmIGVuYWJsZWQgYW5kIE5PVCBpbnNlcnRpbmcgdG8gcHJvcGVydHksIG90aGVyd2lzZSBzaG93IHJlbmFtZSBtb2RhbFxyXG5cdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZURlc2NyaXB0aXZlSW1hZ2VzICYmICFpc1Byb3BlcnR5SW5zZXJ0aW9uKSB7XHJcblx0XHRcdFx0XHRjb25zdCBkZXNjUmVzdWx0ID0gYXdhaXQgb3BlbkRlc2NyaXB0aXZlSW1hZ2VNb2RhbCh0aGlzLmFwcCwgdGVtcEZpbGUpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAoZGVzY1Jlc3VsdC5jYW5jZWxsZWQpIHtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIudHJhc2hGaWxlKHRlbXBGaWxlKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdFx0XHRmaWxlOiBudWxsLFxyXG5cdFx0XHRcdFx0XHRcdHBhdGg6ICcnLFxyXG5cdFx0XHRcdFx0XHRcdGxpbmtUZXh0OiAnJyxcclxuXHRcdFx0XHRcdFx0XHRzdWNjZXNzOiBmYWxzZSxcclxuXHRcdFx0XHRcdFx0XHRlcnJvcjogJ0NhbmNlbGxlZCBieSB1c2VyJyxcclxuXHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRmaW5hbE5hbWUgPSBkZXNjUmVzdWx0LmZpbGVOYW1lO1xyXG5cdFx0XHRcdFx0ZGlzcGxheVRleHQgPSBkZXNjUmVzdWx0LmRlc2NyaXB0aW9uO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQvLyBTaG93IHJlbmFtZSBtb2RhbFxyXG5cdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgb3BlblJlbmFtZU1vZGFsKHRoaXMuYXBwLCB0ZW1wRmlsZSwgc3VnZ2VzdGVkTmFtZSk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKHJlc3VsdC5jYW5jZWxsZWQpIHtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIudHJhc2hGaWxlKHRlbXBGaWxlKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdFx0XHRmaWxlOiBudWxsLFxyXG5cdFx0XHRcdFx0XHRcdHBhdGg6ICcnLFxyXG5cdFx0XHRcdFx0XHRcdGxpbmtUZXh0OiAnJyxcclxuXHRcdFx0XHRcdFx0XHRzdWNjZXNzOiBmYWxzZSxcclxuXHRcdFx0XHRcdFx0XHRlcnJvcjogJ0NhbmNlbGxlZCBieSB1c2VyJyxcclxuXHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRmaW5hbE5hbWUgPSByZXN1bHQubmV3TmFtZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGNvbnN0IGZpbmFsUGF0aCA9IGF3YWl0IHRoaXMuZ2V0RGVkdXBsaWNhdGVkUGF0aChmaW5hbE5hbWUsIGV4dGVuc2lvbiwgYWN0aXZlRmlsZSk7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZSh0ZW1wRmlsZSwgZmluYWxQYXRoKTtcclxuXHJcblx0XHRcdFx0Y29uc3QgYWJzdHJhY3RGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbmFsUGF0aCk7XHJcblx0XHRcdFx0aWYgKCEoYWJzdHJhY3RGaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XHJcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1JlbmFtZWQgZmlsZSBub3QgZm91bmQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y29uc3QgcmVuYW1lZEZpbGUgPSBhYnN0cmFjdEZpbGU7XHJcblx0XHRcdFx0Y29uc3QgbGlua1RleHQgPSB0aGlzLnN0b3JhZ2VNYW5hZ2VyLmdlbmVyYXRlTWFya2Rvd25MaW5rKFxyXG5cdFx0XHRcdFx0cmVuYW1lZEZpbGUsXHJcblx0XHRcdFx0XHRhY3RpdmVGaWxlLnBhdGgsXHJcblx0XHRcdFx0XHRkaXNwbGF5VGV4dCxcclxuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuaW5zZXJ0U2l6ZVxyXG5cdFx0XHRcdCk7XHJcblxyXG5cdFx0XHRcdGlmICghdGhpcy5zZXR0aW5ncy5kaXNhYmxlUmVuYW1lTm90aWNlKSB7XHJcblx0XHRcdFx0XHRuZXcgTm90aWNlKGBJbWFnZSBkb3dubG9hZGVkIGFuZCBzYXZlZCBhczogJHtyZW5hbWVkRmlsZS5uYW1lfWApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdGZpbGU6IHJlbmFtZWRGaWxlLFxyXG5cdFx0XHRcdFx0cGF0aDogZmluYWxQYXRoLFxyXG5cdFx0XHRcdFx0bGlua1RleHQsXHJcblx0XHRcdFx0XHRzdWNjZXNzOiB0cnVlLFxyXG5cdFx0XHRcdH07XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y29uc3QgZmluYWxQYXRoID0gYXdhaXQgdGhpcy5nZXREZWR1cGxpY2F0ZWRQYXRoKGZpbmFsTmFtZSwgZXh0ZW5zaW9uLCBhY3RpdmVGaWxlKTtcclxuXHRcdFx0XHRjb25zdCBzYXZlZEZpbGUgPSBhd2FpdCB0aGlzLnN0b3JhZ2VNYW5hZ2VyLnNhdmVGaWxlKGFycmF5QnVmZmVyLCBmaW5hbFBhdGgpO1xyXG5cdFx0XHRcdGNvbnN0IGxpbmtUZXh0ID0gdGhpcy5zdG9yYWdlTWFuYWdlci5nZW5lcmF0ZU1hcmtkb3duTGluayhcclxuXHRcdFx0XHRcdHNhdmVkRmlsZSxcclxuXHRcdFx0XHRcdGFjdGl2ZUZpbGUucGF0aCxcclxuXHRcdFx0XHRcdHVuZGVmaW5lZCxcclxuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuaW5zZXJ0U2l6ZVxyXG5cdFx0XHRcdCk7XHJcblxyXG5cdFx0XHRcdGlmICghdGhpcy5zZXR0aW5ncy5kaXNhYmxlUmVuYW1lTm90aWNlKSB7XHJcblx0XHRcdFx0XHRuZXcgTm90aWNlKGBJbWFnZSBkb3dubG9hZGVkIGFuZCBzYXZlZCBhczogJHtzYXZlZEZpbGUubmFtZX1gKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0XHRmaWxlOiBzYXZlZEZpbGUsXHJcblx0XHRcdFx0XHRwYXRoOiBmaW5hbFBhdGgsXHJcblx0XHRcdFx0XHRsaW5rVGV4dCxcclxuXHRcdFx0XHRcdHN1Y2Nlc3M6IHRydWUsXHJcblx0XHRcdFx0fTtcclxuXHRcdFx0fVxyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBpbWFnZSBVUkw6JywgZXJyb3IpO1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdGZpbGU6IG51bGwsXHJcblx0XHRcdFx0cGF0aDogJycsXHJcblx0XHRcdFx0bGlua1RleHQ6ICcnLFxyXG5cdFx0XHRcdHN1Y2Nlc3M6IGZhbHNlLFxyXG5cdFx0XHRcdGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZW5lcmF0ZSBhIHN1Z2dlc3RlZCBuYW1lIGJhc2VkIG9uIHRoZSB0ZW1wbGF0ZVxyXG5cdCAqL1xyXG5cdGdlbmVyYXRlU3VnZ2VzdGVkTmFtZShhY3RpdmVGaWxlOiBURmlsZSk6IHN0cmluZyB7XHJcblx0XHRjb25zdCB2YXJpYWJsZXMgPSBidWlsZFRlbXBsYXRlVmFyaWFibGVzKHRoaXMuYXBwLCBhY3RpdmVGaWxlKTtcclxuXHRcdGNvbnN0IHJlbmRlcmVkID0gcmVuZGVyVGVtcGxhdGUodGhpcy5zZXR0aW5ncy5pbWFnZU5hbWVUZW1wbGF0ZSwgdmFyaWFibGVzKTtcclxuXHJcblx0XHQvLyBDaGVjayBpZiB0aGUgcmVzdWx0IGlzIG1lYW5pbmdmdWxcclxuXHRcdGlmIChpc1RlbXBsYXRlTWVhbmluZ2Z1bChyZW5kZXJlZCwgdGhpcy5zZXR0aW5ncy5kdXBOdW1iZXJEZWxpbWl0ZXIpKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLnN0b3JhZ2VNYW5hZ2VyLnNhbml0aXplRmlsZU5hbWUocmVuZGVyZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZhbGxiYWNrIHRvIGZpbGUgbmFtZVxyXG5cdFx0cmV0dXJuIGFjdGl2ZUZpbGUuYmFzZW5hbWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZXQgYSBkZWR1cGxpY2F0ZWQgZmlsZSBwYXRoXHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyBnZXREZWR1cGxpY2F0ZWRQYXRoKFxyXG5cdFx0YmFzZU5hbWU6IHN0cmluZyxcclxuXHRcdGV4dGVuc2lvbjogc3RyaW5nLFxyXG5cdFx0YWN0aXZlRmlsZTogVEZpbGVcclxuXHQpOiBQcm9taXNlPHN0cmluZz4ge1xyXG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMuc3RvcmFnZU1hbmFnZXIuZ2V0QXZhaWxhYmxlUGF0aChiYXNlTmFtZSwgZXh0ZW5zaW9uLCBhY3RpdmVGaWxlKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCBmaWxlIGV4dGVuc2lvbiBmcm9tIEZpbGUgb2JqZWN0XHJcblx0ICovXHJcblx0cHJpdmF0ZSBnZXRFeHRlbnNpb24oZmlsZTogRmlsZSk6IHN0cmluZyB7XHJcblx0XHQvLyBUcnkgdG8gZ2V0IGZyb20gZmlsZSBuYW1lIGZpcnN0XHJcblx0XHRjb25zdCBuYW1lUGFydHMgPSBmaWxlLm5hbWUuc3BsaXQoJy4nKTtcclxuXHRcdGlmIChuYW1lUGFydHMubGVuZ3RoID4gMSkge1xyXG5cdFx0XHRjb25zdCBuYW1lRXh0ID0gbmFtZVBhcnRzW25hbWVQYXJ0cy5sZW5ndGggLSAxXT8udG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0aWYgKG5hbWVFeHQpIHtcclxuXHRcdFx0XHRyZXR1cm4gbmFtZUV4dDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZhbGwgYmFjayB0byBNSU1FIHR5cGVcclxuXHRcdHJldHVybiB0aGlzLnN0b3JhZ2VNYW5hZ2VyLmdldEV4dGVuc2lvbkZyb21NaW1lVHlwZShmaWxlLnR5cGUpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSW5zZXJ0IGxpbmsgdGV4dCBhdCBjdXJzb3IgcG9zaXRpb25cclxuXHQgKi9cclxuXHRpbnNlcnRMaW5rQXRDdXJzb3IobGlua1RleHQ6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0Y29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcblx0XHRpZiAodmlldz8uZWRpdG9yKSB7XHJcblx0XHRcdHZpZXcuZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24obGlua1RleHQpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IHRoZSBhY3RpdmUgbWFya2Rvd24gZmlsZVxyXG5cdCAqL1xyXG5cdGdldEFjdGl2ZUZpbGUoKTogVEZpbGUgfCBudWxsIHtcclxuXHRcdGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0cmV0dXJuIHZpZXc/LmZpbGUgPz8gbnVsbDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbmFtZSBhbiBleGlzdGluZyBpbWFnZSBmaWxlIHdpdGggb3B0aW9uYWwgcmVuYW1lIG1vZGFsXHJcblx0ICogVXNlZCBieSBMb2NhbENvbnZlcnNpb25TZXJ2aWNlIHRvIHJlbmFtZSBjb252ZXJ0ZWQgaW1hZ2VzXHJcblx0ICovXHJcblx0YXN5bmMgcmVuYW1lSW1hZ2VGaWxlKFxyXG5cdFx0aW1hZ2VGaWxlOiBURmlsZSxcclxuXHRcdHN1Z2dlc3RlZE5hbWU6IHN0cmluZyxcclxuXHRcdGFjdGl2ZUZpbGU6IFRGaWxlXHJcblx0KTogUHJvbWlzZTxQcm9jZXNzZWRJbWFnZSB8IG51bGw+IHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IGV4dGVuc2lvbiA9IGltYWdlRmlsZS5leHRlbnNpb247XHJcblx0XHRcdGxldCBmaW5hbE5hbWUgPSBzdWdnZXN0ZWROYW1lO1xyXG5cclxuXHRcdFx0Ly8gSGFuZGxlIGRlc2NyaXB0aXZlIGltYWdlcyBpZiBlbmFibGVkIChub3RlOiB0aGlzIGlzIGZvciByZW5hbWluZyBleGlzdGluZyBmaWxlcywgbm90IHByb3BlcnR5IGluc2VydGlvbilcclxuXHRcdFx0bGV0IGRpc3BsYXlUZXh0ID0gJyc7XHJcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZURlc2NyaXB0aXZlSW1hZ2VzKSB7XHJcblx0XHRcdFx0Y29uc3QgZGVzY1Jlc3VsdCA9IGF3YWl0IG9wZW5EZXNjcmlwdGl2ZUltYWdlTW9kYWwodGhpcy5hcHAsIGltYWdlRmlsZSk7XHJcblx0XHRcdFx0aWYgKGRlc2NSZXN1bHQuY2FuY2VsbGVkKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gbnVsbDsgLy8gVXNlciBjYW5jZWxsZWRcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZGlzcGxheVRleHQgPSBkZXNjUmVzdWx0LmRlc2NyaXB0aW9uO1xyXG5cdFx0XHRcdGZpbmFsTmFtZSA9IGRlc2NSZXN1bHQuZmlsZU5hbWU7IC8vIEFscmVhZHkga2ViYWItY2FzZWRcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gU2hvdyByZW5hbWUgbW9kYWwgaWYgbm90IGF1dG8tcmVuYW1pbmdcclxuXHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLmF1dG9SZW5hbWUpIHtcclxuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBvcGVuUmVuYW1lTW9kYWwoXHJcblx0XHRcdFx0XHR0aGlzLmFwcCxcclxuXHRcdFx0XHRcdGltYWdlRmlsZSxcclxuXHRcdFx0XHRcdGZpbmFsTmFtZVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdFx0aWYgKHJlc3VsdC5jYW5jZWxsZWQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBudWxsOyAvLyBVc2VyIGNhbmNlbGxlZFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRmaW5hbE5hbWUgPSByZXN1bHQubmV3TmFtZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUmVuYW1lIHRoZSBmaWxlXHJcblx0XHRcdGNvbnN0IGZpbmFsUGF0aCA9IGF3YWl0IHRoaXMuZ2V0RGVkdXBsaWNhdGVkUGF0aChmaW5hbE5hbWUsIGV4dGVuc2lvbiwgYWN0aXZlRmlsZSk7XHJcblx0XHRcdGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoaW1hZ2VGaWxlLCBmaW5hbFBhdGgpO1xyXG5cclxuXHRcdFx0Y29uc3QgYWJzdHJhY3RGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbmFsUGF0aCk7XHJcblx0XHRcdGlmICghKGFic3RyYWN0RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xyXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignUmVuYW1lZCBmaWxlIG5vdCBmb3VuZCcpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnN0IHJlbmFtZWRGaWxlID0gYWJzdHJhY3RGaWxlO1xyXG5cdFx0XHRjb25zdCBsaW5rVGV4dCA9IHRoaXMuc3RvcmFnZU1hbmFnZXIuZ2VuZXJhdGVNYXJrZG93bkxpbmsoXHJcblx0XHRcdFx0cmVuYW1lZEZpbGUsXHJcblx0XHRcdFx0YWN0aXZlRmlsZS5wYXRoLFxyXG5cdFx0XHRcdGRpc3BsYXlUZXh0LFxyXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuaW5zZXJ0U2l6ZVxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRmaWxlOiByZW5hbWVkRmlsZSxcclxuXHRcdFx0XHRwYXRoOiBmaW5hbFBhdGgsXHJcblx0XHRcdFx0bGlua1RleHQsXHJcblx0XHRcdFx0c3VjY2VzczogdHJ1ZSxcclxuXHRcdFx0fTtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlbmFtaW5nIGltYWdlIGZpbGU6JywgZXJyb3IpO1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdGZpbGU6IG51bGwsXHJcblx0XHRcdFx0cGF0aDogJycsXHJcblx0XHRcdFx0bGlua1RleHQ6ICcnLFxyXG5cdFx0XHRcdHN1Y2Nlc3M6IGZhbHNlLFxyXG5cdFx0XHRcdGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBEZWJ1ZyBsb2dnaW5nXHJcblx0ICovXHJcblx0cHJpdmF0ZSBsb2coLi4uYXJnczogdW5rbm93bltdKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcclxuXHRcdFx0Y29uc29sZS5kZWJ1ZygnW0ltYWdlIE1hbmFnZXJdJywgLi4uYXJncyk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsICIvKipcclxuICogVGVtcGxhdGUgRW5naW5lIGZvciBJbWFnZSBOYW1pbmdcclxuICogUmVuZGVycyBuYW1lIHRlbXBsYXRlcyB3aXRoIHZhcmlhYmxlIHN1YnN0aXR1dGlvblxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFRGaWxlLCBBcHAgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IE5hbWVUZW1wbGF0ZVZhcmlhYmxlcyB9IGZyb20gJy4uL3R5cGVzJztcclxuXHJcbi8qKlxyXG4gKiBBdmFpbGFibGUgdGVtcGxhdGUgdmFyaWFibGVzIGFuZCB0aGVpciBkZXNjcmlwdGlvbnNcclxuICovXHJcbmV4cG9ydCBjb25zdCBURU1QTEFURV9WQVJJQUJMRVMgPSB7XHJcblx0J3t7ZmlsZU5hbWV9fSc6ICdOYW1lIG9mIHRoZSBjdXJyZW50IG5vdGUgKHdpdGhvdXQgZXh0ZW5zaW9uKScsXHJcblx0J3t7ZGlyTmFtZX19JzogJ05hbWUgb2YgdGhlIGNvbnRhaW5pbmcgZm9sZGVyJyxcclxuXHQne3tpbWFnZU5hbWVLZXl9fSc6ICdWYWx1ZSBmcm9tIGltYWdlTmFtZUtleSBwcm9wZXJ0eScsXHJcblx0J3t7Zmlyc3RIZWFkaW5nfX0nOiAnRmlyc3QgSDEgaGVhZGluZyBpbiB0aGUgbm90ZScsXHJcblx0J3t7REFURTpmb3JtYXR9fSc6ICdDdXJyZW50IGRhdGUgKGUuZy4sIHt7REFURTpZWVlZLU1NLUREfX0pJyxcclxuXHQne3tUSU1FOmZvcm1hdH19JzogJ0N1cnJlbnQgdGltZSAoZS5nLiwge3tUSU1FOkhILW1tLXNzfX0pJyxcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZW5kZXIgYSB0ZW1wbGF0ZSBzdHJpbmcgd2l0aCB2YXJpYWJsZSBzdWJzdGl0dXRpb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJUZW1wbGF0ZShcclxuXHR0ZW1wbGF0ZTogc3RyaW5nLFxyXG5cdHZhcmlhYmxlczogTmFtZVRlbXBsYXRlVmFyaWFibGVzLFxyXG5cdGZyb250bWF0dGVyPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cclxuKTogc3RyaW5nIHtcclxuXHRsZXQgcmVzdWx0ID0gdGVtcGxhdGU7XHJcblxyXG5cdC8vIEJhc2ljIHZhcmlhYmxlc1xyXG5cdHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9cXHtcXHtmaWxlTmFtZVxcfVxcfS9nLCB2YXJpYWJsZXMuZmlsZU5hbWUpO1xyXG5cdHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9cXHtcXHtkaXJOYW1lXFx9XFx9L2csIHZhcmlhYmxlcy5kaXJOYW1lKTtcclxuXHRyZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvXFx7XFx7aW1hZ2VOYW1lS2V5XFx9XFx9L2csIHZhcmlhYmxlcy5pbWFnZU5hbWVLZXkgPz8gJycpO1xyXG5cdHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9cXHtcXHtmaXJzdEhlYWRpbmdcXH1cXH0vZywgdmFyaWFibGVzLmZpcnN0SGVhZGluZyA/PyAnJyk7XHJcblxyXG5cdC8vIERhdGUgZm9ybWF0dGluZ1xyXG5cdHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9cXHtcXHtEQVRFOihbXn1dKylcXH1cXH0vZywgKF8sIGZvcm1hdDogc3RyaW5nKSA9PiB7XHJcblx0XHRyZXR1cm4gZm9ybWF0RGF0ZShuZXcgRGF0ZSgpLCBmb3JtYXQpO1xyXG5cdH0pO1xyXG5cclxuXHQvLyBUaW1lIGZvcm1hdHRpbmdcclxuXHRyZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvXFx7XFx7VElNRTooW159XSspXFx9XFx9L2csIChfLCBmb3JtYXQ6IHN0cmluZykgPT4ge1xyXG5cdFx0cmV0dXJuIGZvcm1hdFRpbWUobmV3IERhdGUoKSwgZm9ybWF0KTtcclxuXHR9KTtcclxuXHJcblx0Ly8gRnJvbnRtYXR0ZXIgdmFyaWFibGVzIChpZiBwcm92aWRlZClcclxuXHRpZiAoZnJvbnRtYXR0ZXIpIHtcclxuXHRcdHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9cXHtcXHtmbTooW159XSspXFx9XFx9L2csIChfLCBrZXk6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRjb25zdCB2YWx1ZSA9IGZyb250bWF0dGVyW2tleS50cmltKCldO1xyXG5cdFx0XHRpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuICcnO1xyXG5cdFx0XHRpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgcmV0dXJuIHZhbHVlO1xyXG5cdFx0XHRpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XHJcblx0XHRcdHJldHVybiAnJztcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEZvcm1hdCBhIGRhdGUgdXNpbmcgYSBzaW1wbGUgZm9ybWF0IHN0cmluZ1xyXG4gKiBTdXBwb3J0czogWVlZWSwgWVksIE1NLCBERCwgTSwgRFxyXG4gKi9cclxuZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlOiBEYXRlLCBmb3JtYXQ6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0Y29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuXHRjb25zdCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDE7XHJcblx0Y29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCk7XHJcblxyXG5cdHJldHVybiBmb3JtYXRcclxuXHRcdC5yZXBsYWNlKCdZWVlZJywgU3RyaW5nKHllYXIpKVxyXG5cdFx0LnJlcGxhY2UoJ1lZJywgU3RyaW5nKHllYXIpLnNsaWNlKC0yKSlcclxuXHRcdC5yZXBsYWNlKCdNTScsIFN0cmluZyhtb250aCkucGFkU3RhcnQoMiwgJzAnKSlcclxuXHRcdC5yZXBsYWNlKCdERCcsIFN0cmluZyhkYXkpLnBhZFN0YXJ0KDIsICcwJykpXHJcblx0XHQucmVwbGFjZSgnTScsIFN0cmluZyhtb250aCkpXHJcblx0XHQucmVwbGFjZSgnRCcsIFN0cmluZyhkYXkpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEZvcm1hdCB0aW1lIHVzaW5nIGEgc2ltcGxlIGZvcm1hdCBzdHJpbmdcclxuICogU3VwcG9ydHM6IEhILCBtbSwgc3MsIEgsIG0sIHNcclxuICovXHJcbmZ1bmN0aW9uIGZvcm1hdFRpbWUoZGF0ZTogRGF0ZSwgZm9ybWF0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdGNvbnN0IGhvdXJzID0gZGF0ZS5nZXRIb3VycygpO1xyXG5cdGNvbnN0IG1pbnV0ZXMgPSBkYXRlLmdldE1pbnV0ZXMoKTtcclxuXHRjb25zdCBzZWNvbmRzID0gZGF0ZS5nZXRTZWNvbmRzKCk7XHJcblxyXG5cdHJldHVybiBmb3JtYXRcclxuXHRcdC5yZXBsYWNlKCdISCcsIFN0cmluZyhob3VycykucGFkU3RhcnQoMiwgJzAnKSlcclxuXHRcdC5yZXBsYWNlKCdtbScsIFN0cmluZyhtaW51dGVzKS5wYWRTdGFydCgyLCAnMCcpKVxyXG5cdFx0LnJlcGxhY2UoJ3NzJywgU3RyaW5nKHNlY29uZHMpLnBhZFN0YXJ0KDIsICcwJykpXHJcblx0XHQucmVwbGFjZSgnSCcsIFN0cmluZyhob3VycykpXHJcblx0XHQucmVwbGFjZSgnbScsIFN0cmluZyhtaW51dGVzKSlcclxuXHRcdC5yZXBsYWNlKCdzJywgU3RyaW5nKHNlY29uZHMpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEJ1aWxkIHRlbXBsYXRlIHZhcmlhYmxlcyBmcm9tIGEgZmlsZSBhbmQgYXBwIGNvbnRleHRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBidWlsZFRlbXBsYXRlVmFyaWFibGVzKFxyXG5cdGFwcDogQXBwLFxyXG5cdGFjdGl2ZUZpbGU6IFRGaWxlXHJcbik6IE5hbWVUZW1wbGF0ZVZhcmlhYmxlcyB7XHJcblx0Y29uc3QgY2FjaGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZlRmlsZSk7XHJcblx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBjYWNoZT8uZnJvbnRtYXR0ZXI7XHJcblx0XHJcblx0Ly8gR2V0IGZpcnN0IEgxIGhlYWRpbmdcclxuXHRsZXQgZmlyc3RIZWFkaW5nID0gJyc7XHJcblx0aWYgKGNhY2hlPy5oZWFkaW5ncykge1xyXG5cdFx0Zm9yIChjb25zdCBoZWFkaW5nIG9mIGNhY2hlLmhlYWRpbmdzKSB7XHJcblx0XHRcdGlmIChoZWFkaW5nLmxldmVsID09PSAxKSB7XHJcblx0XHRcdFx0Zmlyc3RIZWFkaW5nID0gaGVhZGluZy5oZWFkaW5nO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZXR1cm4ge1xyXG5cdFx0ZmlsZU5hbWU6IGFjdGl2ZUZpbGUuYmFzZW5hbWUsXHJcblx0XHRkaXJOYW1lOiBhY3RpdmVGaWxlLnBhcmVudD8ubmFtZSA/PyAnJyxcclxuXHRcdGltYWdlTmFtZUtleTogZnJvbnRtYXR0ZXI/LmltYWdlTmFtZUtleSBhcyBzdHJpbmcgfCB1bmRlZmluZWQsXHJcblx0XHRmaXJzdEhlYWRpbmcsXHJcblx0XHRkYXRlOiBmb3JtYXREYXRlKG5ldyBEYXRlKCksICdZWVlZLU1NLUREJyksXHJcblx0XHR0aW1lOiBmb3JtYXRUaW1lKG5ldyBEYXRlKCksICdISC1tbS1zcycpLFxyXG5cdH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIHJlbmRlcmVkIHRlbXBsYXRlIHJlc3VsdCBpcyBtZWFuaW5nZnVsIChub3QgZW1wdHkvd2hpdGVzcGFjZSlcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1RlbXBsYXRlTWVhbmluZ2Z1bChyZXN1bHQ6IHN0cmluZywgZGVsaW1pdGVyOiBzdHJpbmcpOiBib29sZWFuIHtcclxuXHQvLyBSZW1vdmUgZGVsaW1pdGVycyBhbmQgd2hpdGVzcGFjZSB0byBjaGVjayBpZiB0aGVyZSdzIGFjdHVhbCBjb250ZW50XHJcblx0Y29uc3QgbWVhbmluZ2xlc3NSZWdleCA9IG5ldyBSZWdFeHAoYFske2VzY2FwZVJlZ0V4cChkZWxpbWl0ZXIpfVxcXFxzXWAsICdnbScpO1xyXG5cdHJldHVybiByZXN1bHQucmVwbGFjZShtZWFuaW5nbGVzc1JlZ2V4LCAnJykgIT09ICcnO1xyXG59XHJcblxyXG4vKipcclxuICogRXNjYXBlIHNwZWNpYWwgcmVnZXggY2hhcmFjdGVyc1xyXG4gKi9cclxuZnVuY3Rpb24gZXNjYXBlUmVnRXhwKHN0cmluZzogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRyZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCAnXFxcXCQmJyk7XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBSZW5hbWUgTW9kYWxcclxuICogRGlhbG9nIGZvciByZW5hbWluZyBpbWFnZXMgd2l0aCBwcmV2aWV3IGFuZCB0ZW1wbGF0ZSBzdWdnZXN0aW9uc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgTW9kYWwsIFNldHRpbmcsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSZW5hbWVSZXN1bHQge1xyXG5cdG5ld05hbWU6IHN0cmluZztcclxuXHRjYW5jZWxsZWQ6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBSZW5hbWVNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHRwcml2YXRlIGltYWdlRmlsZTogVEZpbGU7XHJcblx0cHJpdmF0ZSBzdWdnZXN0ZWROYW1lOiBzdHJpbmc7XHJcblx0cHJpdmF0ZSBjdXJyZW50TmFtZTogc3RyaW5nO1xyXG5cdHByaXZhdGUgb25TdWJtaXQ6IChyZXN1bHQ6IFJlbmFtZVJlc3VsdCkgPT4gdm9pZDtcclxuXHJcblx0cHJpdmF0ZSBuYW1lSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIHByZXZpZXdFbDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIGVycm9yRWw6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblxyXG5cdGNvbnN0cnVjdG9yKFxyXG5cdFx0YXBwOiBBcHAsXHJcblx0XHRpbWFnZUZpbGU6IFRGaWxlLFxyXG5cdFx0c3VnZ2VzdGVkTmFtZTogc3RyaW5nLFxyXG5cdFx0b25TdWJtaXQ6IChyZXN1bHQ6IFJlbmFtZVJlc3VsdCkgPT4gdm9pZFxyXG5cdCkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMuaW1hZ2VGaWxlID0gaW1hZ2VGaWxlO1xyXG5cdFx0dGhpcy5zdWdnZXN0ZWROYW1lID0gc3VnZ2VzdGVkTmFtZTtcclxuXHRcdHRoaXMuY3VycmVudE5hbWUgPSBzdWdnZXN0ZWROYW1lO1xyXG5cdFx0dGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xyXG5cdH1cclxuXHJcblx0b25PcGVuKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwsIHRpdGxlRWwgfSA9IHRoaXM7XHJcblx0XHRcclxuXHRcdHRoaXMuY29udGFpbmVyRWwuYWRkQ2xhc3MoJ2ltYWdlLW1hbmFnZXItcmVuYW1lLW1vZGFsJyk7XHJcblx0XHR0aXRsZUVsLnNldFRleHQoJ1JlbmFtZSBpbWFnZScpO1xyXG5cclxuXHRcdC8vIEltYWdlIHByZXZpZXdcclxuXHRcdHRoaXMucmVuZGVySW1hZ2VQcmV2aWV3KGNvbnRlbnRFbCk7XHJcblxyXG5cdFx0Ly8gRmlsZSBpbmZvXHJcblx0XHR0aGlzLnJlbmRlckZpbGVJbmZvKGNvbnRlbnRFbCk7XHJcblxyXG5cdFx0Ly8gTmFtZSBpbnB1dFxyXG5cdFx0dGhpcy5yZW5kZXJOYW1lSW5wdXQoY29udGVudEVsKTtcclxuXHJcblx0XHQvLyBFcnJvciBkaXNwbGF5XHJcblx0XHR0aGlzLmVycm9yRWwgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnaW1hZ2UtbWFuYWdlci1lcnJvciBpbWFnZS1tYW5hZ2VyLWVycm9yLWhpZGRlbicgfSk7XHJcblxyXG5cdFx0Ly8gQnV0dG9uc1xyXG5cdFx0dGhpcy5yZW5kZXJCdXR0b25zKGNvbnRlbnRFbCk7XHJcblxyXG5cdFx0Ly8gRm9jdXMgYW5kIHNlbGVjdCBpbnB1dFxyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdGlmICh0aGlzLm5hbWVJbnB1dCkge1xyXG5cdFx0XHRcdHRoaXMubmFtZUlucHV0LmZvY3VzKCk7XHJcblx0XHRcdFx0dGhpcy5uYW1lSW5wdXQuc2VsZWN0KCk7XHJcblx0XHRcdH1cclxuXHRcdH0sIDUwKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVySW1hZ2VQcmV2aWV3KGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgcHJldmlld0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ2ltYWdlLW1hbmFnZXItcHJldmlldycgfSk7XHJcblx0XHRcclxuXHRcdGNvbnN0IGltZyA9IHByZXZpZXdDb250YWluZXIuY3JlYXRlRWwoJ2ltZycsIHtcclxuXHRcdFx0YXR0cjoge1xyXG5cdFx0XHRcdHNyYzogdGhpcy5hcHAudmF1bHQuZ2V0UmVzb3VyY2VQYXRoKHRoaXMuaW1hZ2VGaWxlKSxcclxuXHRcdFx0XHRhbHQ6IHRoaXMuaW1hZ2VGaWxlLm5hbWUsXHJcblx0XHRcdH0sXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBZGQgY2xhc3MgZm9yIHByZXZpZXcgc3R5bGluZyAoc3R5bGVzIGluIHN0eWxlcy5jc3MpXHJcblx0XHRpbWcuYWRkQ2xhc3MoJ2ltYWdlLW1hbmFnZXItcHJldmlldy1pbWcnKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyRmlsZUluZm8oY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBpbmZvQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiAnaW1hZ2UtbWFuYWdlci1pbmZvJyB9KTtcclxuXHRcdFxyXG5cdFx0Y29uc3QgaW5mb0xpc3QgPSBpbmZvQ29udGFpbmVyLmNyZWF0ZUVsKCd1bCcpO1xyXG5cdFx0XHJcblx0XHQvLyBPcmlnaW5hbCBwYXRoXHJcblx0XHRjb25zdCBvcmlnaW5hbEl0ZW0gPSBpbmZvTGlzdC5jcmVhdGVFbCgnbGknKTtcclxuXHRcdG9yaWdpbmFsSXRlbS5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiAnT3JpZ2luYWw6ICcgfSk7XHJcblx0XHRvcmlnaW5hbEl0ZW0uY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IHRoaXMuaW1hZ2VGaWxlLnBhdGggfSk7XHJcblxyXG5cdFx0Ly8gTmV3IHBhdGggcHJldmlld1xyXG5cdFx0Y29uc3QgbmV3SXRlbSA9IGluZm9MaXN0LmNyZWF0ZUVsKCdsaScpO1xyXG5cdFx0bmV3SXRlbS5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiAnTmV3IHBhdGg6ICcgfSk7XHJcblx0XHR0aGlzLnByZXZpZXdFbCA9IG5ld0l0ZW0uY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IHRoaXMuZ2V0TmV3UGF0aCh0aGlzLmN1cnJlbnROYW1lKSB9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyTmFtZUlucHV0KGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdOZXcgbmFtZScpXHJcblx0XHRcdC5zZXREZXNjKCdFbnRlciBhIG5ldyBuYW1lIGZvciB0aGUgaW1hZ2UgKHdpdGhvdXQgZXh0ZW5zaW9uKScpXHJcblx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcblx0XHRcdFx0dGhpcy5uYW1lSW5wdXQgPSB0ZXh0LmlucHV0RWw7XHJcblx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdFbnRlciBuYW1lJylcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLmN1cnJlbnROYW1lKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmN1cnJlbnROYW1lID0gdGhpcy5zYW5pdGl6ZU5hbWUodmFsdWUpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnVwZGF0ZVByZXZpZXcoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHQvLyBIYW5kbGUgZW50ZXIga2V5XHJcblx0XHRcdFx0dGV4dC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKGUua2V5ID09PSAnRW50ZXInICYmICFlLmlzQ29tcG9zaW5nKSB7XHJcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5zdWJtaXQoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbmRlckJ1dHRvbnMoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LmFkZEJ1dHRvbigoYnRuKSA9PiB7XHJcblx0XHRcdFx0YnRuXHJcblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dCgnUmVuYW1lJylcclxuXHRcdFx0XHRcdC5zZXRDdGEoKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4gdGhpcy5zdWJtaXQoKSk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5hZGRCdXR0b24oKGJ0bikgPT4ge1xyXG5cdFx0XHRcdGJ0blxyXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ1NraXAnKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4gdGhpcy5jYW5jZWwoKSk7XHJcblx0XHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBnZXROZXdQYXRoKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHRjb25zdCBmb2xkZXIgPSB0aGlzLmltYWdlRmlsZS5wYXJlbnQ/LnBhdGggPz8gJyc7XHJcblx0XHRjb25zdCBleHRlbnNpb24gPSB0aGlzLmltYWdlRmlsZS5leHRlbnNpb247XHJcblx0XHRjb25zdCBmaWxlTmFtZSA9IGAke25hbWV9LiR7ZXh0ZW5zaW9ufWA7XHJcblx0XHRyZXR1cm4gZm9sZGVyID8gYCR7Zm9sZGVyfS8ke2ZpbGVOYW1lfWAgOiBmaWxlTmFtZTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgdXBkYXRlUHJldmlldygpOiB2b2lkIHtcclxuXHRcdGlmICh0aGlzLnByZXZpZXdFbCkge1xyXG5cdFx0XHR0aGlzLnByZXZpZXdFbC5zZXRUZXh0KHRoaXMuZ2V0TmV3UGF0aCh0aGlzLmN1cnJlbnROYW1lKSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHNhbml0aXplTmFtZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIG5hbWVcclxuXHRcdFx0LnJlcGxhY2UoL1tcXFxcLzoqP1wiPD58XS9nLCAnLScpXHJcblx0XHRcdC5yZXBsYWNlKC9cXHMrL2csICcgJylcclxuXHRcdFx0LnRyaW0oKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc2hvd0Vycm9yKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0aWYgKHRoaXMuZXJyb3JFbCkge1xyXG5cdFx0XHR0aGlzLmVycm9yRWwuc2V0VGV4dChtZXNzYWdlKTtcclxuXHRcdFx0dGhpcy5lcnJvckVsLmFkZENsYXNzKCdpbWFnZS1tYW5hZ2VyLWVycm9yLXZpc2libGUnKTtcclxuXHRcdFx0dGhpcy5lcnJvckVsLnJlbW92ZUNsYXNzKCdpbWFnZS1tYW5hZ2VyLWVycm9yLWhpZGRlbicpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBoaWRlRXJyb3IoKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5lcnJvckVsKSB7XHJcblx0XHRcdHRoaXMuZXJyb3JFbC5hZGRDbGFzcygnaW1hZ2UtbWFuYWdlci1lcnJvci1oaWRkZW4nKTtcclxuXHRcdFx0dGhpcy5lcnJvckVsLnJlbW92ZUNsYXNzKCdpbWFnZS1tYW5hZ2VyLWVycm9yLXZpc2libGUnKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc3VibWl0KCk6IHZvaWQge1xyXG5cdFx0dGhpcy5oaWRlRXJyb3IoKTtcclxuXHJcblx0XHRpZiAoIXRoaXMuY3VycmVudE5hbWUgfHwgdGhpcy5jdXJyZW50TmFtZS50cmltKCkgPT09ICcnKSB7XHJcblx0XHRcdHRoaXMuc2hvd0Vycm9yKCdOYW1lIGNhbm5vdCBiZSBlbXB0eScpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5vblN1Ym1pdCh7XHJcblx0XHRcdG5ld05hbWU6IHRoaXMuY3VycmVudE5hbWUsXHJcblx0XHRcdGNhbmNlbGxlZDogZmFsc2UsXHJcblx0XHR9KTtcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgY2FuY2VsKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5vblN1Ym1pdCh7XHJcblx0XHRcdG5ld05hbWU6ICcnLFxyXG5cdFx0XHRjYW5jZWxsZWQ6IHRydWUsXHJcblx0XHR9KTtcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIE9wZW4gdGhlIHJlbmFtZSBtb2RhbCBhbmQgcmV0dXJuIHRoZSByZXN1bHRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBvcGVuUmVuYW1lTW9kYWwoXHJcblx0YXBwOiBBcHAsXHJcblx0aW1hZ2VGaWxlOiBURmlsZSxcclxuXHRzdWdnZXN0ZWROYW1lOiBzdHJpbmdcclxuKTogUHJvbWlzZTxSZW5hbWVSZXN1bHQ+IHtcclxuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuXHRcdGNvbnN0IG1vZGFsID0gbmV3IFJlbmFtZU1vZGFsKGFwcCwgaW1hZ2VGaWxlLCBzdWdnZXN0ZWROYW1lLCByZXNvbHZlKTtcclxuXHRcdG1vZGFsLm9wZW4oKTtcclxuXHR9KTtcclxufVxyXG4iLCAiLyoqXHJcbiAqIERlc2NyaXB0aXZlIEltYWdlIE1vZGFsXHJcbiAqIEFza3MgdXNlciB0byBkZXNjcmliZSB0aGUgaW1hZ2UsIHVzZXMgZGVzY3JpcHRpb24gYXMgZGlzcGxheSB0ZXh0IGFuZCBrZWJhYi1jYXNlIGZvciBmaWxlbmFtZVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgTW9kYWwsIFNldHRpbmcsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyB0b0tlYmFiQ2FzZSB9IGZyb20gJy4uL3V0aWxzL2tlYmFiLWNhc2UnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEZXNjcmlwdGl2ZUltYWdlUmVzdWx0IHtcclxuXHRkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG5cdGZpbGVOYW1lOiBzdHJpbmc7IC8vIGtlYmFiLWNhc2UgdmVyc2lvblxyXG5cdGNhbmNlbGxlZDogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIERlc2NyaXB0aXZlSW1hZ2VNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHRwcml2YXRlIGltYWdlRmlsZTogVEZpbGU7XHJcblx0cHJpdmF0ZSBkZXNjcmlwdGlvbjogc3RyaW5nID0gJyc7XHJcblx0cHJpdmF0ZSBvblN1Ym1pdDogKHJlc3VsdDogRGVzY3JpcHRpdmVJbWFnZVJlc3VsdCkgPT4gdm9pZDtcclxuXHJcblx0cHJpdmF0ZSBkZXNjcmlwdGlvbklucHV0OiBIVE1MVGV4dEFyZWFFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblx0cHJpdmF0ZSBwcmV2aWV3RWw6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblx0cHJpdmF0ZSBmaWxlTmFtZVByZXZpZXdFbDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIGVycm9yRWw6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblxyXG5cdGNvbnN0cnVjdG9yKFxyXG5cdFx0YXBwOiBBcHAsXHJcblx0XHRpbWFnZUZpbGU6IFRGaWxlLFxyXG5cdFx0b25TdWJtaXQ6IChyZXN1bHQ6IERlc2NyaXB0aXZlSW1hZ2VSZXN1bHQpID0+IHZvaWRcclxuXHQpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLmltYWdlRmlsZSA9IGltYWdlRmlsZTtcclxuXHRcdHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcclxuXHR9XHJcblxyXG5cdG9uT3BlbigpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsLCB0aXRsZUVsIH0gPSB0aGlzO1xyXG5cdFx0XHJcblx0XHR0aGlzLmNvbnRhaW5lckVsLmFkZENsYXNzKCdpbWFnZS1tYW5hZ2VyLXJlbmFtZS1tb2RhbCcpO1xyXG5cdFx0dGl0bGVFbC5zZXRUZXh0KCdEZXNjcmliZSBpbWFnZScpO1xyXG5cclxuXHRcdC8vIEltYWdlIHByZXZpZXdcclxuXHRcdHRoaXMucmVuZGVySW1hZ2VQcmV2aWV3KGNvbnRlbnRFbCk7XHJcblxyXG5cdFx0Ly8gRGVzY3JpcHRpb24gaW5wdXRcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuXHRcdFx0LnNldE5hbWUoJ0ltYWdlIGRlc2NyaXB0aW9uJylcclxuXHRcdFx0LnNldERlc2MoJ0Rlc2NyaWJlIHRoaXMgaW1hZ2UuIFRoaXMgd2lsbCBiZSB1c2VkIGFzIGRpc3BsYXkgdGV4dCBhbmQgZm9yIHRoZSBmaWxlbmFtZS4nKVxyXG5cdFx0XHQuYWRkVGV4dEFyZWEoKHRleHQpID0+IHtcclxuXHRcdFx0XHR0aGlzLmRlc2NyaXB0aW9uSW5wdXQgPSB0ZXh0LmlucHV0RWw7XHJcblx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdBIGJlYXV0aWZ1bCBzdW5zZXQgb3ZlciBtb3VudGFpbnMnKVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuZGVzY3JpcHRpb24pXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuZGVzY3JpcHRpb24gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0dGhpcy51cGRhdGVQcmV2aWV3KCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0Ly8gSGFuZGxlIGVudGVyIGtleSAoc3VibWl0KVxyXG5cdFx0XHRcdHRleHQuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuXHRcdFx0XHRcdGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAoZS5jdHJsS2V5IHx8IGUubWV0YUtleSkgJiYgIWUuaXNDb21wb3NpbmcpIHtcclxuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnN1Ym1pdCgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHQvLyBQcmV2aWV3IHNlY3Rpb25cclxuXHRcdGNvbnN0IHByZXZpZXdDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnaW1hZ2UtbWFuYWdlci1pbmZvJyB9KTtcclxuXHRcdHByZXZpZXdDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdQcmV2aWV3OicgfSk7XHJcblx0XHRcclxuXHRcdGNvbnN0IGZpbGVOYW1lUHJldmlldyA9IHByZXZpZXdDb250YWluZXIuY3JlYXRlRWwoJ3AnKTtcclxuXHRcdGZpbGVOYW1lUHJldmlldy5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiAnRmlsZW5hbWU6ICcgfSk7XHJcblx0XHR0aGlzLmZpbGVOYW1lUHJldmlld0VsID0gZmlsZU5hbWVQcmV2aWV3LmNyZWF0ZUVsKCdzcGFuJyk7XHJcblx0XHRcclxuXHRcdGNvbnN0IGxpbmtQcmV2aWV3ID0gcHJldmlld0NvbnRhaW5lci5jcmVhdGVFbCgncCcpO1xyXG5cdFx0bGlua1ByZXZpZXcuY3JlYXRlRWwoJ3N0cm9uZycsIHsgdGV4dDogJ0xpbms6ICcgfSk7XHJcblx0XHR0aGlzLnByZXZpZXdFbCA9IGxpbmtQcmV2aWV3LmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICdjb2RlJyB9KTtcclxuXHJcblx0XHQvLyBFcnJvciBkaXNwbGF5XHJcblx0XHR0aGlzLmVycm9yRWwgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnaW1hZ2UtbWFuYWdlci1lcnJvciBpbWFnZS1tYW5hZ2VyLWVycm9yLWhpZGRlbicgfSk7XHJcblxyXG5cdFx0Ly8gQnV0dG9uc1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+IHtcclxuXHRcdFx0XHRidG5cclxuXHRcdFx0XHRcdC5zZXRCdXR0b25UZXh0KCdJbnNlcnQnKVxyXG5cdFx0XHRcdFx0LnNldEN0YSgpXHJcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB0aGlzLnN1Ym1pdCgpKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmFkZEJ1dHRvbigoYnRuKSA9PiB7XHJcblx0XHRcdFx0YnRuXHJcblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dCgnQ2FuY2VsJylcclxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHRoaXMuY2FuY2VsKCkpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHQvLyBGb2N1cyBpbnB1dFxyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdGlmICh0aGlzLmRlc2NyaXB0aW9uSW5wdXQpIHtcclxuXHRcdFx0XHR0aGlzLmRlc2NyaXB0aW9uSW5wdXQuZm9jdXMoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgNTApO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJJbWFnZVByZXZpZXcoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBwcmV2aWV3Q29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiAnaW1hZ2UtbWFuYWdlci1wcmV2aWV3JyB9KTtcclxuXHRcdFxyXG5cdFx0Y29uc3QgaW1nID0gcHJldmlld0NvbnRhaW5lci5jcmVhdGVFbCgnaW1nJywge1xyXG5cdFx0XHRhdHRyOiB7XHJcblx0XHRcdFx0c3JjOiB0aGlzLmFwcC52YXVsdC5nZXRSZXNvdXJjZVBhdGgodGhpcy5pbWFnZUZpbGUpLFxyXG5cdFx0XHRcdGFsdDogdGhpcy5pbWFnZUZpbGUubmFtZSxcclxuXHRcdFx0fSxcclxuXHRcdH0pO1xyXG5cclxuXHRcdGltZy5hZGRDbGFzcygnaW1hZ2UtbWFuYWdlci1wcmV2aWV3LWltZycpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSB1cGRhdGVQcmV2aWV3KCk6IHZvaWQge1xyXG5cdFx0aWYgKCF0aGlzLmRlc2NyaXB0aW9uIHx8IHRoaXMuZGVzY3JpcHRpb24udHJpbSgpID09PSAnJykge1xyXG5cdFx0XHRpZiAodGhpcy5maWxlTmFtZVByZXZpZXdFbCkge1xyXG5cdFx0XHRcdHRoaXMuZmlsZU5hbWVQcmV2aWV3RWwuc2V0VGV4dCgnKGVudGVyIGRlc2NyaXB0aW9uKScpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0aGlzLnByZXZpZXdFbCkge1xyXG5cdFx0XHRcdHRoaXMucHJldmlld0VsLnNldFRleHQoJyhlbnRlciBkZXNjcmlwdGlvbiknKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3Qga2ViYWJOYW1lID0gdG9LZWJhYkNhc2UodGhpcy5kZXNjcmlwdGlvbik7XHJcblx0XHRjb25zdCBleHRlbnNpb24gPSB0aGlzLmltYWdlRmlsZS5leHRlbnNpb247XHJcblx0XHRjb25zdCBmaWxlTmFtZSA9IGAke2tlYmFiTmFtZX0uJHtleHRlbnNpb259YDtcclxuXHRcdGNvbnN0IGRpc3BsYXlUZXh0ID0gdGhpcy5kZXNjcmlwdGlvbi50cmltKCk7XHJcblxyXG5cdFx0aWYgKHRoaXMuZmlsZU5hbWVQcmV2aWV3RWwpIHtcclxuXHRcdFx0dGhpcy5maWxlTmFtZVByZXZpZXdFbC5zZXRUZXh0KGZpbGVOYW1lKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5wcmV2aWV3RWwpIHtcclxuXHRcdFx0Ly8gU2hvdyBwcmV2aWV3IGFzOiAhW1tmaWxlbmFtZS5qcGd8ZGlzcGxheSB0ZXh0XV1cclxuXHRcdFx0dGhpcy5wcmV2aWV3RWwuc2V0VGV4dChgIVtbJHtmaWxlTmFtZX18JHtkaXNwbGF5VGV4dH1dXWApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzaG93RXJyb3IobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5lcnJvckVsKSB7XHJcblx0XHRcdHRoaXMuZXJyb3JFbC5zZXRUZXh0KG1lc3NhZ2UpO1xyXG5cdFx0XHR0aGlzLmVycm9yRWwuYWRkQ2xhc3MoJ2ltYWdlLW1hbmFnZXItZXJyb3ItdmlzaWJsZScpO1xyXG5cdFx0XHR0aGlzLmVycm9yRWwucmVtb3ZlQ2xhc3MoJ2ltYWdlLW1hbmFnZXItZXJyb3ItaGlkZGVuJyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGhpZGVFcnJvcigpOiB2b2lkIHtcclxuXHRcdGlmICh0aGlzLmVycm9yRWwpIHtcclxuXHRcdFx0dGhpcy5lcnJvckVsLmFkZENsYXNzKCdpbWFnZS1tYW5hZ2VyLWVycm9yLWhpZGRlbicpO1xyXG5cdFx0XHR0aGlzLmVycm9yRWwucmVtb3ZlQ2xhc3MoJ2ltYWdlLW1hbmFnZXItZXJyb3ItdmlzaWJsZScpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzdWJtaXQoKTogdm9pZCB7XHJcblx0XHR0aGlzLmhpZGVFcnJvcigpO1xyXG5cclxuXHRcdGlmICghdGhpcy5kZXNjcmlwdGlvbiB8fCB0aGlzLmRlc2NyaXB0aW9uLnRyaW0oKSA9PT0gJycpIHtcclxuXHRcdFx0dGhpcy5zaG93RXJyb3IoJ0Rlc2NyaXB0aW9uIGNhbm5vdCBiZSBlbXB0eScpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3Qga2ViYWJOYW1lID0gdG9LZWJhYkNhc2UodGhpcy5kZXNjcmlwdGlvbik7XHJcblx0XHRpZiAoIWtlYmFiTmFtZSB8fCBrZWJhYk5hbWUgPT09ICcnKSB7XHJcblx0XHRcdHRoaXMuc2hvd0Vycm9yKCdEZXNjcmlwdGlvbiBtdXN0IGNvbnRhaW4gdmFsaWQgY2hhcmFjdGVycycpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5vblN1Ym1pdCh7XHJcblx0XHRcdGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLnRyaW0oKSxcclxuXHRcdFx0ZmlsZU5hbWU6IGtlYmFiTmFtZSxcclxuXHRcdFx0Y2FuY2VsbGVkOiBmYWxzZSxcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5jbG9zZSgpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBjYW5jZWwoKTogdm9pZCB7XHJcblx0XHR0aGlzLm9uU3VibWl0KHtcclxuXHRcdFx0ZGVzY3JpcHRpb246ICcnLFxyXG5cdFx0XHRmaWxlTmFtZTogJycsXHJcblx0XHRcdGNhbmNlbGxlZDogdHJ1ZSxcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5jbG9zZSgpO1xyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogT3BlbiB0aGUgZGVzY3JpcHRpdmUgaW1hZ2UgbW9kYWwgYW5kIHJldHVybiB0aGUgcmVzdWx0XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gb3BlbkRlc2NyaXB0aXZlSW1hZ2VNb2RhbChcclxuXHRhcHA6IEFwcCxcclxuXHRpbWFnZUZpbGU6IFRGaWxlXHJcbik6IFByb21pc2U8RGVzY3JpcHRpdmVJbWFnZVJlc3VsdD4ge1xyXG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgRGVzY3JpcHRpdmVJbWFnZU1vZGFsKGFwcCwgaW1hZ2VGaWxlLCByZXNvbHZlKTtcclxuXHRcdG1vZGFsLm9wZW4oKTtcclxuXHR9KTtcclxufVxyXG4iLCAiLyoqXHJcbiAqIEtlYmFiLWNhc2UgdXRpbGl0eVxyXG4gKiBDb252ZXJ0cyBzdHJpbmdzIHRvIGtlYmFiLWNhc2UgZm9yIHNhZmUgZmlsZW5hbWVzXHJcbiAqIEJhc2VkIG9uIEFzdHJvIENvbXBvc2VyJ3MgaW1wbGVtZW50YXRpb25cclxuICovXHJcblxyXG4vKipcclxuICogQ29udmVydCBhIHN0cmluZyB0byBrZWJhYi1jYXNlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdG9LZWJhYkNhc2Uoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdHJldHVybiBzdHJcclxuXHRcdC50b0xvd2VyQ2FzZSgpXHJcblx0XHQvLyBSZW1vdmUgb3IgcmVwbGFjZSBwcm9ibGVtYXRpYyBjaGFyYWN0ZXJzIGZvciBmaWxlbmFtZXNcclxuXHRcdC5yZXBsYWNlKC9bPD46XCIvXFxcXHw/Kl0vZywgJycpIC8vIFJlbW92ZSBXaW5kb3dzL1VuaXggaW52YWxpZCBmaWxlbmFtZSBjaGFyYWN0ZXJzXHJcblx0XHQucmVwbGFjZSgvWydcIl0vZywgJycpIC8vIFJlbW92ZSBxdW90ZXNcclxuXHRcdC5yZXBsYWNlKC9bXlxcd1xccy1dL2csICcnKSAvLyBSZW1vdmUgb3RoZXIgc3BlY2lhbCBjaGFyYWN0ZXJzIGJ1dCBrZWVwIGxldHRlcnMsIG51bWJlcnMsIHNwYWNlcywgaHlwaGVuc1xyXG5cdFx0LnRyaW0oKVxyXG5cdFx0LnJlcGxhY2UoL1xccysvZywgJy0nKVxyXG5cdFx0LnJlcGxhY2UoLy0rL2csICctJylcclxuXHRcdC5yZXBsYWNlKC9eLXwtJC9nLCAnJyk7XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBQcm9wZXJ0eSBIYW5kbGVyIFNlcnZpY2VcclxuICogSGFuZGxlcyBpbnNlcnRpbmcgaW1hZ2VzIGludG8gZnJvbnRtYXR0ZXIgcHJvcGVydGllcyAoTUQgYW5kIE1EWClcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEltYWdlTWFuYWdlclNldHRpbmdzLCBQcm9wZXJ0eUxpbmtGb3JtYXQsIFJlbW90ZUltYWdlIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBpc01keEZpbGUsIHByb2Nlc3NNZHhGcm9udE1hdHRlciB9IGZyb20gJy4uL3V0aWxzL21keC1mcm9udG1hdHRlcic7XHJcbmltcG9ydCB7IFN0b3JhZ2VNYW5hZ2VyIH0gZnJvbSAnLi9TdG9yYWdlTWFuYWdlcic7XHJcbmltcG9ydCB7IEltYWdlUHJvY2Vzc29yIH0gZnJvbSAnLi9JbWFnZVByb2Nlc3Nvcic7XHJcbmltcG9ydCB0eXBlIHsgUmVtb3RlSW1hZ2VTZXJ2aWNlIH0gZnJvbSAnLi9SZW1vdGVJbWFnZVNlcnZpY2UnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFByb3BlcnR5SGFuZGxlciB7XHJcblx0cHJpdmF0ZSBhcHA6IEFwcDtcclxuXHRwcml2YXRlIHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncztcclxuXHRwcml2YXRlIHN0b3JhZ2VNYW5hZ2VyOiBTdG9yYWdlTWFuYWdlcjtcclxuXHRwcml2YXRlIGltYWdlUHJvY2Vzc29yOiBJbWFnZVByb2Nlc3NvcjtcclxuXHRwcml2YXRlIHJlbW90ZVNlcnZpY2U/OiBSZW1vdGVJbWFnZVNlcnZpY2U7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3MsIHN0b3JhZ2VNYW5hZ2VyOiBTdG9yYWdlTWFuYWdlciwgaW1hZ2VQcm9jZXNzb3I6IEltYWdlUHJvY2Vzc29yLCByZW1vdGVTZXJ2aWNlPzogUmVtb3RlSW1hZ2VTZXJ2aWNlKSB7XHJcblx0XHR0aGlzLmFwcCA9IGFwcDtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuXHRcdHRoaXMuc3RvcmFnZU1hbmFnZXIgPSBzdG9yYWdlTWFuYWdlcjtcclxuXHRcdHRoaXMuaW1hZ2VQcm9jZXNzb3IgPSBpbWFnZVByb2Nlc3NvcjtcclxuXHRcdHRoaXMucmVtb3RlU2VydmljZSA9IHJlbW90ZVNlcnZpY2U7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgc2V0dGluZ3MgcmVmZXJlbmNlXHJcblx0ICovXHJcblx0dXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzKTogdm9pZCB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcblx0XHR0aGlzLmltYWdlUHJvY2Vzc29yPy51cGRhdGVTZXR0aW5ncyhzZXR0aW5ncyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXQgYW4gaW1hZ2UgcHJvcGVydHkgdmFsdWUgaW4gZnJvbnRtYXR0ZXJcclxuXHQgKi9cclxuXHRhc3luYyBzZXRQcm9wZXJ0eVZhbHVlKFxyXG5cdFx0bm90ZUZpbGU6IFRGaWxlLFxyXG5cdFx0cHJvcGVydHlOYW1lOiBzdHJpbmcsXHJcblx0XHRpbWFnZUZpbGU6IFRGaWxlXHJcblx0KTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRjb25zdCBsaW5rVmFsdWUgPSB0aGlzLmZvcm1hdFByb3BlcnR5TGluayhpbWFnZUZpbGUsIG5vdGVGaWxlKTtcclxuXHJcblx0XHR0cnkge1xyXG5cdFx0XHRpZiAoaXNNZHhGaWxlKG5vdGVGaWxlKSkge1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuc2V0TWR4UHJvcGVydHkobm90ZUZpbGUsIHByb3BlcnR5TmFtZSwgbGlua1ZhbHVlKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnNldE1kUHJvcGVydHkobm90ZUZpbGUsIHByb3BlcnR5TmFtZSwgbGlua1ZhbHVlKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRuZXcgTm90aWNlKGBJbWFnZSBhZGRlZCB0byBwcm9wZXJ0eTogJHtwcm9wZXJ0eU5hbWV9YCk7XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIHByb3BlcnR5OicsIGVycm9yKTtcclxuXHRcdFx0bmV3IE5vdGljZShgRmFpbGVkIHRvIHVwZGF0ZSBwcm9wZXJ0eTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCk7XHJcblx0XHRcdHRocm93IGVycm9yO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0IHByb3BlcnR5IGluIE1EIGZpbGUgdXNpbmcgT2JzaWRpYW4ncyBBUElcclxuXHQgKi9cclxuXHRwcml2YXRlIGFzeW5jIHNldE1kUHJvcGVydHkoXHJcblx0XHRmaWxlOiBURmlsZSxcclxuXHRcdHByb3BlcnR5TmFtZTogc3RyaW5nLFxyXG5cdFx0dmFsdWU6IHN0cmluZ1xyXG5cdCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUsIChmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pID0+IHtcclxuXHRcdFx0ZnJvbnRtYXR0ZXJbcHJvcGVydHlOYW1lXSA9IHZhbHVlO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXQgcHJvcGVydHkgaW4gTURYIGZpbGUgdXNpbmcgY3VzdG9tIGhhbmRsZXJcclxuXHQgKi9cclxuXHRwcml2YXRlIGFzeW5jIHNldE1keFByb3BlcnR5KFxyXG5cdFx0ZmlsZTogVEZpbGUsXHJcblx0XHRwcm9wZXJ0eU5hbWU6IHN0cmluZyxcclxuXHRcdHZhbHVlOiBzdHJpbmdcclxuXHQpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGF3YWl0IHByb2Nlc3NNZHhGcm9udE1hdHRlcih0aGlzLmFwcCwgZmlsZSwgKGZyb250bWF0dGVyKSA9PiB7XHJcblx0XHRcdGZyb250bWF0dGVyW3Byb3BlcnR5TmFtZV0gPSB2YWx1ZTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRm9ybWF0IHRoZSBpbWFnZSBsaW5rIGFjY29yZGluZyB0byBzZXR0aW5nc1xyXG5cdCAqIFB1YmxpYyBtZXRob2Qgc28gUGFzdGVIYW5kbGVyIGNhbiBnZXQgdGhlIGZvcm1hdHRlZCB2YWx1ZSBmb3IgVUkgdXBkYXRlc1xyXG5cdCAqL1xyXG5cdGZvcm1hdFByb3BlcnR5TGluayhpbWFnZUZpbGU6IFRGaWxlLCBub3RlRmlsZTogVEZpbGUpOiBzdHJpbmcge1xyXG5cdFx0Ly8gSGFuZGxlIE9ic2lkaWFuRGVmYXVsdCBmaXJzdCAtIHVzZSBPYnNpZGlhbidzIGdlbmVyYXRlTWFya2Rvd25MaW5rIEFQSVxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MucHJvcGVydHlMaW5rRm9ybWF0ID09PSBQcm9wZXJ0eUxpbmtGb3JtYXQuT2JzaWRpYW5EZWZhdWx0KSB7XHJcblx0XHRcdC8vIFVzZSBPYnNpZGlhbidzIEFQSSB3aGljaCByZXNwZWN0cyB1c2VNYXJrZG93bkxpbmtzLCBuZXdMaW5rRm9ybWF0LCBldGMuXHJcblx0XHRcdGNvbnN0IGdlbmVyYXRlZExpbmsgPSB0aGlzLmFwcC5maWxlTWFuYWdlci5nZW5lcmF0ZU1hcmtkb3duTGluayhpbWFnZUZpbGUsIG5vdGVGaWxlLnBhdGgpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gRXh0cmFjdCB0aGUgbGluayBwYXJ0IGZvciBwcm9wZXJ0aWVzXHJcblx0XHRcdC8vIE9ic2lkaWFuIG1heSBnZW5lcmF0ZTogIVtbcGF0aF1dIG9yICFbXShwYXRoKSBvciBbW3BhdGhdXSBvciBbXShwYXRoKVxyXG5cdFx0XHRpZiAoZ2VuZXJhdGVkTGluay5zdGFydHNXaXRoKCchWycpICYmIGdlbmVyYXRlZExpbmsuaW5jbHVkZXMoJ11dJykpIHtcclxuXHRcdFx0XHQvLyBXaWtpbGluayB3aXRoIGVtYmVkOiAhW1twYXRoXV0gLT4gW1twYXRoXV1cclxuXHRcdFx0XHRyZXR1cm4gZ2VuZXJhdGVkTGluay5zdWJzdHJpbmcoMSk7XHJcblx0XHRcdH0gZWxzZSBpZiAoZ2VuZXJhdGVkTGluay5zdGFydHNXaXRoKCchWycpICYmIGdlbmVyYXRlZExpbmsuaW5jbHVkZXMoJ10oJykpIHtcclxuXHRcdFx0XHQvLyBNYXJrZG93biBsaW5rIHdpdGggZW1iZWQ6ICFbXShwYXRoKSAtPiBleHRyYWN0IHBhdGggZnJvbSBwYXJlbnRoZXNlc1xyXG5cdFx0XHRcdGNvbnN0IG1hdGNoID0gZ2VuZXJhdGVkTGluay5tYXRjaCgvIVxcWy4qP1xcXVxcKCguKj8pXFwpLyk7XHJcblx0XHRcdFx0cmV0dXJuIG1hdGNoICYmIG1hdGNoWzFdID8gbWF0Y2hbMV0gOiBnZW5lcmF0ZWRMaW5rO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGdlbmVyYXRlZExpbmsuc3RhcnRzV2l0aCgnW1snKSAmJiBnZW5lcmF0ZWRMaW5rLmVuZHNXaXRoKCddXScpKSB7XHJcblx0XHRcdFx0Ly8gV2lraWxpbmsgd2l0aG91dCBlbWJlZDogW1twYXRoXV0gLT4ga2VlcCBhcyBpc1xyXG5cdFx0XHRcdHJldHVybiBnZW5lcmF0ZWRMaW5rO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGdlbmVyYXRlZExpbmsuaW5jbHVkZXMoJ10oJykpIHtcclxuXHRcdFx0XHQvLyBNYXJrZG93biBsaW5rIHdpdGhvdXQgZW1iZWQ6IFtdKHBhdGgpIC0+IGV4dHJhY3QgcGF0aFxyXG5cdFx0XHRcdGNvbnN0IG1hdGNoID0gZ2VuZXJhdGVkTGluay5tYXRjaCgvXFxbLio/XFxdXFwoKC4qPylcXCkvKTtcclxuXHRcdFx0XHRyZXR1cm4gbWF0Y2ggJiYgbWF0Y2hbMV0gPyBtYXRjaFsxXSA6IGdlbmVyYXRlZExpbms7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gRmFsbGJhY2s6IHJldHVybiBhcy1pc1xyXG5cdFx0XHRyZXR1cm4gZ2VuZXJhdGVkTGluaztcclxuXHRcdH1cclxuXHJcblx0XHRsZXQgcGF0aFRvVXNlOiBzdHJpbmc7XHJcblxyXG5cdFx0c3dpdGNoICh0aGlzLnNldHRpbmdzLnByb3BlcnR5TGlua0Zvcm1hdCkge1xyXG5cdFx0XHRjYXNlIFByb3BlcnR5TGlua0Zvcm1hdC5SZWxhdGl2ZVBhdGg6XHJcblx0XHRcdFx0Ly8gVXNlIHJlbGF0aXZlIHBhdGg6IGFsd2F5cyB1c2UgLi9pbWFnZS5qcGcgZm9ybWF0IGZvciBjb25zaXN0ZW5jeVxyXG5cdFx0XHRcdC8vIFRoaXMgd29ya3Mgd2hldGhlciBzYW1lIGZvbGRlciBvciBkaWZmZXJlbnQgZm9sZGVyXHJcblx0XHRcdFx0cGF0aFRvVXNlID0gYC4vJHtpbWFnZUZpbGUubmFtZX1gO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIFByb3BlcnR5TGlua0Zvcm1hdC5DdXN0b206XHJcblx0XHRcdFx0Ly8gRm9yIGN1c3RvbSBmb3JtYXQsIHVzZSBqdXN0IHRoZSBmaWxlbmFtZSBzbyB1c2VyIGNhbiBjb250cm9sIHRoZSBmdWxsIHBhdGhcclxuXHRcdFx0XHRwYXRoVG9Vc2UgPSBpbWFnZUZpbGUubmFtZTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBQcm9wZXJ0eUxpbmtGb3JtYXQuUGF0aDpcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRwYXRoVG9Vc2UgPSB0aGlzLmdldFJlbGF0aXZlUGF0aChub3RlRmlsZSwgaW1hZ2VGaWxlKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHJcblx0XHRzd2l0Y2ggKHRoaXMuc2V0dGluZ3MucHJvcGVydHlMaW5rRm9ybWF0KSB7XHJcblx0XHRcdGNhc2UgUHJvcGVydHlMaW5rRm9ybWF0Lldpa2lsaW5rOlxyXG5cdFx0XHRcdHJldHVybiBgW1ske3BhdGhUb1VzZX1dXWA7XHJcblx0XHRcdGNhc2UgUHJvcGVydHlMaW5rRm9ybWF0Lk1hcmtkb3duOlxyXG5cdFx0XHRcdHJldHVybiBgIVtdKCR7ZW5jb2RlVVJJKHBhdGhUb1VzZSl9KWA7XHJcblx0XHRcdGNhc2UgUHJvcGVydHlMaW5rRm9ybWF0LkN1c3RvbTpcclxuXHRcdFx0XHQvLyBSZXBsYWNlIHtpbWFnZS11cmx9IHBsYWNlaG9sZGVyIHdpdGggdGhlIGltYWdlIGZpbGVuYW1lXHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuc2V0dGluZ3MuY3VzdG9tUHJvcGVydHlMaW5rRm9ybWF0LnJlcGxhY2UoXHJcblx0XHRcdFx0XHQvXFx7aW1hZ2UtdXJsXFx9L2dpLFxyXG5cdFx0XHRcdFx0cGF0aFRvVXNlXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0Y2FzZSBQcm9wZXJ0eUxpbmtGb3JtYXQuUmVsYXRpdmVQYXRoOlxyXG5cdFx0XHRjYXNlIFByb3BlcnR5TGlua0Zvcm1hdC5QYXRoOlxyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdHJldHVybiBwYXRoVG9Vc2U7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZXQgcmVsYXRpdmUgcGF0aCBmcm9tIG5vdGUgdG8gaW1hZ2VcclxuXHQgKi9cclxuXHRwcml2YXRlIGdldFJlbGF0aXZlUGF0aChmcm9tRmlsZTogVEZpbGUsIHRvRmlsZTogVEZpbGUpOiBzdHJpbmcge1xyXG5cdFx0Ly8gSWYgdXNpbmcgd2lraWxpbmtzLCB3ZSBjYW4gdXNlIGp1c3QgdGhlIGZpbGUgbmFtZVxyXG5cdFx0Ly8gQWNjZXNzIE9ic2lkaWFuJ3MgaW50ZXJuYWwgY29uZmlnIChub3QgaW4gcHVibGljIEFQSSB0eXBlcyBidXQgYWNjZXNzaWJsZSBhdCBydW50aW1lKVxyXG5cdFx0Y29uc3QgdmF1bHRDb25maWcgPSAodGhpcy5hcHAudmF1bHQgYXMgdW5rbm93biBhcyB7IGNvbmZpZz86IHsgdXNlTWFya2Rvd25MaW5rcz86IGJvb2xlYW4gfSB9KS5jb25maWc7XHJcblx0XHRjb25zdCB1c2VNYXJrZG93bkxpbmtzID0gdmF1bHRDb25maWc/LnVzZU1hcmtkb3duTGlua3MgPz8gZmFsc2U7XHJcblx0XHRjb25zdCB1c2VXaWtpbGlua3MgPSAhdXNlTWFya2Rvd25MaW5rcztcclxuXHJcblx0XHRpZiAodXNlV2lraWxpbmtzICYmIHRoaXMuc2V0dGluZ3MucHJvcGVydHlMaW5rRm9ybWF0ID09PSBQcm9wZXJ0eUxpbmtGb3JtYXQuV2lraWxpbmspIHtcclxuXHRcdFx0Ly8gRm9yIHdpa2lsaW5rcywganVzdCB1c2UgdGhlIGZpbGUgbmFtZVxyXG5cdFx0XHRyZXR1cm4gdG9GaWxlLm5hbWU7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRm9yIG1hcmtkb3duIGxpbmtzIGFuZCBwYXRocywgdXNlIHJlbGF0aXZlIHBhdGhcclxuXHRcdHJldHVybiB0aGlzLnN0b3JhZ2VNYW5hZ2VyLmdldFJlbGF0aXZlUGF0aChmcm9tRmlsZSwgdG9GaWxlKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCB0aGUgY3VycmVudCB2YWx1ZSBvZiBhIHByb3BlcnR5XHJcblx0ICovXHJcblx0Z2V0UHJvcGVydHlWYWx1ZShcclxuXHRcdGZpbGU6IFRGaWxlLFxyXG5cdFx0cHJvcGVydHlOYW1lOiBzdHJpbmdcclxuXHQpOiB1bmtub3duIHtcclxuXHRcdGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XHJcblx0XHRyZXR1cm4gY2FjaGU/LmZyb250bWF0dGVyPy5bcHJvcGVydHlOYW1lXTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIGEgcHJvcGVydHkgZXhpc3RzIGluIGZyb250bWF0dGVyXHJcblx0ICovXHJcblx0aGFzUHJvcGVydHkoZmlsZTogVEZpbGUsIHByb3BlcnR5TmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0XHRjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xyXG5cdFx0cmV0dXJuIGNhY2hlPy5mcm9udG1hdHRlcj8uW3Byb3BlcnR5TmFtZV0gIT09IHVuZGVmaW5lZDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEluc2VydCBhbiBpbWFnZSBmcm9tIGEgVVJMIGludG8gYSBwcm9wZXJ0eVxyXG5cdCAqIERvd25sb2FkcyB0aGUgaW1hZ2UsIHNhdmVzIGl0IGxvY2FsbHksIGFuZCBzZXRzIHRoZSBwcm9wZXJ0eVxyXG5cdCAqIEBwYXJhbSByZW1vdGVJbWFnZSBPcHRpb25hbCBSZW1vdGVJbWFnZSBvYmplY3QgZm9yIGdlbmVyYXRpbmcgcmVmZXJyYWwgdGV4dFxyXG5cdCAqL1xyXG5cdGFzeW5jIGluc2VydEltYWdlRnJvbVVybChcclxuXHRcdGltYWdlVXJsOiBzdHJpbmcsXHJcblx0XHRub3RlRmlsZTogVEZpbGUsXHJcblx0XHRwcm9wZXJ0eU5hbWU6IHN0cmluZyxcclxuXHRcdHJlbW90ZUltYWdlPzogUmVtb3RlSW1hZ2VcclxuXHQpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdC8vIFVzZSBJbWFnZVByb2Nlc3NvciB0byBoYW5kbGUgdGhlIGRvd25sb2FkIGFuZCBzYXZlXHJcblx0XHQvLyBUaGlzIGVuc3VyZXMgY29uc2lzdGVudCBuYW1pbmcsIGRlZHVwbGljYXRpb24sIGFuZCByZW5hbWUgbW9kYWwgaGFuZGxpbmdcclxuXHRcdC8vIFNraXAgZGVzY3JpcHRpdmUgaW1hZ2VzIGZvciBwcm9wZXJ0eSBpbnNlcnRpb25zIChkaXNwbGF5IHRleHQgZG9lc24ndCBhcHBseSB0byBwcm9wZXJ0aWVzKVxyXG5cdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5pbWFnZVByb2Nlc3Nvci5wcm9jZXNzSW1hZ2VVcmwoXHJcblx0XHRcdGltYWdlVXJsLFxyXG5cdFx0XHRub3RlRmlsZSxcclxuXHRcdFx0dHJ1ZSwgLy8gU2hvdyByZW5hbWUgbW9kYWwgaWYgZW5hYmxlZFxyXG5cdFx0XHR0cnVlIC8vIGlzUHJvcGVydHlJbnNlcnRpb24gLSBza2lwIGRlc2NyaXB0aXZlIGltYWdlc1xyXG5cdFx0KTtcclxuXHJcblx0XHRpZiAoIXJlc3VsdC5zdWNjZXNzIHx8ICFyZXN1bHQuZmlsZSkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IocmVzdWx0LmVycm9yIHx8ICdGYWlsZWQgdG8gcHJvY2VzcyBpbWFnZScpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNldCB0aGUgcHJvcGVydHlcclxuXHRcdGF3YWl0IHRoaXMuc2V0UHJvcGVydHlWYWx1ZShub3RlRmlsZSwgcHJvcGVydHlOYW1lLCByZXN1bHQuZmlsZSk7XHJcblxyXG5cdFx0Ly8gQXBwZW5kIHJlZmVycmFsIHRleHQgYXQgZW5kIG9mIGZpbGUgaWYgZW5hYmxlZCBhbmQgd2UgaGF2ZSBSZW1vdGVJbWFnZSBpbmZvXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5hcHBlbmRSZWZlcnJhbCAmJiByZW1vdGVJbWFnZSAmJiB0aGlzLnJlbW90ZVNlcnZpY2UpIHtcclxuXHRcdFx0Y29uc3QgcmVmZXJyYWxUZXh0ID0gdGhpcy5yZW1vdGVTZXJ2aWNlLmdlbmVyYXRlUmVmZXJyYWxUZXh0KHJlbW90ZUltYWdlKTtcclxuXHRcdFx0aWYgKHJlZmVycmFsVGV4dCkge1xyXG5cdFx0XHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKG5vdGVGaWxlKTtcclxuXHRcdFx0XHRjb25zdCB1cGRhdGVkQ29udGVudCA9IGNvbnRlbnQgKyByZWZlcnJhbFRleHQ7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KG5vdGVGaWxlLCB1cGRhdGVkQ29udGVudCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBNRFggRnJvbnRtYXR0ZXIgVXRpbGl0aWVzXHJcbiAqIE1hbnVhbCBmcm9udG1hdHRlciBwYXJzaW5nIGFuZCBtb2RpZmljYXRpb24gZm9yIE1EWCBmaWxlc1xyXG4gKiBPYnNpZGlhbidzIG1ldGFkYXRhQ2FjaGUgYW5kIHByb2Nlc3NGcm9udE1hdHRlciBvbmx5IHdvcmsgZm9yIC5tZCBmaWxlc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIHBhcnNlWWFtbCwgc3RyaW5naWZ5WWFtbCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGZpbGUgaXMgYW4gTURYIGZpbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc01keEZpbGUoZmlsZTogVEZpbGUpOiBib29sZWFuIHtcclxuXHRyZXR1cm4gZmlsZS5leHRlbnNpb24gPT09ICdtZHgnO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBmaWxlIGlzIGEgbWFya2Rvd24gZmlsZSAoTUQgb3IgTURYKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTWFya2Rvd25GaWxlKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnIHx8IGZpbGUuZXh0ZW5zaW9uID09PSAnbWR4JztcclxufVxyXG5cclxuLyoqXHJcbiAqIFBhcnNlIGZyb250bWF0dGVyIGZyb20gcmF3IGZpbGUgY29udGVudFxyXG4gKiBSZXR1cm5zIHRoZSBmcm9udG1hdHRlciBvYmplY3QgYW5kIHRoZSBib2R5IGNvbnRlbnQgc2VwYXJhdGVseVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTWR4RnJvbnRtYXR0ZXIoXHJcblx0Y29udGVudDogc3RyaW5nXHJcbik6IHsgZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIHVua25vd24+OyBib2R5OiBzdHJpbmcgfSB8IG51bGwge1xyXG5cdGNvbnN0IGZyb250bWF0dGVyUmVnZXggPSAvXi0tLVxccj9cXG4oW1xcc1xcU10qPylcXHI/XFxuLS0tXFxyP1xcbi87XHJcblx0Y29uc3QgbWF0Y2ggPSBjb250ZW50Lm1hdGNoKGZyb250bWF0dGVyUmVnZXgpO1xyXG5cclxuXHRpZiAoIW1hdGNoKSB7XHJcblx0XHQvLyBObyBmcm9udG1hdHRlciBmb3VuZFxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0ZnJvbnRtYXR0ZXI6IHt9LFxyXG5cdFx0XHRib2R5OiBjb250ZW50LFxyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdGNvbnN0IGZyb250bWF0dGVyVGV4dCA9IG1hdGNoWzFdID8/ICcnO1xyXG5cdGNvbnN0IGJvZHlDb250ZW50ID0gY29udGVudC5zbGljZShtYXRjaFswXS5sZW5ndGgpO1xyXG5cclxuXHR0cnkge1xyXG5cdFx0Y29uc3QgcGFyc2VkID0gcGFyc2VZYW1sKGZyb250bWF0dGVyVGV4dCkgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsIHwgdW5kZWZpbmVkO1xyXG5cdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBwYXJzZWQgJiYgdHlwZW9mIHBhcnNlZCA9PT0gJ29iamVjdCcgPyBwYXJzZWQgOiB7fTtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGZyb250bWF0dGVyLFxyXG5cdFx0XHRib2R5OiBib2R5Q29udGVudCxcclxuXHRcdH07XHJcblx0fSBjYXRjaCAoZSkge1xyXG5cdFx0Y29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyBNRFggZnJvbnRtYXR0ZXI6JywgZSk7XHJcblx0XHQvLyBSZXR1cm4gZW1wdHkgZnJvbnRtYXR0ZXIgYnV0IHByZXNlcnZlIGJvZHlcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGZyb250bWF0dGVyOiB7fSxcclxuXHRcdFx0Ym9keTogYm9keUNvbnRlbnQsXHJcblx0XHR9O1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJlYWQgYW5kIHBhcnNlIGZyb250bWF0dGVyIGZyb20gYW4gTURYIGZpbGVcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWFkTWR4RnJvbnRtYXR0ZXIoXHJcblx0YXBwOiBBcHAsXHJcblx0ZmlsZTogVEZpbGVcclxuKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGw+IHtcclxuXHRpZiAoIWlzTWR4RmlsZShmaWxlKSkge1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG5cclxuXHR0cnkge1xyXG5cdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG5cdFx0Y29uc3QgcGFyc2VkID0gcGFyc2VNZHhGcm9udG1hdHRlcihjb250ZW50KTtcclxuXHRcdHJldHVybiBwYXJzZWQgPyBwYXJzZWQuZnJvbnRtYXR0ZXIgOiBudWxsO1xyXG5cdH0gY2F0Y2ggKGUpIHtcclxuXHRcdGNvbnNvbGUuZXJyb3IoYEVycm9yIHJlYWRpbmcgTURYIGZyb250bWF0dGVyIGZyb20gJHtmaWxlLnBhdGh9OmAsIGUpO1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogV3JpdGUgdXBkYXRlZCBmcm9udG1hdHRlciB0byBhbiBNRFggZmlsZVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdyaXRlTWR4RnJvbnRtYXR0ZXIoXHJcblx0YXBwOiBBcHAsXHJcblx0ZmlsZTogVEZpbGUsXHJcblx0ZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIHVua25vd24+XHJcbik6IFByb21pc2U8dm9pZD4ge1xyXG5cdGlmICghaXNNZHhGaWxlKGZpbGUpKSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoYEZpbGUgJHtmaWxlLnBhdGh9IGlzIG5vdCBhbiBNRFggZmlsZWApO1xyXG5cdH1cclxuXHJcblx0dHJ5IHtcclxuXHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcclxuXHRcdGNvbnN0IHBhcnNlZCA9IHBhcnNlTWR4RnJvbnRtYXR0ZXIoY29udGVudCk7XHJcblxyXG5cdFx0aWYgKCFwYXJzZWQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gcGFyc2UgZXhpc3RpbmcgZnJvbnRtYXR0ZXInKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBTdHJpbmdpZnkgdGhlIHVwZGF0ZWQgZnJvbnRtYXR0ZXJcclxuXHRcdGNvbnN0IG5ld0Zyb250bWF0dGVyVGV4dCA9IHN0cmluZ2lmeVlhbWwoZnJvbnRtYXR0ZXIpLnRyaW0oKTtcclxuXHJcblx0XHQvLyBSZWNvbnN0cnVjdCBmaWxlIGNvbnRlbnRcclxuXHRcdGNvbnN0IG5ld0NvbnRlbnQgPSBgLS0tXFxuJHtuZXdGcm9udG1hdHRlclRleHR9XFxuLS0tXFxuJHtwYXJzZWQuYm9keX1gO1xyXG5cclxuXHRcdC8vIFdyaXRlIGJhY2sgdG8gZmlsZVxyXG5cdFx0YXdhaXQgYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBuZXdDb250ZW50KTtcclxuXHR9IGNhdGNoIChlKSB7XHJcblx0XHRjb25zb2xlLmVycm9yKGBFcnJvciB3cml0aW5nIE1EWCBmcm9udG1hdHRlciB0byAke2ZpbGUucGF0aH06YCwgZSk7XHJcblx0XHR0aHJvdyBlO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFByb2Nlc3MgZnJvbnRtYXR0ZXIgZm9yIGFuIE1EWCBmaWxlIChzaW1pbGFyIEFQSSB0byBwcm9jZXNzRnJvbnRNYXR0ZXIpXHJcbiAqIFRoZSBjYWxsYmFjayByZWNlaXZlcyB0aGUgZnJvbnRtYXR0ZXIgb2JqZWN0IGFuZCBjYW4gbW9kaWZ5IGl0XHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc01keEZyb250TWF0dGVyKFxyXG5cdGFwcDogQXBwLFxyXG5cdGZpbGU6IFRGaWxlLFxyXG5cdGNhbGxiYWNrOiAoZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIHVua25vd24+KSA9PiB2b2lkXHJcbik6IFByb21pc2U8dm9pZD4ge1xyXG5cdGlmICghaXNNZHhGaWxlKGZpbGUpKSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoYEZpbGUgJHtmaWxlLnBhdGh9IGlzIG5vdCBhbiBNRFggZmlsZWApO1xyXG5cdH1cclxuXHJcblx0dHJ5IHtcclxuXHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcclxuXHRcdGNvbnN0IHBhcnNlZCA9IHBhcnNlTWR4RnJvbnRtYXR0ZXIoY29udGVudCk7XHJcblxyXG5cdFx0aWYgKCFwYXJzZWQpIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gcGFyc2UgZXhpc3RpbmcgZnJvbnRtYXR0ZXInKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDcmVhdGUgYSBjb3B5IG9mIHRoZSBmcm9udG1hdHRlciBmb3IgdGhlIGNhbGxiYWNrIHRvIG1vZGlmeVxyXG5cdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSB7IC4uLnBhcnNlZC5mcm9udG1hdHRlciB9O1xyXG5cclxuXHRcdC8vIENhbGwgdGhlIGNhbGxiYWNrIHRvIG1vZGlmeSBmcm9udG1hdHRlclxyXG5cdFx0Y2FsbGJhY2soZnJvbnRtYXR0ZXIpO1xyXG5cclxuXHRcdC8vIFN0cmluZ2lmeSB0aGUgdXBkYXRlZCBmcm9udG1hdHRlclxyXG5cdFx0Y29uc3QgbmV3RnJvbnRtYXR0ZXJUZXh0ID0gc3RyaW5naWZ5WWFtbChmcm9udG1hdHRlcikudHJpbSgpO1xyXG5cclxuXHRcdC8vIFJlY29uc3RydWN0IGZpbGUgY29udGVudFxyXG5cdFx0Y29uc3QgbmV3Q29udGVudCA9IGAtLS1cXG4ke25ld0Zyb250bWF0dGVyVGV4dH1cXG4tLS1cXG4ke3BhcnNlZC5ib2R5fWA7XHJcblxyXG5cdFx0Ly8gV3JpdGUgYmFjayB0byBmaWxlXHJcblx0XHRhd2FpdCBhcHAudmF1bHQubW9kaWZ5KGZpbGUsIG5ld0NvbnRlbnQpO1xyXG5cdH0gY2F0Y2ggKGUpIHtcclxuXHRcdGNvbnNvbGUuZXJyb3IoYEVycm9yIHByb2Nlc3NpbmcgTURYIGZyb250bWF0dGVyIGZvciAke2ZpbGUucGF0aH06YCwgZSk7XHJcblx0XHR0aHJvdyBlO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBmcm9udG1hdHRlciBmcm9tIGFueSBtYXJrZG93biBmaWxlIChNRCBvciBNRFgpXHJcbiAqIFVzZXMgT2JzaWRpYW4ncyBtZXRhZGF0YUNhY2hlIGZvciBNRCBmaWxlcywgbWFudWFsIHBhcnNpbmcgZm9yIE1EWFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEZyb250bWF0dGVyKFxyXG5cdGFwcDogQXBwLFxyXG5cdGZpbGU6IFRGaWxlXHJcbik6IFByb21pc2U8UmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsPiB7XHJcblx0aWYgKGlzTWR4RmlsZShmaWxlKSkge1xyXG5cdFx0cmV0dXJuIGF3YWl0IHJlYWRNZHhGcm9udG1hdHRlcihhcHAsIGZpbGUpO1xyXG5cdH1cclxuXHRcclxuXHQvLyBGb3IgTUQgZmlsZXMsIHVzZSBPYnNpZGlhbidzIG1ldGFkYXRhIGNhY2hlXHJcblx0Y29uc3QgY2FjaGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XHJcblx0cmV0dXJuIGNhY2hlPy5mcm9udG1hdHRlciA/PyBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogUHJvY2VzcyBmcm9udG1hdHRlciBmb3IgYW55IG1hcmtkb3duIGZpbGUgKE1EIG9yIE1EWClcclxuICogVXNlcyBPYnNpZGlhbidzIHByb2Nlc3NGcm9udE1hdHRlciBmb3IgTUQgZmlsZXMsIGN1c3RvbSBoYW5kbGluZyBmb3IgTURYXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc0Zyb250bWF0dGVyKFxyXG5cdGFwcDogQXBwLFxyXG5cdGZpbGU6IFRGaWxlLFxyXG5cdGNhbGxiYWNrOiAoZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIHVua25vd24+KSA9PiB2b2lkXHJcbik6IFByb21pc2U8dm9pZD4ge1xyXG5cdGlmIChpc01keEZpbGUoZmlsZSkpIHtcclxuXHRcdGF3YWl0IHByb2Nlc3NNZHhGcm9udE1hdHRlcihhcHAsIGZpbGUsIGNhbGxiYWNrKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0YXdhaXQgYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihmaWxlLCBjYWxsYmFjayk7XHJcblx0fVxyXG59XHJcbiIsICIvKipcclxuICogUGFzdGUgSGFuZGxlciBTZXJ2aWNlXHJcbiAqIEhhbmRsZXMgcGFzdGUgZXZlbnRzIGZvciBpbWFnZXMgaW4gdGhlIGVkaXRvciBhbmQgZnJvbnRtYXR0ZXIgcHJvcGVydGllc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgTWFya2Rvd25WaWV3LCBOb3RpY2UsIEVkaXRvciB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgSW1hZ2VNYW5hZ2VyU2V0dGluZ3MgfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7IEltYWdlUHJvY2Vzc29yIH0gZnJvbSAnLi9JbWFnZVByb2Nlc3Nvcic7XHJcbmltcG9ydCB7IFByb3BlcnR5SGFuZGxlciB9IGZyb20gJy4vUHJvcGVydHlIYW5kbGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQYXN0ZUhhbmRsZXIge1xyXG5cdHByaXZhdGUgYXBwOiBBcHA7XHJcblx0cHJpdmF0ZSBzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3M7XHJcblx0cHJpdmF0ZSBpbWFnZVByb2Nlc3NvcjogSW1hZ2VQcm9jZXNzb3I7XHJcblx0cHJpdmF0ZSBwcm9wZXJ0eUhhbmRsZXI6IFByb3BlcnR5SGFuZGxlcjtcclxuXHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRhcHA6IEFwcCxcclxuXHRcdHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncyxcclxuXHRcdGltYWdlUHJvY2Vzc29yOiBJbWFnZVByb2Nlc3NvcixcclxuXHRcdHByb3BlcnR5SGFuZGxlcjogUHJvcGVydHlIYW5kbGVyXHJcblx0KSB7XHJcblx0XHR0aGlzLmFwcCA9IGFwcDtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuXHRcdHRoaXMuaW1hZ2VQcm9jZXNzb3IgPSBpbWFnZVByb2Nlc3NvcjtcclxuXHRcdHRoaXMucHJvcGVydHlIYW5kbGVyID0gcHJvcGVydHlIYW5kbGVyO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlIHNldHRpbmdzIHJlZmVyZW5jZVxyXG5cdCAqL1xyXG5cdHVwZGF0ZVNldHRpbmdzKHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncyk6IHZvaWQge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlIGVkaXRvciBwYXN0ZSBldmVudFxyXG5cdCAqIFRoaXMgaXMgcmVnaXN0ZXJlZCB2aWEgd29ya3NwYWNlLm9uKCdlZGl0b3ItcGFzdGUnKVxyXG5cdCAqL1xyXG5cdGFzeW5jIGhhbmRsZUVkaXRvclBhc3RlKFxyXG5cdFx0ZXZ0OiBDbGlwYm9hcmRFdmVudCxcclxuXHRcdGVkaXRvcjogRWRpdG9yLFxyXG5cdFx0dmlldzogTWFya2Rvd25WaWV3XHJcblx0KTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuZW5hYmxlUmVuYW1lT25QYXN0ZSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7IC8vIExldCBPYnNpZGlhbiBoYW5kbGUgaXRcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBpZiB3ZSdyZSBpbiBhIGZyb250bWF0dGVyIHByb3BlcnR5IGZpZWxkIC0gaWYgc28sIGxldCBwcm9wZXJ0eSBwYXN0ZSBoYW5kbGVyIHRha2Ugb3ZlclxyXG5cdFx0Y29uc3QgYWN0aXZlRWwgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0aWYgKGFjdGl2ZUVsICYmIHRoaXMuaXNGcm9udG1hdHRlckZpZWxkKGFjdGl2ZUVsKSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7IC8vIExldCBwcm9wZXJ0eSBwYXN0ZSBoYW5kbGVyIGhhbmRsZSBpdFxyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGZpbGVzID0gZXZ0LmNsaXBib2FyZERhdGE/LmZpbGVzO1xyXG5cdFx0aWYgKCFmaWxlcyB8fCBmaWxlcy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlOyAvLyBObyBmaWxlcywgbGV0IE9ic2lkaWFuIGhhbmRsZSBpdFxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIGFueSBvZiB0aGUgZmlsZXMgYXJlIGltYWdlc1xyXG5cdFx0Y29uc3QgaW1hZ2VGaWxlczogRmlsZVtdID0gW107XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGNvbnN0IGZpbGUgPSBmaWxlcy5pdGVtKGkpO1xyXG5cdFx0XHRpZiAoZmlsZSAmJiBmaWxlLnR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJykpIHtcclxuXHRcdFx0XHRpbWFnZUZpbGVzLnB1c2goZmlsZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoaW1hZ2VGaWxlcy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlOyAvLyBObyBpbWFnZXMsIGxldCBPYnNpZGlhbiBoYW5kbGUgaXRcclxuXHRcdH1cclxuXHJcblx0XHQvLyBXZSdyZSBoYW5kbGluZyB0aGlzIC0gcHJldmVudCBkZWZhdWx0XHJcblx0XHRldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdmlldy5maWxlO1xyXG5cdFx0aWYgKCFhY3RpdmVGaWxlKSB7XHJcblx0XHRcdG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBmaWxlJyk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdFx0Ly8gUHJvY2VzcyBlYWNoIGltYWdlXHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGltYWdlRmlsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0Y29uc3QgaW1hZ2VGaWxlID0gaW1hZ2VGaWxlc1tpXTtcclxuXHRcdFx0aWYgKCFpbWFnZUZpbGUpIGNvbnRpbnVlO1xyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5pbWFnZVByb2Nlc3Nvci5wcm9jZXNzSW1hZ2VGaWxlKFxyXG5cdFx0XHRcdGltYWdlRmlsZSxcclxuXHRcdFx0XHRhY3RpdmVGaWxlLFxyXG5cdFx0XHRcdHRydWUgLy8gU2hvdyByZW5hbWUgbW9kYWxcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdGlmIChyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQubGlua1RleHQpIHtcclxuXHRcdFx0XHQvLyBJbnNlcnQgdGhlIGxpbmsgYXQgY3Vyc29yXHJcblx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24ocmVzdWx0LmxpbmtUZXh0KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlIHBhc3RlIGludG8gZnJvbnRtYXR0ZXIgcHJvcGVydHlcclxuXHQgKiBUaGlzIGlzIHJlZ2lzdGVyZWQgdmlhIGRvY3VtZW50IHBhc3RlIGV2ZW50IHdpdGggcHJvcGVydHkgZGV0ZWN0aW9uXHJcblx0ICovXHJcblx0YXN5bmMgaGFuZGxlUHJvcGVydHlQYXN0ZShldnQ6IENsaXBib2FyZEV2ZW50KTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuZW5hYmxlUHJvcGVydHlQYXN0ZSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgYWN0aXZlRWwgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0aWYgKCFhY3RpdmVFbCkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgd2UncmUgaW4gYSBmcm9udG1hdHRlciBwcm9wZXJ0eSBmaWVsZFxyXG5cdFx0aWYgKCF0aGlzLmlzRnJvbnRtYXR0ZXJGaWVsZChhY3RpdmVFbCkpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIERlYnVnOiBMb2cgdGhhdCB3ZSBkZXRlY3RlZCBhIHByb3BlcnR5IGZpZWxkXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcclxuXHRcdFx0Y29uc29sZS5kZWJ1ZygnW0ltYWdlIE1hbmFnZXJdIFByb3BlcnR5IHBhc3RlIGRldGVjdGVkJywge1xyXG5cdFx0XHRcdGFjdGl2ZUVsZW1lbnQ6IGFjdGl2ZUVsLnRhZ05hbWUsXHJcblx0XHRcdFx0Y2xhc3NlczogYWN0aXZlRWwuY2xhc3NOYW1lLFxyXG5cdFx0XHRcdHByb3BlcnR5TmFtZTogdGhpcy5nZXRQcm9wZXJ0eU5hbWUoYWN0aXZlRWwpXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGZpbGVzID0gZXZ0LmNsaXBib2FyZERhdGE/LmZpbGVzO1xyXG5cdFx0aWYgKCFmaWxlcyB8fCBmaWxlcy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGZvciBpbWFnZSBmaWxlc1xyXG5cdFx0bGV0IGltYWdlRmlsZTogRmlsZSB8IG51bGwgPSBudWxsO1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRjb25zdCBmID0gZmlsZXMuaXRlbShpKTtcclxuXHRcdFx0aWYgKGYgJiYgZi50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7XHJcblx0XHRcdFx0aW1hZ2VGaWxlID0gZjtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICghaW1hZ2VGaWxlKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBEb3VibGUtY2hlY2sgd2UncmUgc3RpbGwgaW4gYSBwcm9wZXJ0eSBmaWVsZCAoZWxlbWVudCBtaWdodCBoYXZlIGNoYW5nZWQpXHJcblx0XHQvLyBhbmQgdGhhdCB3ZSBoYXZlIGFuIGFjdGl2ZSBmaWxlIGJlZm9yZSBwcmV2ZW50aW5nIGRlZmF1bHRcclxuXHRcdGNvbnN0IGN1cnJlbnRFbCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRpZiAoIWN1cnJlbnRFbCB8fCAhdGhpcy5pc0Zyb250bWF0dGVyRmllbGQoY3VycmVudEVsKSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRpZiAoIWFjdGl2ZUZpbGUpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFdlJ3JlIGhhbmRsaW5nIHRoaXMgLSBzdG9wIGFsbCBwcm9wYWdhdGlvblxyXG5cdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRldnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblxyXG5cdFx0Ly8gR2V0IHRoZSBwcm9wZXJ0eSBuYW1lIGJlZm9yZSBwcm9jZXNzaW5nXHJcblx0XHRjb25zdCBwcm9wZXJ0eU5hbWUgPSB0aGlzLmdldFByb3BlcnR5TmFtZShjdXJyZW50RWwpO1xyXG5cdFx0aWYgKCFwcm9wZXJ0eU5hbWUpIHtcclxuXHRcdFx0bmV3IE5vdGljZSgnQ291bGQgbm90IGRldGVybWluZSBwcm9wZXJ0eSBuYW1lJyk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFByb2Nlc3MgdGhlIGltYWdlIC0gc2hvdyByZW5hbWUgbW9kYWwgZm9yIHByb3BlcnR5IHBhc3RlXHJcblx0XHQvLyBTa2lwIGRlc2NyaXB0aXZlIGltYWdlcyBmb3IgcHJvcGVydHkgaW5zZXJ0aW9ucyAoZGlzcGxheSB0ZXh0IGRvZXNuJ3QgYXBwbHkgdG8gcHJvcGVydGllcylcclxuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuaW1hZ2VQcm9jZXNzb3IucHJvY2Vzc0ltYWdlRmlsZShcclxuXHRcdFx0aW1hZ2VGaWxlLFxyXG5cdFx0XHRhY3RpdmVGaWxlLFxyXG5cdFx0XHR0cnVlLCAvLyBTaG93IHJlbmFtZSBtb2RhbCBmb3IgcHJvcGVydHkgcGFzdGVcclxuXHRcdFx0dHJ1ZSAvLyBpc1Byb3BlcnR5SW5zZXJ0aW9uIC0gc2tpcCBkZXNjcmlwdGl2ZSBpbWFnZXNcclxuXHRcdCk7XHJcblxyXG5cdFx0aWYgKHJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC5maWxlKSB7XHJcblx0XHRcdC8vIEdldCB0aGUgZm9ybWF0dGVkIGxpbmsgdmFsdWVcclxuXHRcdFx0Y29uc3QgbGlua1ZhbHVlID0gdGhpcy5wcm9wZXJ0eUhhbmRsZXIuZm9ybWF0UHJvcGVydHlMaW5rKHJlc3VsdC5maWxlLCBhY3RpdmVGaWxlKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFVwZGF0ZSB0aGUgZnJvbnRtYXR0ZXIgcHJvcGVydHkgZGlyZWN0bHlcclxuXHRcdFx0YXdhaXQgdGhpcy5wcm9wZXJ0eUhhbmRsZXIuc2V0UHJvcGVydHlWYWx1ZShcclxuXHRcdFx0XHRhY3RpdmVGaWxlLFxyXG5cdFx0XHRcdHByb3BlcnR5TmFtZSxcclxuXHRcdFx0XHRyZXN1bHQuZmlsZVxyXG5cdFx0XHQpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gV2FpdCBmb3IgT2JzaWRpYW4gdG8gcHJvY2VzcyB0aGUgZmlsZSBjaGFuZ2UgYW5kIHVwZGF0ZSBtZXRhZGF0YSBjYWNoZVxyXG5cdFx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMzAwKSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBUcnkgbXVsdGlwbGUgYXBwcm9hY2hlcyB0byB1cGRhdGUgdGhlIFVJXHJcblx0XHRcdC8vIEFwcHJvYWNoIDE6IEZpbmQgYW5kIHVwZGF0ZSB0aGUgaW5wdXQgZmllbGQgZGlyZWN0bHlcclxuXHRcdFx0Y29uc3QgcHJvcGVydHlFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XHRcdFx0YC5tZXRhZGF0YS1wcm9wZXJ0eVtkYXRhLXByb3BlcnR5LWtleT1cIiR7cHJvcGVydHlOYW1lfVwiXWBcclxuXHRcdFx0KTtcclxuXHRcdFx0XHJcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xyXG5cdFx0XHRcdGNvbnNvbGUuZGVidWcoJ1tJbWFnZSBNYW5hZ2VyXSBVcGRhdGluZyBwcm9wZXJ0eSBVSScsIHtcclxuXHRcdFx0XHRcdHByb3BlcnR5TmFtZSxcclxuXHRcdFx0XHRcdGxpbmtWYWx1ZSxcclxuXHRcdFx0XHRcdHByb3BlcnR5RWxGb3VuZDogISFwcm9wZXJ0eUVsXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IGlucHV0RWwgPSBwcm9wZXJ0eUVsPy5xdWVyeVNlbGVjdG9yKFxyXG5cdFx0XHRcdCcubWV0YWRhdGEtaW5wdXQtbG9uZ3RleHQsIC5tZXRhZGF0YS1pbnB1dC10ZXh0LCBpbnB1dC5tZXRhZGF0YS1pbnB1dCwgdGV4dGFyZWEubWV0YWRhdGEtaW5wdXQnXHJcblx0XHRcdCkgYXMgSFRNTEVsZW1lbnQgfCBIVE1MSW5wdXRFbGVtZW50IHwgSFRNTFRleHRBcmVhRWxlbWVudCB8IG51bGw7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoaW5wdXRFbCkge1xyXG5cdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFZhbHVlID0gaW5wdXRFbCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgfHwgaW5wdXRFbCBpbnN0YW5jZW9mIEhUTUxUZXh0QXJlYUVsZW1lbnRcclxuXHRcdFx0XHRcdFx0PyBpbnB1dEVsLnZhbHVlXHJcblx0XHRcdFx0XHRcdDogaW5wdXRFbC50ZXh0Q29udGVudCB8fCBpbnB1dEVsLmlubmVyVGV4dDtcclxuXHRcdFx0XHRcdGNvbnNvbGUuZGVidWcoJ1tJbWFnZSBNYW5hZ2VyXSBGb3VuZCBpbnB1dCBmaWVsZCwgdXBkYXRpbmcgdmFsdWUnLCB7XHJcblx0XHRcdFx0XHRcdGVsZW1lbnRUeXBlOiBpbnB1dEVsLnRhZ05hbWUsXHJcblx0XHRcdFx0XHRcdGN1cnJlbnRWYWx1ZSxcclxuXHRcdFx0XHRcdFx0bmV3VmFsdWU6IGxpbmtWYWx1ZVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIEhhbmRsZSBib3RoIGlucHV0L3RleHRhcmVhIGVsZW1lbnRzIGFuZCBjb250ZW50ZWRpdGFibGUgZGl2c1xyXG5cdFx0XHRcdGlmIChpbnB1dEVsIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCB8fCBpbnB1dEVsIGluc3RhbmNlb2YgSFRNTFRleHRBcmVhRWxlbWVudCkge1xyXG5cdFx0XHRcdFx0Ly8gU3RhbmRhcmQgaW5wdXQvdGV4dGFyZWFcclxuXHRcdFx0XHRcdGlucHV0RWwudmFsdWUgPSBsaW5rVmFsdWU7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIENvbnRlbnRlZGl0YWJsZSBkaXYgKHVzZWQgZm9yIGxvbmd0ZXh0IHByb3BlcnRpZXMpXHJcblx0XHRcdFx0XHRpbnB1dEVsLnRleHRDb250ZW50ID0gbGlua1ZhbHVlO1xyXG5cdFx0XHRcdFx0aW5wdXRFbC5pbm5lclRleHQgPSBsaW5rVmFsdWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFRyaWdnZXIgbXVsdGlwbGUgZXZlbnRzIHRvIGVuc3VyZSBPYnNpZGlhbiByZWNvZ25pemVzIHRoZSBjaGFuZ2VcclxuXHRcdFx0XHRjb25zdCBpbnB1dEV2ZW50ID0gbmV3IEV2ZW50KCdpbnB1dCcsIHsgYnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogdHJ1ZSB9KTtcclxuXHRcdFx0XHRjb25zdCBjaGFuZ2VFdmVudCA9IG5ldyBFdmVudCgnY2hhbmdlJywgeyBidWJibGVzOiB0cnVlLCBjYW5jZWxhYmxlOiB0cnVlIH0pO1xyXG5cdFx0XHRcdGNvbnN0IGJsdXJFdmVudCA9IG5ldyBFdmVudCgnYmx1cicsIHsgYnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogdHJ1ZSB9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpbnB1dEVsLmRpc3BhdGNoRXZlbnQoaW5wdXRFdmVudCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gU21hbGwgZGVsYXkgYmVmb3JlIGNoYW5nZSBldmVudFxyXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0aW5wdXRFbC5kaXNwYXRjaEV2ZW50KGNoYW5nZUV2ZW50KTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gRm9jdXMgYW5kIGJsdXIgdG8gdHJpZ2dlciBPYnNpZGlhbidzIHVwZGF0ZSBtZWNoYW5pc21cclxuXHRcdFx0XHRcdGlmIChpbnB1dEVsIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuXHRcdFx0XHRcdFx0aW5wdXRFbC5mb2N1cygpO1xyXG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRpbnB1dEVsLmJsdXIoKTtcclxuXHRcdFx0XHRcdFx0XHRpbnB1dEVsLmRpc3BhdGNoRXZlbnQoYmx1ckV2ZW50KTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBGb2N1cyB0aGUgZWRpdG9yIHRvIGNvbXBsZXRlIHRoZSBhY3Rpb25cclxuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHZpZXc/LmVkaXRvcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2aWV3LmVkaXRvci5mb2N1cygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0sIDUwKTtcclxuXHRcdFx0XHRcdFx0fSwgNTApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sIDUwKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBJZiB3ZSBjYW4ndCBmaW5kIHRoZSBpbnB1dCwganVzdCBmb2N1cyB0aGUgZWRpdG9yXHJcblx0XHRcdFx0Y29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcblx0XHRcdFx0aWYgKHZpZXc/LmVkaXRvcikge1xyXG5cdFx0XHRcdFx0dmlldy5lZGl0b3IuZm9jdXMoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSBzdXBwb3J0ZWQgZnJvbnRtYXR0ZXIgZmllbGRcclxuXHQgKiBXb3JrcyBmb3IgYm90aCBNRCBhbmQgTURYIGZpbGVzXHJcblx0ICovXHJcblx0cHJpdmF0ZSBpc0Zyb250bWF0dGVyRmllbGQoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBib29sZWFuIHtcclxuXHRcdC8vIENoZWNrIGlmIGVsZW1lbnQgaXMgaW5zaWRlIGEgbWV0YWRhdGEgcHJvcGVydHkgY29udGFpbmVyXHJcblx0XHRjb25zdCBwcm9wZXJ0eUVsID0gZWxlbWVudC5jbG9zZXN0KCcubWV0YWRhdGEtcHJvcGVydHknKTtcclxuXHRcdGlmICghcHJvcGVydHlFbCkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgZm9yIHZhcmlvdXMgcHJvcGVydHkgaW5wdXQgdHlwZXMgdGhhdCBjYW4gYWNjZXB0IHRleHQvaW1hZ2VzXHJcblx0XHQvLyBPYnNpZGlhbiB1c2VzIGRpZmZlcmVudCBjbGFzc2VzIGZvciBkaWZmZXJlbnQgcHJvcGVydHkgdHlwZXNcclxuXHRcdC8vIExvbmd0ZXh0IHByb3BlcnRpZXMgdXNlIGNvbnRlbnRlZGl0YWJsZSBkaXZzLCBub3QgaW5wdXQvdGV4dGFyZWFcclxuXHRcdHJldHVybiAoXHJcblx0XHRcdGVsZW1lbnQubWF0Y2hlcygnLm1ldGFkYXRhLWlucHV0LWxvbmd0ZXh0JykgfHxcclxuXHRcdFx0ZWxlbWVudC5tYXRjaGVzKCcubWV0YWRhdGEtaW5wdXQtdGV4dCcpIHx8XHJcblx0XHRcdGVsZW1lbnQubWF0Y2hlcygnaW5wdXQubWV0YWRhdGEtaW5wdXQnKSB8fFxyXG5cdFx0XHRlbGVtZW50Lm1hdGNoZXMoJ3RleHRhcmVhLm1ldGFkYXRhLWlucHV0JykgfHxcclxuXHRcdFx0Ly8gQWxzbyBjaGVjayBpZiB0aGUgZWxlbWVudCBpdHNlbGYgaXMgYW4gaW5wdXQvdGV4dGFyZWEvZGl2IGluc2lkZSBhIHByb3BlcnR5XHJcblx0XHRcdCgoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgfHwgXHJcblx0XHRcdCAgZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxUZXh0QXJlYUVsZW1lbnQgfHxcclxuXHRcdFx0ICAoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxEaXZFbGVtZW50ICYmIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZXRhZGF0YS1pbnB1dC1sb25ndGV4dCcpKSkgJiZcclxuXHRcdFx0XHRwcm9wZXJ0eUVsICE9PSBudWxsKVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCB0aGUgcHJvcGVydHkgbmFtZSBmcm9tIGEgZnJvbnRtYXR0ZXIgZmllbGQgZWxlbWVudFxyXG5cdCAqL1xyXG5cdHByaXZhdGUgZ2V0UHJvcGVydHlOYW1lKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogc3RyaW5nIHwgbnVsbCB7XHJcblx0XHRjb25zdCBwcm9wZXJ0eUVsID0gZWxlbWVudC5jbG9zZXN0KCcubWV0YWRhdGEtcHJvcGVydHknKTtcclxuXHRcdHJldHVybiBwcm9wZXJ0eUVsPy5nZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvcGVydHkta2V5JykgPz8gbnVsbDtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBEcm9wSGFuZGxlciB7XHJcblx0cHJpdmF0ZSBhcHA6IEFwcDtcclxuXHRwcml2YXRlIHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncztcclxuXHRwcml2YXRlIGltYWdlUHJvY2Vzc29yOiBJbWFnZVByb2Nlc3NvcjtcclxuXHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRhcHA6IEFwcCxcclxuXHRcdHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncyxcclxuXHRcdGltYWdlUHJvY2Vzc29yOiBJbWFnZVByb2Nlc3NvclxyXG5cdCkge1xyXG5cdFx0dGhpcy5hcHAgPSBhcHA7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcblx0XHR0aGlzLmltYWdlUHJvY2Vzc29yID0gaW1hZ2VQcm9jZXNzb3I7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgc2V0dGluZ3MgcmVmZXJlbmNlXHJcblx0ICovXHJcblx0dXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzKTogdm9pZCB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGUgZWRpdG9yIGRyb3AgZXZlbnRcclxuXHQgKi9cclxuXHRhc3luYyBoYW5kbGVFZGl0b3JEcm9wKFxyXG5cdFx0ZXZ0OiBEcmFnRXZlbnQsXHJcblx0XHRlZGl0b3I6IEVkaXRvcixcclxuXHRcdHZpZXc6IE1hcmtkb3duVmlld1xyXG5cdCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZVJlbmFtZU9uRHJvcCkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgZmlsZXMgPSBldnQuZGF0YVRyYW5zZmVyPy5maWxlcztcclxuXHRcdGlmICghZmlsZXMgfHwgZmlsZXMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBmb3IgaW1hZ2UgZmlsZXNcclxuXHRcdGNvbnN0IGltYWdlRmlsZXM6IEZpbGVbXSA9IFtdO1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRjb25zdCBmID0gZmlsZXMuaXRlbShpKTtcclxuXHRcdFx0aWYgKGYgJiYgZi50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7XHJcblx0XHRcdFx0aW1hZ2VGaWxlcy5wdXNoKGYpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGltYWdlRmlsZXMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBXZSdyZSBoYW5kbGluZyB0aGlzXHJcblx0XHRldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdmlldy5maWxlO1xyXG5cdFx0aWYgKCFhY3RpdmVGaWxlKSB7XHJcblx0XHRcdG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBmaWxlJyk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFByb2Nlc3MgZWFjaCBpbWFnZVxyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBpbWFnZUZpbGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGNvbnN0IGltYWdlRmlsZSA9IGltYWdlRmlsZXNbaV07XHJcblx0XHRcdGlmICghaW1hZ2VGaWxlKSBjb250aW51ZTtcclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuaW1hZ2VQcm9jZXNzb3IucHJvY2Vzc0ltYWdlRmlsZShcclxuXHRcdFx0XHRpbWFnZUZpbGUsXHJcblx0XHRcdFx0YWN0aXZlRmlsZSxcclxuXHRcdFx0XHR0cnVlXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHRpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LmxpbmtUZXh0KSB7XHJcblx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24ocmVzdWx0LmxpbmtUZXh0KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIFJlbW90ZSBJbWFnZSBTZXJ2aWNlXHJcbiAqIEFQSSBpbnRlZ3JhdGlvbnMgZm9yIFVuc3BsYXNoLCBQZXhlbHMsIGFuZCBQaXhhYmF5XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgcmVxdWVzdFVybCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgSW1hZ2VNYW5hZ2VyU2V0dGluZ3MsIEltYWdlUHJvdmlkZXIsIEltYWdlT3JpZW50YXRpb24sIFJlbW90ZUltYWdlLCBJbWFnZVNpemUgfSBmcm9tICcuLi90eXBlcyc7XHJcblxyXG4vLyBVbnNwbGFzaCBwcm94eSBVUkwgKGJ1aWx0LWluIGZhbGxiYWNrKSAtIG1hdGNoZXMgSW1hZ2UgSW5zZXJ0ZXJcclxuY29uc3QgVU5TUExBU0hfUFJPWFkgPSAnaHR0cHM6Ly9pbnNlcnQtdW5zcGxhc2gtaW1hZ2UuY2xvdWR5OTEwMS5jb20vJztcclxuXHJcbmV4cG9ydCBjbGFzcyBSZW1vdGVJbWFnZVNlcnZpY2Uge1xyXG5cdHByaXZhdGUgc2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3MpIHtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSBzZXR0aW5ncyByZWZlcmVuY2VcclxuXHQgKi9cclxuXHR1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3MpOiB2b2lkIHtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNlYXJjaCBmb3IgaW1hZ2VzIGZyb20gdGhlIHNwZWNpZmllZCBwcm92aWRlclxyXG5cdCAqL1xyXG5cdGFzeW5jIHNlYXJjaChxdWVyeTogc3RyaW5nLCBwcm92aWRlcj86IEltYWdlUHJvdmlkZXIsIHBhZ2U6IG51bWJlciA9IDEpOiBQcm9taXNlPFJlbW90ZUltYWdlW10+IHtcclxuXHRcdGNvbnN0IHRhcmdldFByb3ZpZGVyID0gcHJvdmlkZXIgPz8gdGhpcy5zZXR0aW5ncy5kZWZhdWx0UHJvdmlkZXI7XHJcblxyXG5cdFx0c3dpdGNoICh0YXJnZXRQcm92aWRlcikge1xyXG5cdFx0XHRjYXNlIEltYWdlUHJvdmlkZXIuVW5zcGxhc2g6XHJcblx0XHRcdFx0cmV0dXJuIGF3YWl0IHRoaXMuc2VhcmNoVW5zcGxhc2gocXVlcnksIHBhZ2UpO1xyXG5cdFx0XHRjYXNlIEltYWdlUHJvdmlkZXIuUGV4ZWxzOlxyXG5cdFx0XHRcdHJldHVybiBhd2FpdCB0aGlzLnNlYXJjaFBleGVscyhxdWVyeSwgcGFnZSk7XHJcblx0XHRcdGNhc2UgSW1hZ2VQcm92aWRlci5QaXhhYmF5OlxyXG5cdFx0XHRcdHJldHVybiBhd2FpdCB0aGlzLnNlYXJjaFBpeGFiYXkocXVlcnksIHBhZ2UpO1xyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgcHJvdmlkZXI6ICR7dGFyZ2V0UHJvdmlkZXJ9YCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZWFyY2ggVW5zcGxhc2hcclxuXHQgKi9cclxuXHRwcml2YXRlIGFzeW5jIHNlYXJjaFVuc3BsYXNoKHF1ZXJ5OiBzdHJpbmcsIHBhZ2U6IG51bWJlcik6IFByb21pc2U8UmVtb3RlSW1hZ2VbXT4ge1xyXG5cdFx0bGV0IHByb3h5VXJsID0gdGhpcy5zZXR0aW5ncy51bnNwbGFzaFByb3h5U2VydmVyIHx8IFVOU1BMQVNIX1BST1hZO1xyXG5cdFx0Ly8gRW5zdXJlIHByb3h5IFVSTCBlbmRzIHdpdGggc2xhc2ggZm9yIFVSTCBjb25zdHJ1Y3RvclxyXG5cdFx0aWYgKCFwcm94eVVybC5lbmRzV2l0aCgnLycpKSB7XHJcblx0XHRcdHByb3h5VXJsICs9ICcvJztcclxuXHRcdH1cclxuXHRcdGNvbnN0IG9yaWVudGF0aW9uID0gdGhpcy5tYXBPcmllbnRhdGlvbih0aGlzLnNldHRpbmdzLmRlZmF1bHRPcmllbnRhdGlvbik7XHJcblx0XHRcclxuXHRcdC8vIFVzZSBVUkwgY29uc3RydWN0b3IgbGlrZSBJbWFnZSBJbnNlcnRlciBkb2VzXHJcblx0XHRjb25zdCB1cmwgPSBuZXcgVVJMKCcvc2VhcmNoL3Bob3RvcycsIHByb3h5VXJsKTtcclxuXHRcdHVybC5zZWFyY2hQYXJhbXMuc2V0KCdxdWVyeScsIHF1ZXJ5KTtcclxuXHRcdHVybC5zZWFyY2hQYXJhbXMuc2V0KCdwYWdlJywgU3RyaW5nKHBhZ2UpKTtcclxuXHRcdHVybC5zZWFyY2hQYXJhbXMuc2V0KCdwZXJfcGFnZScsICcyMCcpO1xyXG5cclxuXHRcdGlmIChvcmllbnRhdGlvbikge1xyXG5cdFx0XHR1cmwuc2VhcmNoUGFyYW1zLnNldCgnb3JpZW50YXRpb24nLCBvcmllbnRhdGlvbik7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHsgdXJsOiB1cmwudG9TdHJpbmcoKSB9KTtcclxuXHRcdGlmIChyZXNwb25zZS5zdGF0dXMgPj0gNDAwKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ1Vuc3BsYXNoIEFQSSBlcnJvcjonLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLnRleHQpO1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYFVuc3BsYXNoIHNlYXJjaCBmYWlsZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzfSAtICR7cmVzcG9uc2UudGV4dH1gKTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBkYXRhID0gcmVzcG9uc2UuanNvbiBhcyBVbnNwbGFzaFNlYXJjaFJlc3BvbnNlO1xyXG5cdFx0aWYgKCFkYXRhIHx8ICFkYXRhLnJlc3VsdHMpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcignSW52YWxpZCBVbnNwbGFzaCByZXNwb25zZTonLCBkYXRhKTtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHJlc3BvbnNlIGZyb20gVW5zcGxhc2ggQVBJJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgcmVzdWx0czogVW5zcGxhc2hQaG90b1tdID0gZGF0YS5yZXN1bHRzID8/IFtdO1xyXG5cclxuXHRcdHJldHVybiByZXN1bHRzLm1hcCgocGhvdG8pID0+IHRoaXMubWFwVW5zcGxhc2hQaG90byhwaG90bykpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2VhcmNoIFBleGVsc1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgYXN5bmMgc2VhcmNoUGV4ZWxzKHF1ZXJ5OiBzdHJpbmcsIHBhZ2U6IG51bWJlcik6IFByb21pc2U8UmVtb3RlSW1hZ2VbXT4ge1xyXG5cdFx0Y29uc3QgYXBpS2V5ID0gdGhpcy5zZXR0aW5ncy5wZXhlbHNBcGlLZXk7XHJcblx0XHRpZiAoIWFwaUtleSkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1BleGVscyBBUEkga2V5IGlzIHJlcXVpcmVkLiBQbGVhc2UgY29uZmlndXJlIGl0IGluIHNldHRpbmdzLicpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IG9yaWVudGF0aW9uID0gdGhpcy5tYXBPcmllbnRhdGlvbih0aGlzLnNldHRpbmdzLmRlZmF1bHRPcmllbnRhdGlvbik7XHJcblx0XHRcclxuXHRcdGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xyXG5cdFx0XHRxdWVyeSxcclxuXHRcdFx0cGFnZTogU3RyaW5nKHBhZ2UpLFxyXG5cdFx0XHRwZXJfcGFnZTogJzIwJyxcclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmIChvcmllbnRhdGlvbikge1xyXG5cdFx0XHRwYXJhbXMuc2V0KCdvcmllbnRhdGlvbicsIG9yaWVudGF0aW9uKTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkucGV4ZWxzLmNvbS92MS9zZWFyY2g/JHtwYXJhbXMudG9TdHJpbmcoKX1gO1xyXG5cclxuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XHJcblx0XHRcdHVybCxcclxuXHRcdFx0aGVhZGVyczoge1xyXG5cdFx0XHRcdEF1dGhvcml6YXRpb246IGFwaUtleSxcclxuXHRcdFx0fSxcclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmIChyZXNwb25zZS5zdGF0dXMgPj0gNDAwKSB7XHJcblx0XHRcdHRocm93IG5ldyBFcnJvcihgUGV4ZWxzIHNlYXJjaCBmYWlsZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGRhdGEgPSByZXNwb25zZS5qc29uIGFzIFBleGVsc1NlYXJjaFJlc3BvbnNlO1xyXG5cdFx0Y29uc3QgcGhvdG9zOiBQZXhlbHNQaG90b1tdID0gZGF0YS5waG90b3MgPz8gW107XHJcblxyXG5cdFx0cmV0dXJuIHBob3Rvcy5tYXAoKHBob3RvKSA9PiB0aGlzLm1hcFBleGVsc1Bob3RvKHBob3RvKSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZWFyY2ggUGl4YWJheVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgYXN5bmMgc2VhcmNoUGl4YWJheShxdWVyeTogc3RyaW5nLCBwYWdlOiBudW1iZXIpOiBQcm9taXNlPFJlbW90ZUltYWdlW10+IHtcclxuXHRcdGNvbnN0IGFwaUtleSA9IHRoaXMuc2V0dGluZ3MucGl4YWJheUFwaUtleTtcclxuXHRcdGlmICghYXBpS2V5KSB7XHJcblx0XHRcdHRocm93IG5ldyBFcnJvcignUGl4YWJheSBBUEkga2V5IGlzIHJlcXVpcmVkLiBQbGVhc2UgY29uZmlndXJlIGl0IGluIHNldHRpbmdzLicpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IG9yaWVudGF0aW9uID0gdGhpcy5tYXBQaXhhYmF5T3JpZW50YXRpb24odGhpcy5zZXR0aW5ncy5kZWZhdWx0T3JpZW50YXRpb24pO1xyXG5cclxuXHRcdGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xyXG5cdFx0XHRrZXk6IGFwaUtleSxcclxuXHRcdFx0cTogcXVlcnksXHJcblx0XHRcdHBhZ2U6IFN0cmluZyhwYWdlKSxcclxuXHRcdFx0cGVyX3BhZ2U6ICcyMCcsXHJcblx0XHRcdGltYWdlX3R5cGU6ICdwaG90bycsXHJcblx0XHR9KTtcclxuXHJcblx0XHRpZiAob3JpZW50YXRpb24pIHtcclxuXHRcdFx0cGFyYW1zLnNldCgnb3JpZW50YXRpb24nLCBvcmllbnRhdGlvbik7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgdXJsID0gYGh0dHBzOi8vcGl4YWJheS5jb20vYXBpLz8ke3BhcmFtcy50b1N0cmluZygpfWA7XHJcblxyXG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHsgdXJsIH0pO1xyXG5cdFx0aWYgKHJlc3BvbnNlLnN0YXR1cyA+PSA0MDApIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBQaXhhYmF5IHNlYXJjaCBmYWlsZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGRhdGEgPSByZXNwb25zZS5qc29uIGFzIFBpeGFiYXlTZWFyY2hSZXNwb25zZTtcclxuXHRcdGNvbnN0IGhpdHM6IFBpeGFiYXlIaXRbXSA9IGRhdGEuaGl0cyA/PyBbXTtcclxuXHJcblx0XHRyZXR1cm4gaGl0cy5tYXAoKGhpdCkgPT4gdGhpcy5tYXBQaXhhYmF5SGl0KGhpdCkpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IHRoZSBkb3dubG9hZCBVUkwgZm9yIGFuIGltYWdlIGJhc2VkIG9uIHNpemUgcHJlZmVyZW5jZVxyXG5cdCAqL1xyXG5cdGdldERvd25sb2FkVXJsKGltYWdlOiBSZW1vdGVJbWFnZSwgc2l6ZT86IEltYWdlU2l6ZSk6IHN0cmluZyB7XHJcblx0XHRjb25zdCB0YXJnZXRTaXplID0gc2l6ZSA/PyB0aGlzLnNldHRpbmdzLmRlZmF1bHRJbWFnZVNpemU7XHJcblx0XHRzd2l0Y2ggKHRhcmdldFNpemUpIHtcclxuXHRcdFx0Y2FzZSBJbWFnZVNpemUuT3JpZ2luYWw6XHJcblx0XHRcdFx0cmV0dXJuIGltYWdlLmZ1bGxVcmw7XHJcblx0XHRcdGNhc2UgSW1hZ2VTaXplLkxhcmdlOlxyXG5cdFx0XHRcdHJldHVybiBpbWFnZS5yZWd1bGFyVXJsO1xyXG5cdFx0XHRjYXNlIEltYWdlU2l6ZS5NZWRpdW06XHJcblx0XHRcdFx0cmV0dXJuIGltYWdlLnJlZ3VsYXJVcmw7XHJcblx0XHRcdGNhc2UgSW1hZ2VTaXplLlNtYWxsOlxyXG5cdFx0XHRcdHJldHVybiBpbWFnZS50aHVtYm5haWxVcmw7XHJcblx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0cmV0dXJuIGltYWdlLnJlZ3VsYXJVcmw7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBEb3dubG9hZCBhbiBpbWFnZSBhbmQgcmV0dXJuIHRoZSBiaW5hcnkgZGF0YVxyXG5cdCAqL1xyXG5cdGFzeW5jIGRvd25sb2FkSW1hZ2UoaW1hZ2U6IFJlbW90ZUltYWdlKTogUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xyXG5cdFx0Y29uc3QgdXJsID0gdGhpcy5nZXREb3dubG9hZFVybChpbWFnZSk7XHJcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoeyB1cmwgfSk7XHJcblx0XHRcclxuXHRcdGlmIChyZXNwb25zZS5zdGF0dXMgPj0gNDAwKSB7XHJcblx0XHRcdHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGRvd25sb2FkIGltYWdlOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcmVzcG9uc2UuYXJyYXlCdWZmZXI7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZW5lcmF0ZSByZWZlcnJhbCB0ZXh0IGZvciBhbiBpbWFnZSAoYXR0cmlidXRpb24pXHJcblx0ICogQmFzZWQgb24gSW1hZ2UgSW5zZXJ0ZXIncyByZWZlcnJhbCBmb3JtYXRcclxuXHQgKi9cclxuXHRnZW5lcmF0ZVJlZmVycmFsVGV4dChpbWFnZTogUmVtb3RlSW1hZ2UpOiBzdHJpbmcge1xyXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLmluc2VydFJlZmVycmFsKSB7XHJcblx0XHRcdHJldHVybiAnJztcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBiYWNrbGluayA9IHRoaXMuc2V0dGluZ3MuaW5zZXJ0QmFja0xpbmsgJiYgaW1hZ2UucGFnZVVybFxyXG5cdFx0XHQ/IGBbQmFja2xpbmtdKCR7aW1hZ2UucGFnZVVybH0pIHwgYFxyXG5cdFx0XHQ6ICcnO1xyXG5cclxuXHRcdGxldCByZWZlcnJhbCA9ICcnO1xyXG5cdFx0c3dpdGNoIChpbWFnZS5wcm92aWRlcikge1xyXG5cdFx0XHRjYXNlIEltYWdlUHJvdmlkZXIuVW5zcGxhc2g6XHJcblx0XHRcdFx0aWYgKGltYWdlLmF1dGhvciAmJiBpbWFnZS5hdXRob3JVcmwpIHtcclxuXHRcdFx0XHRcdGNvbnN0IHV0bSA9ICd1dG1fc291cmNlPU9ic2lkaWFuJTIwSW1hZ2UlMjBNYW5hZ2VyJnV0bV9tZWRpdW09cmVmZXJyYWwnO1xyXG5cdFx0XHRcdFx0cmVmZXJyYWwgPSBgXFxuKiR7YmFja2xpbmt9UGhvdG8gYnkgWyR7aW1hZ2UuYXV0aG9yfV0oJHtpbWFnZS5hdXRob3JVcmx9KSBvbiBbVW5zcGxhc2hdKGh0dHBzOi8vdW5zcGxhc2guY29tLz8ke3V0bX0pKlxcbmA7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIEltYWdlUHJvdmlkZXIuUGV4ZWxzOlxyXG5cdFx0XHRcdGlmIChpbWFnZS5hdXRob3IgJiYgaW1hZ2UuYXV0aG9yVXJsKSB7XHJcblx0XHRcdFx0XHRyZWZlcnJhbCA9IGBcXG4qJHtiYWNrbGlua31QaG90byBieSBbJHtpbWFnZS5hdXRob3J9XSgke2ltYWdlLmF1dGhvclVybH0pIG9uIFtQZXhlbHNdKGh0dHBzOi8vd3d3LnBleGVscy5jb20vKSpcXG5gO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBJbWFnZVByb3ZpZGVyLlBpeGFiYXk6XHJcblx0XHRcdFx0aWYgKGltYWdlLmF1dGhvciAmJiBpbWFnZS5hdXRob3JVcmwpIHtcclxuXHRcdFx0XHRcdHJlZmVycmFsID0gYFxcbioke2JhY2tsaW5rfUltYWdlIGJ5IFske2ltYWdlLmF1dGhvcn1dKCR7aW1hZ2UuYXV0aG9yVXJsfSkgb24gW1BpeGFiYXldKGh0dHBzOi8vcGl4YWJheS5jb20vKSpcXG5gO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcmVmZXJyYWw7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBNYXAgb3JpZW50YXRpb24gc2V0dGluZyB0byBBUEkgcGFyYW1ldGVyXHJcblx0ICovXHJcblx0cHJpdmF0ZSBtYXBPcmllbnRhdGlvbihvcmllbnRhdGlvbjogSW1hZ2VPcmllbnRhdGlvbik6IHN0cmluZyB8IG51bGwge1xyXG5cdFx0c3dpdGNoIChvcmllbnRhdGlvbikge1xyXG5cdFx0XHRjYXNlIEltYWdlT3JpZW50YXRpb24uTGFuZHNjYXBlOlxyXG5cdFx0XHRcdHJldHVybiAnbGFuZHNjYXBlJztcclxuXHRcdFx0Y2FzZSBJbWFnZU9yaWVudGF0aW9uLlBvcnRyYWl0OlxyXG5cdFx0XHRcdHJldHVybiAncG9ydHJhaXQnO1xyXG5cdFx0XHRjYXNlIEltYWdlT3JpZW50YXRpb24uU3F1YXJlOlxyXG5cdFx0XHRcdHJldHVybiAnc3F1YXJpc2gnO1xyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogTWFwIG9yaWVudGF0aW9uIGZvciBQaXhhYmF5IChkaWZmZXJlbnQgdmFsdWVzKVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgbWFwUGl4YWJheU9yaWVudGF0aW9uKG9yaWVudGF0aW9uOiBJbWFnZU9yaWVudGF0aW9uKTogc3RyaW5nIHwgbnVsbCB7XHJcblx0XHRzd2l0Y2ggKG9yaWVudGF0aW9uKSB7XHJcblx0XHRcdGNhc2UgSW1hZ2VPcmllbnRhdGlvbi5MYW5kc2NhcGU6XHJcblx0XHRcdFx0cmV0dXJuICdob3Jpem9udGFsJztcclxuXHRcdFx0Y2FzZSBJbWFnZU9yaWVudGF0aW9uLlBvcnRyYWl0OlxyXG5cdFx0XHRcdHJldHVybiAndmVydGljYWwnO1xyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogTWFwIFVuc3BsYXNoIHBob3RvIHRvIFJlbW90ZUltYWdlXHJcblx0ICovXHJcblx0cHJpdmF0ZSBtYXBVbnNwbGFzaFBob3RvKHBob3RvOiBVbnNwbGFzaFBob3RvKTogUmVtb3RlSW1hZ2Uge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0aWQ6IHBob3RvLmlkLFxyXG5cdFx0XHRwcm92aWRlcjogSW1hZ2VQcm92aWRlci5VbnNwbGFzaCxcclxuXHRcdFx0dGh1bWJuYWlsVXJsOiBwaG90by51cmxzLnRodW1iLFxyXG5cdFx0XHRyZWd1bGFyVXJsOiBwaG90by51cmxzLnJlZ3VsYXIsXHJcblx0XHRcdGZ1bGxVcmw6IHBob3RvLnVybHMuZnVsbCxcclxuXHRcdFx0ZG93bmxvYWRVcmw6IHBob3RvLmxpbmtzLmRvd25sb2FkX2xvY2F0aW9uIHx8IHBob3RvLmxpbmtzLmRvd25sb2FkLFxyXG5cdFx0XHR3aWR0aDogcGhvdG8ud2lkdGgsXHJcblx0XHRcdGhlaWdodDogcGhvdG8uaGVpZ2h0LFxyXG5cdFx0XHRkZXNjcmlwdGlvbjogcGhvdG8uZGVzY3JpcHRpb24gPz8gcGhvdG8uYWx0X2Rlc2NyaXB0aW9uID8/ICcnLFxyXG5cdFx0XHRhdXRob3I6IHBob3RvLnVzZXIubmFtZSxcclxuXHRcdFx0YXV0aG9yVXJsOiBwaG90by51c2VyLmxpbmtzLmh0bWwsXHJcblx0XHRcdHBhZ2VVcmw6IHBob3RvLmxpbmtzLmh0bWwsXHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogTWFwIFBleGVscyBwaG90byB0byBSZW1vdGVJbWFnZVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgbWFwUGV4ZWxzUGhvdG8ocGhvdG86IFBleGVsc1Bob3RvKTogUmVtb3RlSW1hZ2Uge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0aWQ6IFN0cmluZyhwaG90by5pZCksXHJcblx0XHRcdHByb3ZpZGVyOiBJbWFnZVByb3ZpZGVyLlBleGVscyxcclxuXHRcdFx0dGh1bWJuYWlsVXJsOiBwaG90by5zcmMudGlueSxcclxuXHRcdFx0cmVndWxhclVybDogcGhvdG8uc3JjLmxhcmdlLFxyXG5cdFx0XHRmdWxsVXJsOiBwaG90by5zcmMub3JpZ2luYWwsXHJcblx0XHRcdGRvd25sb2FkVXJsOiBwaG90by5zcmMub3JpZ2luYWwsXHJcblx0XHRcdHdpZHRoOiBwaG90by53aWR0aCxcclxuXHRcdFx0aGVpZ2h0OiBwaG90by5oZWlnaHQsXHJcblx0XHRcdGRlc2NyaXB0aW9uOiBwaG90by5hbHQgPz8gJycsXHJcblx0XHRcdGF1dGhvcjogcGhvdG8ucGhvdG9ncmFwaGVyLFxyXG5cdFx0XHRhdXRob3JVcmw6IHBob3RvLnBob3RvZ3JhcGhlcl91cmwsXHJcblx0XHRcdHBhZ2VVcmw6IHBob3RvLnVybCxcclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBNYXAgUGl4YWJheSBoaXQgdG8gUmVtb3RlSW1hZ2VcclxuXHQgKi9cclxuXHRwcml2YXRlIG1hcFBpeGFiYXlIaXQoaGl0OiBQaXhhYmF5SGl0KTogUmVtb3RlSW1hZ2Uge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0aWQ6IFN0cmluZyhoaXQuaWQpLFxyXG5cdFx0XHRwcm92aWRlcjogSW1hZ2VQcm92aWRlci5QaXhhYmF5LFxyXG5cdFx0XHR0aHVtYm5haWxVcmw6IGhpdC5wcmV2aWV3VVJMLFxyXG5cdFx0XHRyZWd1bGFyVXJsOiBoaXQud2ViZm9ybWF0VVJMLFxyXG5cdFx0XHRmdWxsVXJsOiBoaXQubGFyZ2VJbWFnZVVSTCxcclxuXHRcdFx0ZG93bmxvYWRVcmw6IGhpdC5sYXJnZUltYWdlVVJMLFxyXG5cdFx0XHR3aWR0aDogaGl0LmltYWdlV2lkdGgsXHJcblx0XHRcdGhlaWdodDogaGl0LmltYWdlSGVpZ2h0LFxyXG5cdFx0XHRkZXNjcmlwdGlvbjogaGl0LnRhZ3MsXHJcblx0XHRcdGF1dGhvcjogaGl0LnVzZXIsXHJcblx0XHRcdGF1dGhvclVybDogYGh0dHBzOi8vcGl4YWJheS5jb20vdXNlcnMvJHtoaXQudXNlcn0tJHtoaXQudXNlcl9pZH0vYCxcclxuXHRcdFx0cGFnZVVybDogaGl0LnBhZ2VVUkwsXHJcblx0XHR9O1xyXG5cdH1cclxufVxyXG5cclxuLy8gVHlwZSBkZWZpbml0aW9ucyBmb3IgQVBJIHJlc3BvbnNlc1xyXG5cclxuaW50ZXJmYWNlIFVuc3BsYXNoU2VhcmNoUmVzcG9uc2Uge1xyXG5cdHJlc3VsdHM6IFVuc3BsYXNoUGhvdG9bXTtcclxufVxyXG5cclxuaW50ZXJmYWNlIFBleGVsc1NlYXJjaFJlc3BvbnNlIHtcclxuXHRwaG90b3M6IFBleGVsc1Bob3RvW107XHJcbn1cclxuXHJcbmludGVyZmFjZSBQaXhhYmF5U2VhcmNoUmVzcG9uc2Uge1xyXG5cdGhpdHM6IFBpeGFiYXlIaXRbXTtcclxufVxyXG5cclxuaW50ZXJmYWNlIFVuc3BsYXNoUGhvdG8ge1xyXG5cdGlkOiBzdHJpbmc7XHJcblx0d2lkdGg6IG51bWJlcjtcclxuXHRoZWlnaHQ6IG51bWJlcjtcclxuXHRkZXNjcmlwdGlvbjogc3RyaW5nIHwgbnVsbDtcclxuXHRhbHRfZGVzY3JpcHRpb246IHN0cmluZyB8IG51bGw7XHJcblx0dXJsczoge1xyXG5cdFx0cmF3OiBzdHJpbmc7XHJcblx0XHRmdWxsOiBzdHJpbmc7XHJcblx0XHRyZWd1bGFyOiBzdHJpbmc7XHJcblx0XHRzbWFsbDogc3RyaW5nO1xyXG5cdFx0dGh1bWI6IHN0cmluZztcclxuXHR9O1xyXG5cdGxpbmtzOiB7XHJcblx0XHRodG1sOiBzdHJpbmc7XHJcblx0XHRkb3dubG9hZDogc3RyaW5nO1xyXG5cdFx0ZG93bmxvYWRfbG9jYXRpb24/OiBzdHJpbmc7XHJcblx0fTtcclxuXHR1c2VyOiB7XHJcblx0XHRuYW1lOiBzdHJpbmc7XHJcblx0XHRsaW5rczoge1xyXG5cdFx0XHRodG1sOiBzdHJpbmc7XHJcblx0XHR9O1xyXG5cdH07XHJcbn1cclxuXHJcbmludGVyZmFjZSBQZXhlbHNQaG90byB7XHJcblx0aWQ6IG51bWJlcjtcclxuXHR3aWR0aDogbnVtYmVyO1xyXG5cdGhlaWdodDogbnVtYmVyO1xyXG5cdHVybDogc3RyaW5nO1xyXG5cdHBob3RvZ3JhcGhlcjogc3RyaW5nO1xyXG5cdHBob3RvZ3JhcGhlcl91cmw6IHN0cmluZztcclxuXHRhbHQ6IHN0cmluZyB8IG51bGw7XHJcblx0c3JjOiB7XHJcblx0XHRvcmlnaW5hbDogc3RyaW5nO1xyXG5cdFx0bGFyZ2U6IHN0cmluZztcclxuXHRcdG1lZGl1bTogc3RyaW5nO1xyXG5cdFx0c21hbGw6IHN0cmluZztcclxuXHRcdHRpbnk6IHN0cmluZztcclxuXHR9O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUGl4YWJheUhpdCB7XHJcblx0aWQ6IG51bWJlcjtcclxuXHRwYWdlVVJMOiBzdHJpbmc7XHJcblx0cHJldmlld1VSTDogc3RyaW5nO1xyXG5cdHdlYmZvcm1hdFVSTDogc3RyaW5nO1xyXG5cdGxhcmdlSW1hZ2VVUkw6IHN0cmluZztcclxuXHRpbWFnZVdpZHRoOiBudW1iZXI7XHJcblx0aW1hZ2VIZWlnaHQ6IG51bWJlcjtcclxuXHR0YWdzOiBzdHJpbmc7XHJcblx0dXNlcjogc3RyaW5nO1xyXG5cdHVzZXJfaWQ6IG51bWJlcjtcclxufVxyXG4iLCAiLyoqXHJcbiAqIExvY2FsIENvbnZlcnNpb24gU2VydmljZVxyXG4gKiBDb252ZXJ0cyByZW1vdGUvZXh0ZXJuYWwgaW1hZ2VzIHRvIGxvY2FsIGZpbGVzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBURmlsZSwgcmVxdWVzdFVybCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgSW1hZ2VNYW5hZ2VyU2V0dGluZ3MgfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7IFN0b3JhZ2VNYW5hZ2VyIH0gZnJvbSAnLi9TdG9yYWdlTWFuYWdlcic7XHJcbmltcG9ydCB7IEltYWdlUHJvY2Vzc29yIH0gZnJvbSAnLi9JbWFnZVByb2Nlc3Nvcic7XHJcbmltcG9ydCB7IGlzTWFya2Rvd25GaWxlIH0gZnJvbSAnLi4vdXRpbHMvbWR4LWZyb250bWF0dGVyJztcclxuXHJcbi8vIFJlZ2V4IHBhdHRlcm5zIGZvciBmaW5kaW5nIGV4dGVybmFsIGltYWdlc1xyXG4vLyBVcGRhdGVkIHRvIGhhbmRsZSBVUkxzIHdpdGggcXVlcnkgcGFyYW1ldGVycyBhbmQgZnJhZ21lbnRzXHJcbmNvbnN0IE1BUktET1dOX0lNQUdFX1JFR0VYID0gLyFcXFsoW15cXF1dKilcXF1cXCgoaHR0cHM/OlxcL1xcL1teXFxzKV0rKVxcKS9nO1xyXG5jb25zdCBIVE1MX0lNQUdFX1JFR0VYID0gLzxpbWdbXj5dK3NyYz1bXCInXShodHRwcz86XFwvXFwvW15cIiddKylbXCInXVtePl0qPi9nO1xyXG5cclxuZXhwb3J0IGNsYXNzIExvY2FsQ29udmVyc2lvblNlcnZpY2Uge1xyXG5cdHByaXZhdGUgYXBwOiBBcHA7XHJcblx0cHJpdmF0ZSBzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3M7XHJcblx0cHJpdmF0ZSBzdG9yYWdlTWFuYWdlcjogU3RvcmFnZU1hbmFnZXI7XHJcblx0cHJpdmF0ZSBpbWFnZVByb2Nlc3NvcjogSW1hZ2VQcm9jZXNzb3I7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3MsIHN0b3JhZ2VNYW5hZ2VyOiBTdG9yYWdlTWFuYWdlciwgaW1hZ2VQcm9jZXNzb3I6IEltYWdlUHJvY2Vzc29yKSB7XHJcblx0XHR0aGlzLmFwcCA9IGFwcDtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuXHRcdHRoaXMuc3RvcmFnZU1hbmFnZXIgPSBzdG9yYWdlTWFuYWdlcjtcclxuXHRcdHRoaXMuaW1hZ2VQcm9jZXNzb3IgPSBpbWFnZVByb2Nlc3NvcjtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSBzZXR0aW5ncyByZWZlcmVuY2VcclxuXHQgKi9cclxuXHR1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3MpOiB2b2lkIHtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuXHRcdHRoaXMuaW1hZ2VQcm9jZXNzb3I/LnVwZGF0ZVNldHRpbmdzKHNldHRpbmdzKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFByb2Nlc3MgYSBmaWxlIHRvIGNvbnZlcnQgYWxsIHJlbW90ZSBpbWFnZXMgdG8gbG9jYWxcclxuXHQgKi9cclxuXHRhc3luYyBwcm9jZXNzRmlsZShmaWxlOiBURmlsZSk6IFByb21pc2U8bnVtYmVyPiB7XHJcblx0XHRpZiAoIWlzTWFya2Rvd25GaWxlKGZpbGUpKSB7XHJcblx0XHRcdHJldHVybiAwO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG5cdFx0Y29uc3QgeyBuZXdDb250ZW50LCBjb3VudCB9ID0gYXdhaXQgdGhpcy5wcm9jZXNzQ29udGVudChjb250ZW50LCBmaWxlKTtcclxuXHJcblx0XHRpZiAoY291bnQgPiAwKSB7XHJcblx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBuZXdDb250ZW50KTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gY291bnQ7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBQcm9jZXNzIGNvbnRlbnQgYW5kIHJlcGxhY2UgcmVtb3RlIGltYWdlcyB3aXRoIGxvY2FsXHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyBwcm9jZXNzQ29udGVudChcclxuXHRcdGNvbnRlbnQ6IHN0cmluZyxcclxuXHRcdHNvdXJjZUZpbGU6IFRGaWxlXHJcblx0KTogUHJvbWlzZTx7IG5ld0NvbnRlbnQ6IHN0cmluZzsgY291bnQ6IG51bWJlciB9PiB7XHJcblx0XHRsZXQgbmV3Q29udGVudCA9IGNvbnRlbnQ7XHJcblx0XHRsZXQgY291bnQgPSAwO1xyXG5cclxuXHRcdC8vIEZpbmQgYWxsIGV4dGVybmFsIGltYWdlIFVSTHNcclxuXHRcdGNvbnN0IGV4dGVybmFsSW1hZ2VzID0gdGhpcy5maW5kRXh0ZXJuYWxJbWFnZXMoY29udGVudCwgc291cmNlRmlsZSk7XHJcblxyXG5cdFx0Zm9yIChjb25zdCBpbWFnZSBvZiBleHRlcm5hbEltYWdlcykge1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdC8vIERvd25sb2FkIGFuZCBzYXZlIHRlbXBvcmFyaWx5XHJcblx0XHRcdFx0Y29uc3QgdGVtcFBhdGggPSBhd2FpdCB0aGlzLmRvd25sb2FkQW5kU2F2ZShpbWFnZS51cmwsIHNvdXJjZUZpbGUpO1xyXG5cdFx0XHRcdGlmICghdGVtcFBhdGgpIHtcclxuXHRcdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y29uc3QgdGVtcEZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGVtcFBhdGgpO1xyXG5cdFx0XHRcdGlmICghKHRlbXBGaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XHJcblx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFNob3cgcmVuYW1lIG1vZGFsIGlmIGVuYWJsZWQgKGFsd2F5cyBzaG93IGZvciBjb252ZXJzaW9uLCB1bmxlc3MgYXV0by1yZW5hbWUgaXMgb24pXHJcblx0XHRcdFx0bGV0IGZpbmFsRmlsZTogVEZpbGUgPSB0ZW1wRmlsZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBHZW5lcmF0ZSBzdWdnZXN0ZWQgbmFtZSBmcm9tIGFsdCB0ZXh0IG9yIFVSTFxyXG5cdFx0XHRcdGNvbnN0IHN1Z2dlc3RlZE5hbWUgPSBpbWFnZS5hbHQgXHJcblx0XHRcdFx0XHQ/IHRoaXMuc3RvcmFnZU1hbmFnZXIuc2FuaXRpemVGaWxlTmFtZShpbWFnZS5hbHQpXHJcblx0XHRcdFx0XHQ6IHRlbXBGaWxlLmJhc2VuYW1lO1xyXG5cclxuXHRcdFx0XHQvLyBVc2UgSW1hZ2VQcm9jZXNzb3IncyByZW5hbWUgZmxvdyAod2hpY2ggaGFuZGxlcyBkZXNjcmlwdGl2ZSBpbWFnZXMgYW5kIHJlbmFtZSBtb2RhbClcclxuXHRcdFx0XHQvLyBGb3IgY29udmVyc2lvbiwgYWx3YXlzIHNob3cgcmVuYW1lIG1vZGFsIHVubGVzcyBhdXRvLXJlbmFtZSBpcyBlbmFibGVkXHJcblx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5pbWFnZVByb2Nlc3Nvci5yZW5hbWVJbWFnZUZpbGUoXHJcblx0XHRcdFx0XHR0ZW1wRmlsZSxcclxuXHRcdFx0XHRcdHN1Z2dlc3RlZE5hbWUsXHJcblx0XHRcdFx0XHRzb3VyY2VGaWxlXHJcblx0XHRcdFx0KTtcclxuXHJcblx0XHRcdFx0aWYgKHJlc3VsdCAmJiByZXN1bHQuZmlsZSkge1xyXG5cdFx0XHRcdFx0ZmluYWxGaWxlID0gcmVzdWx0LmZpbGU7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIFVzZXIgY2FuY2VsbGVkIHJlbmFtZSwgc2tpcCB0aGlzIGltYWdlXHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci50cmFzaEZpbGUodGVtcEZpbGUpO1xyXG5cdFx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBVcGRhdGUgdGhlIGNvbnRlbnQgd2l0aCB0aGUgZmluYWwgZmlsZVxyXG5cdFx0XHRcdC8vIFRoZSByZXBsYWNlbWVudCBmdW5jdGlvbiBuZWVkcyB0aGUgZnVsbCBwYXRoIHRvIGdlbmVyYXRlIHByb3BlciByZWxhdGl2ZSBsaW5rc1xyXG5cdFx0XHRcdG5ld0NvbnRlbnQgPSBuZXdDb250ZW50LnJlcGxhY2UoaW1hZ2UuZnVsbE1hdGNoLCBpbWFnZS5yZXBsYWNlbWVudChmaW5hbEZpbGUucGF0aCkpO1xyXG5cdFx0XHRcdGNvdW50Kys7XHJcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNvbnZlcnQgaW1hZ2U6ICR7aW1hZ2UudXJsfWAsIGVycm9yKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB7IG5ld0NvbnRlbnQsIGNvdW50IH07XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiBhIHBvc2l0aW9uIGluIGNvbnRlbnQgaXMgaW5zaWRlIGEgY29kZSBibG9ja1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgaXNJbnNpZGVDb2RlQmxvY2soY29udGVudDogc3RyaW5nLCBwb3NpdGlvbjogbnVtYmVyKTogYm9vbGVhbiB7XHJcblx0XHQvLyBDaGVjayBmb3IgZmVuY2VkIGNvZGUgYmxvY2tzIChgYGAuLi5gYGApXHJcblx0XHRjb25zdCBmZW5jZWRDb2RlQmxvY2tSZWdleCA9IC9gYGBbXFxzXFxTXSo/YGBgL2c7XHJcblx0XHRsZXQgbWF0Y2g7XHJcblx0XHR3aGlsZSAoKG1hdGNoID0gZmVuY2VkQ29kZUJsb2NrUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcclxuXHRcdFx0Y29uc3Qgc3RhcnQgPSBtYXRjaC5pbmRleDtcclxuXHRcdFx0Y29uc3QgZW5kID0gc3RhcnQgKyBtYXRjaFswXS5sZW5ndGg7XHJcblx0XHRcdGlmIChwb3NpdGlvbiA+PSBzdGFydCAmJiBwb3NpdGlvbiA8IGVuZCkge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgZm9yIGlubGluZSBjb2RlIChgLi4uYClcclxuXHRcdC8vIFdlIG5lZWQgdG8gYmUgY2FyZWZ1bCAtIG9ubHkgbWF0Y2ggYmFja3RpY2tzIHRoYXQgYXJlbid0IHBhcnQgb2YgZmVuY2VkIGJsb2Nrc1xyXG5cdFx0Ly8gRmlyc3QsIG1hcmsgYWxsIGZlbmNlZCBjb2RlIGJsb2NrIHBvc2l0aW9uc1xyXG5cdFx0Y29uc3QgZmVuY2VkUG9zaXRpb25zOiBib29sZWFuW10gPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBjb250ZW50Lmxlbmd0aCB9LCAoKSA9PiBmYWxzZSk7XHJcblx0XHRjb25zdCBmZW5jZWRSZWdleCA9IC9gYGBbXFxzXFxTXSo/YGBgL2c7XHJcblx0XHR3aGlsZSAoKG1hdGNoID0gZmVuY2VkUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcclxuXHRcdFx0Zm9yIChsZXQgaSA9IG1hdGNoLmluZGV4OyBpIDwgbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGZlbmNlZFBvc2l0aW9uc1tpXSA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBOb3cgY2hlY2sgZm9yIGlubGluZSBjb2RlLCBidXQgc2tpcCBwb3NpdGlvbnMgaW5zaWRlIGZlbmNlZCBibG9ja3NcclxuXHRcdGNvbnN0IGlubGluZUNvZGVSZWdleCA9IC9gW15gXFxuXStgL2c7XHJcblx0XHR3aGlsZSAoKG1hdGNoID0gaW5saW5lQ29kZVJlZ2V4LmV4ZWMoY29udGVudCkpICE9PSBudWxsKSB7XHJcblx0XHRcdC8vIFNraXAgaWYgdGhpcyBtYXRjaCBpcyBpbnNpZGUgYSBmZW5jZWQgY29kZSBibG9ja1xyXG5cdFx0XHRpZiAoZmVuY2VkUG9zaXRpb25zW21hdGNoLmluZGV4XSkge1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnN0IHN0YXJ0ID0gbWF0Y2guaW5kZXg7XHJcblx0XHRcdGNvbnN0IGVuZCA9IHN0YXJ0ICsgbWF0Y2hbMF0ubGVuZ3RoO1xyXG5cdFx0XHRpZiAocG9zaXRpb24gPj0gc3RhcnQgJiYgcG9zaXRpb24gPCBlbmQpIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEZpbmQgYWxsIGV4dGVybmFsIGltYWdlcyBpbiBjb250ZW50XHJcblx0ICovXHJcblx0cHJpdmF0ZSBmaW5kRXh0ZXJuYWxJbWFnZXMoY29udGVudDogc3RyaW5nLCBzb3VyY2VGaWxlOiBURmlsZSk6IEV4dGVybmFsSW1hZ2VNYXRjaFtdIHtcclxuXHRcdGNvbnN0IG1hdGNoZXM6IEV4dGVybmFsSW1hZ2VNYXRjaFtdID0gW107XHJcblxyXG5cdFx0Ly8gTWFya2Rvd24gaW1hZ2VzOiAhW2FsdF0odXJsKVxyXG5cdFx0bGV0IG1hdGNoO1xyXG5cdFx0Y29uc3QgbWRSZWdleCA9IG5ldyBSZWdFeHAoTUFSS0RPV05fSU1BR0VfUkVHRVguc291cmNlLCAnZycpO1xyXG5cdFx0d2hpbGUgKChtYXRjaCA9IG1kUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcclxuXHRcdFx0Y29uc3QgbWF0Y2hJbmRleCA9IG1hdGNoLmluZGV4O1xyXG5cdFx0XHQvLyBTa2lwIGlmIGluc2lkZSBhIGNvZGUgYmxvY2tcclxuXHRcdFx0aWYgKHRoaXMuaXNJbnNpZGVDb2RlQmxvY2soY29udGVudCwgbWF0Y2hJbmRleCkpIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgZnVsbE1hdGNoID0gbWF0Y2hbMF07XHJcblx0XHRcdGNvbnN0IGFsdCA9IG1hdGNoWzFdID8/ICcnO1xyXG5cdFx0XHRjb25zdCB1cmwgPSBtYXRjaFsyXTtcclxuXHRcdFx0Ly8gT25seSBwcm9jZXNzIGlmIGl0J3MgYW4gZXh0ZXJuYWwgVVJMIEFORCBsb29rcyBsaWtlIGFuIGltYWdlIFVSTFxyXG5cdFx0XHRpZiAodXJsICYmIHRoaXMuaXNFeHRlcm5hbFVybCh1cmwpICYmIHRoaXMuaXNJbWFnZVVybCh1cmwpKSB7XHJcblx0XHRcdFx0Y29uc3Qgc291cmNlRmlsZVJlZiA9IHNvdXJjZUZpbGU7IC8vIENhcHR1cmUgZm9yIGNsb3N1cmVcclxuXHRcdFx0XHRtYXRjaGVzLnB1c2goe1xyXG5cdFx0XHRcdFx0ZnVsbE1hdGNoLFxyXG5cdFx0XHRcdFx0dXJsLFxyXG5cdFx0XHRcdFx0YWx0LFxyXG5cdFx0XHRcdFx0cmVwbGFjZW1lbnQ6IChsb2NhbFBhdGg6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRcdFx0XHQvLyBHZXQgdGhlIHNhdmVkIGZpbGUgdG8gZ2VuZXJhdGUgcHJvcGVyIG1hcmtkb3duIGxpbmtcclxuXHRcdFx0XHRcdFx0Y29uc3Qgc2F2ZWRGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGxvY2FsUGF0aCk7XHJcblx0XHRcdFx0XHRcdGlmIChzYXZlZEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGxpbmsgPSB0aGlzLnN0b3JhZ2VNYW5hZ2VyLmdlbmVyYXRlTWFya2Rvd25MaW5rKHNhdmVkRmlsZSwgc291cmNlRmlsZVJlZi5wYXRoKTtcclxuXHRcdFx0XHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGFsdCB0ZXh0IGFuZCBsaW5rIGlzIHdpa2lsaW5rLCBhZGQgZGlzcGxheSB0ZXh0XHJcblx0XHRcdFx0XHRcdFx0aWYgKGFsdCAmJiBsaW5rLnN0YXJ0c1dpdGgoJyFbJykgJiYgbGluay5pbmNsdWRlcygnXV0nKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGxpbmsucmVwbGFjZSgnXV0nLCBgfCR7YWx0fV1dYCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdC8vIEZvciBtYXJrZG93biBsaW5rcywgcmVwbGFjZSB0aGUgVVJMIGJ1dCBrZWVwIGFsdFxyXG5cdFx0XHRcdFx0XHRcdGlmIChsaW5rLnN0YXJ0c1dpdGgoJyFbJykgJiYgbGluay5pbmNsdWRlcygnXSgnKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gRXh0cmFjdCBqdXN0IHRoZSBwYXRoIHBhcnQgZnJvbSB0aGUgZ2VuZXJhdGVkIGxpbmsgYW5kIHVzZSBpdCB3aXRoIGFsdFxyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgcGF0aE1hdGNoID0gbGluay5tYXRjaCgvXFxdXFwoKFteKV0rKVxcKS8pO1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHBhdGhNYXRjaCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gYCFbJHthbHR9XSgke3BhdGhNYXRjaFsxXX0pYDtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBgIVske2FsdH1dKCR7ZW5jb2RlVVJJKGxvY2FsUGF0aCl9KWA7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBsaW5rO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdC8vIEZhbGxiYWNrIC0gdXNlIHJlbGF0aXZlIHBhdGhcclxuXHRcdFx0XHRcdFx0Y29uc3QgbG9jYWxGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGxvY2FsUGF0aCk7XHJcblx0XHRcdFx0XHRcdGlmIChsb2NhbEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHJlbGF0aXZlUGF0aCA9IHRoaXMuc3RvcmFnZU1hbmFnZXIuZ2V0UmVsYXRpdmVQYXRoKHNvdXJjZUZpbGVSZWYsIGxvY2FsRmlsZSk7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGAhWyR7YWx0fV0oJHtlbmNvZGVVUkkocmVsYXRpdmVQYXRoKX0pYDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRyZXR1cm4gYCFbJHthbHR9XSgke2VuY29kZVVSSShsb2NhbFBhdGgpfSlgO1xyXG5cdFx0XHRcdFx0fSxcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEhUTUwgaW1hZ2VzOiA8aW1nIHNyYz1cInVybFwiPlxyXG5cdFx0Y29uc3QgaHRtbFJlZ2V4ID0gbmV3IFJlZ0V4cChIVE1MX0lNQUdFX1JFR0VYLnNvdXJjZSwgJ2cnKTtcclxuXHRcdHdoaWxlICgobWF0Y2ggPSBodG1sUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcclxuXHRcdFx0Y29uc3QgbWF0Y2hJbmRleCA9IG1hdGNoLmluZGV4O1xyXG5cdFx0XHQvLyBTa2lwIGlmIGluc2lkZSBhIGNvZGUgYmxvY2tcclxuXHRcdFx0aWYgKHRoaXMuaXNJbnNpZGVDb2RlQmxvY2soY29udGVudCwgbWF0Y2hJbmRleCkpIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRjb25zdCBmdWxsTWF0Y2ggPSBtYXRjaFswXTtcclxuXHRcdFx0Y29uc3QgdXJsID0gbWF0Y2hbMV07XHJcblx0XHRcdC8vIE9ubHkgcHJvY2VzcyBpZiBpdCdzIGFuIGV4dGVybmFsIFVSTCBBTkQgbG9va3MgbGlrZSBhbiBpbWFnZSBVUkxcclxuXHRcdFx0aWYgKHVybCAmJiB0aGlzLmlzRXh0ZXJuYWxVcmwodXJsKSAmJiB0aGlzLmlzSW1hZ2VVcmwodXJsKSkge1xyXG5cdFx0XHRcdG1hdGNoZXMucHVzaCh7XHJcblx0XHRcdFx0XHRmdWxsTWF0Y2gsXHJcblx0XHRcdFx0XHR1cmwsXHJcblx0XHRcdFx0XHRyZXBsYWNlbWVudDogKGxvY2FsUGF0aDogc3RyaW5nKSA9PiBgIVtdKCR7ZW5jb2RlVVJJKGxvY2FsUGF0aCl9KWAsXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gbWF0Y2hlcztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIGEgVVJMIGlzIGV4dGVybmFsXHJcblx0ICovXHJcblx0cHJpdmF0ZSBpc0V4dGVybmFsVXJsKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCBwYXJzZWQgPSBuZXcgVVJMKHVybCk7XHJcblx0XHRcdHJldHVybiBbJ2h0dHA6JywgJ2h0dHBzOiddLmluY2x1ZGVzKHBhcnNlZC5wcm90b2NvbCk7XHJcblx0XHR9IGNhdGNoIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgYSBVUkwgaXMgbGlrZWx5IGFuIGltYWdlIFVSTFxyXG5cdCAqIFJldHVybnMgZmFsc2UgZm9yIGtub3duIG5vbi1pbWFnZSBlbWJlZHMgKFlvdVR1YmUsIGV0Yy4pXHJcblx0ICovXHJcblx0cHJpdmF0ZSBpc0ltYWdlVXJsKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCBwYXJzZWQgPSBuZXcgVVJMKHVybCk7XHJcblx0XHRcdGNvbnN0IGhvc3RuYW1lID0gcGFyc2VkLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdGNvbnN0IHBhdGhuYW1lID0gcGFyc2VkLnBhdGhuYW1lLnRvTG93ZXJDYXNlKCk7XHJcblxyXG5cdFx0XHQvLyBFeGNsdWRlIGtub3duIG5vbi1pbWFnZSBlbWJlZCBkb21haW5zXHJcblx0XHRcdGNvbnN0IG5vbkltYWdlRG9tYWlucyA9IFtcclxuXHRcdFx0XHQneW91dHViZS5jb20nLFxyXG5cdFx0XHRcdCd3d3cueW91dHViZS5jb20nLFxyXG5cdFx0XHRcdCd5b3V0dS5iZScsXHJcblx0XHRcdFx0J20ueW91dHViZS5jb20nLFxyXG5cdFx0XHRcdCd5b3V0dWJlLW5vY29va2llLmNvbScsXHJcblx0XHRcdFx0J3d3dy55b3V0dWJlLW5vY29va2llLmNvbScsXHJcblx0XHRcdFx0J3ZpbWVvLmNvbScsXHJcblx0XHRcdFx0J3d3dy52aW1lby5jb20nLFxyXG5cdFx0XHRcdCdzcG90aWZ5LmNvbScsXHJcblx0XHRcdFx0J29wZW4uc3BvdGlmeS5jb20nLFxyXG5cdFx0XHRcdCdzb3VuZGNsb3VkLmNvbScsXHJcblx0XHRcdFx0J3d3dy5zb3VuZGNsb3VkLmNvbScsXHJcblx0XHRcdF07XHJcblxyXG5cdFx0XHRpZiAobm9uSW1hZ2VEb21haW5zLnNvbWUoZG9tYWluID0+IGhvc3RuYW1lID09PSBkb21haW4gfHwgaG9zdG5hbWUuZW5kc1dpdGgoJy4nICsgZG9tYWluKSkpIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIENoZWNrIGZvciBpbWFnZSBmaWxlIGV4dGVuc2lvbnMgaW4gdGhlIHBhdGhcclxuXHRcdFx0Y29uc3QgaW1hZ2VFeHRlbnNpb25zID0gWycuanBnJywgJy5qcGVnJywgJy5wbmcnLCAnLmdpZicsICcud2VicCcsICcuc3ZnJywgJy5ibXAnLCAnLmljbycsICcudGlmZicsICcudGlmJ107XHJcblx0XHRcdGNvbnN0IGhhc0ltYWdlRXh0ZW5zaW9uID0gaW1hZ2VFeHRlbnNpb25zLnNvbWUoZXh0ID0+IHBhdGhuYW1lLmVuZHNXaXRoKGV4dCkpO1xyXG5cclxuXHRcdFx0Ly8gQ2hlY2sgZm9yIGltYWdlIGV4dGVuc2lvbnMgaW4gcXVlcnkgcGFyYW1ldGVycyAoc29tZSBDRE5zIHVzZSB0aGlzKVxyXG5cdFx0XHRjb25zdCBzZWFyY2hQYXJhbXMgPSBwYXJzZWQuc2VhcmNoUGFyYW1zLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0Y29uc3QgaGFzSW1hZ2VJblF1ZXJ5ID0gaW1hZ2VFeHRlbnNpb25zLnNvbWUoZXh0ID0+IHNlYXJjaFBhcmFtcy5pbmNsdWRlcyhleHQpKTtcclxuXHJcblx0XHRcdC8vIE9ubHkgcHJvY2VzcyBpZiBpdCBoYXMgYW4gaW1hZ2UgZXh0ZW5zaW9uXHJcblx0XHRcdC8vIFRoaXMgaXMgY29uc2VydmF0aXZlIC0gd2Ugb25seSBwcm9jZXNzIFVSTHMgdGhhdCBjbGVhcmx5IGxvb2sgbGlrZSBpbWFnZXNcclxuXHRcdFx0cmV0dXJuIGhhc0ltYWdlRXh0ZW5zaW9uIHx8IGhhc0ltYWdlSW5RdWVyeTtcclxuXHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBEb3dubG9hZCBhbiBpbWFnZSBhbmQgc2F2ZSBpdCBsb2NhbGx5XHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyBkb3dubG9hZEFuZFNhdmUodXJsOiBzdHJpbmcsIHNvdXJjZUZpbGU6IFRGaWxlKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoeyB1cmwgfSk7XHJcblx0XHRcdGlmIChyZXNwb25zZS5zdGF0dXMgPj0gNDAwKSB7XHJcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID8/ICdpbWFnZS9wbmcnO1xyXG5cdFx0XHRjb25zdCBleHRlbnNpb24gPSB0aGlzLnN0b3JhZ2VNYW5hZ2VyLmdldEV4dGVuc2lvbkZyb21NaW1lVHlwZShjb250ZW50VHlwZSk7XHJcblx0XHRcdGNvbnN0IGFycmF5QnVmZmVyID0gcmVzcG9uc2UuYXJyYXlCdWZmZXI7XHJcblxyXG5cdFx0XHQvLyBHZW5lcmF0ZSBhIG5hbWUgYmFzZWQgb24gVVJMIG9yIGhhc2hcclxuXHRcdFx0Y29uc3QgdXJsUGF0aCA9IG5ldyBVUkwodXJsKS5wYXRobmFtZTtcclxuXHRcdFx0Y29uc3QgdXJsRmlsZU5hbWUgPSB1cmxQYXRoLnNwbGl0KCcvJykucG9wKCk/LnNwbGl0KCcuJylbMF0gPz8gJ2ltYWdlJztcclxuXHRcdFx0Y29uc3QgYmFzZU5hbWUgPSB0aGlzLnN0b3JhZ2VNYW5hZ2VyLnNhbml0aXplRmlsZU5hbWUodXJsRmlsZU5hbWUpO1xyXG5cclxuXHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLnN0b3JhZ2VNYW5hZ2VyLmdldEF2YWlsYWJsZVBhdGgoYmFzZU5hbWUsIGV4dGVuc2lvbiwgc291cmNlRmlsZSk7XHJcblx0XHRcdGF3YWl0IHRoaXMuc3RvcmFnZU1hbmFnZXIuc2F2ZUZpbGUoYXJyYXlCdWZmZXIsIGZpbGVQYXRoKTtcclxuXHJcblx0XHRcdC8vIFJldHVybiBmdWxsIHZhdWx0IHBhdGggLSB0aGUgcmVwbGFjZW1lbnQgZnVuY3Rpb24gd2lsbCBoYW5kbGUgY29udmVyc2lvblxyXG5cdFx0XHRyZXR1cm4gZmlsZVBhdGg7XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZG93bmxvYWQgJHt1cmx9OmAsIGVycm9yKTtcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBQcm9jZXNzIGFsbCBmaWxlcyBpbiB0aGUgdmF1bHRcclxuXHQgKi9cclxuXHRhc3luYyBwcm9jZXNzQWxsRmlsZXMoKTogUHJvbWlzZTxudW1iZXI+IHtcclxuXHRcdGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xyXG5cdFx0bGV0IHRvdGFsQ291bnQgPSAwO1xyXG5cclxuXHRcdGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5zdXBwb3J0ZWRFeHRlbnNpb25zLmluY2x1ZGVzKGZpbGUuZXh0ZW5zaW9uKSkge1xyXG5cdFx0XHRcdGNvbnN0IGNvdW50ID0gYXdhaXQgdGhpcy5wcm9jZXNzRmlsZShmaWxlKTtcclxuXHRcdFx0XHR0b3RhbENvdW50ICs9IGNvdW50O1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRvdGFsQ291bnQ7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZWdpc3RlciBldmVudCBoYW5kbGVycyBmb3IgYXV0b21hdGljIGNvbnZlcnNpb25cclxuXHQgKi9cclxuXHRyZWdpc3RlckV2ZW50SGFuZGxlcnMoXHJcblx0XHRvbk5vdGVPcGVuOiAoZmlsZTogVEZpbGUpID0+IHZvaWQsXHJcblx0XHRvbk5vdGVTYXZlOiAoZmlsZTogVEZpbGUpID0+IHZvaWRcclxuXHQpOiB2b2lkIHtcclxuXHRcdC8vIFRoZXNlIGhhbmRsZXJzIHNob3VsZCBiZSByZWdpc3RlcmVkIGJ5IHRoZSBtYWluIHBsdWdpblxyXG5cdFx0Ly8gVGhpcyBtZXRob2QgaXMgcHJvdmlkZWQgZm9yIGRvY3VtZW50YXRpb24gcHVycG9zZXNcclxuXHR9XHJcbn1cclxuXHJcbmludGVyZmFjZSBFeHRlcm5hbEltYWdlTWF0Y2gge1xyXG5cdGZ1bGxNYXRjaDogc3RyaW5nO1xyXG5cdHVybDogc3RyaW5nO1xyXG5cdGFsdD86IHN0cmluZztcclxuXHRyZXBsYWNlbWVudDogKGxvY2FsUGF0aDogc3RyaW5nKSA9PiBzdHJpbmc7XHJcbn1cclxuIiwgIi8qKlxuICogQmFubmVyIFNlcnZpY2VcbiAqIEhhbmRsZXMgYmFubmVyIGltYWdlIHJlbmRlcmluZyBmcm9tIGZyb250bWF0dGVyIHByb3BlcnRpZXNcbiAqIFN1cHBvcnRzIGJvdGggTUQgYW5kIE1EWCBmaWxlcyB2aWEgbWR4LWZyb250bWF0dGVyIHV0aWxpdGllc1xuICovXG5cbmltcG9ydCB7XG5cdEFwcCxcblx0TWFya2Rvd25WaWV3LFxuXHRQbGF0Zm9ybSxcblx0VEZpbGUsXG5cdFdvcmtzcGFjZUxlYWYsXG5cdHJlcXVlc3RVcmwsXG59IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCAqIGFzIE9ic2lkaWFuTW9kdWxlIGZyb20gJ29ic2lkaWFuJztcblxuLyoqXG4gKiBIZWxwZXIgdG8gc2V0IENTUyBwcm9wZXJ0aWVzIG9uIGFuIGVsZW1lbnRcbiAqIFVzZXMgc2V0Q3NzUHJvcGVydGllcyBpZiBhdmFpbGFibGUgKE9ic2lkaWFuIDEuMTEuMCspLCBmYWxscyBiYWNrIHRvIHN0eWxlLnNldFByb3BlcnR5XG4gKi9cbmZ1bmN0aW9uIHNldENzc1Byb3BlcnRpZXMoZWxlbWVudDogSFRNTEVsZW1lbnQsIHByb3BzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTogdm9pZCB7XG5cdC8vIFRyeSB0byB1c2Ugc2V0Q3NzUHJvcGVydGllcyBpZiBhdmFpbGFibGVcblx0Y29uc3Qgb2JzaWRpYW4gPSBPYnNpZGlhbk1vZHVsZSBhcyB1bmtub3duIGFzIHsgc2V0Q3NzUHJvcGVydGllcz86IChlbDogSFRNTEVsZW1lbnQsIHByb3BzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KSA9PiB2b2lkIH07XG5cdGlmICh0eXBlb2Ygb2JzaWRpYW4uc2V0Q3NzUHJvcGVydGllcyA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdG9ic2lkaWFuLnNldENzc1Byb3BlcnRpZXMoZWxlbWVudCwgcHJvcHMpO1xuXHR9IGVsc2Uge1xuXHRcdC8vIEZhbGxiYWNrIGZvciBvbGRlciB2ZXJzaW9uc1xuXHRcdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHByb3BzKSkge1xuXHRcdFx0ZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShrZXksIHZhbHVlKTtcblx0XHR9XG5cdH1cbn1cbmltcG9ydCB7XG5cdEltYWdlTWFuYWdlclNldHRpbmdzLFxuXHRCYW5uZXJEZXZpY2VTZXR0aW5ncyxcblx0QmFubmVySW1hZ2VPcHRpb25zLFxuXHRCYW5uZXJEYXRhLFxuXHRCYW5uZXJDb250ZW50VHlwZSxcblx0QmFubmVySWNvblR5cGUsXG5cdERldmljZVR5cGUsXG59IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IGdldEZyb250bWF0dGVyIH0gZnJvbSAnLi4vdXRpbHMvbWR4LWZyb250bWF0dGVyJztcblxuLy8gQ1NTIGNsYXNzIG5hbWVzXG5jb25zdCBDU1NfQ0xBU1NFUyA9IHtcblx0TWFpbjogJ2ltYWdlLW1hbmFnZXItYmFubmVyJyxcblx0SWNvbjogJ2Jhbm5lci1pY29uJyxcblx0U3RhdGljOiAnc3RhdGljJyxcbn0gYXMgY29uc3Q7XG5cbi8vIFJlZ3VsYXIgZXhwcmVzc2lvbnMgZm9yIHBhcnNpbmcgaW1hZ2UgbGlua3NcbmNvbnN0IFBBVFRFUk5TID0ge1xuXHRXaWtpbGluazogL14hP1xcW1xcWyhbXlxcXV0rPykoXFx8KFteXFxdXSs/KSk/XFxdXFxdJC8sXG5cdE1hcmtkb3duOiAvXiE/XFxbKFteXFxdXSopXFxdXFwoKFteKV0rPylcXCkkLyxcblx0TWFya2Rvd25CYXJlOiAvXiE/PChbXj5dKyk+JC8sXG5cdFdlYmxpbms6IC9eaHR0cHM/OlxcL1xcLy9pLFxufTtcblxuLyoqXG4gKiBTdG9yZSBmb3IgYmFubmVyIGRhdGEgcGVyIGxlYWZcbiAqL1xuY29uc3QgYmFubmVyRGF0YVN0b3JlID0gbmV3IE1hcDxzdHJpbmcsIEJhbm5lckRhdGE+KCk7XG5cbmV4cG9ydCBjbGFzcyBCYW5uZXJTZXJ2aWNlIHtcblx0cHJpdmF0ZSBhcHA6IEFwcDtcblx0cHJpdmF0ZSBzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3M7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncykge1xuXHRcdHRoaXMuYXBwID0gYXBwO1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgc2V0dGluZ3MgcmVmZXJlbmNlXG5cdCAqL1xuXHR1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogSW1hZ2VNYW5hZ2VyU2V0dGluZ3MpOiB2b2lkIHtcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG5cdH1cblxuXHQvKipcblx0ICogR2V0IHRoZSBjdXJyZW50IGRldmljZSB0eXBlXG5cdCAqL1xuXHRnZXRDdXJyZW50RGV2aWNlKCk6IERldmljZVR5cGUge1xuXHRcdGlmIChQbGF0Zm9ybS5pc1Bob25lKSB7XG5cdFx0XHRyZXR1cm4gRGV2aWNlVHlwZS5QaG9uZTtcblx0XHR9XG5cdFx0aWYgKFBsYXRmb3JtLmlzVGFibGV0KSB7XG5cdFx0XHRyZXR1cm4gRGV2aWNlVHlwZS5UYWJsZXQ7XG5cdFx0fVxuXHRcdHJldHVybiBEZXZpY2VUeXBlLkRlc2t0b3A7XG5cdH1cblxuXHQvKipcblx0ICogR2V0IGRldmljZS1zcGVjaWZpYyBzZXR0aW5nc1xuXHQgKi9cblx0Z2V0RGV2aWNlU2V0dGluZ3MoKTogQmFubmVyRGV2aWNlU2V0dGluZ3Mge1xuXHRcdGNvbnN0IGRldmljZSA9IHRoaXMuZ2V0Q3VycmVudERldmljZSgpO1xuXHRcdHJldHVybiB0aGlzLnNldHRpbmdzLmJhbm5lcltkZXZpY2VdO1xuXHR9XG5cblx0LyoqXG5cdCAqIFByb2Nlc3MgYWxsIG9wZW4gbWFya2Rvd24gdmlld3Ncblx0ICovXG5cdHByb2Nlc3NBbGwoKTogdm9pZCB7XG5cdFx0Y29uc3QgZGV2aWNlU2V0dGluZ3MgPSB0aGlzLmdldERldmljZVNldHRpbmdzKCk7XG5cdFx0XG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVSb290TGVhdmVzKChsZWFmOiBXb3Jrc3BhY2VMZWFmKSA9PiB7XG5cdFx0XHRjb25zdCB2aWV3ID0gbGVhZi52aWV3IGFzIE1hcmtkb3duVmlldztcblx0XHRcdGlmICh2aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSB7XG5cdFx0XHRcdGlmIChkZXZpY2VTZXR0aW5ncy5lbmFibGVkKSB7XG5cdFx0XHRcdFx0Y29uc3QgZmlsZSA9IHZpZXc/LmZpbGUgfHwgbnVsbDtcblx0XHRcdFx0XHR2b2lkIHRoaXMucHJvY2VzcyhmaWxlLCB2aWV3KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGlzLnJlbW92ZSh2aWV3KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIFByb2Nlc3MgYSBzaW5nbGUgZmlsZS92aWV3XG5cdCAqL1xuXHRhc3luYyBwcm9jZXNzKGZpbGU6IFRGaWxlIHwgbnVsbCwgdmlldz86IE1hcmtkb3duVmlldyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmNvbXB1dGUoZmlsZSwgdmlldyk7XG5cdFx0aWYgKCFkYXRhKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmICghZGF0YS5pbWFnZSkge1xuXHRcdFx0dGhpcy5yZW1vdmUodmlldywgZGF0YSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmICghZGF0YS5pY29uKSB7XG5cdFx0XHRkYXRhLm5lZWRzVXBkYXRlID0gdHJ1ZTtcblx0XHR9XG5cdFx0XG5cdFx0Y29uc3QgZGV2aWNlU2V0dGluZ3MgPSB0aGlzLmdldERldmljZVNldHRpbmdzKCk7XG5cdFx0aWYgKGRldmljZVNldHRpbmdzLmVuYWJsZWQpIHtcblx0XHRcdGF3YWl0IHRoaXMucmVuZGVyKGRhdGEsIHZpZXcpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBDb21wdXRlIGJhbm5lciBkYXRhIGZyb20gZnJvbnRtYXR0ZXJcblx0ICovXG5cdGFzeW5jIGNvbXB1dGUoZmlsZTogVEZpbGUgfCBudWxsLCB0YXJnZXRWaWV3PzogTWFya2Rvd25WaWV3KTogUHJvbWlzZTxCYW5uZXJEYXRhIHwgbnVsbD4ge1xuXHRcdGNvbnN0IHZpZXcgPSB0YXJnZXRWaWV3IHx8IHRoaXMuZ2V0QWN0aXZlVmlldygpO1xuXHRcdGlmICghZmlsZSB8fCAhKHZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcpKSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBFYXJseSBleGl0OiBjaGVjayBpZiBiYW5uZXIgaXMgZW5hYmxlZFxuXHRcdGNvbnN0IGRldmljZVNldHRpbmdzID0gdGhpcy5nZXREZXZpY2VTZXR0aW5ncygpO1xuXHRcdGlmICghZGV2aWNlU2V0dGluZ3MuZW5hYmxlZCkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0Ly8gRWFybHkgZXhpdDogY2hlY2sgaWYgZmlsZSBleHRlbnNpb24gaXMgc3VwcG9ydGVkXG5cdFx0Ly8gQWxzbyBhbGxvdyAnbWQnIGFzIGEgZmFsbGJhY2sgaW4gY2FzZSB1c2VyIGRpZG4ndCBpbmNsdWRlIGl0IGluIHN1cHBvcnRlZEV4dGVuc2lvbnNcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3Muc3VwcG9ydGVkRXh0ZW5zaW9ucy5pbmNsdWRlcyhmaWxlLmV4dGVuc2lvbikgJiYgZmlsZS5leHRlbnNpb24gIT09ICdtZCcpIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdC8vIEdldCBsZWFmIElEIGZvciBkYXRhIHN0b3JlXG5cdFx0Ly8gQHRzLWV4cGVjdC1lcnJvciAtIGxlYWYuaWQgZXhpc3RzIGJ1dCBpcyBub3QgaW4gdHlwZSBkZWZpbml0aW9uc1xuXHRcdGNvbnN0IGxlYWZJZCA9IHZpZXc/LmxlYWY/LmlkIGFzIHN0cmluZyB8IHVuZGVmaW5lZDtcblx0XHRpZiAoIWxlYWZJZCkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgb2xkRGF0YSA9IGJhbm5lckRhdGFTdG9yZS5nZXQobGVhZklkKSB8fCB0aGlzLmNyZWF0ZURlZmF1bHRCYW5uZXJEYXRhKCk7XG5cdFx0Y29uc3QgbmV3RGF0YSA9IHRoaXMuY3JlYXRlRGVmYXVsdEJhbm5lckRhdGEodmlldywgb2xkRGF0YS52aWV3TW9kZSk7XG5cblx0XHQvLyBGb3IgTUQgZmlsZXMgKHdoaWNoIGhhdmUgbWV0YWRhdGEgY2FjaGUpLCBjaGVjayBjYWNoZSBmaXJzdCB0byBzZWUgaWYgYmFubmVyIHByb3BlcnR5IGV4aXN0c1xuXHRcdC8vIFRoaXMgYXZvaWRzIHJlYWRpbmcgdGhlIGZ1bGwgZmlsZSBpZiB0aGVyZSdzIG5vIGJhbm5lciBwcm9wZXJ0eVxuXHRcdC8vIEJVVDogT25seSB1c2UgdGhpcyBhcyBhbiBvcHRpbWl6YXRpb24gaWYgY2FjaGUgaXMgYWxyZWFkeSBwb3B1bGF0ZWRcblx0XHQvLyBJZiBjYWNoZSBpcyBudWxsIChub3QgcmVhZHkgeWV0KSwgd2UgbXVzdCByZWFkIGZyb250bWF0dGVyIHRvIGJlIHN1cmVcblx0XHQvLyBOb3RlOiBPbmx5IE1EIGZpbGVzIGhhdmUgbWV0YWRhdGEgY2FjaGUgaW4gT2JzaWRpYW47IG90aGVyIGV4dGVuc2lvbnMgKE1EWCwgZXRjLikgZG9uJ3Rcblx0XHRpZiAoZmlsZS5leHRlbnNpb24gPT09ICdtZCcpIHtcblx0XHRcdGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG5cdFx0XHQvLyBPbmx5IHNraXAgaWYgY2FjaGUgZXhpc3RzIEFORCBoYXMgYmVlbiBwb3B1bGF0ZWQgKGZyb250bWF0dGVyIGlzIG5vdCBudWxsL3VuZGVmaW5lZClcblx0XHRcdC8vIElmIGNhY2hlIGlzIG51bGwgb3IgZnJvbnRtYXR0ZXIgaXMgbWlzc2luZywgd2UgbmVlZCB0byByZWFkIHRoZSBmaWxlIHRvIGJlIHN1cmVcblx0XHRcdGlmIChjYWNoZT8uZnJvbnRtYXR0ZXIgIT0gbnVsbCkge1xuXHRcdFx0XHRjb25zdCBwcm9wZXJ0eVNldHRpbmdzID0gdGhpcy5zZXR0aW5ncy5iYW5uZXIucHJvcGVydGllcztcblx0XHRcdFx0Y29uc3QgaW1hZ2VQcm9wID0gcHJvcGVydHlTZXR0aW5ncy5pbWFnZVByb3BlcnR5O1xuXHRcdFx0XHRjb25zdCBpY29uUHJvcCA9IHByb3BlcnR5U2V0dGluZ3MuaWNvblByb3BlcnR5O1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgaGlkZSBwcm9wZXJ0eSBpcyBlbmFibGVkIGFuZCBzZXQgdG8gdHJ1dGh5IHZhbHVlXG5cdFx0XHRcdGlmIChwcm9wZXJ0eVNldHRpbmdzLmhpZGVQcm9wZXJ0eUVuYWJsZWQgJiYgcHJvcGVydHlTZXR0aW5ncy5oaWRlUHJvcGVydHkpIHtcblx0XHRcdFx0XHRjb25zdCBoaWRlUHJvcCA9IHByb3BlcnR5U2V0dGluZ3MuaGlkZVByb3BlcnR5O1xuXHRcdFx0XHRcdGNvbnN0IGhpZGVWYWx1ZTogdW5rbm93biA9IGNhY2hlLmZyb250bWF0dGVyW2hpZGVQcm9wXTtcblx0XHRcdFx0XHRpZiAoaGlkZVZhbHVlID09PSB0cnVlIHx8IGhpZGVWYWx1ZSA9PT0gJ3RydWUnIHx8IGhpZGVWYWx1ZSA9PT0gMSB8fCBoaWRlVmFsdWUgPT09ICcxJykge1xuXHRcdFx0XHRcdFx0cmV0dXJuIG5ld0RhdGE7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBDaGVjayBpZiBiYW5uZXIgb3IgaWNvbiBwcm9wZXJ0eSBleGlzdHMgaW4gY2FjaGVcblx0XHRcdFx0Y29uc3QgaGFzQmFubmVyUHJvcGVydHkgPSBjYWNoZS5mcm9udG1hdHRlcltpbWFnZVByb3BdICE9IG51bGw7XG5cdFx0XHRcdGNvbnN0IGhhc0ljb25Qcm9wZXJ0eSA9IGRldmljZVNldHRpbmdzLmljb25FbmFibGVkICYmIGNhY2hlLmZyb250bWF0dGVyW2ljb25Qcm9wXSAhPSBudWxsO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gSWYgY2FjaGUgaXMgcG9wdWxhdGVkIGFuZCBubyBiYW5uZXIvaWNvbiBwcm9wZXJ0eSBleGlzdHMsIHJldHVybiBlYXJseVxuXHRcdFx0XHQvLyBUaGlzIGlzIHNhZmUgYmVjYXVzZSB0aGUgY2FjaGUgaXMgZGVmaW5pdGl2ZSBmb3IgTUQgZmlsZXNcblx0XHRcdFx0aWYgKCFoYXNCYW5uZXJQcm9wZXJ0eSAmJiAhaGFzSWNvblByb3BlcnR5KSB7XG5cdFx0XHRcdFx0cmV0dXJuIG5ld0RhdGE7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vIElmIGNhY2hlIGlzIG51bGwgb3IgZnJvbnRtYXR0ZXIgbm90IHBvcHVsYXRlZCB5ZXQsIGNvbnRpbnVlIHRvIHJlYWQgZnJvbnRtYXR0ZXJcblx0XHRcdC8vIFRoaXMgZW5zdXJlcyBiYW5uZXJzIGxvYWQgY29ycmVjdGx5IGV2ZW4gaWYgY2FjaGUgaXNuJ3QgcmVhZHlcblx0XHR9XG5cdFx0Ly8gRm9yIG5vbi1NRCBmaWxlcyAoTURYLCBldGMuKSwgd2UgYWx3YXlzIG5lZWQgdG8gcmVhZCB0aGUgZmlsZSAobm8gY2FjaGUgYXZhaWxhYmxlKVxuXG5cdFx0Ly8gR2V0IGZyb250bWF0dGVyIHVzaW5nIE1EWC1jb21wYXRpYmxlIHV0aWxpdHlcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IGF3YWl0IGdldEZyb250bWF0dGVyKHRoaXMuYXBwLCBmaWxlKTtcblx0XHRpZiAoIWZyb250bWF0dGVyKSB7XG5cdFx0XHRyZXR1cm4gbmV3RGF0YTtcblx0XHR9XG5cblx0XHRjb25zdCBwcm9wZXJ0eVNldHRpbmdzID0gdGhpcy5zZXR0aW5ncy5iYW5uZXIucHJvcGVydGllcztcblx0XHRcblx0XHQvLyBDaGVjayBpZiBoaWRlIHByb3BlcnR5IGlzIGVuYWJsZWQgYW5kIHNldCB0byB0cnV0aHkgdmFsdWVcblx0XHRpZiAocHJvcGVydHlTZXR0aW5ncy5oaWRlUHJvcGVydHlFbmFibGVkICYmIHByb3BlcnR5U2V0dGluZ3MuaGlkZVByb3BlcnR5KSB7XG5cdFx0XHRjb25zdCBoaWRlUHJvcCA9IHByb3BlcnR5U2V0dGluZ3MuaGlkZVByb3BlcnR5O1xuXHRcdFx0Y29uc3QgaGlkZVZhbHVlOiB1bmtub3duID0gZnJvbnRtYXR0ZXJbaGlkZVByb3BdO1xuXHRcdFx0aWYgKGhpZGVWYWx1ZSA9PT0gdHJ1ZSB8fCBoaWRlVmFsdWUgPT09ICd0cnVlJyB8fCBoaWRlVmFsdWUgPT09IDEgfHwgaGlkZVZhbHVlID09PSAnMScpIHtcblx0XHRcdFx0cmV0dXJuIG5ld0RhdGE7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdGNvbnN0IGltYWdlUHJvcCA9IHByb3BlcnR5U2V0dGluZ3MuaW1hZ2VQcm9wZXJ0eTtcblx0XHRjb25zdCBpY29uUHJvcCA9IHByb3BlcnR5U2V0dGluZ3MuaWNvblByb3BlcnR5O1xuXG5cdFx0Ly8gUGFyc2UgaW1hZ2UgcHJvcGVydHlcblx0XHRjb25zdCBpbWFnZVZhbHVlID0gZnJvbnRtYXR0ZXJbaW1hZ2VQcm9wXTtcblx0XHRpZiAoaW1hZ2VWYWx1ZSAmJiB0eXBlb2YgaW1hZ2VWYWx1ZSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdG5ld0RhdGEuaW1hZ2UgPSBpbWFnZVZhbHVlO1xuXHRcdFx0bmV3RGF0YS5maWxlcGF0aCA9IGZpbGUucGF0aDtcblx0XHRcdFxuXHRcdFx0aWYgKG9sZERhdGEuZmlsZXBhdGggIT09IG5ld0RhdGEuZmlsZXBhdGgpIHtcblx0XHRcdFx0bmV3RGF0YS5uZWVkc1VwZGF0ZSA9IHRydWU7XG5cdFx0XHRcdG5ld0RhdGEuaXNJbWFnZUNoYW5nZSA9IHRydWU7XG5cdFx0XHR9IGVsc2UgaWYgKG9sZERhdGEuaW1hZ2UgIT09IG5ld0RhdGEuaW1hZ2UpIHtcblx0XHRcdFx0bmV3RGF0YS5uZWVkc1VwZGF0ZSA9IHRydWU7XG5cdFx0XHRcdG5ld0RhdGEuaXNJbWFnZUNoYW5nZSA9IHRydWU7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBDaGVjayBpZiBvbmx5IGltYWdlIHByb3BlcnRpZXMgKG9mZnNldCwgcmVwZWF0KSBjaGFuZ2VkXG5cdFx0XHRcdGlmIChhd2FpdCB0aGlzLmlzSW1hZ2VQcm9wZXJ0aWVzVXBkYXRlKG9sZERhdGEuaW1hZ2UsIG5ld0RhdGEuaW1hZ2UsIHZpZXcpKSB7XG5cdFx0XHRcdFx0bmV3RGF0YS5pc0ltYWdlUHJvcHNVcGRhdGUgPSB0cnVlO1xuXHRcdFx0XHRcdG5ld0RhdGEuaXNJbWFnZUNoYW5nZSA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUGFyc2UgaWNvbiBwcm9wZXJ0eSBpZiBlbmFibGVkXG5cdFx0aWYgKGRldmljZVNldHRpbmdzLmljb25FbmFibGVkKSB7XG5cdFx0XHRjb25zdCBpY29uVmFsdWUgPSBmcm9udG1hdHRlcltpY29uUHJvcF07XG5cdFx0XHRpZiAoaWNvblZhbHVlICYmIHR5cGVvZiBpY29uVmFsdWUgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdG5ld0RhdGEuaWNvbiA9IGljb25WYWx1ZTtcblx0XHRcdFx0aWYgKG9sZERhdGEuaWNvbiAhPT0gbmV3RGF0YS5pY29uKSB7XG5cdFx0XHRcdFx0bmV3RGF0YS5uZWVkc1VwZGF0ZSA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAob2xkRGF0YS5pY29uKSB7XG5cdFx0XHRcdG5ld0RhdGEuaWNvbiA9IG51bGw7XG5cdFx0XHRcdG5ld0RhdGEubmVlZHNVcGRhdGUgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBuZXdEYXRhO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlbmRlciBiYW5uZXIgaW4gdGhlIHZpZXdcblx0ICovXG5cdGFzeW5jIHJlbmRlcihkYXRhOiBCYW5uZXJEYXRhLCB0YXJnZXRWaWV3PzogTWFya2Rvd25WaWV3KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgeyBpbWFnZSwgdmlld01vZGUsIGxhc3RWaWV3TW9kZSwgbmVlZHNVcGRhdGUsIGlzSW1hZ2VDaGFuZ2UgfSA9IGRhdGE7XG5cdFx0Y29uc3QgdmlldyA9IHRhcmdldFZpZXcgfHwgdGhpcy5nZXRBY3RpdmVWaWV3KCk7XG5cdFx0XG5cdFx0aWYgKCF2aWV3IHx8ICEodmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldykpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBjb250YWluZXIgPSB2aWV3LmNvbnRhaW5lckVsO1xuXHRcdGlmICghY29udGFpbmVyIHx8ICghbmVlZHNVcGRhdGUgJiYgbGFzdFZpZXdNb2RlID09PSB2aWV3TW9kZSkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBjb250YWluZXJzOiBOb2RlTGlzdE9mPEhUTUxFbGVtZW50PiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFxuXHRcdFx0Jy5jbS1zY3JvbGxlciwgLm1hcmtkb3duLXJlYWRpbmctdmlldyA+IC5tYXJrZG93bi1wcmV2aWV3LXZpZXcnXG5cdFx0KTtcblxuXHRcdGlmIChjb250YWluZXJzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGltYWdlT3B0aW9ucyA9IGF3YWl0IHRoaXMucGFyc2VMaW5rKGltYWdlIHx8ICcnLCB2aWV3KTtcblx0XHRjb25zdCBiYW5uZXJzID0gdGhpcy51cGRhdGVCYW5uZXJFbGVtZW50cyhkYXRhLCBpbWFnZU9wdGlvbnMsIGNvbnRhaW5lcnMpO1xuXG5cdFx0Ly8gVXBkYXRlIGljb24gaWYgZW5hYmxlZFxuXHRcdGNvbnN0IGRldmljZVNldHRpbmdzID0gdGhpcy5nZXREZXZpY2VTZXR0aW5ncygpO1xuXHRcdGlmIChkZXZpY2VTZXR0aW5ncy5pY29uRW5hYmxlZCAmJiBkYXRhLmljb24pIHtcblx0XHRcdGF3YWl0IHRoaXMudXBkYXRlSWNvbnMoZGF0YSwgYmFubmVycywgdmlldyk7XG5cdFx0fVxuXG5cdFx0aWYgKCFpc0ltYWdlQ2hhbmdlKSB7XG5cdFx0XHR0aGlzLnJlcGxhY2VCYW5uZXJzKGJhbm5lcnMpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmluamVjdEJhbm5lcnMoYmFubmVycywgY29udGFpbmVycyk7XG5cdFx0fVxuXG5cdFx0ZGF0YS5sYXN0Vmlld01vZGUgPSB2aWV3TW9kZTtcblx0XHRjb250YWluZXIuZGF0YXNldC5pbUJhbm5lciA9ICcnO1xuXG5cdFx0Ly8gU3RvcmUgZGF0YSBmb3IgdGhpcyBsZWFmXG5cdFx0Ly8gQHRzLWV4cGVjdC1lcnJvciAtIGxlYWYuaWQgZXhpc3RzIGJ1dCBpcyBub3QgaW4gdHlwZSBkZWZpbml0aW9uc1xuXHRcdGNvbnN0IGxlYWZJZCA9IHZpZXc/LmxlYWY/LmlkIGFzIHN0cmluZyB8IHVuZGVmaW5lZDtcblx0XHRpZiAobGVhZklkKSB7XG5cdFx0XHRiYW5uZXJEYXRhU3RvcmUuc2V0KGxlYWZJZCwgZGF0YSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSBiYW5uZXIgRE9NIGVsZW1lbnRzXG5cdCAqL1xuXHRwcml2YXRlIHVwZGF0ZUJhbm5lckVsZW1lbnRzKFxuXHRcdGRhdGE6IEJhbm5lckRhdGEsXG5cdFx0aW1nT3B0aW9uczogQmFubmVySW1hZ2VPcHRpb25zLFxuXHRcdGNvbnRhaW5lcnM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+XG5cdCk6IEhUTUxFbGVtZW50W10ge1xuXHRcdGNvbnN0IHsgaXNJbWFnZUNoYW5nZSwgaXNJbWFnZVByb3BzVXBkYXRlIH0gPSBkYXRhO1xuXHRcdGNvbnN0IGJhbm5lcnM6IEhUTUxFbGVtZW50W10gPSBbXTtcblxuXHRcdGNvbnRhaW5lcnMuZm9yRWFjaChjb250YWluZXIgPT4ge1xuXHRcdFx0bGV0IGVsZW1lbnQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgLiR7Q1NTX0NMQVNTRVMuTWFpbn1gKSBhcyBIVE1MRWxlbWVudDtcblx0XHRcdGlmICghZWxlbWVudCkge1xuXHRcdFx0XHRlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGVsZW1lbnQuY2xhc3NMaXN0LmFkZChDU1NfQ0xBU1NFUy5NYWluKTtcblx0XHRcdH1cblx0XHRcdGJhbm5lcnMucHVzaChlbGVtZW50KTtcblxuXHRcdFx0aWYgKGlzSW1hZ2VDaGFuZ2UgfHwgaXNJbWFnZVByb3BzVXBkYXRlKSB7XG5cdFx0XHRcdGlmIChpc0ltYWdlQ2hhbmdlKSB7XG5cdFx0XHRcdFx0ZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENTU19DTEFTU0VTLlN0YXRpYyk7XG5cdFx0XHRcdFx0ZWxlbWVudC5maXJzdENoaWxkPy5yZW1vdmUoKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFVzZSBzZXRDc3NQcm9wZXJ0aWVzIGZvciBkeW5hbWljIHN0eWxlc1xuXHRcdFx0XHRjb25zdCBjc3NWYXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuXHRcdFx0XHRcdCctLWltLWJhbm5lci1pbWcteCc6IGAke2ltZ09wdGlvbnMueH1weGAsXG5cdFx0XHRcdFx0Jy0taW0tYmFubmVyLWltZy15JzogYCR7aW1nT3B0aW9ucy55fXB4YCxcblx0XHRcdFx0XHQnLS1pbS1iYW5uZXItc2l6ZSc6IGltZ09wdGlvbnMucmVwZWF0YWJsZSA/ICdhdXRvJyA6ICdjb3ZlcicsXG5cdFx0XHRcdFx0Jy0taW0tYmFubmVyLXJlcGVhdCc6IGltZ09wdGlvbnMucmVwZWF0YWJsZSA/ICdyZXBlYXQnIDogJ25vLXJlcGVhdCcsXG5cdFx0XHRcdFx0Jy0taW0tYmFubmVyLXVybCc6ICdub25lJyxcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRpZiAoaW1nT3B0aW9ucy50eXBlID09PSBCYW5uZXJDb250ZW50VHlwZS5WaWRlbykge1xuXHRcdFx0XHRcdGNvbnN0IHZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcblx0XHRcdFx0XHR2aWRlby5jb250cm9scyA9IGZhbHNlO1xuXHRcdFx0XHRcdHZpZGVvLmF1dG9wbGF5ID0gdHJ1ZTtcblx0XHRcdFx0XHR2aWRlby5tdXRlZCA9IHRydWU7XG5cdFx0XHRcdFx0dmlkZW8ubG9vcCA9IHRydWU7XG5cdFx0XHRcdFx0dmlkZW8uc3JjID0gaW1nT3B0aW9ucy51cmwucmVwbGFjZSgvXlwifFwiJC9nLCAnJyk7XG5cdFx0XHRcdFx0ZWxlbWVudC5hcHBlbmRDaGlsZCh2aWRlbyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y3NzVmFyc1snLS1pbS1iYW5uZXItdXJsJ10gPSBgdXJsKCR7aW1nT3B0aW9ucy51cmx9KWA7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRzZXRDc3NQcm9wZXJ0aWVzKGNvbnRhaW5lciwgY3NzVmFycyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gYmFubmVycztcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgaWNvbiBlbGVtZW50cyBvbiBiYW5uZXJzXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIHVwZGF0ZUljb25zKGRhdGE6IEJhbm5lckRhdGEsIGJhbm5lcnM6IEhUTUxFbGVtZW50W10sIHZpZXc/OiBNYXJrZG93blZpZXcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBkZXZpY2VTZXR0aW5ncyA9IHRoaXMuZ2V0RGV2aWNlU2V0dGluZ3MoKTtcblx0XHRsZXQgY2FsY3VsYXRlZEZvbnRTaXplOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuXHRcdGZvciAoY29uc3QgYmFubmVyIG9mIGJhbm5lcnMpIHtcblx0XHRcdGNvbnN0IHsgaWNvbiB9ID0gZGF0YTtcblx0XHRcdGxldCBpY29uQ29udGFpbmVyOiBIVE1MRWxlbWVudCB8IG51bGwgPSBiYW5uZXIucXVlcnlTZWxlY3RvcihgLiR7Q1NTX0NMQVNTRVMuSWNvbn1gKTtcblx0XHRcdGNvbnN0IGhhc0NvbnRhaW5lciA9IGljb25Db250YWluZXIgIT09IG51bGw7XG5cdFx0XHRcblx0XHRcdGlmIChoYXNDb250YWluZXIpIHtcblx0XHRcdFx0aWNvbkNvbnRhaW5lcj8uY2xhc3NMaXN0LmFkZChDU1NfQ0xBU1NFUy5TdGF0aWMpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRpZiAoZGV2aWNlU2V0dGluZ3MuaWNvbkVuYWJsZWQgJiYgaWNvbikge1xuXHRcdFx0XHRpZiAoIWhhc0NvbnRhaW5lcikge1xuXHRcdFx0XHRcdGljb25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0XHRpY29uQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoQ1NTX0NMQVNTRVMuSWNvbik7XG5cdFx0XHRcdFx0Y29uc3QgaW5uZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0XHRpY29uQ29udGFpbmVyLmFwcGVuZENoaWxkKGlubmVyRGl2KTtcblx0XHRcdFx0XHRiYW5uZXIucHJlcGVuZChpY29uQ29udGFpbmVyKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGljb25FbGVtZW50ID0gaWNvbkNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcignZGl2JykgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdGlmICghaWNvbkVsZW1lbnQpIGNvbnRpbnVlO1xuXG5cdFx0XHRcdGNvbnN0IGljb25EYXRhID0gYXdhaXQgdGhpcy5wYXJzZUljb24oaWNvbiwgdmlldyk7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBFc2NhcGUgc3BlY2lhbCBjaGFyYWN0ZXJzIGluIHRoZSB2YWx1ZSBmb3IgQ1NTXG5cdFx0XHRcdGxldCB2YWx1ZSA9IGljb25EYXRhLnZhbHVlPy5yZXBsYWNlKC8oWyMuOltcXFxcXVwiXSkvZywgJ1xcXFwkMScpIHx8ICcnO1xuXHRcdFx0XHRpY29uRWxlbWVudC5kYXRhc2V0LnR5cGUgPSBpY29uRGF0YS50eXBlO1xuXG5cdFx0XHRcdGlmIChpY29uRGF0YS50eXBlID09PSBCYW5uZXJJY29uVHlwZS5MaW5rKSB7XG5cdFx0XHRcdFx0c2V0Q3NzUHJvcGVydGllcyhpY29uRWxlbWVudCwge1xuXHRcdFx0XHRcdFx0Jy0taW0tYmFubmVyLWljb24tdmFsdWUnOiBgdXJsKCR7dmFsdWV9KWAsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gVGV4dC9lbW9qaSBpY29uXG5cdFx0XHRcdFx0Y2FsY3VsYXRlZEZvbnRTaXplID0gY2FsY3VsYXRlZEZvbnRTaXplID8/IHRoaXMuY2FsY3VsYXRlRm9udFNpemUodmFsdWUsIGRldmljZVNldHRpbmdzLmljb25TaXplKTtcblx0XHRcdFx0XHRzZXRDc3NQcm9wZXJ0aWVzKGljb25FbGVtZW50LCB7XG5cdFx0XHRcdFx0XHQnLS1pbS1iYW5uZXItaWNvbi12YWx1ZSc6IGBcIiR7dmFsdWV9XCJgLFxuXHRcdFx0XHRcdFx0Jy0taW0tYmFubmVyLWljb24tZm9udHNpemUnOiBjYWxjdWxhdGVkRm9udFNpemUsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoaGFzQ29udGFpbmVyICYmIGljb25Db250YWluZXIpIHtcblx0XHRcdFx0ZGF0YS5pY29uID0gbnVsbDtcblx0XHRcdFx0aWNvbkNvbnRhaW5lci5yZW1vdmUoKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogSW5qZWN0IGJhbm5lcnMgaW50byBjb250YWluZXJzXG5cdCAqL1xuXHRwcml2YXRlIGluamVjdEJhbm5lcnMoYmFubmVyczogSFRNTEVsZW1lbnRbXSwgY29udGFpbmVyczogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD4pOiB2b2lkIHtcblx0XHRjb25zdCBkZXZpY2VTZXR0aW5ncyA9IHRoaXMuZ2V0RGV2aWNlU2V0dGluZ3MoKTtcblx0XHRjb25zdCBzaG91bGRBbmltYXRlID0gZGV2aWNlU2V0dGluZ3MuYW5pbWF0aW9uO1xuXHRcdFxuXHRcdGNvbnRhaW5lcnMuZm9yRWFjaCgoY29udGFpbmVyLCBpbmRleCkgPT4ge1xuXHRcdFx0Y29uc3QgYmFubmVyID0gYmFubmVyc1tpbmRleF07XG5cdFx0XHRpZiAoYmFubmVyKSB7XG5cdFx0XHRcdC8vIFJlbW92ZSBzdGF0aWMgY2xhc3MgaWYgaXQgZXhpc3RzIHRvIGFsbG93IGFuaW1hdGlvblxuXHRcdFx0XHRiYW5uZXIuY2xhc3NMaXN0LnJlbW92ZShDU1NfQ0xBU1NFUy5TdGF0aWMpO1xuXHRcdFx0XHRjb250YWluZXIucHJlcGVuZChiYW5uZXIpO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKHNob3VsZEFuaW1hdGUpIHtcblx0XHRcdFx0XHQvLyBGb3JjZSByZWZsb3cgYW5kIHN0YXJ0IGFuaW1hdGlvbiBvbiBuZXh0IGZyYW1lXG5cdFx0XHRcdFx0dm9pZCBiYW5uZXIub2Zmc2V0SGVpZ2h0OyAvLyBGb3JjZSByZWZsb3dcblx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0Ly8gQW5pbWF0aW9uIHNob3VsZCBzdGFydCBub3dcblx0XHRcdFx0XHRcdGJhbm5lci5vbmFuaW1hdGlvbmVuZCA9ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0YmFubmVyLmNsYXNzTGlzdC5hZGQoQ1NTX0NMQVNTRVMuU3RhdGljKTtcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gQW5pbWF0aW9uIGRpc2FibGVkIC0gYWRkIHN0YXRpYyBjbGFzcyBpbW1lZGlhdGVseVxuXHRcdFx0XHRcdGJhbm5lci5jbGFzc0xpc3QuYWRkKENTU19DTEFTU0VTLlN0YXRpYyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXBsYWNlIGJhbm5lcnMgKG5vIGFuaW1hdGlvbilcblx0ICovXG5cdHByaXZhdGUgcmVwbGFjZUJhbm5lcnMoYmFubmVyczogSFRNTEVsZW1lbnRbXSk6IHZvaWQge1xuXHRcdGJhbm5lcnMuZm9yRWFjaChiYW5uZXIgPT4ge1xuXHRcdFx0YmFubmVyLmNsYXNzTGlzdC5hZGQoQ1NTX0NMQVNTRVMuU3RhdGljKTtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZW1vdmUgYmFubmVyIGZyb20gdmlld1xuXHQgKi9cblx0cmVtb3ZlKHZpZXc/OiBNYXJrZG93blZpZXcsIGRhdGE/OiBCYW5uZXJEYXRhKTogdm9pZCB7XG5cdFx0Y29uc3QgdGFyZ2V0VmlldyA9IHZpZXcgfHwgZGF0YT8uZmlsZXBhdGggPyB0aGlzLmdldEFjdGl2ZVZpZXcoKSA6IG51bGw7XG5cdFx0aWYgKCEodGFyZ2V0VmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldykpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBjb250YWluZXIgPSB0YXJnZXRWaWV3LmNvbnRhaW5lckVsO1xuXHRcdGlmICghY29udGFpbmVyKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgdGFyZ2V0cyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKGAuJHtDU1NfQ0xBU1NFUy5NYWlufWApO1xuXHRcdHRhcmdldHMuZm9yRWFjaCh0ID0+IHQucmVtb3ZlKCkpO1xuXG5cdFx0Ly8gQHRzLWV4cGVjdC1lcnJvciAtIGxlYWYuaWQgZXhpc3RzIGJ1dCBpcyBub3QgaW4gdHlwZSBkZWZpbml0aW9uc1xuXHRcdGNvbnN0IGxlYWZJZCA9IHRhcmdldFZpZXc/LmxlYWY/LmlkIGFzIHN0cmluZyB8IHVuZGVmaW5lZDtcblx0XHRpZiAobGVhZklkKSB7XG5cdFx0XHRiYW5uZXJEYXRhU3RvcmUuZGVsZXRlKGxlYWZJZCk7XG5cdFx0fVxuXHRcdGRlbGV0ZSBjb250YWluZXIuZGF0YXNldC5pbUJhbm5lcjtcblx0fVxuXG5cdC8qKlxuXHQgKiBBcHBseSBjdXJyZW50IHNldHRpbmdzIHRvIERPTVxuXHQgKi9cblx0YXBwbHlTZXR0aW5ncygpOiB2b2lkIHtcblx0XHRjb25zdCBkZXZpY2VTZXR0aW5ncyA9IHRoaXMuZ2V0RGV2aWNlU2V0dGluZ3MoKTtcblx0XHRjb25zdCBoZWlnaHQgPSBkZXZpY2VTZXR0aW5ncy5oZWlnaHQ7XG5cdFx0Y29uc3Qgbm90ZU9mZnNldCA9IGRldmljZVNldHRpbmdzLm5vdGVPZmZzZXQ7XG5cdFx0Y29uc3Qgdmlld09mZnNldCA9IGRldmljZVNldHRpbmdzLnZpZXdPZmZzZXQ7XG5cdFx0Y29uc3QgcmFkaXVzID0gZGV2aWNlU2V0dGluZ3MuYm9yZGVyUmFkaXVzO1xuXHRcdGNvbnN0IHBhZGRpbmcgPSBkZXZpY2VTZXR0aW5ncy5wYWRkaW5nO1xuXHRcdGNvbnN0IGZhZGUgPSBkZXZpY2VTZXR0aW5ncy5mYWRlO1xuXG5cdFx0Y29uc3QgY3NzVmFyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcblx0XHRcdCctLWltLWJhbm5lci1oZWlnaHQnOiBgJHtoZWlnaHR9cHhgLFxuXHRcdFx0Jy0taW0tYmFubmVyLW5vdGUtb2Zmc2V0JzogYCR7bm90ZU9mZnNldH1weGAsXG5cdFx0XHQnLS1pbS1iYW5uZXItdmlldy1vZmZzZXQnOiBgJHt2aWV3T2Zmc2V0fXB4YCxcblx0XHRcdCctLWltLWJhbm5lci1yYWRpdXMnOiBgJHtyYWRpdXNbMF19cHggJHtyYWRpdXNbMV19cHggJHtyYWRpdXNbMl19cHggJHtyYWRpdXNbM119cHhgLFxuXHRcdFx0Jy0taW0tYmFubmVyLXBhZGRpbmcnOiBgJHtwYWRkaW5nfXB4YCxcblx0XHRcdCctLWltLWJhbm5lci1tYXNrJzogZmFkZSA/ICdyZXZlcnQtbGF5ZXInIDogJ2luaXRpYWwnLFxuXHRcdFx0Jy0taW0tYmFubmVyLW1hc2std2Via2l0JzogZmFkZSA/ICdyZXZlcnQtbGF5ZXInIDogJ2luaXRpYWwnLFxuXHRcdH07XG5cblx0XHRpZiAoZGV2aWNlU2V0dGluZ3MuaWNvbkVuYWJsZWQpIHtcblx0XHRcdGNvbnN0IGljb25GcmFtZSA9IGRldmljZVNldHRpbmdzLmljb25GcmFtZSA/PyB0cnVlO1xuXHRcdFx0Y3NzVmFyc1snLS1pbS1iYW5uZXItaWNvbi1zaXplLXcnXSA9IGAke2RldmljZVNldHRpbmdzLmljb25TaXplfXB4YDtcblx0XHRcdGNzc1ZhcnNbJy0taW0tYmFubmVyLWljb24tc2l6ZS1oJ10gPSBgJHtkZXZpY2VTZXR0aW5ncy5pY29uU2l6ZX1weGA7XG5cdFx0XHRjc3NWYXJzWyctLWltLWJhbm5lci1pY29uLXJhZGl1cyddID0gYCR7ZGV2aWNlU2V0dGluZ3MuaWNvblJhZGl1c31weGA7XG5cdFx0XHRjc3NWYXJzWyctLWltLWJhbm5lci1pY29uLWFsaWduLWgnXSA9IGRldmljZVNldHRpbmdzLmljb25BbGlnbm1lbnRIO1xuXHRcdFx0Y3NzVmFyc1snLS1pbS1iYW5uZXItaWNvbi1hbGlnbi12J10gPSBkZXZpY2VTZXR0aW5ncy5pY29uQWxpZ25tZW50Vjtcblx0XHRcdGNzc1ZhcnNbJy0taW0tYmFubmVyLWljb24tb2Zmc2V0LXgnXSA9IGAke2RldmljZVNldHRpbmdzLmljb25PZmZzZXRYfXB4YDtcblx0XHRcdGNzc1ZhcnNbJy0taW0tYmFubmVyLWljb24tb2Zmc2V0LXknXSA9IGAke2RldmljZVNldHRpbmdzLmljb25PZmZzZXRZfXB4YDtcblx0XHRcdGNzc1ZhcnNbJy0taW0tYmFubmVyLWljb24tYm9yZGVyJ10gPSBpY29uRnJhbWUgPyBgJHtkZXZpY2VTZXR0aW5ncy5pY29uQm9yZGVyfXB4YCA6ICcwcHgnO1xuXHRcdFx0Y3NzVmFyc1snLS1pbS1iYW5uZXItaWNvbi1iYWNrZ3JvdW5kJ10gPSBpY29uRnJhbWUgJiYgZGV2aWNlU2V0dGluZ3MuaWNvbkJhY2tncm91bmQgPyAncmV2ZXJ0LWxheWVyJyA6ICd0cmFuc3BhcmVudCc7XG5cdFx0fVxuXG5cdFx0c2V0Q3NzUHJvcGVydGllcyhkb2N1bWVudC5ib2R5LCBjc3NWYXJzKTtcblxuXHRcdHRoaXMucHJvY2Vzc0FsbCgpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFBhcnNlIGltYWdlIGxpbmsgc3RyaW5nIGludG8gb3B0aW9uc1xuXHQgKi9cblx0YXN5bmMgcGFyc2VMaW5rKHN0cjogc3RyaW5nLCB2aWV3PzogTWFya2Rvd25WaWV3IHwgbnVsbCk6IFByb21pc2U8QmFubmVySW1hZ2VPcHRpb25zPiB7XG5cdFx0bGV0IHVybDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IGRpc3BsYXlUZXh0OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgZXh0ZXJuYWwgPSBmYWxzZTtcblx0XHRsZXQgb2JzaWRpYW5VcmwgPSBmYWxzZTtcblx0XHRsZXQgb3B0aW9ucyA9IHsgeDogMCwgeTogMCwgcmVwZWF0YWJsZTogZmFsc2UgfTtcblxuXHRcdC8vIFRyeSB3aWtpbGluayBmb3JtYXRcblx0XHRjb25zdCB3aWtpbGlua01hdGNoID0gc3RyLm1hdGNoKFBBVFRFUk5TLldpa2lsaW5rKTtcblx0XHRpZiAod2lraWxpbmtNYXRjaCkge1xuXHRcdFx0dXJsID0gd2lraWxpbmtNYXRjaFsxXT8udHJpbSgpID8/IG51bGw7XG5cdFx0XHRkaXNwbGF5VGV4dCA9IHdpa2lsaW5rTWF0Y2hbM10/LnRyaW0oKSA/PyBudWxsO1xuXHRcdH1cblxuXHRcdC8vIFRyeSBtYXJrZG93biBmb3JtYXRcblx0XHRjb25zdCBtYXJrZG93bk1hdGNoID0gc3RyLm1hdGNoKFBBVFRFUk5TLk1hcmtkb3duKTtcblx0XHRjb25zdCBtYXJrZG93bkJhcmVNYXRjaCA9IHN0ci5tYXRjaChQQVRURVJOUy5NYXJrZG93bkJhcmUpO1xuXHRcdGlmIChtYXJrZG93bk1hdGNoKSB7XG5cdFx0XHRkaXNwbGF5VGV4dCA9IG1hcmtkb3duTWF0Y2hbMV0/LnRyaW0oKSA/PyBudWxsO1xuXHRcdFx0dXJsID0gbWFya2Rvd25NYXRjaFsyXT8udHJpbSgpID8/IG51bGw7XG5cdFx0fSBlbHNlIGlmIChtYXJrZG93bkJhcmVNYXRjaCkge1xuXHRcdFx0dXJsID0gbWFya2Rvd25CYXJlTWF0Y2hbMV0/LnRyaW0oKSA/PyBudWxsO1xuXHRcdFx0ZGlzcGxheVRleHQgPSBudWxsO1xuXHRcdH1cblxuXHRcdC8vIERlZmF1bHQgdG8gcmF3IHN0cmluZ1xuXHRcdGlmICghdXJsKSB7XG5cdFx0XHR1cmwgPSBzdHI7XG5cdFx0XHRkaXNwbGF5VGV4dCA9IG51bGw7XG5cdFx0fVxuXG5cdFx0ZXh0ZXJuYWwgPSBQQVRURVJOUy5XZWJsaW5rLnRlc3QodXJsKTtcblxuXHRcdC8vIEhhbmRsZSBvYnNpZGlhbjovLyBVUkxzXG5cdFx0aWYgKHRoaXMuaXNPYnNpZGlhblVybCh1cmwpKSB7XG5cdFx0XHRjb25zdCB1cmxTdHIgPSB1cmwucmVwbGFjZSgnb2JzaWRpYW46Ly9vcGVuJywgJycpO1xuXHRcdFx0Y29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh1cmxTdHIpO1xuXHRcdFx0Y29uc3QgZmlsZSA9IHBhcmFtcy5nZXQoJ2ZpbGUnKTtcblx0XHRcdGlmIChmaWxlKSB7XG5cdFx0XHRcdHVybCA9IGZpbGU7XG5cdFx0XHRcdG9ic2lkaWFuVXJsID0gdHJ1ZTtcblx0XHRcdFx0ZXh0ZXJuYWwgPSBmYWxzZTtcblx0XHRcdFx0ZGlzcGxheVRleHQgPSBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEhhbmRsZSBmaWxlOi8vIFVSTHNcblx0XHRpZiAodXJsLnN0YXJ0c1dpdGgoJ2ZpbGU6JykpIHtcblx0XHRcdHVybCA9IHVybC5yZXBsYWNlKC9eZmlsZTpcXC97MSx9LywgUGxhdGZvcm0ucmVzb3VyY2VQYXRoUHJlZml4KTtcblx0XHRcdGV4dGVybmFsID0gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBQYXJzZSBvZmZzZXQvcmVwZWF0IGZyb20gaGFzaCBmb3IgZXh0ZXJuYWwgVVJMc1xuXHRcdGNvbnN0IGhhc2hJbmRleCA9IHVybC5pbmRleE9mKCcjJyk7XG5cdFx0aWYgKChleHRlcm5hbCB8fCBvYnNpZGlhblVybCkgJiYgaGFzaEluZGV4ICE9PSAtMSkge1xuXHRcdFx0b3B0aW9ucyA9IHRoaXMucGFyc2VJbWFnZVByb3BlcnRpZXModXJsLnN1YnN0cmluZyhoYXNoSW5kZXggKyAxKSk7XG5cdFx0XHR1cmwgPSB1cmwucmVwbGFjZSgvIy4qLywgJycpLnRyaW0oKTtcblx0XHR9XG5cblx0XHQvLyBQYXJzZSBvZmZzZXQvcmVwZWF0IGZyb20gZGlzcGxheSB0ZXh0XG5cdFx0aWYgKGRpc3BsYXlUZXh0KSB7XG5cdFx0XHRvcHRpb25zID0gdGhpcy5wYXJzZUltYWdlUHJvcGVydGllcyhkaXNwbGF5VGV4dCk7XG5cdFx0fVxuXG5cdFx0Ly8gUmVzb2x2ZSBpbnRlcm5hbCBwYXRoc1xuXHRcdGlmICghZXh0ZXJuYWwpIHtcblx0XHRcdGNvbnN0IHZhdWx0ID0gdGhpcy5hcHAudmF1bHQ7XG5cdFx0XHRsZXQgZmlsZTogVEZpbGUgfCBudWxsID0gbnVsbDtcblxuXHRcdFx0Ly8gVHJ5IHJlbGF0aXZlIHBhdGggcmVzb2x1dGlvblxuXHRcdFx0aWYgKHZpZXc/LmZpbGUgJiYgKHVybC5pbmNsdWRlcygnLi4vJykgfHwgdXJsLmluY2x1ZGVzKCcuLycpIHx8ICghdXJsLnN0YXJ0c1dpdGgoJy8nKSAmJiB1cmwuaW5jbHVkZXMoJy8nKSkpKSB7XG5cdFx0XHRcdGNvbnN0IHJlc29sdmVkUGF0aCA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QodXJsLCB2aWV3LmZpbGUucGF0aCk7XG5cdFx0XHRcdGlmIChyZXNvbHZlZFBhdGgpIHtcblx0XHRcdFx0XHRmaWxlID0gcmVzb2x2ZWRQYXRoO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIEZhbGxiYWNrIHRvIGV4YWN0IHBhdGgvbmFtZSBtYXRjaGluZ1xuXHRcdFx0aWYgKCFmaWxlKSB7XG5cdFx0XHRcdGNvbnN0IGZpbGVzID0gdmF1bHQuZ2V0RmlsZXMoKS5maWx0ZXIoZiA9PiBmLnBhdGggPT09IHVybCB8fCBmLm5hbWUgPT09IHVybCk7XG5cdFx0XHRcdGZpbGUgPSBmaWxlcy5maW5kKGYgPT4gZi5wYXRoID09PSB1cmwpIHx8IGZpbGVzLmZpbmQoZiA9PiBmLm5hbWUgPT09IHVybCkgfHwgbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGZpbGUpIHtcblx0XHRcdFx0dXJsID0gdmF1bHQuZ2V0UmVzb3VyY2VQYXRoKGZpbGUpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIERldGVjdCBjb250ZW50IHR5cGVcblx0XHRsZXQgdHlwZTogQmFubmVyQ29udGVudFR5cGUgfCBudWxsID0gbnVsbDtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgdXJsT2JqID0gbmV3IFVSTCh1cmwpO1xuXHRcdFx0Y29uc3QgZXh0ZW5zaW9uID0gdXJsT2JqLnBhdGhuYW1lLnNwbGl0KCcuJykucG9wKCk/LnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRjb25zdCBpbWFnZUV4dGVuc2lvbnMgPSBbJ2pwZycsICdqcGVnJywgJ3BuZycsICdnaWYnLCAnc3ZnJywgJ3dlYnAnXTtcblx0XHRcdGNvbnN0IHZpZGVvRXh0ZW5zaW9ucyA9IFsnbXA0JywgJ3dlYm0nLCAnb2dnJywgJ29ndicsICdtb3YnXTtcblxuXHRcdFx0aWYgKGV4dGVuc2lvbiAmJiBpbWFnZUV4dGVuc2lvbnMuaW5jbHVkZXMoZXh0ZW5zaW9uKSkge1xuXHRcdFx0XHR0eXBlID0gQmFubmVyQ29udGVudFR5cGUuSW1hZ2U7XG5cdFx0XHR9IGVsc2UgaWYgKGV4dGVuc2lvbiAmJiB2aWRlb0V4dGVuc2lvbnMuaW5jbHVkZXMoZXh0ZW5zaW9uKSkge1xuXHRcdFx0XHR0eXBlID0gQmFubmVyQ29udGVudFR5cGUuVmlkZW87XG5cdFx0XHR9XG5cblx0XHRcdC8vIEZhbGxiYWNrIHRvIEhFQUQgcmVxdWVzdCBpZiB0eXBlIG5vdCBkZXRlY3RlZFxuXHRcdFx0aWYgKCF0eXBlKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHsgdXJsLCBtZXRob2Q6ICdIRUFEJyB9KTtcblx0XHRcdFx0XHRjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlPy5oZWFkZXJzWydjb250ZW50LXR5cGUnXSB8fCBudWxsO1xuXHRcdFx0XHRcdGlmIChjb250ZW50VHlwZSkge1xuXHRcdFx0XHRcdFx0aWYgKGNvbnRlbnRUeXBlLmluY2x1ZGVzKCdpbWFnZScpKSB7XG5cdFx0XHRcdFx0XHRcdHR5cGUgPSBCYW5uZXJDb250ZW50VHlwZS5JbWFnZTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoY29udGVudFR5cGUuaW5jbHVkZXMoJ3ZpZGVvJykpIHtcblx0XHRcdFx0XHRcdFx0dHlwZSA9IEJhbm5lckNvbnRlbnRUeXBlLlZpZGVvO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdFx0Ly8gSWdub3JlIEhFQUQgcmVxdWVzdCBlcnJvcnNcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gY2F0Y2gge1xuXHRcdFx0Ly8gSWdub3JlIFVSTCBwYXJzaW5nIGVycm9yc1xuXHRcdH1cblxuXHRcdHJldHVybiB7XG5cdFx0XHR1cmw6IGBcIiR7dXJsLnRyaW0oKS5yZXBsYWNlKC8oW1wiXFxcXF0pL2csICdcXFxcJDEnKX1cImAsXG5cdFx0XHRleHRlcm5hbCxcblx0XHRcdHR5cGUsXG5cdFx0XHQuLi5vcHRpb25zLFxuXHRcdH07XG5cdH1cblxuXHQvKipcblx0ICogUGFyc2UgaW1hZ2UgcHJvcGVydGllcyAob2Zmc2V0LCByZXBlYXQpIGZyb20gc3RyaW5nXG5cdCAqL1xuXHRwcml2YXRlIHBhcnNlSW1hZ2VQcm9wZXJ0aWVzKHN0cjogc3RyaW5nKTogeyB4OiBudW1iZXI7IHk6IG51bWJlcjsgcmVwZWF0YWJsZTogYm9vbGVhbiB9IHtcblx0XHRjb25zdCB2YWx1ZXMgPSBzdHIudG9Mb3dlckNhc2UoKTtcblx0XHRjb25zdCByZXBlYXRhYmxlID0gdmFsdWVzLmluY2x1ZGVzKCdyZXBlYXQnKTtcblxuXHRcdGNvbnN0IHNpemVzID0gc3RyLnNwbGl0KC94fCwvKTtcblx0XHRjb25zdCBudW1iZXJzID0gc2l6ZXMuZmlsdGVyKHYgPT4gIWlzTmFOKHBhcnNlSW50KHYudHJpbSgpLCAxMCkpKTtcblxuXHRcdGxldCB4ID0gMDtcblx0XHRsZXQgeSA9IDA7XG5cblx0XHRjb25zdCBudW0wID0gbnVtYmVyc1swXTtcblx0XHRjb25zdCBudW0xID0gbnVtYmVyc1sxXTtcblx0XHRpZiAobnVtYmVycy5sZW5ndGggPT09IDIgJiYgbnVtMCAmJiBudW0xKSB7XG5cdFx0XHR4ID0gcGFyc2VJbnQobnVtMC50cmltKCksIDEwKTtcblx0XHRcdHkgPSBwYXJzZUludChudW0xLnRyaW0oKSwgMTApO1xuXHRcdH0gZWxzZSBpZiAobnVtYmVycy5sZW5ndGggPT09IDEgJiYgbnVtMCkge1xuXHRcdFx0eSA9IHBhcnNlSW50KG51bTAudHJpbSgpLCAxMCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHsgeCwgeSwgcmVwZWF0YWJsZSB9O1xuXHR9XG5cblx0LyoqXG5cdCAqIFBhcnNlIGljb24gcHJvcGVydHlcblx0ICovXG5cdGFzeW5jIHBhcnNlSWNvbihpY29uOiBzdHJpbmcsIHZpZXc/OiBNYXJrZG93blZpZXcgfCBudWxsKTogUHJvbWlzZTx7IHZhbHVlOiBzdHJpbmcgfCBudWxsOyB0eXBlOiBCYW5uZXJJY29uVHlwZSB9PiB7XG5cdFx0Y29uc3Qgc3RyID0gaWNvbiB8fCAnJztcblx0XHRjb25zdCByZXN1bHQgPSB7IHZhbHVlOiBudWxsIGFzIHN0cmluZyB8IG51bGwsIHR5cGU6IEJhbm5lckljb25UeXBlLlRleHQgfTtcblxuXHRcdC8vIENoZWNrIGlmIGl0J3MgYSBsaW5rIGZvcm1hdCAoZXhwbGljaXQgcGF0dGVybnMgb3IgZmlsZSBwYXRoIHdpdGggaW1hZ2UgZXh0ZW5zaW9uKVxuXHRcdGNvbnN0IGlzRXhwbGljaXRMaW5rID0gXG5cdFx0XHRQQVRURVJOUy5XaWtpbGluay50ZXN0KHN0cikgfHxcblx0XHRcdFBBVFRFUk5TLk1hcmtkb3duLnRlc3Qoc3RyKSB8fFxuXHRcdFx0UEFUVEVSTlMuTWFya2Rvd25CYXJlLnRlc3Qoc3RyKSB8fFxuXHRcdFx0UEFUVEVSTlMuV2VibGluay50ZXN0KHN0cikgfHxcblx0XHRcdHRoaXMuaXNPYnNpZGlhblVybChzdHIpO1xuXHRcdFxuXHRcdC8vIENoZWNrIGlmIGl0IGxvb2tzIGxpa2UgYSBmaWxlIHBhdGggKGhhcyBpbWFnZSBleHRlbnNpb24pXG5cdFx0Y29uc3QgaW1hZ2VFeHRlbnNpb25zID0gL1xcLihqcGd8anBlZ3xwbmd8Z2lmfHN2Z3x3ZWJwfGJtcHxpY298YXZpZikkL2k7XG5cdFx0Y29uc3QgaXNGaWxlUGF0aCA9IGltYWdlRXh0ZW5zaW9ucy50ZXN0KHN0cik7XG5cblx0XHRpZiAoaXNFeHBsaWNpdExpbmsgfHwgaXNGaWxlUGF0aCkge1xuXHRcdFx0cmVzdWx0LnR5cGUgPSBCYW5uZXJJY29uVHlwZS5MaW5rO1xuXHRcdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucGFyc2VMaW5rKHN0ciwgdmlldyk7XG5cdFx0XHRyZXN1bHQudmFsdWUgPSBkYXRhLnVybDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVzdWx0LnZhbHVlID0gc3RyO1xuXHRcdH1cblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2sgaWYgb25seSBpbWFnZSBwcm9wZXJ0aWVzIGNoYW5nZWQgKG5vdCB0aGUgVVJMKVxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBpc0ltYWdlUHJvcGVydGllc1VwZGF0ZShcblx0XHRvbGRTdHI6IHN0cmluZyB8IG51bGwsXG5cdFx0bmV3U3RyOiBzdHJpbmcgfCBudWxsLFxuXHRcdHZpZXc/OiBNYXJrZG93blZpZXcgfCBudWxsXG5cdCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdGlmICghb2xkU3RyIHx8ICFuZXdTdHIpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0Y29uc3Qgb2xkT3B0ID0gYXdhaXQgdGhpcy5wYXJzZUxpbmsob2xkU3RyLCB2aWV3KTtcblx0XHRjb25zdCBuZXdPcHQgPSBhd2FpdCB0aGlzLnBhcnNlTGluayhuZXdTdHIsIHZpZXcpO1xuXHRcdHJldHVybiBvbGRPcHQudXJsID09PSBuZXdPcHQudXJsO1xuXHR9XG5cblx0LyoqXG5cdCAqIENoZWNrIGlmIFVSTCBpcyBhbiBvYnNpZGlhbjovLyBVUkxcblx0ICovXG5cdHByaXZhdGUgaXNPYnNpZGlhblVybCh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB1cmwuc3RhcnRzV2l0aCgnb2JzaWRpYW46Ly9vcGVuJyk7XG5cdH1cblxuXHQvKipcblx0ICogQ2FsY3VsYXRlIGZvbnQgc2l6ZSB0byBmaXQgdGV4dCBpbiBpY29uXG5cdCAqIFVzZXMgYWN0dWFsIERPTSBtZWFzdXJlbWVudCBmb3IgYWNjdXJhdGUgc2l6aW5nXG5cdCAqL1xuXHRwcml2YXRlIGNhbGN1bGF0ZUZvbnRTaXplKHRleHRDb250ZW50OiBzdHJpbmcsIGljb25TaXplOiBudW1iZXIpOiBzdHJpbmcge1xuXHRcdGNvbnN0IHRlbXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG5cdFx0dGVtcC5hZGRDbGFzcygnaW0tbWVhc3VyZS10ZW1wJyk7XG5cdFx0Ly8gVXNlIHNldENzc1Byb3BlcnRpZXMgZm9yIHN0eWxlIG1hbmlwdWxhdGlvbiAocmVxdWlyZWQgZm9yIG1lYXN1cmVtZW50IGVsZW1lbnQpXG5cdFx0Ly8gVGhpcyBlbGVtZW50IGlzIHRlbXBvcmFyeSBhbmQgaW1tZWRpYXRlbHkgcmVtb3ZlZCBhZnRlciBtZWFzdXJlbWVudFxuXHRcdHNldENzc1Byb3BlcnRpZXModGVtcCwge1xuXHRcdFx0cG9zaXRpb246ICdhYnNvbHV0ZScsXG5cdFx0XHR2aXNpYmlsaXR5OiAnaGlkZGVuJyxcblx0XHRcdCd3aGl0ZS1zcGFjZSc6ICdub3dyYXAnLFxuXHRcdFx0cGFkZGluZzogJzAnLFxuXHRcdFx0bWFyZ2luOiAnMCcsXG5cdFx0XHRsZWZ0OiAnLTk5OTlweCcsXG5cdFx0fSk7XG5cdFx0dGVtcC50ZXh0Q29udGVudCA9IHRleHRDb250ZW50LnRvVXBwZXJDYXNlKCk7XG5cdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZW1wKTtcblx0XHRcblx0XHRjb25zdCBjaGVja1dpZHRoID0gaWNvblNpemUgLSAxNjtcblx0XHRsZXQgZm9udFNpemUgPSBpY29uU2l6ZTsgLy8gU3RhcnQgYmlnXG5cdFx0c2V0Q3NzUHJvcGVydGllcyh0ZW1wLCB7ICdmb250LXNpemUnOiBgJHtmb250U2l6ZX1weGAgfSk7XG5cblx0XHR3aGlsZSAodGVtcC5vZmZzZXRXaWR0aCA+IGNoZWNrV2lkdGggJiYgZm9udFNpemUgPiAxKSB7XG5cdFx0XHRmb250U2l6ZSAtPSAxO1xuXHRcdFx0c2V0Q3NzUHJvcGVydGllcyh0ZW1wLCB7ICdmb250LXNpemUnOiBgJHtmb250U2l6ZX1weGAgfSk7XG5cdFx0fVxuXG5cdFx0ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0ZW1wKTtcblx0XHRyZXR1cm4gYCR7Zm9udFNpemV9cHhgO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldCBhY3RpdmUgbWFya2Rvd24gdmlld1xuXHQgKi9cblx0cHJpdmF0ZSBnZXRBY3RpdmVWaWV3KCk6IE1hcmtkb3duVmlldyB8IG51bGwge1xuXHRcdHJldHVybiB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZSBkZWZhdWx0IGJhbm5lciBkYXRhIG9iamVjdFxuXHQgKi9cblx0cHJpdmF0ZSBjcmVhdGVEZWZhdWx0QmFubmVyRGF0YSh2aWV3PzogTWFya2Rvd25WaWV3IHwgbnVsbCwgbGFzdFZpZXdNb2RlPzogJ3NvdXJjZScgfCAncHJldmlldycgfCBudWxsKTogQmFubmVyRGF0YSB7XG5cdFx0bGV0IHZpZXdNb2RlOiAnc291cmNlJyB8ICdwcmV2aWV3JyB8IG51bGwgPSBudWxsO1xuXHRcdGlmICh2aWV3KSB7XG5cdFx0XHRjb25zdCBtb2RlID0gdmlldy5nZXRNb2RlKCk7XG5cdFx0XHR2aWV3TW9kZSA9IG1vZGUgPT09ICdwcmV2aWV3JyA/ICdwcmV2aWV3JyA6ICdzb3VyY2UnO1xuXHRcdH1cblx0XHRyZXR1cm4ge1xuXHRcdFx0ZmlsZXBhdGg6IG51bGwsXG5cdFx0XHRpbWFnZTogbnVsbCxcblx0XHRcdGljb246IG51bGwsXG5cdFx0XHR2aWV3TW9kZSxcblx0XHRcdGxhc3RWaWV3TW9kZTogbGFzdFZpZXdNb2RlIHx8IG51bGwsXG5cdFx0XHRpc0ltYWdlUHJvcHNVcGRhdGU6IGZhbHNlLFxuXHRcdFx0aXNJbWFnZUNoYW5nZTogZmFsc2UsXG5cdFx0XHRuZWVkc1VwZGF0ZTogZmFsc2UsXG5cdFx0fTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDbGVhbnVwIHdoZW4gcGx1Z2luIHVubG9hZHNcblx0ICovXG5cdGRlc3Ryb3koKTogdm9pZCB7XG5cdFx0Ly8gUmVtb3ZlIGFsbCBiYW5uZXJzXG5cdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLiR7Q1NTX0NMQVNTRVMuTWFpbn1gKS5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZSgpKTtcblx0XHRcblx0XHQvLyBDbGVhciBkYXRhIHN0b3JlXG5cdFx0YmFubmVyRGF0YVN0b3JlLmNsZWFyKCk7XG5cdH1cbn1cbiIsICIvKipcclxuICogRmlsZSBQaWNrZXIgTW9kYWxcclxuICogT3BlbnMgdGhlIE9TIG5hdGl2ZSBmaWxlIGRpYWxvZyBmb3Igc2VsZWN0aW5nIGxvY2FsIGltYWdlc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSwgTWFya2Rvd25WaWV3LCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgSW1hZ2VQcm9jZXNzb3IgfSBmcm9tICcuLi9zZXJ2aWNlcy9JbWFnZVByb2Nlc3Nvcic7XHJcbmltcG9ydCB7IFByb3BlcnR5SGFuZGxlciB9IGZyb20gJy4uL3NlcnZpY2VzL1Byb3BlcnR5SGFuZGxlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgRmlsZVBpY2tlck1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdHByaXZhdGUgaW1hZ2VQcm9jZXNzb3I6IEltYWdlUHJvY2Vzc29yO1xyXG5cdHByaXZhdGUgcHJvcGVydHlIYW5kbGVyOiBQcm9wZXJ0eUhhbmRsZXI7XHJcblx0cHJpdmF0ZSBpbnNlcnRUb1Byb3BlcnR5OiBib29sZWFuO1xyXG5cdHByaXZhdGUgcHJvcGVydHlOYW1lPzogc3RyaW5nO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdGFwcDogQXBwLFxyXG5cdFx0aW1hZ2VQcm9jZXNzb3I6IEltYWdlUHJvY2Vzc29yLFxyXG5cdFx0cHJvcGVydHlIYW5kbGVyOiBQcm9wZXJ0eUhhbmRsZXIsXHJcblx0XHRpbnNlcnRUb1Byb3BlcnR5OiBib29sZWFuID0gZmFsc2UsXHJcblx0XHRwcm9wZXJ0eU5hbWU/OiBzdHJpbmdcclxuXHQpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLmltYWdlUHJvY2Vzc29yID0gaW1hZ2VQcm9jZXNzb3I7XHJcblx0XHR0aGlzLnByb3BlcnR5SGFuZGxlciA9IHByb3BlcnR5SGFuZGxlcjtcclxuXHRcdHRoaXMuaW5zZXJ0VG9Qcm9wZXJ0eSA9IGluc2VydFRvUHJvcGVydHk7XHJcblx0XHR0aGlzLnByb3BlcnR5TmFtZSA9IHByb3BlcnR5TmFtZTtcclxuXHR9XHJcblxyXG5cdG9uT3BlbigpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cclxuXHRcdC8vIENyZWF0ZSBoaWRkZW4gZmlsZSBpbnB1dFxyXG5cdFx0Y29uc3QgaW5wdXQgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2lucHV0Jywge1xyXG5cdFx0XHR0eXBlOiAnZmlsZScsXHJcblx0XHRcdGF0dHI6IHtcclxuXHRcdFx0XHRhY2NlcHQ6ICdpbWFnZS8qJyxcclxuXHRcdFx0XHRtdWx0aXBsZTogJ3RydWUnLFxyXG5cdFx0XHRcdHN0eWxlOiAnZGlzcGxheTogbm9uZTsnLFxyXG5cdFx0XHR9LFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gSGFuZGxlIGZpbGUgc2VsZWN0aW9uXHJcblx0XHRpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7IHZvaWQgdGhpcy5oYW5kbGVGaWxlU2VsZWN0aW9uKGlucHV0KTsgfSk7XHJcblxyXG5cdFx0Ly8gSGFuZGxlIGNhbmNlbFxyXG5cdFx0aW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2FuY2VsJywgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBUcmlnZ2VyIHRoZSBmaWxlIGRpYWxvZyBpbW1lZGlhdGVseVxyXG5cdFx0aW5wdXQuY2xpY2soKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYXN5bmMgaGFuZGxlRmlsZVNlbGVjdGlvbihpbnB1dDogSFRNTElucHV0RWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0XHR0aGlzLmNsb3NlKCk7XHJcblxyXG5cdFx0XHRjb25zdCBmaWxlcyA9IGlucHV0LmZpbGVzO1xyXG5cdFx0XHRpZiAoIWZpbGVzIHx8IGZpbGVzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRcdG5ldyBOb3RpY2UoJ05vIGZpbGVzIHNlbGVjdGVkJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRcdGlmICghYWN0aXZlRmlsZSkge1xyXG5cdFx0XHRcdG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBmaWxlJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuXHRcdFx0Y29uc3QgZWRpdG9yID0gdmlldz8uZWRpdG9yO1xyXG5cclxuXHRcdFx0Ly8gUHJvY2VzcyBlYWNoIHNlbGVjdGVkIGZpbGVcclxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGNvbnN0IGZpbGUgPSBmaWxlcy5pdGVtKGkpO1xyXG5cdFx0XHRcdGlmICghZmlsZSB8fCAhZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7XHJcblx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICh0aGlzLmluc2VydFRvUHJvcGVydHkpIHtcclxuXHRcdFx0XHRcdC8vIFZhbGlkYXRlIHByb3BlcnR5IG5hbWVcclxuXHRcdFx0XHRcdGlmICghdGhpcy5wcm9wZXJ0eU5hbWUgfHwgdGhpcy5wcm9wZXJ0eU5hbWUudHJpbSgpID09PSAnJykge1xyXG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKCdQbGVhc2Ugc3BlY2lmeSBhIHByb3BlcnR5IG5hbWUgaW4gc2V0dGluZ3MnKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIEluc2VydCBpbnRvIHByb3BlcnR5IChjcmVhdGUgaWYgaXQgZG9lc24ndCBleGlzdClcclxuXHRcdFx0XHRcdC8vIFNraXAgZGVzY3JpcHRpdmUgaW1hZ2VzIGZvciBwcm9wZXJ0eSBpbnNlcnRpb25zIChkaXNwbGF5IHRleHQgZG9lc24ndCBhcHBseSB0byBwcm9wZXJ0aWVzKVxyXG5cdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5pbWFnZVByb2Nlc3Nvci5wcm9jZXNzSW1hZ2VGaWxlKFxyXG5cdFx0XHRcdFx0XHRmaWxlLFxyXG5cdFx0XHRcdFx0XHRhY3RpdmVGaWxlLFxyXG5cdFx0XHRcdFx0XHR0cnVlLCAvLyBTaG93IHJlbmFtZSBtb2RhbFxyXG5cdFx0XHRcdFx0XHR0cnVlIC8vIGlzUHJvcGVydHlJbnNlcnRpb24gLSBza2lwIGRlc2NyaXB0aXZlIGltYWdlc1xyXG5cdFx0XHRcdFx0KTtcclxuXHJcblx0XHRcdFx0XHRpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LmZpbGUpIHtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wcm9wZXJ0eUhhbmRsZXIuc2V0UHJvcGVydHlWYWx1ZShcclxuXHRcdFx0XHRcdFx0XHRhY3RpdmVGaWxlLFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMucHJvcGVydHlOYW1lLFxyXG5cdFx0XHRcdFx0XHRcdHJlc3VsdC5maWxlXHJcblx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIEluc2VydCBpbnRvIG5vdGUgYm9keVxyXG5cdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5pbWFnZVByb2Nlc3Nvci5wcm9jZXNzSW1hZ2VGaWxlKFxyXG5cdFx0XHRcdFx0XHRmaWxlLFxyXG5cdFx0XHRcdFx0XHRhY3RpdmVGaWxlLFxyXG5cdFx0XHRcdFx0XHR0cnVlIC8vIFNob3cgcmVuYW1lIG1vZGFsXHJcblx0XHRcdFx0XHQpO1xyXG5cclxuXHRcdFx0XHRcdGlmIChyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQubGlua1RleHQgJiYgZWRpdG9yKSB7XHJcblx0XHRcdFx0XHRcdGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKHJlc3VsdC5saW5rVGV4dCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0bmV3IE5vdGljZShgQWRkZWQgJHtmaWxlcy5sZW5ndGh9IGltYWdlKHMpYCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGdldEFjdGl2ZUZpbGUoKTogVEZpbGUgfCBudWxsIHtcclxuXHRcdGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0cmV0dXJuIHZpZXc/LmZpbGUgPz8gbnVsbDtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIE9wZW4gdGhlIGZpbGUgcGlja2VyIGFuZCBwcm9jZXNzIHNlbGVjdGVkIGltYWdlc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG9wZW5GaWxlUGlja2VyKFxyXG5cdGFwcDogQXBwLFxyXG5cdGltYWdlUHJvY2Vzc29yOiBJbWFnZVByb2Nlc3NvcixcclxuXHRwcm9wZXJ0eUhhbmRsZXI6IFByb3BlcnR5SGFuZGxlcixcclxuXHRpbnNlcnRUb1Byb3BlcnR5OiBib29sZWFuID0gZmFsc2UsXHJcblx0cHJvcGVydHlOYW1lPzogc3RyaW5nXHJcbik6IHZvaWQge1xyXG5cdG5ldyBGaWxlUGlja2VyTW9kYWwoYXBwLCBpbWFnZVByb2Nlc3NvciwgcHJvcGVydHlIYW5kbGVyLCBpbnNlcnRUb1Byb3BlcnR5LCBwcm9wZXJ0eU5hbWUpLm9wZW4oKTtcclxufVxyXG4iLCAiLyoqXHJcbiAqIFJlbW90ZSBTZWFyY2ggTW9kYWxcclxuICogU2VhcmNoIGFuZCBpbnNlcnQgaW1hZ2VzIGZyb20gVW5zcGxhc2gsIFBleGVscywgYW5kIFBpeGFiYXlcclxuICogQmFzZWQgb24gSW1hZ2UgSW5zZXJ0ZXIncyBtb2RhbCBzdHJ1Y3R1cmVcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBOb3RpY2UsIE1hcmtkb3duVmlldywgVEZpbGUsIGRlYm91bmNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBJbWFnZVByb3ZpZGVyLCBSZW1vdGVJbWFnZSwgSW1hZ2VNYW5hZ2VyU2V0dGluZ3MsIEltYWdlU2l6ZSB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgUmVtb3RlSW1hZ2VTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvUmVtb3RlSW1hZ2VTZXJ2aWNlJztcclxuaW1wb3J0IHsgSW1hZ2VQcm9jZXNzb3IgfSBmcm9tICcuLi9zZXJ2aWNlcy9JbWFnZVByb2Nlc3Nvcic7XHJcbmltcG9ydCB7IFByb3BlcnR5SGFuZGxlciB9IGZyb20gJy4uL3NlcnZpY2VzL1Byb3BlcnR5SGFuZGxlcic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJlbW90ZVNlYXJjaE9wdGlvbnMge1xyXG5cdGluc2VydFRvUHJvcGVydHk/OiBib29sZWFuO1xyXG5cdHByb3BlcnR5TmFtZT86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFJlbW90ZVNlYXJjaE1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdHByaXZhdGUgc2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzO1xyXG5cdHByaXZhdGUgcmVtb3RlU2VydmljZTogUmVtb3RlSW1hZ2VTZXJ2aWNlO1xyXG5cdHByaXZhdGUgaW1hZ2VQcm9jZXNzb3I6IEltYWdlUHJvY2Vzc29yO1xyXG5cdHByaXZhdGUgcHJvcGVydHlIYW5kbGVyOiBQcm9wZXJ0eUhhbmRsZXI7XHJcblx0cHJpdmF0ZSBvcHRpb25zOiBSZW1vdGVTZWFyY2hPcHRpb25zO1xyXG5cclxuXHRwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIHF1ZXJ5SW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIHByb3ZpZGVyU2VsZWN0OiBIVE1MU2VsZWN0RWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgc2l6ZVNlbGVjdDogSFRNTFNlbGVjdEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIHNjcm9sbEFyZWE6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblx0cHJpdmF0ZSBpbWFnZXNMaXN0OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgbG9hZGluZ0NvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHJcblx0cHJpdmF0ZSBjdXJyZW50UXVlcnk6IHN0cmluZyA9ICcnO1xyXG5cdHByaXZhdGUgY3VycmVudFByb3ZpZGVyOiBJbWFnZVByb3ZpZGVyO1xyXG5cdHByaXZhdGUgY3VycmVudFBhZ2U6IG51bWJlciA9IDE7XHJcblx0cHJpdmF0ZSBjdXJyZW50UmVzdWx0czogUmVtb3RlSW1hZ2VbXSA9IFtdO1xyXG5cdHByaXZhdGUgaXNMb2FkaW5nOiBib29sZWFuID0gZmFsc2U7XHJcblx0cHJpdmF0ZSBzZWxlY3RlZEltYWdlOiBudW1iZXIgPSAwO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdGFwcDogQXBwLFxyXG5cdFx0c2V0dGluZ3M6IEltYWdlTWFuYWdlclNldHRpbmdzLFxyXG5cdFx0cmVtb3RlU2VydmljZTogUmVtb3RlSW1hZ2VTZXJ2aWNlLFxyXG5cdFx0aW1hZ2VQcm9jZXNzb3I6IEltYWdlUHJvY2Vzc29yLFxyXG5cdFx0cHJvcGVydHlIYW5kbGVyOiBQcm9wZXJ0eUhhbmRsZXIsXHJcblx0XHRvcHRpb25zOiBSZW1vdGVTZWFyY2hPcHRpb25zID0ge31cclxuXHQpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcblx0XHR0aGlzLnJlbW90ZVNlcnZpY2UgPSByZW1vdGVTZXJ2aWNlO1xyXG5cdFx0dGhpcy5pbWFnZVByb2Nlc3NvciA9IGltYWdlUHJvY2Vzc29yO1xyXG5cdFx0dGhpcy5wcm9wZXJ0eUhhbmRsZXIgPSBwcm9wZXJ0eUhhbmRsZXI7XHJcblx0XHR0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG5cdFx0dGhpcy5jdXJyZW50UHJvdmlkZXIgPSBzZXR0aW5ncy5kZWZhdWx0UHJvdmlkZXI7XHJcblx0XHR0aGlzLmNvbnRhaW5lckVsLmFkZENsYXNzKCdpbWFnZS1pbnNlcnRlci1jb250YWluZXInKTtcclxuXHR9XHJcblxyXG5cdG9uT3BlbigpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cclxuXHRcdC8vIE1haW4gY29udGFpbmVyXHJcblx0XHR0aGlzLmNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdjb250YWluZXInIH0pO1xyXG5cclxuXHRcdC8vIElucHV0IGdyb3VwXHJcblx0XHRjb25zdCBpbnB1dEdyb3VwID0gdGhpcy5jb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnaW5wdXQtZ3JvdXAnIH0pO1xyXG5cclxuXHRcdC8vIFF1ZXJ5IGlucHV0XHJcblx0XHR0aGlzLnF1ZXJ5SW5wdXQgPSBpbnB1dEdyb3VwLmNyZWF0ZUVsKCdpbnB1dCcsIHtcclxuXHRcdFx0dHlwZTogJ3RleHQnLFxyXG5cdFx0XHRjbHM6ICdxdWVyeS1pbnB1dCcsXHJcblx0XHRcdGF0dHI6IHsgcGxhY2Vob2xkZXI6ICdTZWFyY2ggaW1hZ2VzLi4uJywgYXV0b2ZvY3VzOiAndHJ1ZScgfSxcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFByb3ZpZGVyIHNlbGVjdG9yXHJcblx0XHR0aGlzLnByb3ZpZGVyU2VsZWN0ID0gaW5wdXRHcm91cC5jcmVhdGVFbCgnc2VsZWN0JywgeyBjbHM6ICdzZWxlY3RvcicgfSk7XHJcblx0XHR0aGlzLnByb3ZpZGVyU2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7IHRleHQ6ICdVbnNwbGFzaCcsIHZhbHVlOiBJbWFnZVByb3ZpZGVyLlVuc3BsYXNoIH0pO1xyXG5cdFx0dGhpcy5wcm92aWRlclNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB0ZXh0OiAnUGV4ZWxzJywgdmFsdWU6IEltYWdlUHJvdmlkZXIuUGV4ZWxzIH0pO1xyXG5cdFx0dGhpcy5wcm92aWRlclNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB0ZXh0OiAnUGl4YWJheScsIHZhbHVlOiBJbWFnZVByb3ZpZGVyLlBpeGFiYXkgfSk7XHJcblx0XHR0aGlzLnByb3ZpZGVyU2VsZWN0LnZhbHVlID0gdGhpcy5jdXJyZW50UHJvdmlkZXI7XHJcblxyXG5cdFx0Ly8gU2l6ZSBzZWxlY3RvclxyXG5cdFx0dGhpcy5zaXplU2VsZWN0ID0gaW5wdXRHcm91cC5jcmVhdGVFbCgnc2VsZWN0JywgeyBjbHM6ICdzZWxlY3RvcicgfSk7XHJcblx0XHR0aGlzLnNpemVTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogJ09yaWdpbmFsJywgdmFsdWU6IEltYWdlU2l6ZS5PcmlnaW5hbCB9KTtcclxuXHRcdHRoaXMuc2l6ZVNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB0ZXh0OiAnTGFyZ2UnLCB2YWx1ZTogSW1hZ2VTaXplLkxhcmdlIH0pO1xyXG5cdFx0dGhpcy5zaXplU2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7IHRleHQ6ICdNZWRpdW0nLCB2YWx1ZTogSW1hZ2VTaXplLk1lZGl1bSB9KTtcclxuXHRcdHRoaXMuc2l6ZVNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB0ZXh0OiAnU21hbGwnLCB2YWx1ZTogSW1hZ2VTaXplLlNtYWxsIH0pO1xyXG5cdFx0dGhpcy5zaXplU2VsZWN0LnZhbHVlID0gdGhpcy5zZXR0aW5ncy5kZWZhdWx0SW1hZ2VTaXplO1xyXG5cclxuXHRcdC8vIExvYWRpbmcgY29udGFpbmVyXHJcblx0XHR0aGlzLmxvYWRpbmdDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdsb2FkaW5nLWNvbnRhaW5lcicgfSk7XHJcblx0XHRjb25zdCBsb2FkZXJJY29uID0gdGhpcy5sb2FkaW5nQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2xvYWRlci1pY29uJyB9KTtcclxuXHRcdGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJyk7XHJcblx0XHRzdmcuc2V0QXR0cmlidXRlKCd3aWR0aCcsICcyNCcpO1xyXG5cdFx0c3ZnLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgJzI0Jyk7XHJcblx0XHRzdmcuc2V0QXR0cmlidXRlKCd2aWV3Qm94JywgJzAgMCAyNCAyNCcpO1xyXG5cdFx0c3ZnLnNldEF0dHJpYnV0ZSgnZmlsbCcsICdub25lJyk7XHJcblx0XHRzdmcuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnY3VycmVudENvbG9yJyk7XHJcblx0XHRzdmcuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMicpO1xyXG5cdFx0c3ZnLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWxpbmVjYXAnLCAncm91bmQnKTtcclxuXHRcdHN2Zy5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1saW5lam9pbicsICdyb3VuZCcpO1xyXG5cdFx0c3ZnLmNsYXNzTGlzdC5hZGQoJ2x1Y2lkZScsICdsdWNpZGUtbG9hZGVyLWNpcmNsZScpO1xyXG5cdFx0Y29uc3QgcGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncGF0aCcpO1xyXG5cdFx0cGF0aC5zZXRBdHRyaWJ1dGUoJ2QnLCAnTTIxIDEyYTkgOSAwIDEgMS02LjIxOS04LjU2Jyk7XHJcblx0XHRzdmcuYXBwZW5kQ2hpbGQocGF0aCk7XHJcblx0XHRsb2FkZXJJY29uLmFwcGVuZENoaWxkKHN2Zyk7XHJcblx0XHR0aGlzLnNob3dMb2FkaW5nKGZhbHNlKTtcclxuXHJcblx0XHQvLyBTY3JvbGwgYXJlYVxyXG5cdFx0dGhpcy5zY3JvbGxBcmVhID0gdGhpcy5jb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc2Nyb2xsLWFyZWEnIH0pO1xyXG5cdFx0dGhpcy5pbWFnZXNMaXN0ID0gdGhpcy5zY3JvbGxBcmVhLmNyZWF0ZURpdih7IGNsczogJ2ltYWdlcy1saXN0JyB9KTtcclxuXHJcblx0XHQvLyBFdmVudCBsaXN0ZW5lcnNcclxuXHRcdHRoaXMuc2V0dXBFdmVudExpc3RlbmVycygpO1xyXG5cclxuXHRcdC8vIEZvY3VzIGlucHV0XHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0dGhpcy5xdWVyeUlucHV0Py5mb2N1cygpO1xyXG5cdFx0fSwgNTApO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzZXR1cEV2ZW50TGlzdGVuZXJzKCk6IHZvaWQge1xyXG5cdFx0Ly8gRGVib3VuY2VkIHNlYXJjaFxyXG5cdFx0Y29uc3QgZGVib3VuY2VkU2VhcmNoID0gZGVib3VuY2UoKHF1ZXJ5OiBzdHJpbmcpID0+IHtcclxuXHRcdFx0aWYgKHF1ZXJ5LnRyaW0oKSkge1xyXG5cdFx0XHRcdHZvaWQgdGhpcy5wZXJmb3JtU2VhcmNoKHF1ZXJ5KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLmNsZWFyUmVzdWx0cygpO1xyXG5cdFx0XHR9XHJcblx0XHR9LCAxMDAwLCB0cnVlKTtcclxuXHJcblx0XHQvLyBRdWVyeSBpbnB1dFxyXG5cdFx0dGhpcy5xdWVyeUlucHV0Py5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XHJcblx0XHRcdGNvbnN0IHF1ZXJ5ID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG5cdFx0XHR0aGlzLmN1cnJlbnRRdWVyeSA9IHF1ZXJ5O1xyXG5cdFx0XHR0aGlzLnNob3dMb2FkaW5nKHRydWUpO1xyXG5cdFx0XHRkZWJvdW5jZWRTZWFyY2gocXVlcnkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5xdWVyeUlucHV0Py5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcclxuXHRcdFx0aWYgKGUua2V5ID09PSAnRW50ZXInKSB7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdGNvbnN0IHF1ZXJ5ID0gdGhpcy5xdWVyeUlucHV0Py52YWx1ZS50cmltKCkgfHwgJyc7XHJcblx0XHRcdFx0aWYgKHF1ZXJ5KSB7XHJcblx0XHRcdFx0XHR2b2lkIHRoaXMucGVyZm9ybVNlYXJjaChxdWVyeSk7XHJcblx0XHRcdFx0fSBlbHNlIGlmICh0aGlzLmN1cnJlbnRSZXN1bHRzLmxlbmd0aCA+IDAgJiYgdGhpcy5zZWxlY3RlZEltYWdlIDwgdGhpcy5jdXJyZW50UmVzdWx0cy5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdC8vIEluc2VydCBzZWxlY3RlZCBpbWFnZSBvbiBFbnRlclxyXG5cdFx0XHRcdFx0Y29uc3QgaW1hZ2UgPSB0aGlzLmN1cnJlbnRSZXN1bHRzW3RoaXMuc2VsZWN0ZWRJbWFnZV07XHJcblx0XHRcdFx0XHRpZiAoaW1hZ2UpIHtcclxuXHRcdFx0XHRcdFx0dm9pZCB0aGlzLmluc2VydEltYWdlKGltYWdlKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSBpZiAoZS5jdHJsS2V5ICYmIGUua2V5ID09PSAnbicpIHtcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0aWYgKHRoaXMuY3VycmVudFJlc3VsdHMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RlZEltYWdlID0gKHRoaXMuc2VsZWN0ZWRJbWFnZSArIDEpICUgdGhpcy5jdXJyZW50UmVzdWx0cy5sZW5ndGg7XHJcblx0XHRcdFx0XHR0aGlzLnJlbmRlclJlc3VsdHMoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSBpZiAoZS5jdHJsS2V5ICYmIGUua2V5ID09PSAncCcpIHtcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0aWYgKHRoaXMuY3VycmVudFJlc3VsdHMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RlZEltYWdlID0gKHRoaXMuc2VsZWN0ZWRJbWFnZSAtIDEgKyB0aGlzLmN1cnJlbnRSZXN1bHRzLmxlbmd0aCkgJSB0aGlzLmN1cnJlbnRSZXN1bHRzLmxlbmd0aDtcclxuXHRcdFx0XHRcdHRoaXMucmVuZGVyUmVzdWx0cygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gUHJvdmlkZXIgY2hhbmdlXHJcblx0XHR0aGlzLnByb3ZpZGVyU2VsZWN0Py5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xyXG5cdFx0XHR0aGlzLmN1cnJlbnRQcm92aWRlciA9IChlLnRhcmdldCBhcyBIVE1MU2VsZWN0RWxlbWVudCkudmFsdWUgYXMgSW1hZ2VQcm92aWRlcjtcclxuXHRcdFx0dGhpcy5jdXJyZW50UGFnZSA9IDE7XHJcblx0XHRcdGlmICh0aGlzLmN1cnJlbnRRdWVyeSkge1xyXG5cdFx0XHRcdHRoaXMuc2hvd0xvYWRpbmcodHJ1ZSk7XHJcblx0XHRcdFx0dm9pZCB0aGlzLnBlcmZvcm1TZWFyY2godGhpcy5jdXJyZW50UXVlcnkpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBTaXplIGNoYW5nZVxyXG5cdFx0dGhpcy5zaXplU2VsZWN0Py5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xyXG5cdFx0XHRjb25zdCBzaXplID0gKGUudGFyZ2V0IGFzIEhUTUxTZWxlY3RFbGVtZW50KS52YWx1ZSBhcyBJbWFnZVNpemU7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MuZGVmYXVsdEltYWdlU2l6ZSA9IHNpemU7XHJcblx0XHRcdC8vIFJlLXNlYXJjaCBpZiB3ZSBoYXZlIGEgcXVlcnlcclxuXHRcdFx0aWYgKHRoaXMuY3VycmVudFF1ZXJ5KSB7XHJcblx0XHRcdFx0dGhpcy5zaG93TG9hZGluZyh0cnVlKTtcclxuXHRcdFx0XHR2b2lkIHRoaXMucGVyZm9ybVNlYXJjaCh0aGlzLmN1cnJlbnRRdWVyeSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhc3luYyBwZXJmb3JtU2VhcmNoKHF1ZXJ5OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGlmICh0aGlzLmlzTG9hZGluZykgcmV0dXJuO1xyXG5cclxuXHRcdHRoaXMuY3VycmVudFF1ZXJ5ID0gcXVlcnk7XHJcblx0XHR0aGlzLmN1cnJlbnRQYWdlID0gMTtcclxuXHRcdHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcclxuXHRcdHRoaXMuc2hvd0xvYWRpbmcodHJ1ZSk7XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0dGhpcy5jdXJyZW50UmVzdWx0cyA9IGF3YWl0IHRoaXMucmVtb3RlU2VydmljZS5zZWFyY2goXHJcblx0XHRcdFx0cXVlcnksXHJcblx0XHRcdFx0dGhpcy5jdXJyZW50UHJvdmlkZXIsXHJcblx0XHRcdFx0dGhpcy5jdXJyZW50UGFnZVxyXG5cdFx0XHQpO1xyXG5cdFx0XHR0aGlzLnNlbGVjdGVkSW1hZ2UgPSAwO1xyXG5cdFx0XHR0aGlzLnJlbmRlclJlc3VsdHMoKTtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ1NlYXJjaCBmYWlsZWQ6JywgZXJyb3IpO1xyXG5cdFx0XHRjb25zdCBlcnJvck1zZyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1NlYXJjaCBmYWlsZWQnO1xyXG5cdFx0XHRuZXcgTm90aWNlKGBSZXF1ZXN0IGZhaWxlZCwgc3RhdHVzICR7ZXJyb3JNc2d9YCk7XHJcblx0XHRcdHRoaXMucmVuZGVyRXJyb3IoZXJyb3JNc2cpO1xyXG5cdFx0fSBmaW5hbGx5IHtcclxuXHRcdFx0dGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcclxuXHRcdFx0dGhpcy5zaG93TG9hZGluZyhmYWxzZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlbmRlclJlc3VsdHMoKTogdm9pZCB7XHJcblx0XHRpZiAoIXRoaXMuaW1hZ2VzTGlzdCkgcmV0dXJuO1xyXG5cdFx0dGhpcy5pbWFnZXNMaXN0LmVtcHR5KCk7XHJcblxyXG5cdFx0aWYgKHRoaXMuY3VycmVudFJlc3VsdHMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdGNvbnN0IG5vUmVzdWx0ID0gdGhpcy5pbWFnZXNMaXN0LmNyZWF0ZURpdih7IGNsczogJ25vLXJlc3VsdC1jb250YWluZXInIH0pO1xyXG5cdFx0XHRub1Jlc3VsdC5zZXRUZXh0KCdObyByZXN1bHRzIGZvdW5kJyk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY3VycmVudFJlc3VsdHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0Y29uc3QgaW1hZ2UgPSB0aGlzLmN1cnJlbnRSZXN1bHRzW2ldO1xyXG5cdFx0XHRpZiAoIWltYWdlKSBjb250aW51ZTtcclxuXHJcblx0XHRcdGNvbnN0IHJlc3VsdCA9IHRoaXMuaW1hZ2VzTGlzdC5jcmVhdGVEaXYoe1xyXG5cdFx0XHRcdGNsczogYHF1ZXJ5LXJlc3VsdCR7aSA9PT0gdGhpcy5zZWxlY3RlZEltYWdlID8gJyBpcy1zZWxlY3RlZCcgOiAnJ31gLFxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHJlc3VsdC5jcmVhdGVFbCgnaW1nJywge1xyXG5cdFx0XHRcdGF0dHI6IHtcclxuXHRcdFx0XHRcdHNyYzogaW1hZ2UudGh1bWJuYWlsVXJsLFxyXG5cdFx0XHRcdFx0YWx0OiBpbWFnZS5kZXNjcmlwdGlvbiB8fCAnSW1hZ2UnLFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0cmVzdWx0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRcdHZvaWQgdGhpcy5pbnNlcnRJbWFnZShpbWFnZSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0cmVzdWx0LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsICgpID0+IHtcclxuXHRcdFx0XHR0aGlzLnNlbGVjdGVkSW1hZ2UgPSBpO1xyXG5cdFx0XHRcdHRoaXMucmVuZGVyUmVzdWx0cygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBQYWdpbmF0aW9uXHJcblx0XHR0aGlzLnJlbmRlclBhZ2luYXRpb24oKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyUGFnaW5hdGlvbigpOiB2b2lkIHtcclxuXHRcdGlmICghdGhpcy5zY3JvbGxBcmVhKSByZXR1cm47XHJcblxyXG5cdFx0Ly8gUmVtb3ZlIGV4aXN0aW5nIHBhZ2luYXRpb25cclxuXHRcdGNvbnN0IGV4aXN0aW5nUGFnaW5hdGlvbiA9IHRoaXMuc2Nyb2xsQXJlYS5xdWVyeVNlbGVjdG9yKCcucGFnaW5hdGlvbicpO1xyXG5cdFx0aWYgKGV4aXN0aW5nUGFnaW5hdGlvbikge1xyXG5cdFx0XHRleGlzdGluZ1BhZ2luYXRpb24ucmVtb3ZlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgd2UgaGF2ZSBtb3JlIHBhZ2VzIChzaW1wbGlmaWVkIC0gd291bGQgbmVlZCBhY3R1YWwgcGFnaW5hdGlvbiBpbmZvIGZyb20gQVBJKVxyXG5cdFx0Y29uc3QgaGFzTW9yZSA9IHRoaXMuY3VycmVudFJlc3VsdHMubGVuZ3RoID49IDIwO1xyXG5cclxuXHRcdGlmIChoYXNNb3JlIHx8IHRoaXMuY3VycmVudFBhZ2UgPiAxKSB7XHJcblx0XHRcdGNvbnN0IHBhZ2luYXRpb24gPSB0aGlzLnNjcm9sbEFyZWEuY3JlYXRlRGl2KHsgY2xzOiAncGFnaW5hdGlvbicgfSk7XHJcblxyXG5cdFx0XHRpZiAodGhpcy5jdXJyZW50UGFnZSA+IDEpIHtcclxuXHRcdFx0XHRjb25zdCBwcmV2QnRuID0gcGFnaW5hdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyBjbHM6ICdidG4nLCB0ZXh0OiAnUHJldmlvdXMnIH0pO1xyXG5cdFx0XHRcdHByZXZCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLmN1cnJlbnRQYWdlLS07XHJcblx0XHRcdFx0XHR0aGlzLnNob3dMb2FkaW5nKHRydWUpO1xyXG5cdFx0XHRcdFx0dm9pZCB0aGlzLnBlcmZvcm1TZWFyY2godGhpcy5jdXJyZW50UXVlcnkpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoaGFzTW9yZSkge1xyXG5cdFx0XHRcdGNvbnN0IG5leHRCdG4gPSBwYWdpbmF0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IGNsczogJ2J0bicsIHRleHQ6ICdOZXh0JyB9KTtcclxuXHRcdFx0XHRuZXh0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5jdXJyZW50UGFnZSsrO1xyXG5cdFx0XHRcdFx0dGhpcy5zaG93TG9hZGluZyh0cnVlKTtcclxuXHRcdFx0XHRcdHZvaWQgdGhpcy5wZXJmb3JtU2VhcmNoKHRoaXMuY3VycmVudFF1ZXJ5KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJFcnJvcihtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdGlmICghdGhpcy5pbWFnZXNMaXN0KSByZXR1cm47XHJcblx0XHR0aGlzLmltYWdlc0xpc3QuZW1wdHkoKTtcclxuXHRcdGNvbnN0IGVycm9yRGl2ID0gdGhpcy5pbWFnZXNMaXN0LmNyZWF0ZURpdih7IGNsczogJ25vLXJlc3VsdC1jb250YWluZXIgZXJyb3ItdGV4dCcgfSk7XHJcblx0XHRlcnJvckRpdi5zZXRUZXh0KGBFcnJvcjogJHttZXNzYWdlfWApO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBjbGVhclJlc3VsdHMoKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5pbWFnZXNMaXN0KSB7XHJcblx0XHRcdHRoaXMuaW1hZ2VzTGlzdC5lbXB0eSgpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5jdXJyZW50UmVzdWx0cyA9IFtdO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzaG93TG9hZGluZyhzaG93OiBib29sZWFuKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5sb2FkaW5nQ29udGFpbmVyKSB7XHJcblx0XHRcdHRoaXMubG9hZGluZ0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gc2hvdyA/ICdmbGV4JyA6ICdub25lJztcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLnNjcm9sbEFyZWEpIHtcclxuXHRcdFx0aWYgKHNob3cpIHtcclxuXHRcdFx0XHR0aGlzLnNjcm9sbEFyZWEuYWRkQ2xhc3MoJ2xvYWRpbmcnKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLnNjcm9sbEFyZWEucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcnKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhc3luYyBpbnNlcnRJbWFnZShpbWFnZTogUmVtb3RlSW1hZ2UpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHJcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRpZiAoIWFjdGl2ZUZpbGUpIHtcclxuXHRcdFx0bmV3IE5vdGljZSgnTm8gYWN0aXZlIGZpbGUnKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRyeSB7XHJcblx0XHRcdC8vIEdldCBkb3dubG9hZCBVUkwgYmFzZWQgb24gc2l6ZVxyXG5cdFx0XHRjb25zdCBkb3dubG9hZFVybCA9IHRoaXMucmVtb3RlU2VydmljZS5nZXREb3dubG9hZFVybChpbWFnZSwgdGhpcy5zZXR0aW5ncy5kZWZhdWx0SW1hZ2VTaXplKTtcclxuXHJcblx0XHRcdGlmICh0aGlzLm9wdGlvbnMuaW5zZXJ0VG9Qcm9wZXJ0eSkge1xyXG5cdFx0XHRcdC8vIFZhbGlkYXRlIHByb3BlcnR5IG5hbWVcclxuXHRcdFx0XHRpZiAoIXRoaXMub3B0aW9ucy5wcm9wZXJ0eU5hbWUgfHwgdGhpcy5vcHRpb25zLnByb3BlcnR5TmFtZS50cmltKCkgPT09ICcnKSB7XHJcblx0XHRcdFx0XHRuZXcgTm90aWNlKCdQbGVhc2Ugc3BlY2lmeSBhIHByb3BlcnR5IG5hbWUgaW4gc2V0dGluZ3MnKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIEluc2VydCBpbnRvIHByb3BlcnR5IChjcmVhdGUgaWYgaXQgZG9lc24ndCBleGlzdClcclxuXHRcdFx0XHQvLyBQYXNzIFJlbW90ZUltYWdlIHNvIFByb3BlcnR5SGFuZGxlciBjYW4gZ2VuZXJhdGUgcmVmZXJyYWwgdGV4dCBpZiBuZWVkZWRcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnByb3BlcnR5SGFuZGxlci5pbnNlcnRJbWFnZUZyb21VcmwoXHJcblx0XHRcdFx0XHRkb3dubG9hZFVybCxcclxuXHRcdFx0XHRcdGFjdGl2ZUZpbGUsXHJcblx0XHRcdFx0XHR0aGlzLm9wdGlvbnMucHJvcGVydHlOYW1lLFxyXG5cdFx0XHRcdFx0aW1hZ2UgLy8gUGFzcyBSZW1vdGVJbWFnZSBmb3IgcmVmZXJyYWwgdGV4dCBnZW5lcmF0aW9uXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBJbnNlcnQgaW50byBub3RlIGJvZHlcclxuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmltYWdlUHJvY2Vzc29yLnByb2Nlc3NJbWFnZVVybChcclxuXHRcdFx0XHRcdGRvd25sb2FkVXJsLFxyXG5cdFx0XHRcdFx0YWN0aXZlRmlsZSxcclxuXHRcdFx0XHRcdHRydWUgLy8gU2hvdyByZW5hbWUgbW9kYWxcclxuXHRcdFx0XHQpO1xyXG5cclxuXHRcdFx0XHRpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LmxpbmtUZXh0KSB7XHJcblx0XHRcdFx0XHQvLyBHZW5lcmF0ZSByZWZlcnJhbCB0ZXh0IGFuZCBhcHBlbmQgaXRcclxuXHRcdFx0XHRcdGNvbnN0IHJlZmVycmFsVGV4dCA9IHRoaXMucmVtb3RlU2VydmljZS5nZW5lcmF0ZVJlZmVycmFsVGV4dChpbWFnZSk7XHJcblx0XHRcdFx0XHRjb25zdCBmdWxsVGV4dCA9IHJlc3VsdC5saW5rVGV4dCArIHJlZmVycmFsVGV4dDtcclxuXHJcblx0XHRcdFx0XHRjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuXHRcdFx0XHRcdGlmICh2aWV3Py5lZGl0b3IpIHtcclxuXHRcdFx0XHRcdFx0dmlldy5lZGl0b3IucmVwbGFjZVNlbGVjdGlvbihmdWxsVGV4dCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaW5zZXJ0IGltYWdlOicsIGVycm9yKTtcclxuXHRcdFx0bmV3IE5vdGljZShgRmFpbGVkIHRvIGluc2VydCBpbWFnZTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGdldEFjdGl2ZUZpbGUoKTogVEZpbGUgfCBudWxsIHtcclxuXHRcdGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0cmV0dXJuIHZpZXc/LmZpbGUgPz8gbnVsbDtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIE9wZW4gdGhlIHJlbW90ZSBzZWFyY2ggbW9kYWxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBvcGVuUmVtb3RlU2VhcmNoKFxyXG5cdGFwcDogQXBwLFxyXG5cdHNldHRpbmdzOiBJbWFnZU1hbmFnZXJTZXR0aW5ncyxcclxuXHRyZW1vdGVTZXJ2aWNlOiBSZW1vdGVJbWFnZVNlcnZpY2UsXHJcblx0aW1hZ2VQcm9jZXNzb3I6IEltYWdlUHJvY2Vzc29yLFxyXG5cdHByb3BlcnR5SGFuZGxlcjogUHJvcGVydHlIYW5kbGVyLFxyXG5cdG9wdGlvbnM6IFJlbW90ZVNlYXJjaE9wdGlvbnMgPSB7fVxyXG4pOiB2b2lkIHtcclxuXHRuZXcgUmVtb3RlU2VhcmNoTW9kYWwoYXBwLCBzZXR0aW5ncywgcmVtb3RlU2VydmljZSwgaW1hZ2VQ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QUFBLFFBQ0Q7QUFFQSxZQUFJLHlCQUFPLGdEQUFnRDtBQUMzRCxjQUFNLFFBQVEsTUFBTSxLQUFLLGtCQUFrQixnQkFBZ0I7QUFDM0QsWUFBSSx5QkFBTyxhQUFhLEtBQUssMkJBQTJCO0FBQUEsTUFDekQ7QUFBQSxJQUNELENBQUM7QUFBQSxFQUNGO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLGVBQThCO0FBQ25DLFVBQU0sT0FBTyxNQUFNLEtBQUssU0FBUztBQUNqQyxTQUFLLFdBQVcsT0FBTyxPQUFPLENBQUMsR0FBRyxrQkFBa0Isc0JBQVEsQ0FBQyxDQUFDO0FBQUEsRUFDL0Q7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLE1BQU0sZUFBOEI7QUF4U3JDO0FBeVNFLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUdqQyxlQUFLLG1CQUFMLG1CQUFxQixlQUFlLEtBQUs7QUFDekMsZUFBSyxtQkFBTCxtQkFBcUIsZUFBZSxLQUFLO0FBQ3pDLGVBQUssb0JBQUwsbUJBQXNCLGVBQWUsS0FBSztBQUMxQyxlQUFLLGlCQUFMLG1CQUFtQixlQUFlLEtBQUs7QUFDdkMsZUFBSyxnQkFBTCxtQkFBa0IsZUFBZSxLQUFLO0FBQ3RDLGVBQUssa0JBQUwsbUJBQW9CLGVBQWUsS0FBSztBQUN4QyxlQUFLLHNCQUFMLG1CQUF3QixlQUFlLEtBQUs7QUFHNUMsZUFBSyxrQkFBTCxtQkFBb0IsZUFBZSxLQUFLO0FBQ3hDLGVBQUssa0JBQUwsbUJBQW9CO0FBQUEsRUFDckI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtRLE9BQU8sTUFBdUI7QUE1VHZDO0FBNlRFLFNBQUksVUFBSyxhQUFMLG1CQUFlLFdBQVc7QUFDN0IsY0FBUSxNQUFNLG1CQUFtQixHQUFHLElBQUk7QUFBQSxJQUN6QztBQUFBLEVBQ0Q7QUFDRDsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImZpbmFsTmFtZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJPYnNpZGlhbk1vZHVsZSIsICJPYnNpZGlhbk1vZHVsZSIsICJwcm9wZXJ0eVNldHRpbmdzIiwgImltYWdlUHJvcCIsICJpY29uUHJvcCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgIm9wZW5Db25maXJtTW9kYWwiXQp9Cg==
